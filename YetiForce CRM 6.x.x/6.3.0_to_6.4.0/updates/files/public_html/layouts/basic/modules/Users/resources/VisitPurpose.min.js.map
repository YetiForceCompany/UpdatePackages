{"version":3,"file":"VisitPurpose.min.js","sources":["VisitPurpose.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Users_VisitPurpose_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\n\t\t/**\n\t\t * Function to handle sending the AJAX form\n\t\t */\n\t\tregisterSave() {\n\t\t\tthis.container.find('.js-modal__save').on('click', (e) => {\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tapp.saveAjax('', [], formData).done((data) => {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tlet id = this.container.closest('.modalContainer').attr('id');\n\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents(modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.registerSave();\n\t\t\tsetTimeout((_) => {\n\t\t\t\tthis.container.find('textarea').focus();\n\t\t\t}, 400);\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","registerSave","find","on","e","form","preventDefault","validationEngine","progressIndicator","message","app","vtranslate","blockInfo","enabled","formData","serializeFormData","saveAjax","done","data","result","id","closest","attr","hideModalWindow","showNotify","text","type","progress","mode","registerEvents","modalContainer","setTimeout","focus"],"mappings":";;AAAA,kKACA,YAAA,CAEAA,CAAC,CAACC,KAAF,CACC,uBADD,CAEC,EAFD,CAGC;AAED;AACA,KACEC,SAAS,GAJV;AAOD;AACA,KACEC,YATD,CASgB,SAAA,YAAA,EAAA,CAAA,IAAA,KAAA,CAAA,IAAA,CACd,IAAKD,CAAAA,SAAL,CAAeE,IAAf,CAAoB,iBAApB,CAAA,CAAuCC,EAAvC,CAA0C,OAA1C,CAAmD,SAACC,CAAD,CAAO,CACzD,IAAIC,IAAI,CAAG,KAAI,CAACL,SAAL,CAAeE,IAAf,CAAoB,MAApB,CAAX,CAEA,GADAE,CAAC,CAACE,cAAF,EACA,CAAID,IAAI,CAACE,gBAAL,CAAsB,UAAtB,CAAJ,CAAuC,CAAA,IAC1B,QAAA,CAAGT,CAAC,CAACU,iBAAF,CAAoB,CAClCC,OAAO,CAAEC,GAAG,CAACC,UAAJ,CAAe,qBAAf,CADyB,CAElCC,SAAS,CAAE,CAAEC,OAAO,CAAT,CAAA,CAAA,CAFuB,CAApB,CADuB,CAKlCC,QAAQ,CAAGT,IAAI,CAACU,iBAAL,EALuB,CAMtCL,GAAG,CAACM,QAAJ,CAAa,EAAb,CAAiB,EAAjB,CAAqBF,QAArB,CAA+BG,CAAAA,IAA/B,CAAoC,SAACC,IAAD,CAAU,CAC7C,GAAIA,IAAI,CAACC,MAAT,CAAiB,CAChB,IAAIC,EAAE,CAAG,KAAI,CAACpB,SAAL,CAAeqB,OAAf,CAAuB,iBAAvB,CAA0CC,CAAAA,IAA1C,CAA+C,IAA/C,CAAT,CACAZ,GAAG,CAACa,eAAJ,CAAoB,IAApB,CAA0BH,EAA1B,EACA,CAHD,KAII,GAAA,CAACI,UAAJ,CAAe,CACdC,IAAI,CAAEf,GAAG,CAACC,UAAJ,CAAe,UAAf,CADQ,CAEde,IAAI,CAAE,OAFQ,CAAf,CAJD,CASAC,QAAQ,CAACnB,iBAAT,CAA2B,CAAEoB,IAAI,CAAE,MAAR,CAA3B,EACA,CAXD,EAYA,CACD,CAtBD,EAuBA,CAjCF;AAmCD;AACA;AACA,KACEC,cAtCD,CAAA,SAAA,cAAA,CAsCgBC,cAtChB,CAsCgC,iBAC9B,IAAK9B,CAAAA,SAAL,CAAiB8B,cADa,CAE9B,IAAK7B,CAAAA,YAAL,EAF8B,CAG9B8B,UAAU,CAAC,UAAO,CACjB,MAAI,CAAC/B,SAAL,CAAeE,IAAf,CAAoB,UAApB,CAAA,CAAgC8B,KAAhC,GACA,CAFS,CAEP,GAFO,EAGV,CA5CF,CAHD;;"}