{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function (container) {\n\t\t\tcontainer.on('mousedown.draggable', function (e) {\n\t\t\t\tlet element = $(e.target);\n\t\t\t\tlet isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function () {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\t/**\n\t\t * Get container\n\t\t * @returns JQuery\n\t\t */\n\t\tgetContainer: function () {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function () {\n\t\t\tlet dashboardId = $('.selectDashboard li a.active').closest('li').data('id');\n\t\t\tif (!dashboardId) {\n\t\t\t\tdashboardId = 1;\n\t\t\t}\n\t\t\treturn dashboardId;\n\t\t},\n\t\tgetWidgetInstance: function (widgetContainer) {\n\t\t\tlet id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tlet widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function () {\n\t\t\tconst self = this;\n\t\t\tVtiger_DashBoard_Js.grid = GridStack.init(\n\t\t\t\t{\n\t\t\t\t\tmargin: '5px',\n\t\t\t\t\tcellHeight: '70px',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t'.grid-stack'\n\t\t\t);\n\t\t\tVtiger_DashBoard_Js.grid.on('change', function (event, ui) {\n\t\t\t\tself.savePositions(self.getContainer().find('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (this.getContainer().width() !== this.getContainer().parent().width()) {\n\t\t\t\tconst parentWidth = self.getContainer().parent().width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Save widgets positions\n\t\t * @param {JQuery} widgets\n\t\t */\n\t\tsavePositions: function (widgets) {\n\t\t\tlet widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\twidgets.each((_index, element) => {\n\t\t\t\tlet widget = $(element);\n\t\t\t\tlet widgetId = widget.find('.grid-stack-item-content').attr('id');\n\t\t\t\twidgetRowColPositions[widgetId] = {\n\t\t\t\t\trow: widget.attr('gs-y'),\n\t\t\t\t\tcol: widget.attr('gs-x')\n\t\t\t\t};\n\t\t\t\twidgetSizes[widgetId] = {\n\t\t\t\t\twidth: widget.attr('gs-w'),\n\t\t\t\t\theight: widget.attr('gs-h')\n\t\t\t\t};\n\t\t\t\tthis.getWidgetInstance(widget.find('.dashboardWidget')).loadScrollbar();\n\t\t\t});\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: 'positions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: this.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget();\n\t\t},\n\t\tloadWidget: function (widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet moduleName = app.getModuleName();\n\t\t\tlet sourceModule = $('a.active', 'ul.selectDashboradView').parent().data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.attr('id');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (widgetContainer.data('cache') === 1) {\n\t\t\t\t\tlet cacheUrl = app.cacheGet(name + '_' + userId, false);\n\t\t\t\t\turlParams = cacheUrl ? cacheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams)\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\t\tApp.Fields.Tree.register(widgetContainer);\n\t\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t\tif (sourceModule && moduleName != sourceModule) {\n\t\t\t\t\t\t\t$('.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown, errorObj) {\n\t\t\t\t\t\twidgetContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (CONFIG.debug) {\n\t\t\t\t\t\t\twidgetContainer.html(errorObj.responseText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet url = app.convertUrlToObject(urlParams);\n\t\t\t\t\t\tdelete url.view, url.name;\n\t\t\t\t\t\turl.action = 'Widget';\n\t\t\t\t\t\turl.mode = 'remove';\n\t\t\t\t\t\turl = app.convertObjectToUrl(url);\n\t\t\t\t\t\twidgetContainer.prepend(\n\t\t\t\t\t\t\t`<span style=\"float: right;\"><button class=\"btn btn-sm btn-light js-widget-remove\" data-url=\"${url}\" data-js=\"click\"><span class=\"fas fa-times\"></span></button></span>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-refresh', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthisInstance.getWidgetInstance(element.closest('.dashboardWidget')).refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function () {\n\t\t\tconst self = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function (e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('gs-w'),\n\t\t\t\t\theight = listItem.attr('gs-h'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetTitle = parent.find('.js-widget__header__title').text().trim();\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: `${app.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET')} (${widgetTitle})<br>${app.vtranslate(\n\t\t\t\t\t\t'JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO'\n\t\t\t\t\t)}`,\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function () {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(listItem.get(0));\n\t\t\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').removeClass('d-none');\n\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\" href=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\" data-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\" data-width=\"${width}\" data-height=\"${height}\"\n\t\t\t\t\t\t\t\t\t\tdata-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\"><span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${response.result.id}\" data-js=\"click\"></span></span>`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata += '</a>';\n\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tself.updateLazyWidget();\n\t\t\t\t\t\t\t\tself.showAndHideAlert(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function (e) {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet dashboardId = currentTarget.data('id');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function (e) {\n\t\t\t\tlet widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tlet dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tlet callbackFunction = function () {\n\t\t\t\t\tlet date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function (e) {\n\t\t\t\tlet widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tlet mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tlet bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.js-add-filter')\n\t\t\t\t.on('click', '.js-add-filter', function (e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=MiniListWizard&step=step1', function (wizardContainer) {\n\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function (event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldHrefDOM = $('select[name=\"field_href\"]', wizardContainer);\n\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldHrefSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldHrefDOM, {\n\t\t\t\t\t\t\tallowClear: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfieldHrefDOM.closest('tr').hide();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\tfieldsSelectDOM.empty().html(fieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(filterFieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\tfieldHrefSelect2.closest('tr').show();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\t\t\tfieldHrefDOM.find('option:not([value=\"\"]').remove();\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('option:checked')\n\t\t\t\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\t\t\t\tlet option = $(element);\n\t\t\t\t\t\t\t\t\tlet newOption = new Option(option.text(), option.val(), true, true);\n\t\t\t\t\t\t\t\t\tfieldHrefSelect2.append(newOption);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfieldHrefSelect2.val('').trigger('change');\n\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', (e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map((obj) => {\n\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfieldHref: fieldHrefSelect2.val()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function (data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid, 'MiniList').done(function (data) {\n\t\t\t\tlet result = data['result'],\n\t\t\t\t\tparams = {};\n\t\t\t\tif (data['success']) {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t);\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\terrorField;\n\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t}\n\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsaveWidget: function (form, mode, sourceModule, linkid, type) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tlet params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid,\n\t\t\t\tname: type\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function () {\n\t\t\tlet thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet id = currentTarget.data('widget-id');\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || !Quasar.plugins.Platform.is.desktop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function () {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', (e) => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done((data) => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tlet linkId = element.data('linkid');\n\t\t\tlet name = element.data('name');\n\t\t\tlet widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t}\n\t\t\tlet widget = Vtiger_DashBoard_Js.grid.addWidget(\n\t\t\t\t`<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"${linkId}-${widgetId}\" data-name=\"${name}\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\" data-url=\"${url}\"></div></div>`,\n\t\t\t\t{\n\t\t\t\t\tw: element.data('width'),\n\t\t\t\t\th: element.data('height'),\n\t\t\t\t\tauto_position: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget($(widget).find('.grid-stack-item-content'));\n\t\t\tthis.showAndHideAlert('addWidget');\n\t\t},\n\n\t\t/**\n\t\t * Show or hide the alert for a dashboard.\n\t\t * @param {string} widgetAction\n\t\t */\n\t\tshowAndHideAlert(widgetAction) {\n\t\t\tlet container = this.getContainer();\n\t\t\tlet alertContainer = container.find('.js-dashboards-alert');\n\t\t\tif (widgetAction === 'addWidget') {\n\t\t\t\talertContainer.addClass('d-none');\n\t\t\t} else if (container.find('.js-css-element-queries').length == 0) {\n\t\t\t\talertContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","grid","currentInstance","scrollContainer","restrictContentDrag","container","on","e","element","target","isHeaderElement","closest","length","stopPropagation","noCache","instancesCache","init","Vtiger_DashBoard_Js","getContainer","getCurrentDashboard","dashboardId","data","getWidgetInstance","widgetContainer","attr","id","widgetName","Vtiger_Widget_Js","getInstance","registerGrid","self","GridStack","margin","cellHeight","alwaysShowResizeHandle","test","navigator","userAgent","savePositions","find","loadWidgets","width","parent","css","parentWidth","widgets","widgetRowColPositions","widgetSizes","each","_index","widgetId","widget","row","col","height","loadScrollbar","updateLazyWidget","AppConnector","request","module","app","getModuleName","action","mode","position","size","scrollTop","thisInstance","App","Components","Scrollbar","page","Quasar","plugins","Platform","is","desktop","showNewScrollbar","Lazy","threshold","appendScroll","widgetLoader","loadWidget","urlParams","moduleName","sourceModule","progressIndicator","name","userId","CONFIG","cacheUrl","cacheGet","done","html","Fields","Picklist","showSelect2ElementView","Tree","register","trigger","widgetPostLoadEvent","adjustHeightWidget","remove","fail","textStatus","errorThrown","errorObj","debug","responseText","convertUrlToObject","view","url","convertObjectToUrl","prepend","showNotify","title","vtranslate","type","headerHeight","outerHeight","adjustedHeight","widgetContent","wheelPropagation","registerRefreshWidget","currentTarget","refreshWidget","removeWidget","listItem","parents","widgetTitle","text","trim","showConfirmModal","confirmedCallback","response","success","fadeOut","get","prev","removeClass","result","linkid","deleteFromList","divider","insertBefore","append","showAndHideAlert","registerSelectDashboard","blockInfo","enabled","params","getViewName","progressIndicatorElement","registerEvents","registerDatePickerHideInitiater","dashboardWidgetHeader","Vtiger_Helper_Js","addClickOutSideEvent","callbackFunction","date","DatePickerHide","blur","registerShowMailBody","mailBody","bodyIcon","show","addClass","hide","registerMiniListWidget","off","showModalWindow","wizardContainer","form","event","keyCode","filteridSelectDOM","fieldHrefDOM","fieldsSelectDOM","filterFieldsSelectDOM","moduleNameSelect2","moduleNameSelectDOM","placeholder","filteridSelect2","dropdownParent","fieldHrefSelect2","allowClear","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","footer","val","step","selectedModule","res","empty","filterid","responseHTML","fieldsHTML","filterFieldsHTML","$selection","index","newOption","option","validationEngine","validationEngineOptions","preventDefault","select2","map","obj","selectedFields","push","saveMiniListWidget","fields","filterFields","fieldHref","moduleNameLabel","filterLabel","paramsForm","JSON","stringify","blockid","label","isdefault","owners_all","default_owner","saveWidget","hideModalWindow","clone","linkElement","addWidget","showMessage","errorField","message","Deferred","addToUser","aDeferred","resolve","error","reject","promise","registerTabModules","removeWidgetFromList","widgetid","registerTabletScrollEvent","touchDevice","scollbarContainer","scollbarOffsetTop","offset","top","maxOffset","scollbarContainerH","registerUpdatePredefinedWidgets","hasClass","linkId","w","h","auto_position","widgetAction","alertContainer","ElementQueries","listen"],"mappings":"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"}