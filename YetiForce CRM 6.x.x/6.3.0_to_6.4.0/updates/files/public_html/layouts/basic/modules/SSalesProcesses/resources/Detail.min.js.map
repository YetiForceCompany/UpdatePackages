{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'SSalesProcesses_Detail_Js',\n\t{},\n\t{\n\t\t//It stores the IStorages Hierarchy response data\n\t\thierarchyResponseCache: {},\n\t\t/*\n\t\t * function to get the IStoragesHierarchy response data\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\t//Check in the cache\n\t\t\tif (!jQuery.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t//store it in the cache, so that we dont do multiple request\n\t\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the IStorages Hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function (data) {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modalContainer) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll', modalContainer));\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll', modalContainer).height() > 300) {\n\t\t\t\t\tcallbackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.detailViewTitle .hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'Hierarchy',\n\t\t\t\trecord: app.getRecordId()\n\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\t\tthisInstance.getHierarchyResponseData(params).done(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","aDeferred","jQuery","Deferred","isEmptyObject","thisInstance","AppConnector","request","done","data","resolve","fail","textStatus","errorThrown","reject","promise","displayHierarchyResponseData","app","showScrollBar","$","height","railVisible","size","showModalWindow","modalContainer","App","Components","Scrollbar","xy","callbackFunction","registerHierarchyRecordCount","hierarchyButton","length","module","getModuleName","action","record","getRecordId","mode","response","success","html","result","registerShowHierarchy","view","on","registerEvents","_super"],"mappings":"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"}