{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_TwoFactorAuthentication_Index_Js',\n\t{\n\t\tcheckIP: function (field, rules, i, options) {\n\t\t\tlet fieldValue = field.val(),\n\t\t\t\tnegativeRegex =\n\t\t\t\t\t/((^\\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\\s*$)|(^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$))/,\n\t\t\t\tresult = negativeRegex.test(fieldValue);\n\t\t\tif (!result) {\n\t\t\t\treturn app.vtranslate('INVALID_NUMBER');\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Container (Form)\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Get Container (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer() {\n\t\t\tif (this.container === null) {\n\t\t\t\tthis.container = $('form.js-two-factor-auth__form');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm() {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.container.on('change', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthisInstance.sendForm();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Send form data\n\t\t */\n\t\tsendForm: function () {\n\t\t\tthis.container.validationEngine(app.validationEngineOptions);\n\t\t\tif (this.container.validationEngine('validate')) {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet params = this.container.serializeFormData();\n\t\t\t\tlet ipAddresses = [];\n\t\t\t\tlet ipAddressContainer = this.container.find('.js-ip-container_element').not('.js-base-element');\n\t\t\t\tipAddressContainer.find('.js-ip-address').each(function () {\n\t\t\t\t\tipAddresses.push($(this).val());\n\t\t\t\t});\n\t\t\t\tparams['ip'] = ipAddresses;\n\t\t\t\tAppConnector.request(params).done((response) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: response.result.message,\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add new row\n\t\t */\n\t\taddRow: function () {\n\t\t\tlet sortContainer = this.container.find('.js-base-element').clone(true, true).removeClass('js-base-element');\n\t\t\tthis.container.find('.js-ip-container').append(sortContainer);\n\t\t\treturn sortContainer.removeClass('d-none');\n\t\t},\n\t\t/**\n\t\t * Register list events\n\t\t */\n\t\tregisterListEvents: function () {\n\t\t\tthis.container.find('.js-add').on('click', (e) => {\n\t\t\t\tthis.addRow();\n\t\t\t});\n\t\t\tthis.container.find('.js-clear').on('click', (e) => {\n\t\t\t\t$(e.currentTarget).closest('.js-ip-container_element').remove();\n\t\t\t\tthis.sendForm();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis.container = this.getContainer();\n\t\t\tthis.registerListEvents();\n\t\t\tthis.registerForm();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","checkIP","field","fieldValue","val","result","test","app","vtranslate","container","getContainer","$","registerForm","on","event","preventDefault","thisInstance","sendForm","validationEngine","validationEngineOptions","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","params","serializeFormData","ipAddresses","ipAddressContainer","find","not","each","push","AppConnector","request","done","response","mode","showNotify","text","message","type","addRow","sortContainer","clone","removeClass","append","registerListEvents","e","currentTarget","closest","remove","registerEvents"],"mappings":";;AAAA,kKACA,YAAA,CAEAA,MAAM,CAACC,KAAP,CACC,2CADD,CAEC,CACCC,OAAO,CAAE,iBAAUC,KAAV,CAAoC,CAC5C,IAAIC,UAAU,CAAGD,KAAK,CAACE,GAAN,EAAjB,CAGCC,MAAM,CADL,irCACQ,CAAcC,IAAd,CAAmBH,UAAnB,CAHV,CAIA,GAAI,CAACE,MAAL,CACC,OAAOE,GAAG,CAACC,UAAJ,CAAe,gBAAf,CAER,CATF,CAFD,CAaC;AAED;AACA,KACEC,SAAS,CAAE,IAJZ;AAMD;AACA;AACA,KACEC,YATD,CASgB,SAAA,YAAA,EAAA,CAId,OAHI,IAAA,GAAA,IAAA,CAAKD,SAGT,GAFC,IAAA,CAAKA,SAAL,CAAiBE,CAAC,CAAC,+BAAD,CAEnB,EAAO,IAAKF,CAAAA,SACZ,CAdF;AAgBD;AACA,KACEG,YAlBD,CAAA,SAAA,YAAA,EAkBgB,CACd,IAAgB,YAAA,CAAG,IAAnB,CACA,IAAKH,CAAAA,SAAL,CAAeI,EAAf,CAAkB,QAAlB,CAA4B,SAACC,KAAD,CAAW,CACtCA,KAAK,CAACC,cAAN,EADsC,CAEtCC,YAAY,CAACC,QAAb,GACA,CAHD,EAIA,CAxBF;AA0BD;AACA,KACEA,QAAQ,CAAE,SAAY,QAAA,EAAA,CAErB,GADA,IAAKR,CAAAA,SAAL,CAAeS,gBAAf,CAAgCX,GAAG,CAACY,uBAApC,CACA,CAAI,IAAA,CAAKV,SAAL,CAAeS,gBAAf,CAAgC,UAAhC,CAAJ,CAAiD,CAC5CE,IAAAA,wBAAwB,CAAGT,CAAC,CAACU,iBAAF,CAAoB,CAClDC,QAAQ,CAAE,MADwC,CAElDC,SAAS,CAAE,CACVC,OAAO,CADG,CAAA,CAAA,CAFuC,CAApB,CADiB,CAO5CC,MAAM,CAAG,IAAKhB,CAAAA,SAAL,CAAeiB,iBAAf,EAPmC,CAQ5CC,WAAW,CAAG,EAR8B,CAS5CC,kBAAkB,CAAG,IAAA,CAAKnB,SAAL,CAAeoB,IAAf,CAAoB,0BAApB,EAAgDC,GAAhD,CAAoD,kBAApD,CATuB,CAUhDF,kBAAkB,CAACC,IAAnB,CAAwB,gBAAxB,CAAA,CAA0CE,IAA1C,CAA+C,UAAY,CAC1DJ,WAAW,CAACK,IAAZ,CAAiBrB,CAAC,CAAC,IAAD,CAAD,CAAQP,GAAR,EAAjB,EACA,CAFD,CAVgD,CAahDqB,MAAM,GAAN,CAAeE,WAbiC,CAchDM,YAAY,CAACC,OAAb,CAAqBT,MAArB,CAAA,CAA6BU,IAA7B,CAAkC,SAACC,QAAD,CAAc,CAC/ChB,wBAAwB,CAACC,iBAAzB,CAA2C,CAAEgB,IAAI,CAAE,MAAR,CAA3C,CAD+C,CAE/C9B,GAAG,CAAC+B,UAAJ,CAAe,CACdC,IAAI,CAAEH,QAAQ,CAAC/B,MAAT,CAAgBmC,OADR,CAEdC,IAAI,CAAE,MAFQ,CAAf,EAIA,CAND,EAOA,CACD,CApDF;AAsDD;AACA,KACEC,MAAM,CAAE,SAAA,MAAA,EAAY,CACnB,IAAIC,aAAa,CAAG,IAAKlC,CAAAA,SAAL,CAAeoB,IAAf,CAAoB,kBAApB,CAAA,CAAwCe,KAAxC,CAA0DC,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAAA,WAA1D,CAAsE,iBAAtE,CAApB,CAEA,YADKpC,SAAL,CAAeoB,IAAf,CAAoB,kBAApB,EAAwCiB,MAAxC,CAA+CH,aAA/C,CACA,CAAOA,aAAa,CAACE,WAAd,CAA0B,QAA1B,CACP,CA5DF;AA8DD;AACA,KACEE,kBAAkB,CAAE,SAAY,kBAAA,EAAA,CAAA,IAAA,KAAA,CAAA,IAAA,CAC/B,IAAKtC,CAAAA,SAAL,CAAeoB,IAAf,CAAoB,SAApB,CAA+BhB,CAAAA,EAA/B,CAAkC,OAAlC,CAA2C,UAAO,CACjD,KAAI,CAAC6B,MAAL,GACA,CAFD,CAD+B,CAI/B,IAAKjC,CAAAA,SAAL,CAAeoB,IAAf,CAAoB,WAApB,CAAiChB,CAAAA,EAAjC,CAAoC,OAApC,CAA6C,SAACmC,CAAD,CAAO,CACnDrC,CAAC,CAACqC,CAAC,CAACC,aAAH,CAAD,CAAmBC,OAAnB,CAA2B,0BAA3B,CAAA,CAAuDC,MAAvD,EADmD,CAEnD,KAAI,CAAClC,QAAL,GACA,CAHD,EAIA,CAxEF;AA0ED;AACA,KACEmC,cA5ED,CA4EkB,SAAA,cAAA,EAAA,CAChB,KAAK3C,SAAL,CAAiB,KAAKC,YAAL,EADD,CAEhB,IAAKqC,CAAAA,kBAAL,EAFgB,CAGhB,IAAA,CAAKnC,YAAL,GACA,CAhFF,CAbD;;"}