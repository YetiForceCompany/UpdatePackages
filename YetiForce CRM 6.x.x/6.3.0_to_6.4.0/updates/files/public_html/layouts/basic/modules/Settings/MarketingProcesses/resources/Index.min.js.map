{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_MarketingProcesses_Index_Js',\n\t{},\n\t{\n\t\tregisterChangeVal: function (content) {\n\t\t\tcontent.find('.configField').on('change', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\tvar val;\n\t\t\t\tif (target.attr('type') === 'checkbox') {\n\t\t\t\t\tval = this.checked;\n\t\t\t\t} else {\n\t\t\t\t\tval = target.val() != null ? target.val() : '';\n\t\t\t\t}\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updateConfig',\n\t\t\t\t\ttype: target.data('type'),\n\t\t\t\t\tparam: target.attr('name'),\n\t\t\t\t\tvalue: val\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSaveMapping: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('button.saveMapping').on('click', function () {\n\t\t\t\tvar mapping = [];\n\t\t\t\tjQuery('#convertLeadMapping tr.listViewEntries:not(.d-none)').each(function () {\n\t\t\t\t\tvar leadName = jQuery(this).find('select.leadsFields').val();\n\t\t\t\t\tvar accountName = jQuery(this).find('select.accountsFields').val();\n\t\t\t\t\tvar relations = [];\n\t\t\t\t\trelations[leadName] = accountName;\n\t\t\t\t\trelations = jQuery.extend({}, relations);\n\t\t\t\t\tif (thisInstance.uniqueReduce(mapping, relations)) {\n\t\t\t\t\t\tmapping.push(relations);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (mapping.length) {\n\t\t\t\t\tjQuery('[name=\"mapping\"]').val(JSON.stringify(mapping)).change();\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\ttext: app.vtranslate('JS_NO_CONDITIONS')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tuniqueReduce: function (mapping, relations) {\n\t\t\tfor (var key in mapping) {\n\t\t\t\tif (JSON.stringify(mapping[key]) === JSON.stringify(relations)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tregisterEventToDeleteMapping: function (content) {\n\t\t\tcontent.find('.deleteMapping').on('click', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar trContainer = element.closest('tr');\n\t\t\t\ttrContainer.remove();\n\t\t\t});\n\t\t},\n\t\tregisterMapping: function (content) {\n\t\t\tcontent.find('[name=\"create_always\"]').on('change', function (e) {\n\t\t\t\tvar mappingTable = jQuery('.mappingTable');\n\t\t\t\tif (this.checked) {\n\t\t\t\t\tmappingTable.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tmappingTable.addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('#supportProcessesContainer');\n\t\t\tthis.registerChangeVal(content);\n\t\t\tthis.registerSaveMapping(content);\n\t\t\tthis.registerMapping(content);\n\t\t\tthis.registerEventToDeleteMapping(content);\n\t\t\tvar instance = new Settings_LeadMapping_Js();\n\t\t\tinstance.registerEventForAddingNewMapping();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerChangeVal","content","find","on","e","target","$","currentTarget","val","attr","checked","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","type","data","param","value","done","Settings_Vtiger_Index_Js","showMessage","text","result","message","registerSaveMapping","each","accountName","relations","leadName","extend","thisInstance","uniqueReduce","mapping","push","length","JSON","stringify","change","vtranslate","key","registerEventToDeleteMapping","element","trContainer","closest","remove","registerMapping","mappingTable","removeClass","addClass","registerEvents","instance","registerEventForAddingNewMapping"],"mappings":"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"}