{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\n\t'Calendar_Edit_Js',\n\t{\n\t\tcurrencyInstance: false,\n\t\tcheckEmail(field, rules, i, options) {\n\t\t\tif (Calendar_Edit_Js.currencyInstance.emailExists(field.val())) {\n\t\t\t\treturn app.vtranslate('JS_DUPLICATE_RECORD') + ': ' + field.val();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\t{\n\t\tinit() {\n\t\t\tCalendar_Edit_Js.currencyInstance = this;\n\t\t},\n\t\tregisterReminderFieldCheckBox: function () {\n\t\t\tlet element = this.getForm().find('.js-reminder-field-checkbox');\n\t\t\telement.on('change', function (e) {\n\t\t\t\tlet rowElement = element.closest('.js-reminder-field-element').find('.js-reminder-field-row');\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\trowElement.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\trowElement.addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.change();\n\t\t},\n\t\t/**\n\t\t * Function which will register change event on recurrence field checkbox\n\t\t */\n\t\tregisterRecurrenceFieldCheckBox: function () {\n\t\t\tconst form = this.getForm(),\n\t\t\t\telement = form.find('input[name=\"reapeat\"]');\n\t\t\telement.on('change', function (e) {\n\t\t\t\tlet repeatUI = form.find('.js-repeat-ui'),\n\t\t\t\t\tcontainer = form.find('[name=\"followup\"]').closest('.fieldValue');\n\t\t\t\tif ($(e.currentTarget).is(':checked')) {\n\t\t\t\t\trepeatUI.closest('.fieldRow').removeClass('d-none');\n\t\t\t\t\tcontainer.find('[name=\"followup_display\"]').attr('disabled', 'disabled');\n\t\t\t\t\tcontainer.find('button').attr('disabled', 'disabled');\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.find('[name=\"followup_display\"]').removeAttr('disabled');\n\t\t\t\t\tcontainer.find('button').removeAttr('disabled');\n\t\t\t\t\trepeatUI.closest('.fieldRow').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.change();\n\t\t},\n\t\t/**\n\t\t * Function which will register the change event for recurring type\n\t\t */\n\t\tregisterRecurringTypeChangeEvent: function () {\n\t\t\tvar container = this.getForm();\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('.recurringType').on('change', function (e) {\n\t\t\t\tthisInstance.changeRecurringTypesUIStyles(jQuery(e.currentTarget).val());\n\t\t\t});\n\t\t\tcontainer.find('.js-repeat-ui [name=\"calendarEndType\"]').on('change', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar value = currentTarget.val();\n\t\t\t\tif (value === 'never') {\n\t\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t\t} else if (value === 'count') {\n\t\t\t\t\tcontainer.find('.countEvents').removeAttr('disabled');\n\t\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t\t} else if (value === 'until') {\n\t\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\t\tcontainer.find('.calendarUntil').removeAttr('disabled');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will change the UI styles based on recurring type\n\t\t * @params - recurringType - which recurringtype is selected\n\t\t */\n\t\tchangeRecurringTypesUIStyles: function (recurringType) {\n\t\t\tvar container = this.getForm();\n\t\t\tif (recurringType == 'DAILY' || recurringType == 'YEARLY') {\n\t\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t\t} else if (recurringType == 'WEEKLY') {\n\t\t\t\tcontainer.find('.repeatWeekUI').removeClass('d-none').addClass('show');\n\t\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t\t} else if (recurringType == 'MONTHLY') {\n\t\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\t\tcontainer.find('.repeatMonthUI').removeClass('d-none').addClass('show');\n\t\t\t}\n\t\t},\n\t\tsetDefaultEndTime: function (container) {\n\t\t\tconst self = this;\n\t\t\tif (container.find('.js-autofill').is(':checked')) {\n\t\t\t\tself.getFreeTime(container);\n\t\t\t} else {\n\t\t\t\tif ('1' === $('[name=\"userChangedEndDateTime\"]').val()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet dateStartElement = container.find('[name=\"date_start\"]'),\n\t\t\t\t\tstartTimeElement = container.find('[name=\"time_start\"]'),\n\t\t\t\t\tendTimeElement = container.find('[name=\"time_end\"]'),\n\t\t\t\t\tendDateElement = container.find('[name=\"due_date\"]'),\n\t\t\t\t\tstartDate = dateStartElement.val(),\n\t\t\t\t\tstartTime = startTimeElement.val(),\n\t\t\t\t\tresult = Vtiger_Time_Validator_Js.invokeValidation(startTimeElement);\n\t\t\t\tif (true !== result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet activityType = container.find('[name=\"activitytype\"]');\n\t\t\t\tlet activityTypeValue = activityType.val();\n\t\t\t\tif (activityType.is('[type=\"radio\"]')) {\n\t\t\t\t\tactivityTypeValue = activityType.filter(':checked').val();\n\t\t\t\t}\n\t\t\t\tlet startDateTime = startDate + ' ' + startTime,\n\t\t\t\t\tdateFormat = container.find('[name=\"due_date\"]').data('dateFormat').toUpperCase(),\n\t\t\t\t\ttimeFormat = endTimeElement.data('format'),\n\t\t\t\t\tactivityDurations = JSON.parse(container.find('[name=\"defaultOtherEventDuration\"]').val()),\n\t\t\t\t\tminutes = 0;\n\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\tif (activityDurations[i].activitytype === activityTypeValue) {\n\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet defaultTimeFormat = 'HH:mm';\n\t\t\t\tif (12 === timeFormat) {\n\t\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t\t}\n\t\t\t\tlet endDate = moment(startDateTime, dateFormat + ' ' + defaultTimeFormat).add(minutes, 'minutes');\n\t\t\t\tendDateElement.val(endDate.format(dateFormat));\n\t\t\t\tendTimeElement.val(endDate.format(defaultTimeFormat));\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to change the end time based on default call duration\n\t\t */\n\t\tregisterActivityTypeChangeEvent: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.on('change', '[name=\"activitytype\"]', function (e) {\n\t\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to change the end time based on default call duration\n\t\t */\n\t\tregisterTimeStartChangeEvent(container) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('input[name=\"time_start\"]').on('change', function (e) {\n\t\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t\t});\n\t\t\tcontainer.find('[name=\"date_start\"]').on('change', function (e) {\n\t\t\t\tlet endDateElement = container.find('[name=\"due_date\"]'),\n\t\t\t\t\tstart = thisInstance.getDateInstance(container, 'start'),\n\t\t\t\t\tend = thisInstance.getDateInstance(container, 'end'),\n\t\t\t\t\tdateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\t\tcontainer.find('.js-autofill').trigger('change');\n\t\t\t\tif (start > end) {\n\t\t\t\t\tend = start;\n\t\t\t\t\tendDateElement.val(moment(end).format(dateFormat));\n\t\t\t\t\tApp.Fields.Date.register(container);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('input[name=\"time_start\"]').on('focus', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.data('prevValue', element.val());\n\t\t\t});\n\t\t\tcontainer.find('input[name=\"time_start\"]').on('blur', function (e, data) {\n\t\t\t\tif (typeof data === 'undefined') {\n\t\t\t\t\tdata = {};\n\t\t\t\t}\n\t\t\t\tif (typeof data.forceChange === 'undefined') {\n\t\t\t\t\tdata.forceChange = false;\n\t\t\t\t}\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tif (element.val() !== element.data('prevValue') || data.forceChange) {\n\t\t\t\t\te = $.Event('keydown');\n\t\t\t\t\te.which = 13;\n\t\t\t\t\te.keyCode = 13;\n\t\t\t\t\telement.trigger(e);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEndDateTimeChangeLogger: function (container) {\n\t\t\tcontainer.find('[name=\"time_end\"]').on('change', function (e) {\n\t\t\t\tlet timeElement = jQuery(e.currentTarget);\n\t\t\t\tlet result = Vtiger_Time_Validator_Js.invokeValidation(timeElement);\n\t\t\t\tif (result != true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet timeDateElement = timeElement.closest('.fieldValue').find('[name=\"due_date\"]');\n\t\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\t\ttimeDateElement.data('userChangedTime', true);\n\t\t\t});\n\n\t\t\tcontainer.find('[name=\"due_date\"]').on('change', function (e) {\n\t\t\t\tlet dueDateElement = jQuery(e.currentTarget);\n\t\t\t\tlet result = Vtiger_Date_Validator_Js.invokeValidation(dueDateElement);\n\t\t\t\tif (result != true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\t\tdueDateElement.data('userChangedTime', true);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t * @returns {String}\n\t\t */\n\t\tgetRule: function () {\n\t\t\tvar form = this.getForm();\n\t\t\tvar freq = form.find('.recurringType').val();\n\t\t\tvar rule = 'FREQ=' + freq;\n\t\t\trule += ';INTERVAL=' + form.find('.repeatFrequency').val();\n\t\t\tvar endValue = form.find('.js-repeat-ui [name=\"calendarEndType\"]:checked').val();\n\t\t\tif (endValue === 'count') {\n\t\t\t\trule += ';COUNT=' + form.find('.countEvents').val();\n\t\t\t} else if (endValue === 'until') {\n\t\t\t\tlet date = App.Fields.Date.dateToDbFormat(App.Fields.Date.getDateInstance(form.find('.calendarUntil').val()));\n\t\t\t\trule += ';UNTIL=' + date.replace(/-/gi, '') + 'T235959';\n\t\t\t}\n\t\t\tif (freq === 'WEEKLY') {\n\t\t\t\tvar checkedElements = [];\n\t\t\t\tform.find('.repeatWeekUI [type=\"checkbox\"]').each(function () {\n\t\t\t\t\tvar currentTarget = $(this);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tcheckedElements.push(currentTarget.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (checkedElements.length > 0) {\n\t\t\t\t\trule += ';BYDAY=' + checkedElements.join(',');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (freq === 'MONTHLY') {\n\t\t\t\tconst dateInstance = App.Fields.Date.getDateInstance(form.find('[name=\"date_start\"]').val());\n\t\t\t\tlet dayOfMonth = dateInstance.getDate();\n\t\t\t\tif (form.find('.calendarMontlyType:checked').val() == 'DAY') {\n\t\t\t\t\tlet dayOfWeekLabel = '';\n\t\t\t\t\tswitch (dateInstance.getDay()) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'SU';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'MO';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'WE';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'FR';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\tdayOfWeekLabel = 'SA';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\trule += ';BYDAY=' + (parseInt((dayOfMonth - 1) / 7) + 1) + dayOfWeekLabel;\n\t\t\t\t} else {\n\t\t\t\t\trule += ';BYMONTHDAY=' + dayOfMonth;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rule;\n\t\t},\n\t\t/**\n\t\t * This function will register the submit event on form\n\t\t * @param {jQuery} form\n\t\t */\n\t\tregisterFormSubmitEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar lockSave = true;\n\t\t\tif (app.getRecordId()) {\n\t\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e) {\n\t\t\t\t\tif (lockSave && form.find('input[name=\"reapeat\"]').is(':checked')) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tapp.showModalWindow(form.find('.typeSavingModal').clone(), function (container) {\n\t\t\t\t\t\t\tcontainer.find('.typeSavingBtn').on('click', function (e) {\n\t\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\t\tform.find('[name=\"typeSaving\"]').val(currentTarget.data('value'));\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tlockSave = false;\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tconst recurringCheck = form.find('input[name=\"reapeat\"]').is(':checked');\n\t\t\t\tif (recurringCheck) {\n\t\t\t\t\tif (app.getRecordId() && lockSave) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\tform.find('[name=\"recurrence\"]').val(thisInstance.getRule());\n\t\t\t\t}\n\t\t\t\tlet rows = form.find('.js-participants-content .js-participant-row');\n\t\t\t\tlet invitees = [];\n\t\t\t\trows.each(function (index, domElement) {\n\t\t\t\t\tlet row = $(domElement);\n\t\t\t\t\tif (row.data('email')) {\n\t\t\t\t\t\tinvitees.push([row.data('email'), row.data('crmid'), row.data('ivid'), row.data('name')]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$('<input type=\"hidden\" name=\"inviteesid\" />').appendTo(form).val(JSON.stringify(invitees));\n\t\t\t});\n\t\t},\n\t\tgetFreeTime: function (container) {\n\t\t\tlet ownerId = container.find('[name=\"assigned_user_id\"], [data-element-name=\"assigned_user_id\"]');\n\t\t\tif (ownerId.length === 0 || !ownerId.val()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet timeStart = container.find('[name=\"time_start\"], [data-element-name=\"time_start\"]');\n\t\t\tlet timeEnd = container.find('[name=\"time_end\"], [data-element-name=\"time_end\"]');\n\t\t\tlet dateStart = container.find('[name=\"date_start\"], [data-element-name=\"date_start\"]');\n\t\t\tlet params = {\n\t\t\t\tmodule: 'Calendar',\n\t\t\t\taction: 'GetFreeTime',\n\t\t\t\tdateStart: dateStart.val(),\n\t\t\t\townerId: ownerId.val(),\n\t\t\t\tactivitytype: container.find('[name=\"activitytype\"]').val()\n\t\t\t};\n\t\t\tlet progress = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (data.result.date_start !== null) {\n\t\t\t\t\ttimeStart.val(data.result.time_start);\n\t\t\t\t\ttimeEnd.val(data.result.time_end);\n\t\t\t\t\tdateStart.val(data.result.date_start);\n\t\t\t\t\tcontainer.find('[name=\"due_date\"]').val(data.result.date_start);\n\t\t\t\t} else {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR_MAX_VALUE'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('.js-autofill').prop('checked', false).trigger('change');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterAutoFillHours: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet allDay = container.find('[name=\"allday\"]'),\n\t\t\t\ttimeStart = container.find('[name=\"time_start\"]'),\n\t\t\t\ttimeEnd = container.find('[name=\"time_end\"]'),\n\t\t\t\tdateEnd = container.find('[name=\"due_date\"]'),\n\t\t\t\tautoFill = container.find('.js-autofill');\n\t\t\tcontainer.find('.js-autofill__icon').on('click', function (e) {\n\t\t\t\tif (autoFill.is(':checked')) {\n\t\t\t\t\t$(e.currentTarget).closest('.input-group-text').removeClass('bg-color-blue-700').removeClass('text-white');\n\t\t\t\t\tautoFill.prop('checked', false).trigger('change');\n\t\t\t\t} else {\n\t\t\t\t\t$(e.currentTarget).closest('.input-group-text').addClass('bg-color-blue-700').addClass('text-white');\n\t\t\t\t\tautoFill.prop('checked', true).trigger('change');\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('.js-autofill').on('change', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tcontainer.find('.js-autofill').prop('checked', true);\n\t\t\t\t\tthisInstance.getFreeTime(container);\n\t\t\t\t\ttimeStart.attr('readonly', 'readonly');\n\t\t\t\t\ttimeEnd.attr('readonly', 'readonly');\n\t\t\t\t\ttimeStart.clockpicker('remove');\n\t\t\t\t\ttimeEnd.clockpicker('remove');\n\t\t\t\t\tallDay.attr('disabled', 'disabled');\n\t\t\t\t\tallDay.prop('checked', false);\n\t\t\t\t\tallDay.trigger('change');\n\t\t\t\t\tdateEnd.attr('readonly', 'readonly');\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.find('.js-autofill').prop('checked', false);\n\t\t\t\t\tallDay.removeAttr('disabled');\n\t\t\t\t\ttimeStart.removeAttr('readonly');\n\t\t\t\t\ttimeEnd.removeAttr('readonly');\n\t\t\t\t\tdateEnd.removeAttr('readonly');\n\t\t\t\t\tapp.registerEventForClockPicker(timeStart);\n\t\t\t\t\tapp.registerEventForClockPicker(timeEnd);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMarkAsCompletedBtn: function (container) {\n\t\t\tcontainer.find('.js-btn--mark-as-completed').on('click', function () {\n\t\t\t\tconst self = $(this);\n\t\t\t\tif (self.hasClass('active')) {\n\t\t\t\t\tcontainer.find('.js-completed').remove();\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.append(\n\t\t\t\t\t\t'<input class=\"js-completed\" type=hidden name=\"activitystatus\" value=\"PLL_COMPLETED\" data-js=\"remove\">'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function (container) {\n\t\t\tthis._super(container);\n\t\t\tthis.toggleTimesInputs(container);\n\t\t\tthis.registerTimesInputs(container);\n\t\t\tthis.registerTimeStartChangeEvent(container);\n\t\t\tthis.registerActivityTypeChangeEvent(container);\n\t\t\tthis.registerEndDateTimeChangeLogger(container);\n\t\t\tthis.registerAutoFillHours(container);\n\t\t\tthis.registerMarkAsCompletedBtn(container);\n\t\t\tthis.registerInviteEvent(container);\n\t\t\tthis.registerAddInvitation(container);\n\t\t\tthis.registerFormSubmitEvent(container);\n\t\t},\n\t\ttoggleTimesInputs: function (container) {\n\t\t\tcontainer.find(':checkbox').on('change', function () {\n\t\t\t\tvar checkboxName = $(this).attr('name');\n\t\t\t\tif ('allday' == checkboxName) {\n\t\t\t\t\tvar checkboxIsChecked = $(this).is(':checked');\n\t\t\t\t\tif (!container.find('#quickCreate').length) {\n\t\t\t\t\t\tif (checkboxIsChecked) {\n\t\t\t\t\t\t\tcontainer.find('.time').hide();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontainer.find('.time').show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterTimesInputs: function (container) {\n\t\t\tvar allday = container.find('[name=\"allday\"]:checkbox');\n\t\t\tif (allday.prop('checked')) {\n\t\t\t\tcontainer.find('.time').hide();\n\t\t\t}\n\t\t},\n\t\tgetDateInstance: function (container, type) {\n\t\t\tvar startDateElement = container.find('[name=\"date_start\"]');\n\t\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\t\t\tvar endTimeElement = container.find('[name=\"time_end\"]');\n\t\t\tvar startTimeElement = container.find('[name=\"time_start\"]');\n\t\t\tvar startDate = startDateElement.val();\n\t\t\tvar startTime = startTimeElement.val();\n\t\t\tvar endTime = endTimeElement.val();\n\t\t\tvar endDate = endDateElement.val();\n\t\t\tvar dateFormat = CONFIG.dateFormat;\n\t\t\tif (type == 'start') {\n\t\t\t\treturn App.Fields.Date.getDateInstance(startDate + ' ' + startTime, dateFormat);\n\t\t\t}\n\t\t\tif (type == 'end') {\n\t\t\t\treturn App.Fields.Date.getDateInstance(endDate + ' ' + endTime, dateFormat);\n\t\t\t}\n\t\t},\n\t\temailExists(email) {\n\t\t\temail = email.toLowerCase();\n\t\t\tlet recordExist = false;\n\t\t\tthis.getForm()\n\t\t\t\t.find('.js-participants-content')\n\t\t\t\t.find('.js-participant-row')\n\t\t\t\t.each((index, element) => {\n\t\t\t\t\tif ($(element).data('email').toLowerCase() === email) {\n\t\t\t\t\t\trecordExist = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\treturn recordExist;\n\t\t},\n\t\tregisterAddInvitation(container) {\n\t\t\tcontainer.find('.js-btn-add-invitation').on('click', (e) => {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(null, 'index.php?module=Calendar&view=InviteEmail', (data) => {\n\t\t\t\t\tdata.find('.js-modal__save').on('click', (e) => {\n\t\t\t\t\t\tlet email = data.find('.js-invite-email-input').val();\n\t\t\t\t\t\tlet nameAttendee = data.find('.js-invite-name-input').val();\n\t\t\t\t\t\tlet participantsContent = container.find('.js-participants-content');\n\t\t\t\t\t\tlet formEmail = data.find('.js-form');\n\t\t\t\t\t\tformEmail.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tif (formEmail.validationEngine('validate')) {\n\t\t\t\t\t\t\tlet participantRow = participantsContent.find('.d-none .js-participant-row').clone(true, true);\n\t\t\t\t\t\t\tparticipantRow.data('crmid', 0);\n\t\t\t\t\t\t\tparticipantRow.data('email', email);\n\t\t\t\t\t\t\tif (nameAttendee) {\n\t\t\t\t\t\t\t\tparticipantRow.find('.js-participant-name').data('content', nameAttendee).text(nameAttendee);\n\t\t\t\t\t\t\t\tparticipantRow.data('name', nameAttendee);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tparticipantRow.find('.js-participant-name').data('content', email).text(email);\n\t\t\t\t\t\t\t\tparticipantRow.data('name', '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparticipantsContent.append(participantRow);\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterInviteEvent: function (editViewForm) {\n\t\t\tthis.registerRow(editViewForm);\n\t\t\tlet participantsContent = editViewForm.find('.js-participants-content');\n\t\t\tlet participantsSearch = editViewForm.find('.js-participants-search');\n\t\t\t$.widget('custom.ivAutocomplete', $.ui.autocomplete, {\n\t\t\t\t_create: function () {\n\t\t\t\t\tthis._super();\n\t\t\t\t\tthis.widget().menu('option', 'items', '> :not(.ui-autocomplete-category)');\n\t\t\t\t},\n\t\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\t\tlet that = this,\n\t\t\t\t\t\tcurrentCategory = '';\n\t\t\t\t\t$.each(items, function (_index, item) {\n\t\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + '</li>');\n\t\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\t\treturn this._renderItem(ul, item).data('ui-autocomplete-item', item);\n\t\t\t\t},\n\t\t\t\t_renderItem: function (ul, item) {\n\t\t\t\t\treturn $('<li>').data('item.autocomplete', item).append($('<a></a>').html(item.label)).appendTo(ul);\n\t\t\t\t}\n\t\t\t});\n\t\t\tparticipantsSearch.ivAutocomplete({\n\t\t\t\tdelay: '600',\n\t\t\t\tminLength: '3',\n\t\t\t\tsource: (request, response) => {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Calendar',\n\t\t\t\t\t\taction: 'Invitees',\n\t\t\t\t\t\tmode: 'find',\n\t\t\t\t\t\tvalue: request.term\n\t\t\t\t\t}).done((result) => {\n\t\t\t\t\t\tlet reponseDataList = result.result;\n\t\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tselect: (event, ui) => {\n\t\t\t\t\tlet selected = ui.item;\n\t\t\t\t\t//To stop selection if no results is selected\n\t\t\t\t\tif (typeof selected.type !== 'undefined' && selected.type == 'no results') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tlet recordExist = true;\n\t\t\t\t\tparticipantsContent.find('.js-participant-row').each(function (index) {\n\t\t\t\t\t\tif ($(this).data('crmid') == selected.id) {\n\t\t\t\t\t\t\trecordExist = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (recordExist) {\n\t\t\t\t\t\tlet participantRow = participantsContent.find('.d-none .js-participant-row').clone(true, true);\n\t\t\t\t\t\tVtiger_Index_Js.getEmailFromRecord(selected.id, selected.module).done((email) => {\n\t\t\t\t\t\t\tparticipantRow.data('crmid', selected.id);\n\t\t\t\t\t\t\tparticipantRow.data('email', email);\n\t\t\t\t\t\t\tparticipantRow\n\t\t\t\t\t\t\t\t.find('.js-participant-name')\n\t\t\t\t\t\t\t\t.data('content', selected.fullLabel + email)\n\t\t\t\t\t\t\t\t.text(selected.label);\n\t\t\t\t\t\t\tparticipantRow\n\t\t\t\t\t\t\t\t.find('.js-participant-icon .c-badge__icon')\n\t\t\t\t\t\t\t\t.removeClass('fas fa-envelope')\n\t\t\t\t\t\t\t\t.addClass('yfm-' + selected.module);\n\t\t\t\t\t\t\tparticipantsContent.append(participantRow);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_DUPLICATE_RECORD') + ': ' + selected.fullLabel,\n\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tclose: (event, ui) => {\n\t\t\t\t\tparticipantsSearch.val('');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterRow(row) {\n\t\t\trow.on('click', '.js-participant-remove', (e) => {\n\t\t\t\t$(e.target).closest('.js-participant-row').remove();\n\t\t\t});\n\t\t},\n\t\tregisterEvents() {\n\t\t\tif (!this.proceedRegisterEvents()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.registerReminderFieldCheckBox();\n\t\t\tthis.registerRecurrenceFieldCheckBox();\n\t\t\tthis.registerRecurringTypeChangeEvent();\n\t\t\tthis._super();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","currencyInstance","checkEmail","field","Calendar_Edit_Js","emailExists","val","app","vtranslate","init","registerReminderFieldCheckBox","element","getForm","find","on","closest","is","rowElement","removeClass","addClass","change","registerRecurrenceFieldCheckBox","form","e","container","$","currentTarget","repeatUI","attr","removeAttr","registerRecurringTypeChangeEvent","thisInstance","changeRecurringTypesUIStyles","jQuery","value","recurringType","setDefaultEndTime","self","getFreeTime","startTimeElement","endTimeElement","endDateElement","startDate","dateStartElement","startTime","result","Vtiger_Time_Validator_Js","invokeValidation","activityTypeValue","activityType","filter","dateFormat","data","toUpperCase","timeFormat","activityDurations","JSON","parse","minutes","i","activitytype","parseInt","duration","defaultTimeFormat","moment","add","endDate","format","registerActivityTypeChangeEvent","registerTimeStartChangeEvent","start","getDateInstance","end","CONFIG","trigger","App","Fields","Date","register","forceChange","Event","which","keyCode","registerEndDateTimeChangeLogger","timeElement","timeDateElement","Vtiger_Date_Validator_Js","dueDateElement","getRule","freq","rule","endValue","dateToDbFormat","date","replace","each","checkedElements","push","length","join","dayOfMonth","dateInstance","getDate","dayOfWeekLabel","getDay","registerFormSubmitEvent","lockSave","getRecordId","recordPreSave","preventDefault","showModalWindow","clone","hideModalWindow","submit","recurringCheck","rows","invitees","index","domElement","row","appendTo","stringify","ownerId","timeEnd","dateStart","params","module","action","progress","progressIndicator","position","blockInfo","enabled","AppConnector","request","done","mode","date_start","showNotify","text","type","prop","timeStart","time_start","time_end","registerAutoFillHours","allDay","dateEnd","autoFill","clockpicker","registerEventForClockPicker","registerMarkAsCompletedBtn","hasClass","remove","append","registerBasicEvents","_super","toggleTimesInputs","registerTimesInputs","registerInviteEvent","registerAddInvitation","checkboxName","checkboxIsChecked","hide","show","allday","startDateElement","endTime","email","toLowerCase","recordExist","nameAttendee","participantsContent","formEmail","validationEngine","validationEngineOptions","participantRow","progressIndicatorElement","editViewForm","registerRow","participantsSearch","widget","ui","autocomplete","_create","menu","_renderMenu","ul","items","currentCategory","_index","item","category","that","_renderItemData","_renderItem","html","label","ivAutocomplete","delay","minLength","source","response","term","reponseDataList","select","event","selected","id","Vtiger_Index_Js","getEmailFromRecord","fullLabel","close","target","registerEvents","proceedRegisterEvents"],"mappings":"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"}