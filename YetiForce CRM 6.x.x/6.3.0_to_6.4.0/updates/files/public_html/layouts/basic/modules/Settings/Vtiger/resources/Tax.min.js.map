{"version":3,"file":"Tax.min.js","sources":["Tax.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Settings_Vtiger_Tax_Js',\n\t{},\n\t{\n\t\t//Stored history of TaxName and duplicate check result\n\t\tduplicateCheckCache: {},\n\n\t\t/**\n\t\t * This function will show the model for Add/Edit tax\n\t\t */\n\t\teditTax: function (url, currentTrElement) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar thisInstance = this;\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\t//cache should be empty when modal opened\n\t\t\t\t\t\tthisInstance.duplicateCheckCache = {};\n\t\t\t\t\t\tvar form = jQuery('#editTax');\n\n\t\t\t\t\t\tvar params = app.validationEngineOptions;\n\t\t\t\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\tthisInstance.saveTaxDetails(form, currentTrElement);\n\t\t\t\t\t\t\t\treturn valid;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tform.validationEngine(params);\n\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: '500px' }\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to Save the Tax Details\n\t\t */\n\t\tsaveTaxDetails: function (form, currentTrElement) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = form.serializeFormData();\n\n\t\t\tif (typeof params === 'undefined') {\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tthisInstance.validateTaxName(params).done(function (data) {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tparams.module = app.getModuleName();\n\t\t\t\tparams.parent = app.getParentModuleName();\n\t\t\t\tparams.action = 'TaxAjax';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t//Adding or update the tax details in the list\n\t\t\t\t\tif (form.find('.addTaxView').val() == 'true') {\n\t\t\t\t\t\tthisInstance.addTaxDetails(data['result']);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthisInstance.updateTaxDetails(data['result'], currentTrElement);\n\t\t\t\t\t}\n\t\t\t\t\t//show notification after tax details saved\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_TAX_SAVED_SUCCESSFULLY')\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to add the Tax Details in the list after saving\n\t\t */\n\t\taddTaxDetails: function (details) {\n\t\t\tlet container = jQuery('#TaxCalculationsContainer'),\n\t\t\t\ttaxTable;\n\n\t\t\t//Based on tax type, we will add the tax details row\n\t\t\tif (details.type === '0') {\n\t\t\t\ttaxTable = jQuery('.inventoryTaxTable', container);\n\t\t\t} else {\n\t\t\t\ttaxTable = jQuery('.shippingTaxTable', container);\n\t\t\t}\n\n\t\t\tlet trElementForTax = jQuery(\n\t\t\t\t'<tr class=\"opacity\" data-taxid=\"' +\n\t\t\t\t\tdetails.taxid +\n\t\t\t\t\t'\" data-taxtype=\"' +\n\t\t\t\t\tdetails.type +\n\t\t\t\t\t'\"><td style=\"border-left: none;\" class=\"textAlignCenter ' +\n\t\t\t\t\tdetails.row_type +\n\t\t\t\t\t'\"><label class=\"taxLabel\">' +\n\t\t\t\t\tdetails.taxlabel +\n\t\t\t\t\t'</label></td><td style=\"border-left: none;\" class=\"textAlignCenter ' +\n\t\t\t\t\tdetails.row_type +\n\t\t\t\t\t'\"><span class=\"taxPercentage\">' +\n\t\t\t\t\tdetails.percentage +\n\t\t\t\t\t'%</span></td><td style=\"border-left: none;\" class=\"textAlignCenter ' +\n\t\t\t\t\tdetails.row_type +\n\t\t\t\t\t'\"><input class=\"editTaxStatus\" type=\"checkbox\" checked>' +\n\t\t\t\t\t'<div class=\"pull-right actions\"><a class=\"editTax u-cursor-pointer\" data-url=\"' +\n\t\t\t\t\tdetails._editurl +\n\t\t\t\t\t'\"><i class=\"yfi yfi-full-editing-view alignBottom\" title=\"' +\n\t\t\t\t\tapp.vtranslate('JS_EDIT') +\n\t\t\t\t\t'\"></i></a></div></td></tr>'\n\t\t\t);\n\t\t\ttaxTable.append(trElementForTax);\n\t\t},\n\n\t\t/*\n\t\t * Function to update the tax details in the list after edit\n\t\t */\n\t\tupdateTaxDetails: function (data, currentTrElement) {\n\t\t\tcurrentTrElement.find('.taxLabel').text(data['taxlabel']);\n\t\t\tcurrentTrElement.find('.taxPercentage').text(data['percentage'] + '%');\n\t\t\tif (data['deleted'] == '0') {\n\t\t\t\tcurrentTrElement.find('.editTaxStatus').attr('checked', 'true');\n\t\t\t} else {\n\t\t\t\tcurrentTrElement.find('.editTaxStatus').removeAttr('checked');\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Function to validate the TaxName to avoid duplicates\n\t\t */\n\t\tvalidateTaxName: function (data) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar taxName = data.taxlabel;\n\t\t\tvar form = jQuery('#editTax');\n\t\t\tvar taxLabelElement = form.find('[name=\"taxlabel\"]');\n\n\t\t\tif (!(taxName in thisInstance.duplicateCheckCache)) {\n\t\t\t\tthisInstance\n\t\t\t\t\t.checkDuplicateName(data)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tthisInstance.duplicateCheckCache[taxName] = data['success'];\n\t\t\t\t\t\taDeferred.resolve();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\tthisInstance.duplicateCheckCache[taxName] = data['success'];\n\t\t\t\t\t\tthisInstance.duplicateCheckCache['message'] = data['message'];\n\t\t\t\t\t\ttaxLabelElement.validationEngine('showPrompt', data['message'], 'error', 'bottomLeft', true);\n\t\t\t\t\t\taDeferred.reject(data);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (thisInstance.duplicateCheckCache[taxName] == true) {\n\t\t\t\t\tvar result = thisInstance.duplicateCheckCache['message'];\n\t\t\t\t\ttaxLabelElement.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Tax Name\n\t\t */\n\t\tcheckDuplicateName: function (details) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar taxName = details.taxlabel;\n\t\t\tvar taxId = details.taxid;\n\t\t\tvar moduleName = app.getModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: moduleName,\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'TaxAjax',\n\t\t\t\tmode: 'checkDuplicateName',\n\t\t\t\ttaxlabel: taxName,\n\t\t\t\ttaxid: taxId,\n\t\t\t\ttype: details.type\n\t\t\t};\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tvar result = response['success'];\n\t\t\t\t\tif (result == true) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to update tax status as enabled or disabled\n\t\t */\n\t\tupdateTaxStatus: function (currentTarget) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar currentTrElement = currentTarget.closest('tr');\n\t\t\tvar taxId = currentTrElement.data('taxid');\n\t\t\tvar taxType = currentTrElement.data('taxtype');\n\t\t\tvar deleted = currentTarget.is(':checked') ? 0 : 1;\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'TaxAjax',\n\t\t\t\ttaxid: taxId,\n\t\t\t\ttype: taxType,\n\t\t\t\tdeleted: deleted\n\t\t\t};\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to register all actions in the Tax List\n\t\t */\n\t\tregisterActions: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('#TaxCalculationsContainer');\n\n\t\t\t//register click event for Add New Tax button\n\t\t\tcontainer.find('.addTax').on('click', function (e) {\n\t\t\t\tvar addTaxButton = jQuery(e.currentTarget);\n\t\t\t\tvar createTaxUrl = addTaxButton.data('url') + '&type=' + addTaxButton.data('type');\n\t\t\t\tthisInstance.editTax(createTaxUrl);\n\t\t\t});\n\n\t\t\t//register event for edit tax icon\n\t\t\tcontainer.on('click', '.editTax', function (e) {\n\t\t\t\tvar editTaxButton = jQuery(e.currentTarget);\n\t\t\t\tvar currentTrElement = editTaxButton.closest('tr');\n\t\t\t\tthisInstance.editTax(editTaxButton.data('url'), currentTrElement);\n\t\t\t});\n\n\t\t\t//register event for checkbox to change the tax Status\n\t\t\tcontainer.on('click', '.editTaxStatus', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\n\t\t\t\tthisInstance.updateTaxStatus(currentTarget).done(function (data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tparams.text = app.vtranslate('JS_TAX_ENABLED');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.text = app.vtranslate('JS_TAX_DISABLED');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tthis.registerActions();\n\t\t}\n\t}\n);\n\njQuery(document).ready(function (e) {\n\tvar taxInstance = new Settings_Vtiger_Tax_Js();\n\ttaxInstance.registerEvents();\n});\n"],"names":["jQuery","Class","duplicateCheckCache","editTax","url","currentTrElement","aDeferred","Deferred","thisInstance","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","request","done","data","callBackFunction","params","app","validationEngineOptions","onValidationComplete","form","valid","saveTaxDetails","validationEngine","on","e","preventDefault","mode","showModalWindow","width","fail","error","reject","promise","serializeFormData","validateTaxName","module","getModuleName","parent","getParentModuleName","action","AppConnector","hideModalWindow","find","val","addTaxDetails","updateTaxDetails","text","vtranslate","Settings_Vtiger_Index_Js","showMessage","details","container","taxTable","type","taxid","row_type","taxlabel","percentage","_editurl","append","trElementForTax","attr","removeAttr","taxName","taxLabelElement","checkDuplicateName","resolve","result","taxId","moduleName","response","err","updateTaxStatus","currentTarget","closest","taxType","deleted","is","registerActions","createTaxUrl","addTaxButton","editTaxButton","registerEvents","document","ready","taxInstance"],"mappings":"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"}