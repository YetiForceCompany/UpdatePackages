{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Campaigns_Detail_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register email enabled actions\n\t\t */\n\t\tregisterEmailEnabledActions: function () {\n\t\t\tvar moduleName = app.getModuleName();\n\t\t\tvar className = moduleName + '_List_Js';\n\t\t\tvar listInstance = new window[className]();\n\t\t\tlistInstance.registerEvents();\n\t\t\tlistInstance.markSelectedRecords();\n\t\t},\n\t\tregisterEventForRelatedTabClick: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tvar detailContainer = detailContentsHolder.closest('div.detailViewInfo');\n\t\t\tjQuery('.related', detailContainer).on('click', 'li:not(.spaceRelatedList)', function (e, urlAttributes) {\n\t\t\t\tvar tabElement = jQuery(e.currentTarget);\n\t\t\t\tif (!tabElement.hasClass('dropdown')) {\n\t\t\t\t\tvar element = jQuery('<div></div>');\n\t\t\t\t\telement.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\telementToBlock: detailContainer\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar url = tabElement.data('url');\n\t\t\t\t\tif (typeof urlAttributes !== 'undefined') {\n\t\t\t\t\t\tvar callBack = urlAttributes.callback;\n\t\t\t\t\t\tdelete urlAttributes.callback;\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.loadContents(url, urlAttributes)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tthisInstance.deSelectAllrelatedTabs();\n\t\t\t\t\t\t\tthisInstance.markTabAsSelected(tabElement);\n\t\t\t\t\t\t\tVtiger_Helper_Js.showHorizontalTopScrollBar();\n\t\t\t\t\t\t\tapp.registerModal(detailContentsHolder);\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tvar emailEnabledModule = jQuery(data).find('[name=\"emailEnabledModules\"]').val();\n\t\t\t\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\t\t\t\tvar listInstance = new Campaigns_List_Js();\n\t\t\t\t\t\t\t\tlistInstance.registerEvents();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof callBack == 'function') {\n\t\t\t\t\t\t\t\tcallBack(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//Summary tab is clicked\n\t\t\t\t\t\t\tif (tabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\t\t\tthisInstance.loadWidgets();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.registerBasicEvents();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\t//Calling registerevents of campaigns list to handle checkboxs click of related records\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tlistInstance.registerEvents();\n\t\t\tvar thisInstance = this;\n\t\t\tapp.event.on('RelatedList.AfterLoad', function (event, instance) {\n\t\t\t\tvar response = instance.content;\n\t\t\t\tresponse.find('[name=\"selectedIds\"]').data('selectedIds', '');\n\t\t\t\tresponse.find('[name=\"excludedIds\"]').data('excludedIds', '');\n\t\t\t\tvar emailEnabledModule = response.find('[name=\"emailEnabledModules\"]').val();\n\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\tthisInstance.registerEmailEnabledActions();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","registerEmailEnabledActions","app","getModuleName","listInstance","moduleName","registerEvents","markSelectedRecords","registerEventForRelatedTabClick","detailContentsHolder","thisInstance","getContentHolder","detailContainer","closest","jQuery","on","e","urlAttributes","tabElement","currentTarget","hasClass","element","progressIndicator","position","blockInfo","enabled","elementToBlock","data","callback","loadContents","url","done","deSelectAllrelatedTabs","markTabAsSelected","Vtiger_Helper_Js","showHorizontalTopScrollBar","registerModal","mode","find","val","emailEnabledModule","callBack","detailViewSummaryTabLabel","loadWidgets","registerBasicEvents","fail","_super","Vtiger_List_Js","getInstance","event","instance","content","response"],"mappings":"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"}