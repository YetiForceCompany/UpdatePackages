{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_AutomaticAssignment_Edit_Js',\n\t{},\n\t{\n\t\tcontainer: false,\n\t\tadvanceFilterInstance: false,\n\t\tconditionBuilders: [],\n\t\tsetContainer: function (container) {\n\t\t\tthis.container = container;\n\t\t\treturn this.container;\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.container == false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv form');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tregisterBlockToggleEvent() {\n\t\t\tthis.container.on('click', '.blockHeader', function (e) {\n\t\t\t\tconst target = $(e.target);\n\t\t\t\tif (\n\t\t\t\t\ttarget.is('input') ||\n\t\t\t\t\ttarget.is('button') ||\n\t\t\t\t\ttarget.parents().is('button') ||\n\t\t\t\t\ttarget.hasClass('js-stop-propagation') ||\n\t\t\t\t\ttarget.parents().hasClass('js-stop-propagation')\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst blockHeader = $(e.currentTarget);\n\t\t\t\tconst blockContents = blockHeader.next();\n\t\t\t\tconst iconToggle = blockHeader.find('.iconToggle');\n\t\t\t\tif (blockContents.hasClass('d-none')) {\n\t\t\t\t\tblockContents.removeClass('d-none');\n\t\t\t\t\ticonToggle.removeClass(iconToggle.data('hide')).addClass(iconToggle.data('show'));\n\t\t\t\t} else {\n\t\t\t\t\tblockContents.addClass('d-none');\n\t\t\t\t\ticonToggle.removeClass(iconToggle.data('show')).addClass(iconToggle.data('hide'));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register submit event\n\t\t */\n\t\tregisterSubmitEvent() {\n\t\t\tthis.container.off('submit').on('submit', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.container.find('.js-toggle-panel').find('.js-block-content').removeClass('d-none');\n\t\t\t\tif ($(e.currentTarget).validationEngine('validate')) {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tfor (var key in this.conditionBuilders) {\n\t\t\t\t\t\tthis.container\n\t\t\t\t\t\t\t.find(`input[name=\"${key}\"]`)\n\t\t\t\t\t\t\t.val(JSON.stringify(this.conditionBuilders[key].getConditions()));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.preSaveValidation().done((response) => {\n\t\t\t\t\t\tif (response === true) {\n\t\t\t\t\t\t\tlet formData = this.container.serializeFormData();\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t.saveAjax('save', [], formData)\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tif (data.result && data.result.success) {\n\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * PreSave validation\n\t\t */\n\t\tpreSaveValidation: function () {\n\t\t\tconst aDeferred = $.Deferred();\n\t\t\tlet formData = new FormData(this.container[0]);\n\t\t\tformData.append('mode', 'preSaveValidation');\n\t\t\tAppConnector.request({\n\t\t\t\tasync: false,\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false\n\t\t\t})\n\t\t\t\t.done((data) => {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tfor (let i in response) {\n\t\t\t\t\t\tif (response[i].result !== true) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response[i].message ? response[i].message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (response[i].hoverField != undefined) {\n\t\t\t\t\t\t\t\tthis.container.find('[name=\"' + response[i].hoverField + '\"]').focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve(data.result.length <= 0);\n\t\t\t\t})\n\t\t\t\t.fail((textStatus, errorThrown) => {\n\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t});\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Load condition builder\n\t\t *\n\t\t * @param   {Integer}  sourceTabId\n\t\t */\n\t\tloadConditionBuilderView(sourceTabId) {\n\t\t\tif (!sourceTabId) {\n\t\t\t\tthis.container.find('.js-condition-builder-container').html('');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'Conditions',\n\t\t\t\tsourceTabId: sourceTabId\n\t\t\t}).done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tthis.container.find('.js-condition-builder-container').html(data);\n\t\t\t\tthis.registerConditionBuilder();\n\t\t\t});\n\t\t},\n\t\tregisterConditionBuilder() {\n\t\t\tlet sourceModuleName = this.sourceModuleSelect.val();\n\t\t\tif (sourceModuleName) {\n\t\t\t\tthis.container.find('.js-condition-builder').each((_, e) => {\n\t\t\t\t\tlet conditionBuilder = new Vtiger_ConditionBuilder_Js($(e), sourceModuleName);\n\t\t\t\t\tconditionBuilder.registerEvents();\n\t\t\t\t\tlet name = $(e).closest('.js-field-container').find('.js-condition-value').attr('name');\n\t\t\t\t\tthis.conditionBuilders[name] = conditionBuilder;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register source module change\n\t\t */\n\t\tregisterSourceModuleChange() {\n\t\t\tthis.sourceModuleSelect = this.container.find('select[name=\"tabid\"]');\n\t\t\tthis.sourceTabId = this.sourceModuleSelect.val();\n\t\t\tthis.sourceModuleSelect.on('change', (e) => {\n\t\t\t\tlet value = $(e.currentTarget).val();\n\t\t\t\tif (this.sourceTabId !== value && this.sourceTabId !== null) {\n\t\t\t\t\tthis.sourceTabId = value;\n\t\t\t\t\tthis.loadConditionBuilderView(this.sourceTabId);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterMethodChange() {\n\t\t\tthis.container.find('[name=\"method\"]').on('change', (e) => {\n\t\t\t\tlet countingCriteria = this.container.find('[name=\"record_limit_conditions\"]').closest('.js-field-container');\n\t\t\t\tif ($(e.currentTarget).val() == 1) {\n\t\t\t\t\tcountingCriteria.addClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcountingCriteria.removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.container.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerBlockToggleEvent();\n\t\t\tthis.registerSourceModuleChange();\n\t\t\tthis.registerConditionBuilder();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv form'));\n\t\t\tthis.registerBasicEvents();\n\t\t\tapp.showPopoverElementView(this.container.find('.js-popover-tooltip'));\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","advanceFilterInstance","conditionBuilders","setContainer","getContainer","registerBlockToggleEvent","on","e","$","target","is","parents","hasClass","currentTarget","blockContents","blockHeader","next","iconToggle","find","removeClass","data","addClass","registerSubmitEvent","off","preventDefault","validationEngine","key","document","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","val","JSON","stringify","getConditions","preSaveValidation","done","response","formData","serializeFormData","saveAjax","result","success","Settings_Vtiger_Index_Js","showMessage","text","window","location","href","url","mode","showNotify","type","fail","stopPropagation","aDeferred","Deferred","append","AppConnector","request","async","processData","contentType","i","hoverField","focus","resolve","length","textStatus","errorThrown","errorLog","promise","loadConditionBuilderView","sourceTabId","html","progress","module","getModuleName","parent","getParentModuleName","view","registerConditionBuilder","sourceModuleName","sourceModuleSelect","each","_","conditionBuilder","registerEvents","closest","attr","name","registerSourceModuleChange","value","registerMethodChange","countingCriteria","registerBasicEvents","validationEngineOptionsForRecord","showPopoverElementView"],"mappings":"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"}