{"version":3,"file":"Roles.min.js","sources":["Roles.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nvar Settings_Roles_Js = {\n\tnewPriviliges: false,\n\n\tinitDeleteView: function () {\n\t\tjQuery('#roleDeleteForm').validationEngine(app.validationEngineOptions);\n\n\t\tjQuery('[data-action=\"popup\"]').on('click', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tvar field = target.data('field');\n\n\t\t\tvar popupInstance = Vtiger_Popup_Js.getInstance();\n\t\t\tpopupInstance.show(target.data('url'));\n\t\t\tpopupInstance.retrieveSelectedRecords(function (data) {\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (typeof data == 'object') {\n\t\t\t\t\tjQuery('[name=\"' + field + '_display\"]').val(data.label);\n\t\t\t\t\tdata = data.value;\n\t\t\t\t}\n\t\t\t\tjQuery('[name=\"' + field + '\"]').val(data);\n\t\t\t});\n\t\t});\n\n\t\tjQuery('#clearRole').on('click', function (e) {\n\t\t\tjQuery('[name=\"transfer_record_display\"]').val('');\n\t\t\tjQuery('[name=\"transfer_record\"]').val('');\n\t\t});\n\t},\n\n\tinitPopupView: function () {\n\t\tjQuery('.roleEle').on('click', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\t// jquery_windowmsg plugin expects second parameter to be string.\n\t\t\tjQuery.triggerParentEvent(\n\t\t\t\t'postSelection',\n\t\t\t\tJSON.stringify({\n\t\t\t\t\tvalue: target.closest('li').data('roleid'),\n\t\t\t\t\tlabel: target.text()\n\t\t\t\t})\n\t\t\t);\n\t\t\tself.close();\n\t\t});\n\t},\n\n\tinitEditView: function () {\n\t\tfunction applyMoveChanges(roleid, parent_roleid) {\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Roles',\n\t\t\t\taction: 'MoveAjax',\n\t\t\t\tparent: 'Settings',\n\t\t\t\trecord: roleid,\n\t\t\t\tparent_roleid: parent_roleid\n\t\t\t};\n\n\t\t\tAppConnector.request(params).done(function (res) {\n\t\t\t\tif (!res.success) {\n\t\t\t\t\tapp.showAlert(app.vtranslate('JS_FAILED_TO_SAVE'));\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tjQuery('[rel=\"tooltip\"]').tooltip();\n\n\t\tfunction modalActionHandler(event) {\n\t\t\tvar target = $(event.currentTarget);\n\t\t\tapp.showModalWindow(null, target.data('url'), function (data) {\n\t\t\t\tSettings_Roles_Js.initDeleteView();\n\t\t\t});\n\t\t}\n\n\t\tjQuery('[data-action=\"modal\"]').on('click', modalActionHandler);\n\n\t\tjQuery('.toolbar').hide();\n\n\t\tjQuery('.toolbar-handle').on('mouseover', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tjQuery('.toolbar', target).css({ display: 'inline' });\n\t\t});\n\t\tjQuery('.toolbar-handle').on('mouseout', function (e) {\n\t\t\tvar target = $(e.currentTarget);\n\t\t\tjQuery('.toolbar', target).hide();\n\t\t});\n\n\t\tjQuery('.draggable').draggable({\n\t\t\tcontainment: '.treeView',\n\t\t\tstart: function (event, ui) {\n\t\t\t\tvar container = jQuery(ui.helper);\n\t\t\t\tvar referenceid = container.data('refid');\n\t\t\t\tvar sourceGroup = jQuery('[data-grouprefid=\"' + referenceid + '\"]');\n\t\t\t\tvar sourceRoleId = sourceGroup.data('roleid');\n\t\t\t\tif (sourceRoleId == 'H5' || sourceRoleId == 'H2') {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.title = app.vtranslate('JS_PERMISSION_DENIED');\n\t\t\t\t\tparams.text = app.vtranslate('JS_NO_PERMISSIONS_TO_MOVE');\n\t\t\t\t\tparams.type = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t}\n\t\t\t},\n\t\t\thelper: function (event) {\n\t\t\t\tvar target = $(event.currentTarget);\n\t\t\t\tvar targetGroup = target.closest('li');\n\t\t\t\tvar timestamp = +new Date();\n\n\t\t\t\tvar container = $('<div/>');\n\t\t\t\tcontainer.data('refid', timestamp);\n\t\t\t\tcontainer.html(targetGroup.clone());\n\n\t\t\t\t// For later reference we shall assign the id before we return\n\t\t\t\ttargetGroup.attr('data-grouprefid', timestamp);\n\n\t\t\t\treturn container;\n\t\t\t}\n\t\t});\n\t\tjQuery('.droppable').droppable({\n\t\t\thoverClass: 'btn-primary',\n\t\t\ttolerance: 'pointer',\n\t\t\tdrop: function (event, ui) {\n\t\t\t\tvar container = $(ui.helper);\n\t\t\t\tvar referenceid = container.data('refid');\n\t\t\t\tvar sourceGroup = $('[data-grouprefid=\"' + referenceid + '\"]');\n\n\t\t\t\tvar thisWrapper = $(this).closest('div');\n\n\t\t\t\tvar targetRole = thisWrapper.closest('li').data('role');\n\t\t\t\tvar targetRoleId = thisWrapper.closest('li').data('roleid');\n\t\t\t\tvar sourceRole = sourceGroup.data('role');\n\t\t\t\tvar sourceRoleId = sourceGroup.data('roleid');\n\n\t\t\t\t// Attempt to push parent-into-its own child hierarchy?\n\t\t\t\tif (targetRole.indexOf(sourceRole + '::') == 0) {\n\t\t\t\t\t// Sorry\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Attempt to move the roles CEO and Sales Person\n\t\t\t\tif (sourceRoleId == 'H5' || sourceRoleId == 'H2') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsourceGroup.appendTo(thisWrapper.next('ul'));\n\n\t\t\t\tapplyMoveChanges(sourceRoleId, targetRoleId);\n\t\t\t}\n\t\t});\n\t},\n\n\tregisterSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = jQuery('#EditView');\n\t\tform.on('submit', function (e) {\n\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tvar selectElement = jQuery('#profilesList');\n\t\t\t\tvar select2Element = app.getSelect2ElementFromSelect(selectElement);\n\t\t\t\tvar result = Vtiger_MultiSelect_Validator_Js.invokeValidation(selectElement);\n\t\t\t\tif (result != true) {\n\t\t\t\t\tselect2Element.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t\t}\n\n\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.checkDuplicateName({\n\t\t\t\t\t\t\trolename: formData.rolename,\n\t\t\t\t\t\t\trecord: formData.record\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\tjQuery.progressIndicator({\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t},\n\n\t/*\n\t * Function to check Duplication of Role Names\n\t * returns boolean true or false\n\t */\n\n\tcheckDuplicateName: function (details) {\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'EditAjax',\n\t\t\tmode: 'checkDuplicate',\n\t\t\trolename: details.rolename,\n\t\t\trecord: details.record\n\t\t};\n\n\t\tAppConnector.request(params)\n\t\t\t.done(function (data) {\n\t\t\t\tvar response = data['result'];\n\t\t\t\tvar result = response['success'];\n\t\t\t\tif (result == true) {\n\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail(function (error, err) {\n\t\t\t\taDeferred.reject(error, err);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Register button to open modal logo upload form\n\t */\n\tregisterModalUploadButton: function () {\n\t\tconst thisInstance = this;\n\t\t$('.js-upload-logo').on('click', function () {\n\t\t\tapp.showModalWindow(null, $(this).data('url'), function (data) {\n\t\t\t\tthisInstance.registerUploadButton(data.find('form'));\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Register button send form\n\t * @param {jQuery} form\n\t */\n\tregisterUploadButton: function (form) {\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\tlet formData = new FormData(form[0]),\n\t\t\t\t\tprogressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t}),\n\t\t\t\t\tnotifyType = '';\n\t\t\t\tAppConnector.request({\n\t\t\t\t\turl: 'index.php',\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tprocessData: false,\n\t\t\t\t\tcontentType: false\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (true === data.result.success) {\n\t\t\t\t\t\tnotifyType = 'success';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnotifyType = 'error';\n\t\t\t\t\t}\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: app.vtranslate(data.result.message),\n\t\t\t\t\t\ttype: notifyType\n\t\t\t\t\t});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tSettings_Roles_Js.registerModalUploadButton();\n\t\tSettings_Roles_Js.initEditView();\n\t\tSettings_Roles_Js.registerSubmitEvent();\n\t}\n};\njQuery(document).ready(function () {\n\tSettings_Roles_Js.registerEvents();\n});\n"],"names":["Settings_Roles_Js","newPriviliges","initDeleteView","jQuery","validationEngine","app","validationEngineOptions","on","e","preventDefault","$","currentTarget","field","target","data","popupInstance","Vtiger_Popup_Js","getInstance","show","retrieveSelectedRecords","JSON","parse","val","label","value","initPopupView","triggerParentEvent","stringify","closest","text","self","close","initEditView","roleid","parent_roleid","AppConnector","request","module","action","parent","record","done","res","success","showAlert","vtranslate","window","location","reload","tooltip","event","showModalWindow","hide","css","display","draggable","containment","start","ui","helper","referenceid","container","sourceGroup","sourceRoleId","params","title","type","Settings_Vtiger_Index_Js","showMessage","targetGroup","timestamp","Date","html","clone","attr","droppable","hoverClass","tolerance","drop","thisWrapper","targetRole","targetRoleId","sourceRole","indexOf","appendTo","next","applyMoveChanges","registerSubmitEvent","thisInstance","form","select2Element","getSelect2ElementFromSelect","selectElement","result","Vtiger_MultiSelect_Validator_Js","invokeValidation","InvalidFields","length","serializeFormData","checkDuplicateName","rolename","formData","submit","progressIndicator","blockInfo","enabled","fail","removeData","formAlignmentAfterValidation","details","aDeferred","Deferred","getModuleName","getParentModuleName","mode","response","reject","resolve","error","err","promise","registerModalUploadButton","registerUploadButton","find","removeEmptyFilesInput","FormData","progressIndicatorElement","notifyType","url","processData","contentType","showNotify","message","hideModalWindow","registerEvents","document","ready"],"mappings":"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"}