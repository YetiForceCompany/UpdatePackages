'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";jQuery.Class("Vtiger_TreeRecords_Js",{},{mainContainer:!1,treeInstance:!1,treeData:!1,getContainer:function getContainer(){return !1==this.mainContainer&&(this.mainContainer=jQuery("#centerPanel")),this.mainContainer},setContainer:function setContainer(container){this.mainContainer=container;},getTreeListValues:function getTreeListValues(container){if(!1==this.treeData&&"undefined"!==container){var treeValues=container.find("#treeListValues").val();""!=treeValues&&(this.treeData=JSON.parse(treeValues));}return this.treeData},generateTree:function generateTree(container){var thisInstance=this;thisInstance.treeInstance=container.find("#treeListContents"),thisInstance.treeInstance.jstree({core:{data:thisInstance.getTreeListValues(container),themes:{name:"proton",responsive:!0}},plugins:["checkbox"]});},getRecordsParams:function getRecordsParams(container){var selected=[];return $.each(this.treeInstance.jstree("get_selected",!0),function(index,value){selected.push(value.original.record_id);}),{module:app.getModuleName(),view:app.getViewName(),branches:selected,filter:container.find("#moduleFilter").val()}},getRecordsList:function getRecordsList(){var thisInstance=this,container=thisInstance.getContainer(),progressIndicator=jQuery.progressIndicator({message:app.vtranslate("JS_LOADING_OF_RECORDS"),blockInfo:{enabled:!0}});$.extend($.fn.dataTable.defaults,{language:{sLengthMenu:app.vtranslate("JS_S_LENGTH_MENU"),sZeroRecords:app.vtranslate("JS_NO_RESULTS_FOUND"),sInfo:app.vtranslate("JS_S_INFO"),sInfoEmpty:app.vtranslate("JS_S_INFO_EMPTY"),sSearch:app.vtranslate("JS_SEARCH"),sEmptyTable:app.vtranslate("JS_NO_RESULTS_FOUND"),sInfoFiltered:app.vtranslate("JS_S_INFO_FILTERED"),sLoadingRecords:app.vtranslate("JS_LOADING_OF_RECORDS"),sProcessing:app.vtranslate("JS_LOADING_OF_RECORDS"),oPaginate:{sFirst:app.vtranslate("JS_S_FIRST"),sPrevious:app.vtranslate("JS_S_PREVIOUS"),sNext:app.vtranslate("JS_S_NEXT"),sLast:app.vtranslate("JS_S_LAST")},oAria:{sSortAscending:app.vtranslate("JS_S_SORT_ASCENDING"),sSortDescending:app.vtranslate("JS_S_SORT_DESCENDING")}}}),AppConnector.request(thisInstance.getRecordsParams(container)).done(function(data){container.find("#recordsListContents").html(data),container.find("#recordsListContents table").dataTable(),progressIndicator.progressIndicator({mode:"hide"});}).fail(function(){progressIndicator.progressIndicator({mode:"hide"});});},registerFilterChangeEvent:function registerFilterChangeEvent(container){var thisInstance=this;container.on("change","#moduleFilter",function(){thisInstance.getRecordsList();});},registerSelectBrancheEvent:function registerSelectBrancheEvent(){var thisInstance=this;thisInstance.treeInstance.on("changed.jstree",function(){thisInstance.getRecordsList();});},registerEvents:function registerEvents(){var container=this.getContainer();this.generateTree(container),this.registerFilterChangeEvent(container),this.registerSelectBrancheEvent(container);}});
//# sourceMappingURL=TreeRecords.min.js.map
