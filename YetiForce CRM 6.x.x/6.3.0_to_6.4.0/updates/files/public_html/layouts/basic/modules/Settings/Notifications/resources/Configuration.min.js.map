{"version":3,"file":"Configuration.min.js","sources":["Configuration.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Notifications_Configuration_Js',\n\t{},\n\t{\n\t\tcontainer: false,\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('#supportedModule').on('change', function (e) {\n\t\t\t\tvar progress = thisInstance.progress();\n\t\t\t\tvar params = {};\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['view'] = app.getViewName();\n\t\t\t\tparams['srcModule'] = jQuery(e.currentTarget).val();\n\t\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tcontainer.html(data);\n\t\t\t\t\t\tApp.Fields.Picklist.changeSelectElementView(container);\n\t\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tprogress: function () {\n\t\t\treturn jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterButtonEvents: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('.wrapperTrash, .wrapperLock').on('click', '.fas', function (e) {\n\t\t\t\tvar progress = thisInstance.progress();\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar mode = element.data('mode');\n\t\t\t\tvar dataElement = element.closest('tr');\n\t\t\t\tvar params = {\n\t\t\t\t\tmembers: dataElement.data('value'),\n\t\t\t\t\tsrcModule: container.find('#supportedModule').val()\n\t\t\t\t};\n\t\t\t\tif (mode === 'lock') {\n\t\t\t\t\tparams.lock = dataElement.data('lock') === 0 ? 1 : 0;\n\t\t\t\t}\n\t\t\t\tapp.saveAjax(mode, null, params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tthisInstance.refreshView();\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.addUser, .wrapperExceptions').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar reload = true;\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar url =\n\t\t\t\t\t'index.php?module=' +\n\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t'&parent=' +\n\t\t\t\t\tapp.getParentModuleName() +\n\t\t\t\t\t'&srcModule=' +\n\t\t\t\t\tcontainer.find('#supportedModule').val() +\n\t\t\t\t\t'&view=Members';\n\t\t\t\tif (element.hasClass('wrapperExceptions')) {\n\t\t\t\t\turl += '&mode=' + element.data('mode') + '&member=' + element.closest('tr').data('value');\n\t\t\t\t\treload = false;\n\t\t\t\t}\n\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar progress = thisInstance.progress();\n\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\tapp.saveAjax(params.mode, null, params).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tif (reload) {\n\t\t\t\t\t\t\t\tthisInstance.refreshView();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\trefreshView: function () {\n\t\t\tthis.getContainer().find('#supportedModule').trigger('change');\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.container === false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar container = this.getContainer();\n\t\t\tthis.registerModulesChangeEvent(container);\n\t\t\tapp.registerDataTables(container.find('.dataTable'));\n\t\t\tthis.registerButtonEvents(container);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","registerModulesChangeEvent","find","on","e","thisInstance","progress","params","app","getModuleName","getParentModuleName","getViewName","currentTarget","val","AppConnector","requestPjax","done","data","progressIndicator","mode","html","App","Fields","Picklist","changeSelectElementView","registerEvents","fail","textStatus","errorThrown","errorLog","position","blockInfo","enabled","registerButtonEvents","element","dataElement","closest","members","srcModule","lock","saveAjax","refreshView","stopPropagation","preventDefault","reload","url","hasClass","showModalWindow","form","serializeFormData","hideModalWindow","getContainer","trigger","registerDataTables"],"mappings":"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"}