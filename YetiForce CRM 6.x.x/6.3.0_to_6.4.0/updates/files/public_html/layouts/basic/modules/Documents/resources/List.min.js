'use strict';

/*+***********************************************************************************
 * The contents of this file are subject to the vtiger CRM Public License Version 1.0
 * ("License"); You may not use this file except in compliance with the License
 * The Original Code is:  vtiger CRM Open Source
 * The Initial Developer of the Original Code is vtiger.
 * Portions created by vtiger are Copyright (C) vtiger.
 * All Rights Reserved.
 *************************************************************************************/"use strict";Vtiger_List_Js("Documents_List_Js",{massMove:function massMove(url){var listInstance=Vtiger_List_Js.getInstance(),validationResult=listInstance.checkListRecordSelected();if(!0!=validationResult){var selectedIds=listInstance.readSelectedIds(!0),excludedIds=listInstance.readExcludedIds(!0),cvId=listInstance.getCurrentCvId(),postData={selected_ids:selectedIds,excluded_ids:excludedIds,viewname:cvId},searchValue=listInstance.getAlphabetSearchValue();0<searchValue.length&&(postData.search_key=listInstance.getAlphabetSearchField(),postData.search_value=searchValue,postData.operator="s");var progressIndicatorElement=jQuery.progressIndicator();AppConnector.request({url:url,data:postData}).done(function(data){progressIndicatorElement.progressIndicator({mode:"hide"});app.showModalWindow(data,function callBackFunction(){listInstance.moveDocuments().done(function(data){if(data){var result=data.result;if(result.success){app.hideModalWindow(),app.showNotify({title:app.vtranslate("JS_MOVE_DOCUMENTS"),text:result.message,delay:"2000",type:"success"});var urlParams=listInstance.getDefaultParams();listInstance.getListViewRecords(urlParams);}else app.showNotify({title:app.vtranslate("JS_OPERATION_DENIED"),text:result.message,delay:"2000",type:"error"});}});});});}else listInstance.noRecordSelectedAlert();}},{moveDocuments:function moveDocuments(){var aDeferred=jQuery.Deferred();return jQuery("#moveDocuments").on("submit",function(e){var formData=jQuery(e.currentTarget).serializeFormData();AppConnector.request(formData).done(function(data){aDeferred.resolve(data);}).fail(function(textStatus,errorThrown){aDeferred.reject(textStatus,errorThrown);}),e.preventDefault();}),aDeferred.promise()},registerDeleteFilterClickEvent:function registerDeleteFilterClickEvent(){var self=this,listViewFilterBlock=this.getFilterBlock();!1!=listViewFilterBlock&&listViewFilterBlock.on("mouseup",".js-filter-delete",function(event){event.stopPropagation(),self.getFilterSelectElement().data("select2").close();var liElement=jQuery(event.currentTarget).closest(".select2-results__option"),message=app.vtranslate("JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE");if(liElement.hasClass("folderOption")){if(liElement.find(".js-filter-delete").hasClass("dull"))return void app.showNotify({text:app.vtranslate("JS_FOLDER_IS_NOT_EMPTY"),type:"error"});app.showConfirmModal({text:message,confirmedCallback:function confirmedCallback(){var currentOptionElement=self.getSelectOptionFromChosenOption(liElement);AppConnector.request({module:app.getModuleName(),mode:"delete",action:"Folder",folderid:currentOptionElement.data("folderid")}).done(function(data){data.success&&(currentOptionElement.remove(),self.getFilterSelectElement().trigger("change"));});}});}else app.showConfirmModal({text:message,confirmedCallback:function confirmedCallback(){AppConnector.requestForm(self.getSelectOptionFromChosenOption(liElement).data("deleteurl"));}});});}});
//# sourceMappingURL=List.min.js.map
