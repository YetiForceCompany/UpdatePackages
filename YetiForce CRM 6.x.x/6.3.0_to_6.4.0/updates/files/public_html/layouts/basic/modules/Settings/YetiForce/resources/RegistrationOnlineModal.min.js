'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";/**
 * Class Settings_YetiForce_RegistrationOnlineModal_Js.
 * @type {window.Settings_YetiForce_RegistrationOnlineModal_Js}
 */function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor);}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}window.Settings_YetiForce_RegistrationOnlineModal_Js=/*#__PURE__*/function(){function Settings_YetiForce_RegistrationOnlineModal_Js(){_classCallCheck(this,Settings_YetiForce_RegistrationOnlineModal_Js);}return _createClass(Settings_YetiForce_RegistrationOnlineModal_Js,[{key:"registerNewsletter",value:/**
	 * Register events for form checkbox element
	 * @param {jQuery} modalContainer
	 */function registerNewsletter(modalContainer){modalContainer.find("form").find("[id$=\"newsletter\"]").on("click",function(e){var inputsContainer=$(e.target).closest(".js-card-body");$(e.target).prop("checked")?(inputsContainer.find("[id$=\"firstname]\"]").attr("data-validation-engine","validate[required]"),inputsContainer.find("[id$=\"lastname]\"]").attr("data-validation-engine","validate[required]"),inputsContainer.find("[id$=\"email]\"]").attr("data-validation-engine","validate[required,custom[email]]"),inputsContainer.find(".js-newsletter-content").removeClass("d-none")):(inputsContainer.find("[id$=\"firstname]\"]").removeAttr("data-validation-engine").val(""),inputsContainer.find("[id$=\"lastname]\"]").removeAttr("data-validation-engine").val(""),inputsContainer.find("[id$=\"email]\"]").removeAttr("data-validation-engine").val(""),inputsContainer.find(".js-newsletter-content").addClass("d-none"));});}/**
	 * Get companies from form
	 * @param {jQuery} form
	 * @returns {array}
	 */},{key:"getCompanies",value:function getCompanies(form){var companies=[];return form.each(function(){companies.push($(this).serializeFormData());}),companies}/**
	 * Register events.
	 * @param {jQuery} modalContainer
	 */},{key:"registerEvents",value:function registerEvents(modalContainer){var self=this,form=modalContainer.find("form");form.validationEngine(app.validationEngineOptions),form.on("submit",function(e){e.preventDefault(),modalContainer.find("[name=\"saveButton\"]").click();}),modalContainer.find("[name=\"saveButton\"]").on("click",function(e){if(!form.validationEngine("validate"))return e.preventDefault(),app.showNotify({text:app.vtranslate("JS_ENTER_ALL_REGISTRATION_DATA"),type:"error"}),!1;modalContainer.find("button[name=saveButton]").prop("disabled",!0);var progress=$.progressIndicator({message:app.vtranslate("JS_LOADING_PLEASE_WAIT"),blockInfo:{enabled:!0}});AppConnector.request({module:"YetiForce",parent:"Settings",action:"Register",mode:"online",companies:self.getCompanies(form)}).done(function(data){if(app.showNotify({text:data.result.message,type:data.result.type}),progress.progressIndicator({mode:"hide"}),"success"===data.result.type){var href=location.href.replace("displayModal=online","");location.replace(href);}return modalContainer.find("button[name=saveButton]").prop("disabled",!1),data.result}).fail(function(){progress.progressIndicator({mode:"hide"}),app.showNotify({text:app.vtranslate("JS_ERROR"),type:"error"});});}),this.registerNewsletter(modalContainer);}}]),Settings_YetiForce_RegistrationOnlineModal_Js}();
//# sourceMappingURL=RegistrationOnlineModal.min.js.map
