{"version":3,"file":"TwoFactorAuthenticationModal.min.js","sources":["TwoFactorAuthenticationModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TwoFactorAuthenticationModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to handle sending the AJAX form\n\t\t * @param data\n\t\t */\n\t\tregisterSubmitFrom(data) {\n\t\t\tdata.find('button[name=saveButton]').prop('disabled', true);\n\t\t\tdata.find('input[name=user_code]').on('keyup', (e) => {\n\t\t\t\tif (e.keyCode !== 13) {\n\t\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', $(e.currentTarget).val().length === 0);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.find('input[name=user_code]').on('change', (e) => {\n\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', $(e.currentTarget).val().length === 0);\n\t\t\t});\n\t\t\tdata.find('input[name=turn_off_2fa]').on('change', (e) => {\n\t\t\t\tif ($(e.currentTarget).prop('checked')) {\n\t\t\t\t\tdata.find('.js-qr-code,.js-user-code').addClass('hide');\n\t\t\t\t\tdata.find('input[name=mode]').val('off');\n\t\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', false);\n\t\t\t\t} else {\n\t\t\t\t\tdata.find('.js-qr-code,.js-user-code').removeClass('hide');\n\t\t\t\t\tdata.find('input[name=mode]').val('secret');\n\t\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', true);\n\t\t\t\t\tdata.find('input[name=user_code]').val('');\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet form = data.find('form');\n\t\t\tform.on('submit', (e) => {\n\t\t\t\tlet progress = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(form.serializeFormData()).done((response) => {\n\t\t\t\t\tif (response.result.success) {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: response.result.message,\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (app.getModuleName() === 'Users') {\n\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet wrongCode = form.find('.js-wrong-code');\n\t\t\t\t\t\tif (wrongCode.hasClass('hide')) {\n\t\t\t\t\t\t\twrongCode.removeClass('hide');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents(modalContainer) {\n\t\t\tthis.registerSubmitFrom(modalContainer);\n\t\t\tApp.Fields.Text.registerCopyClipboard(modalContainer, '.js-clipboard');\n\t\t}\n\t}\n);\n"],"names":["$","Class","registerSubmitFrom","data","find","prop","on","e","keyCode","currentTarget","val","length","addClass","removeClass","form","progressIndicator","blockInfo","enabled","AppConnector","request","serializeFormData","done","response","result","success","app","hideModalWindow","showNotify","text","message","type","animation","getModuleName","location","reload","wrongCode","hasClass","progress","mode","preventDefault","registerEvents","modalContainer","App","Fields","Text","registerCopyClipboard"],"mappings":";;AAAA,kKACA,YAAA,CAEAA,CAAC,CAACC,KAAF,CACC,sCADD,CAEC,EAFD,CAGC;AAED;AACA;AACA,KACEC,kBALD,CAKoBC,SAAAA,kBAAAA,CAAAA,IALpB,CAK0B,CACxBA,IAAI,CAACC,IAAL,CAAU,yBAAV,CAAA,CAAqCC,IAArC,CAA0C,UAA1C,IADwB,CAExBF,IAAI,CAACC,IAAL,CAAU,uBAAV,CAAA,CAAmCE,EAAnC,CAAsC,OAAtC,CAA+C,SAACC,CAAD,CAAO,CACnC,EAAd,GAAAA,CAAC,CAACC,OAD+C,EAEpDL,IAAI,CAACC,IAAL,CAAU,yBAAV,CAAA,CAAqCC,IAArC,CAA0C,UAA1C,CAA0F,CAApC,GAAAL,CAAC,CAACO,CAAC,CAACE,aAAH,CAAD,CAAmBC,GAAnB,EAAyBC,CAAAA,MAA/E,EAED,CAJD,CAFwB,CAOxBR,IAAI,CAACC,IAAL,CAAU,uBAAV,CAAmCE,CAAAA,EAAnC,CAAsC,QAAtC,CAAgD,SAACC,CAAD,CAAO,CACtDJ,IAAI,CAACC,IAAL,CAAU,yBAAV,EAAqCC,IAArC,CAA0C,UAA1C,CAA0F,CAApC,GAAAL,CAAC,CAACO,CAAC,CAACE,aAAH,CAAD,CAAmBC,GAAnB,EAAyBC,CAAAA,MAA/E,EACA,CAFD,CAPwB,CAUxBR,IAAI,CAACC,IAAL,CAAU,0BAAV,CAAsCE,CAAAA,EAAtC,CAAyC,QAAzC,CAAmD,SAACC,CAAD,CAAO,CACrDP,CAAC,CAACO,CAAC,CAACE,aAAH,CAAD,CAAmBJ,IAAnB,CAAwB,SAAxB,CADqD,EAExDF,IAAI,CAACC,IAAL,CAAU,2BAAV,EAAuCQ,QAAvC,CAAgD,MAAhD,CAFwD,CAGxDT,IAAI,CAACC,IAAL,CAAU,kBAAV,EAA8BM,GAA9B,CAAkC,KAAlC,CAHwD,CAIxDP,IAAI,CAACC,IAAL,CAAU,yBAAV,EAAqCC,IAArC,CAA0C,UAA1C,CAJwD,CAAA,CAAA,CAAA,GAMxDF,IAAI,CAACC,IAAL,CAAU,2BAAV,CAAA,CAAuCS,WAAvC,CAAmD,MAAnD,CANwD,CAOxDV,IAAI,CAACC,IAAL,CAAU,kBAAV,CAAA,CAA8BM,GAA9B,CAAkC,QAAlC,CAPwD,CAQxDP,IAAI,CAACC,IAAL,CAAU,yBAAV,CAAA,CAAqCC,IAArC,CAA0C,UAA1C,IARwD,CASxDF,IAAI,CAACC,IAAL,CAAU,uBAAV,CAAA,CAAmCM,GAAnC,CAAuC,EAAvC,CATwD,EAWzD,CAXD,CAVwB,CAsBxB,IAAQ,IAAA,CAAGP,IAAI,CAACC,IAAL,CAAU,MAAV,CAAX,CACAU,IAAI,CAACR,EAAL,CAAQ,QAAR,CAAkB,SAACC,CAAD,CAAO,CACxB,IAAY,QAAA,CAAGP,CAAC,CAACe,iBAAF,CAAoB,CAAEC,SAAS,CAAE,CAAEC,OAAO,CAAT,CAAA,CAAA,CAAb,CAApB,CAAf,CACAC,YAAY,CAACC,OAAb,CAAqBL,IAAI,CAACM,iBAAL,EAArB,EAA+CC,IAA/C,CAAoD,SAACC,QAAD,CAAc,CACjE,GAAIA,QAAQ,CAACC,MAAT,CAAgBC,OAApB,CACCC,GAAG,CAACC,eAAJ,EADD,CAECD,GAAG,CAACE,UAAJ,CAAe,CACdC,IAAI,CAAEN,QAAQ,CAACC,MAAT,CAAgBM,OADR,CAEdC,IAAI,CAAE,SAFQ,CAGdC,SAAS,CAAE,MAHG,CAAf,CAFD,CAO6B,OAAxB,GAAAN,GAAG,CAACO,aAAJ,EAPL,EAQEC,QAAQ,CAACC,MAAT,EARF,MAUO,CACN,IAAa,SAAA,CAAGpB,IAAI,CAACV,IAAL,CAAU,gBAAV,CAAhB,CACI+B,SAAS,CAACC,QAAV,CAAmB,MAAnB,CAFE,EAGLD,SAAS,CAACtB,WAAV,CAAsB,MAAtB,EAED,CACDwB,QAAQ,CAACtB,iBAAT,CAA2B,CAAEuB,IAAI,CAAE,MAAR,CAA3B,EACA,CAlBD,CAFwB,CAqBxB/B,CAAC,CAACgC,cAAF,GACA,CAtBD,EAuBA,CAnDF;AAqDD;AACA;AACA,KACEC,cAxDD,CAwDgBC,SAAAA,cAAAA,CAAAA,cAxDhB,CAwDgC,CAC9B,KAAKvC,kBAAL,CAAwBuC,cAAxB,CAD8B,CAE9BC,GAAG,CAACC,MAAJ,CAAWC,IAAX,CAAgBC,qBAAhB,CAAsCJ,cAAtC,CAAsD,eAAtD,EACA,CA3DF,CAHD;;"}