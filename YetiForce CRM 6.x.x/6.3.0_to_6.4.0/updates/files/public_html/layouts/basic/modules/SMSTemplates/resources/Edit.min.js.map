{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'SMSTemplates_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Load variables panel\n\t\t * @param {jQuery} form\n\t\t */\n\t\tloadVariablePanel: function (form) {\n\t\t\tlet panel = form.find('#variablePanel');\n\t\t\tlet targetModule = form.find('[name=\"target\"]').val();\n\t\t\tif (!targetModule) {\n\t\t\t\tpanel.html('');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tpanel.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'SMSTemplates',\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\tview: 'VariablePanel',\n\t\t\t\ttype: 'sms',\n\t\t\t\tselectedModule: targetModule\n\t\t\t})\n\t\t\t\t.done((response) => {\n\t\t\t\t\tpanel.html(response);\n\t\t\t\t\tthis.afterLoadVariablePanel(panel);\n\t\t\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(panel);\n\t\t\t\t})\n\t\t\t\t.fail(() => {\n\t\t\t\t\tpanel.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Events after load variables panel\n\t\t * @param {jQuery} html\n\t\t */\n\t\tafterLoadVariablePanel: function (html) {\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(html.find('select.select2'));\n\t\t\tApp.Fields.Text.registerCopyClipboard(html);\n\t\t},\n\t\t/**\n\t\t * Register variables panel events\n\t\t * @param {jQuery} form\n\t\t */\n\t\tregisterVariablePanelEvent: function (form) {\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tform\n\t\t\t\t.find('[name=\"message\"]')\n\t\t\t\t.closest('.js-block-content')\n\t\t\t\t.prepend('<div id=\"variablePanel\" class=\"row px-0 borderBottom bc-gray-lighter mt-n1\"></div>');\n\t\t\tthis.loadVariablePanel(form);\n\t\t\tform.find('[name=\"target\"]').on('change', () => {\n\t\t\t\tthis.loadVariablePanel(form);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register basic events\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterBasicEvents: function (container) {\n\t\t\tthis._super(container);\n\t\t\tthis.registerVariablePanelEvent(container);\n\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(container);\n\t\t\tApp.Tools.VariablesPanel.refreshCompanyVariables(container);\n\t\t\tnew App.Fields.Text.Completions(container.find('[name=\"message\"]'), {\n\t\t\t\tcompletionsCollection: { emojis: true },\n\t\t\t\tautolink: false\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","loadVariablePanel","form","panel","find","targetModule","val","progressIndicator","AppConnector","request","module","record","app","getRecordId","view","type","selectedModule","done","response","html","afterLoadVariablePanel","App","Tools","VariablesPanel","registerRefreshCompanyVariables","fail","mode","Fields","Picklist","showSelect2ElementView","Text","registerCopyClipboard","registerVariablePanelEvent","getForm","closest","prepend","on","registerBasicEvents","container","_super","refreshCompanyVariables","Completions","completionsCollection","emojis","autolink"],"mappings":";;AAAA,kKACA,aAEAA,cAAc,CACb,sBADa,CAEb,EAFa,CAGb;AAED;AACA;AACA,KACEC,iBAAiB,CAAE,SAAA,iBAAA,CAAUC,IAAV,CAAgB,CAC9BC,IAAAA,KAAAA,CAAAA,IAAAA,CAAAA,KAAK,CAAGD,IAAI,CAACE,IAAL,CAAU,gBAAV,CADsB,CAE9BC,YAAY,CAAGH,IAAI,CAACE,IAAL,CAAU,mBAAV,CAA6BE,CAAAA,GAA7B,EAFe,CAAA,OAAA,YAAA,CAAA,KAQlCH,KAAK,CAACI,iBAAN,EARkC,CASlCC,YAAY,CAACC,OAAb,CAAqB,CACpBC,MAAM,CAAE,cADY,CAEpBC,MAAM,CAAEC,GAAG,CAACC,WAAJ,EAFY,CAGpBC,IAAI,CAAE,eAHc,CAIpBC,IAAI,CAAE,KAJc,CAKpBC,cAAc,CAAEX,YALI,CAArB,CAAA,CAOEY,IAPF,CAOO,SAACC,QAAD,CAAc,CACnBf,KAAK,CAACgB,IAAN,CAAWD,QAAX,CADmB,CAEnB,KAAI,CAACE,sBAAL,CAA4BjB,KAA5B,CAFmB,CAGnBkB,GAAG,CAACC,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDrB,KAAzD,EACA,CAXF,CAYEsB,CAAAA,IAZF,CAYO,UAAM,CACXtB,KAAK,CAACI,iBAAN,CAAwB,CAAEmB,IAAI,CAAE,MAAR,CAAxB,EACA,CAdF,CATkC,CAAA,EAIjCvB,KAAK,CAACgB,IAAN,CAAW,EAAX,CAJiC,CAwBlC,CAAA,CAAA,CAAA,CA7BF;AA+BD;AACA;AACA,KACEC,sBAAsB,CAAE,SAAUD,sBAAAA,CAAAA,IAAV,CAAgB,CACvCE,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CV,IAAI,CAACf,IAAL,CAAU,gBAAV,CAA3C,CADuC,CAEvCiB,GAAG,CAACM,MAAJ,CAAWG,IAAX,CAAgBC,qBAAhB,CAAsCZ,IAAtC,EACA,CArCF;AAuCD;AACA;AACA,KACEa,0BAA0B,CAAE,SAAA,0BAAA,CAAU9B,IAAV,CAAgB,CACvB,IAAA,MAAA,CAAA,IAAA,CAAA,WAAhB,EAAOA,OAAAA,IADgC,GAE1CA,IAAI,CAAG,IAAA,CAAK+B,OAAL,EAFmC,CAI3C/B,CAAAA,IAAI,CACFE,IADF,CACO,oBADP,CAEE8B,CAAAA,OAFF,CAEU,mBAFV,CAGEC,CAAAA,OAHF,CAGU,wFAHV,CAJ2C,CAQ3C,IAAA,CAAKlC,iBAAL,CAAuBC,IAAvB,CAR2C,CAS3CA,IAAI,CAACE,IAAL,CAAU,mBAAV,CAA6BgC,CAAAA,EAA7B,CAAgC,QAAhC,CAA0C,UAAM,CAC/C,MAAI,CAACnC,iBAAL,CAAuBC,IAAvB,EACA,CAFD,EAGA,CAtDF;AAwDD;AACA;AACA,KACEmC,mBAAmB,CAAE,SAAUC,mBAAAA,CAAAA,SAAV,CAAqB,CACzC,IAAA,CAAKC,MAAL,CAAYD,SAAZ,CADyC,CAEzC,IAAA,CAAKN,0BAAL,CAAgCM,SAAhC,CAFyC,CAGzCjB,GAAG,CAACC,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDc,SAAzD,CAHyC,CAIzCjB,GAAG,CAACC,KAAJ,CAAUC,cAAV,CAAyBiB,uBAAzB,CAAiDF,SAAjD,CAJyC,CAKzC,OAAO,CAACX,MAAJ,CAAWG,IAAX,CAAgBW,WAApB,CAAgCH,SAAS,CAAClC,IAAV,CAAe,oBAAf,CAAhC,CAAoE,CACnEsC,qBAAqB,CAAE,CAAEC,MAAM,CAAA,CAAA,CAAR,CAD4C,CAEnEC,QAAQ,CAF2D,CAAA,CAAA,CAApE,EAIA,CApEF,CAHa;;"}