{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'EmailTemplates_Edit_Js',\n\t{},\n\t{\n\t\tloadVariablePanel: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tvar panel = form.find('#variablePanel');\n\t\t\tpanel.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'EmailTemplates',\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\tview: 'VariablePanel',\n\t\t\t\ttype: 'mail',\n\t\t\t\tselectedModule: form.find('[name=\"module_name\"]').val()\n\t\t\t})\n\t\t\t\t.done(function (response) {\n\t\t\t\t\tpanel.html(response);\n\t\t\t\t\tthisInstance.afterLoadVariablePanel(panel);\n\t\t\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(panel);\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tpanel.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\tafterLoadVariablePanel: function (html) {\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(html.find('select.select2'));\n\t\t\tApp.Fields.Text.registerCopyClipboard(html);\n\t\t},\n\t\tregisterVariablePanelEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tform\n\t\t\t\t.find('.js-toggle-panel[data-label=\"LBL_CONTENT_MAIL\"] .blockContent')\n\t\t\t\t.prepend('<div id=\"variablePanel\" class=\"row px-0 borderBottom bc-gray-lighter mt-n1\"></div>');\n\t\t\tthisInstance.loadVariablePanel(form);\n\t\t\tform.find('[name=\"module_name\"]').on('change', function () {\n\t\t\t\tthisInstance.loadVariablePanel(form);\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function (container) {\n\t\t\tthis._super(container);\n\t\t\tthis.registerVariablePanelEvent(container);\n\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(container);\n\t\t\tApp.Tools.VariablesPanel.refreshCompanyVariables(container);\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","loadVariablePanel","form","thisInstance","getForm","panel","find","progressIndicator","AppConnector","request","module","record","app","getRecordId","view","type","selectedModule","val","done","response","html","afterLoadVariablePanel","App","Tools","VariablesPanel","registerRefreshCompanyVariables","fail","mode","Fields","Picklist","showSelect2ElementView","Text","registerCopyClipboard","registerVariablePanelEvent","prepend","on","registerBasicEvents","container","_super","refreshCompanyVariables"],"mappings":";;AAAA,kKACA,YAEAA,CAAAA,cAAc,CACb,wBADa,CAEb,EAFa,CAGb,CACCC,iBAAiB,CAAE,SAAUC,iBAAAA,CAAAA,IAAV,CAAgB,CAClC,IAAIC,YAAY,CAAG,IAAnB,CACoB,WAAhB,EAAOD,OAAAA,IAFuB,GAGjCA,IAAI,CAAG,IAAA,CAAKE,OAAL,EAH0B,EAKlC,IAAIC,KAAK,CAAGH,IAAI,CAACI,IAAL,CAAU,gBAAV,CAAZ,CACAD,KAAK,CAACE,iBAAN,EANkC,CAOlCC,YAAY,CAACC,OAAb,CAAqB,CACpBC,MAAM,CAAE,gBADY,CAEpBC,MAAM,CAAEC,GAAG,CAACC,WAAJ,EAFY,CAGpBC,IAAI,CAAE,eAHc,CAIpBC,IAAI,CAAE,MAJc,CAKpBC,cAAc,CAAEd,IAAI,CAACI,IAAL,CAAU,wBAAV,CAAkCW,CAAAA,GAAlC,EALI,CAArB,EAOEC,IAPF,CAOO,SAAUC,QAAV,CAAoB,CACzBd,KAAK,CAACe,IAAN,CAAWD,QAAX,CADyB,CAEzBhB,YAAY,CAACkB,sBAAb,CAAoChB,KAApC,CAFyB,CAGzBiB,GAAG,CAACC,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDpB,KAAzD,EACA,CAXF,CAYEqB,CAAAA,IAZF,CAYO,UAAY,CACjBrB,KAAK,CAACE,iBAAN,CAAwB,CAAEoB,IAAI,CAAE,MAAR,CAAxB,EACA,CAdF,EAeA,CAvBF,CAwBCN,sBAAsB,CAAE,SAAA,sBAAA,CAAUD,IAAV,CAAgB,CACvCE,GAAG,CAACM,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CV,IAAI,CAACd,IAAL,CAAU,gBAAV,CAA3C,CADuC,CAEvCgB,GAAG,CAACM,MAAJ,CAAWG,IAAX,CAAgBC,qBAAhB,CAAsCZ,IAAtC,EACA,CA3BF,CA4BCa,0BAA0B,CAAE,SAAU/B,0BAAAA,CAAAA,IAAV,CAAgB,CAC3C,IAAIC,YAAY,CAAG,IAAnB,CACoB,WAAhB,EAAOD,OAAAA,IAFgC,GAG1CA,IAAI,CAAG,IAAKE,CAAAA,OAAL,EAHmC,CAAA,CAK3CF,IAAI,CACFI,IADF,CACO,iEADP,CAAA,CAEE4B,OAFF,CAEU,wFAFV,CAL2C,CAQ3C/B,YAAY,CAACF,iBAAb,CAA+BC,IAA/B,CAR2C,CAS3CA,IAAI,CAACI,IAAL,CAAU,wBAAV,CAAkC6B,CAAAA,EAAlC,CAAqC,QAArC,CAA+C,UAAY,CAC1DhC,YAAY,CAACF,iBAAb,CAA+BC,IAA/B,EACA,CAFD,EAGA,CAxCF,CAyCCkC,mBAAmB,CAAE,SAAUC,mBAAAA,CAAAA,SAAV,CAAqB,CACzC,KAAKC,MAAL,CAAYD,SAAZ,CADyC,CAEzC,IAAA,CAAKJ,0BAAL,CAAgCI,SAAhC,CAFyC,CAGzCf,GAAG,CAACC,KAAJ,CAAUC,cAAV,CAAyBC,+BAAzB,CAAyDY,SAAzD,CAHyC,CAIzCf,GAAG,CAACC,KAAJ,CAAUC,cAAV,CAAyBe,uBAAzB,CAAiDF,SAAjD,EACA,CA9CF,CAHa;;"}