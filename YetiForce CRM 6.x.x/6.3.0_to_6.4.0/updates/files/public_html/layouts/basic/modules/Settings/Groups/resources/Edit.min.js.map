{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Groups_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register form for validation\n\t\t */\n\t\tregisterFormForValidation: function () {\n\t\t\tthis.getForm().validationEngine(app.getvalidationEngineOptions(true));\n\t\t},\n\n\t\t/**\n\t\t * Function to register the submit event of form\n\t\t */\n\t\tregisterSubmitEvent: function () {\n\t\t\tlet form = this.getForm();\n\t\t\tform.on('submit', (e) => {\n\t\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\tthis.validate(formData)\n\t\t\t\t\t\t\t.done(function (_) {\n\t\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data['message'], type: 'error' });\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Group Names\n\t\t * returns boolean true or false\n\t\t */\n\t\tvalidate: function (params) {\n\t\t\tconst aDeferred = jQuery.Deferred();\n\t\t\tparams.mode = 'preSaveValidation';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Register events for section \"modules\"\n\t\t */\n\t\tregisterButtonsModule: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function (e) {\n\t\t\t\teditViewForm\n\t\t\t\t\t.find('[name=\"modules[]\"] option')\n\t\t\t\t\t.prop('selected', $(this).hasClass('js-modules-select-all'))\n\t\t\t\t\t.parent()\n\t\t\t\t\t.trigger('change');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will handle the registrations for the elements\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerButtonsModule();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","registerFormForValidation","getForm","validationEngine","app","getvalidationEngineOptions","registerSubmitEvent","form","on","e","data","progressLoader","$","progressIndicator","message","vtranslate","position","blockInfo","enabled","InvalidFields","length","serializeFormData","validate","formData","done","submit","fail","Settings_Vtiger_Index_Js","showMessage","text","type","removeData","formAlignmentAfterValidation","preventDefault","params","aDeferred","jQuery","Deferred","mode","AppConnector","request","response","result","success","reject","resolve","error","err","promise","registerButtonsModule","editViewForm","find","prop","hasClass","parent","trigger","registerEvents","_super"],"mappings":"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"}