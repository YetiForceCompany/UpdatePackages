{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_MappedFields_Edit_Js',\n\t{\n\t\tinstance: {}\n\t},\n\t{\n\t\tcurrentInstance: false,\n\t\teditContainer: false,\n\t\tinit: function () {\n\t\t\tthis.initiate();\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the workflow elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.editContainer;\n\t\t},\n\t\t/**\n\t\t * Function to set the reports container\n\t\t * @params : element - which represents the workflow container\n\t\t * @return : current instance\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.editContainer = element;\n\t\t\treturn this;\n\t\t},\n\t\t/*\n\t\t * Function to return the instance based on the step of the Workflow\n\t\t */\n\t\tgetInstance: function (step) {\n\t\t\tif (step in Settings_MappedFields_Edit_Js.instance) {\n\t\t\t\treturn Settings_MappedFields_Edit_Js.instance[step];\n\t\t\t} else {\n\t\t\t\tvar moduleClassName = 'Settings_MappedFields_Edit' + step + '_Js';\n\t\t\t\tSettings_MappedFields_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\t\treturn Settings_MappedFields_Edit_Js.instance[step];\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * Function to get the value of the step\n\t\t * returns 1 or 2 or 3\n\t\t */\n\t\tgetStepValue: function () {\n\t\t\tvar container = this.currentInstance.getContainer();\n\t\t\treturn jQuery('.step', container).val();\n\t\t},\n\t\t/*\n\t\t * Function to initiate the step 1 instance\n\t\t */\n\t\tinitiate: function (container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.mfTemplateContents');\n\t\t\t}\n\t\t\tif (container.is('.mfTemplateContents')) {\n\t\t\t\tthis.setContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setContainer(jQuery('.mfTemplateContents', container));\n\t\t\t}\n\t\t\tthis.initiateStep('1');\n\t\t\tthis.currentInstance.registerEvents();\n\t\t},\n\t\t/*\n\t\t * Function to initiate all the operations for a step\n\t\t * @params step value\n\t\t */\n\t\tinitiateStep: function (stepVal) {\n\t\t\tvar step = 'step' + stepVal;\n\t\t\tthis.activateHeader(step);\n\t\t\tthis.currentInstance = this.getInstance(stepVal);\n\t\t},\n\t\t/*\n\t\t * Function to activate the header based on the class\n\t\t * @params class name\n\t\t */\n\t\tactivateHeader: function (step) {\n\t\t\tvar headersContainer = jQuery('.crumbs ');\n\t\t\theadersContainer.find('.active').removeClass('active');\n\t\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t\t},\n\t\t/*\n\t\t * Function to register the click event for next button\n\t\t */\n\t\tregisterFormSubmitEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\t\tvar specialValidation = true;\n\t\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t\t}\n\t\t\t\t\tif (form.validationEngine('validate') && specialValidation) {\n\t\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tthisInstance.getContainer().append(data);\n\t\t\t\t\t\t\t\tvar stepVal = thisInstance.getStepValue();\n\t\t\t\t\t\t\t\tvar nextStepVal = parseInt(stepVal) + 1;\n\t\t\t\t\t\t\t\tthisInstance.initiateStep(nextStepVal);\n\t\t\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\t\t\tvar container = thisInstance.currentInstance.getContainer();\n\t\t\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(container);\n\t\t\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tback: function () {\n\t\t\tvar step = this.getStepValue();\n\t\t\tvar prevStep = parseInt(step) - 1;\n\t\t\tthis.currentInstance.initialize();\n\t\t\tvar container = this.currentInstance.getContainer();\n\t\t\tvar mfRecordElement = jQuery('[name=\"record\"]', container);\n\t\t\tvar mfId = mfRecordElement.val();\n\t\t\tcontainer.remove();\n\t\t\tthis.initiateStep(prevStep);\n\t\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\t\tcurrentContainer.show();\n\t\t\tjQuery('[name=\"record\"]', currentContainer).val(mfId);\n\t\t},\n\t\tregisterCancelStepClickEvent: function (form) {\n\t\t\tjQuery('button.cancelLink', form).on('click', function () {\n\t\t\t\twindow.history.back();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the click event for back step\n\t\t */\n\t\tregisterBackStepClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\t\tthisInstance.back();\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar form = this.currentInstance.getContainer();\n\t\t\tthis.registerFormSubmitEvent(form);\n\t\t\tthis.registerBackStepClickEvent();\n\t\t\tthis.registerCancelStepClickEvent(form);\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","instance","currentInstance","editContainer","init","initiate","getContainer","setContainer","element","getInstance","step","Settings_MappedFields_Edit_Js","getStepValue","jQuery","container","val","is","initiateStep","registerEvents","stepVal","activateHeader","headersContainer","find","removeClass","addClass","registerFormSubmitEvent","form","thisInstance","isFunction","submit","on","e","currentTarget","specialValidation","isFormValidate","validationEngine","done","data","append","nextStepVal","parseInt","initialize","preventDefault","back","prevStep","mfRecordElement","mfId","remove","currentContainer","show","registerCancelStepClickEvent","window","history","registerBackStepClickEvent"],"mappings":"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"}