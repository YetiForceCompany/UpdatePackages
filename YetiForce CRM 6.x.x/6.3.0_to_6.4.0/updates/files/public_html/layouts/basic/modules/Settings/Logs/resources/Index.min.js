'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";Settings_Vtiger_Index_Js("Settings_Logs_Index_Js",{getWarningsList:function getWarningsList(){var thisInstance=this,container=$(".js-warnings-content"),progressIndicator=$.progressIndicator({message:app.vtranslate("JS_LOADING_OF_RECORDS"),blockInfo:{enabled:!0}});AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),view:app.getViewName(),mode:"getWarningsList",active:$(".js-warnings-index-page .js-switch--warnings").first().is(":checked"),folder:thisInstance.getSelectedFolders()}).done(function(data){container.html(data),thisInstance.registerWarningsList(container),progressIndicator.progressIndicator({mode:"hide"});}).fail(function(){progressIndicator.progressIndicator({mode:"hide"});});},registerWarningsList:function registerWarningsList(container){var _this=this;container.find("table").dataTable({order:[[2,"desc"],[1,"asc"]],lengthMenu:[20,40,60,80,100],pageLength:20}),container.find(".js-show-description").on("click",function(e){app.showModalWindow($(e.currentTarget).closest("td").find(".js-show-description-content").html());}),container.find(".setIgnore").on("click",function(e){container.find(".js-popover-tooltip").popover("hide");var data=$(e.currentTarget).closest("tr").data();AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SystemWarnings",mode:"update",id:data.id,params:data.status}).done(function(){_this.getWarningsList(container);});});},registerWarningsFolders:function registerWarningsFolders(container){var thisInstance=this,data=[],treeValues=container.find(".js-tree-values").val();treeValues&&(data=JSON.parse(treeValues)),container.find("#jstreeContainer").jstree({core:{data:data,themes:{name:"proton",responsive:!0,icons:!1},check_callback:!0},plugins:["checkbox"]}).on("loaded.jstree",function(){$(this).jstree("open_all");}).on("changed.jstree",function(e,data){"model"!=data.action&&thisInstance.getWarningsList();}),$.extend($.fn.dataTable.defaults,{language:{sLengthMenu:app.vtranslate("JS_S_LENGTH_MENU"),sZeroRecords:app.vtranslate("JS_NO_RESULTS_FOUND"),sInfo:app.vtranslate("JS_S_INFO"),sInfoEmpty:app.vtranslate("JS_S_INFO_EMPTY"),sSearch:app.vtranslate("JS_SEARCH"),sEmptyTable:app.vtranslate("JS_NO_RESULTS_FOUND"),sInfoFiltered:app.vtranslate("JS_S_INFO_FILTERED"),sLoadingRecords:app.vtranslate("JS_LOADING_OF_RECORDS"),sProcessing:app.vtranslate("JS_LOADING_OF_RECORDS"),oPaginate:{sFirst:app.vtranslate("JS_S_FIRST"),sPrevious:app.vtranslate("JS_S_PREVIOUS"),sNext:app.vtranslate("JS_S_NEXT"),sLast:app.vtranslate("JS_S_LAST")},oAria:{sSortAscending:app.vtranslate("JS_S_SORT_ASCENDING"),sSortDescending:app.vtranslate("JS_S_SORT_DESCENDING")}}}),container.find(".js-switch--warnings").on("change",function(){thisInstance.getWarningsList();});},registerEventsLoadContent:function registerEventsLoadContent(thisInstance,mode,container){thisInstance.registerWarningsFolders(container);},reloadContent:function reloadContent(){$(".js-tabs li .active").trigger("click");},registerTabEvents:function registerTabEvents(){var thisInstance=this;$(".js-tabs li").on("click",function(){thisInstance.loadContent($(this).data("mode"),!1,$(this).data("params"));});},getSelectedFolders:function getSelectedFolders(){var selected=[];return $.each($("#jstreeContainer").jstree("get_selected",!0),function(index,value){selected.push(value.original.subPath);}),selected},loadContent:function loadContent(mode,page,modeParams){var thisInstance=this,container=$(".indexContainer"),params={mode:mode,module:app.getModuleName(),parent:app.getParentModuleName(),view:app.getViewName()};page&&(params.page=page),modeParams&&(params.params=modeParams);var progressIndicatorElement=$.progressIndicator({position:"html",blockInfo:{enabled:!0,elementToBlock:container}});AppConnector.request(params).done(function(data){progressIndicatorElement.progressIndicator({mode:"hide"}),container.html(data),thisInstance.registerEventsLoadContent(thisInstance,mode,container);});},/**
	 * Register events
	 */registerEvents:function registerEvents(){this.registerTabEvents(),this.reloadContent();}});
//# sourceMappingURL=Index.min.js.map
