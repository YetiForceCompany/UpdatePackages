{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Workflows_Edit_Js',\n\t{\n\t\tinstance: {}\n\t},\n\t{\n\t\tcurrentInstance: false,\n\t\tworkFlowsContainer: false,\n\t\tinit: function () {\n\t\t\tthis.initiate();\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the workflow elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.workFlowsContainer;\n\t\t},\n\t\t/**\n\t\t * Function to set the reports container\n\t\t * @params : element - which represents the workflow container\n\t\t * @return : current instance\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.workFlowsContainer = element;\n\t\t\treturn this;\n\t\t},\n\t\t/*\n\t\t * Function to return the instance based on the step of the Workflow\n\t\t */\n\t\tgetInstance: function (step) {\n\t\t\tif (step in Settings_Workflows_Edit_Js.instance) {\n\t\t\t\treturn Settings_Workflows_Edit_Js.instance[step];\n\t\t\t} else {\n\t\t\t\tvar moduleClassName = 'Settings_Workflows_Edit' + step + '_Js';\n\t\t\t\tSettings_Workflows_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\t\treturn Settings_Workflows_Edit_Js.instance[step];\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * Function to get the value of the step\n\t\t * returns 1 or 2 or 3\n\t\t */\n\t\tgetStepValue: function () {\n\t\t\tvar container = this.currentInstance.getContainer();\n\t\t\treturn jQuery('.step', container).val();\n\t\t},\n\t\t/*\n\t\t * Function to initiate the step 1 instance\n\t\t */\n\t\tinitiate: function (container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.workFlowContents');\n\t\t\t}\n\t\t\tif (container.is('.workFlowContents')) {\n\t\t\t\tthis.setContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setContainer(jQuery('.workFlowContents', container));\n\t\t\t}\n\t\t\tthis.initiateStep('1');\n\t\t\tthis.currentInstance.registerEvents();\n\t\t},\n\t\t/*\n\t\t * Function to initiate all the operations for a step\n\t\t * @params step value\n\t\t */\n\t\tinitiateStep: function (stepVal) {\n\t\t\tvar step = 'step' + stepVal;\n\t\t\tthis.activateHeader(step);\n\t\t\tvar currentInstance = this.getInstance(stepVal);\n\t\t\tthis.currentInstance = currentInstance;\n\t\t},\n\t\t/*\n\t\t * Function to activate the header based on the class\n\t\t * @params class name\n\t\t */\n\t\tactivateHeader: function (step) {\n\t\t\tvar headersContainer = jQuery('.crumbs ');\n\t\t\theadersContainer.find('.active').removeClass('active');\n\t\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t\t},\n\t\t/*\n\t\t * Function to register the click event for next button\n\t\t */\n\t\tregisterFormSubmitEvent: function (form) {\n\t\t\tconst thisInstance = this;\n\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\tlet specialValidation = true;\n\t\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t\t}\n\t\t\t\t\tif (jQuery(e.currentTarget).validationEngine('validate') && specialValidation) {\n\t\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\t\tthisInstance.getContainer().append(data);\n\t\t\t\t\t\t\tthisInstance.initiateStep(parseInt(thisInstance.getStepValue()) + 1);\n\t\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(thisInstance.currentInstance.getContainer());\n\t\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tback: function () {\n\t\t\tvar step = this.getStepValue();\n\t\t\tvar prevStep = parseInt(step) - 1;\n\t\t\tthis.currentInstance.initialize();\n\t\t\tvar container = this.currentInstance.getContainer();\n\t\t\tvar workflowRecordElement = jQuery('[name=\"record\"]', container);\n\t\t\tvar workFlowId = workflowRecordElement.val();\n\t\t\tcontainer.remove();\n\t\t\tthis.initiateStep(prevStep);\n\t\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\t\tcurrentContainer.show();\n\t\t\tjQuery('[name=\"record\"]', currentContainer).val(workFlowId);\n\t\t\tvar modulesList = jQuery('#moduleName', currentContainer);\n\t\t\tif (modulesList.length > 0 && workFlowId != '') {\n\t\t\t\tmodulesList.attr('disabled', 'disabled').trigger('change');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Get popup with value\n\t\t * @param container\n\t\t */\n\t\tgetPopUp(container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = this.getContainer();\n\t\t\t}\n\t\t\tcontainer.on('click', '.getPopupUi', (e) => {\n\t\t\t\tif (container.find('[name=\"execution_condition\"]').val() == 6) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst fieldValueElement = jQuery(e.currentTarget);\n\t\t\t\tconst fieldValue = fieldValueElement.val();\n\t\t\t\tconst fieldUiHolder = fieldValueElement.closest('.fieldUiHolder');\n\t\t\t\tlet valueType = fieldUiHolder.find('[name=\"valuetype\"]').val();\n\t\t\t\tif (valueType === '') {\n\t\t\t\t\tvalueType = 'rawtext';\n\t\t\t\t}\n\t\t\t\tconst conditionsContainer = fieldValueElement.closest('.js-conditions-container');\n\t\t\t\tconst conditionRow = fieldValueElement.closest('.js-conditions-row');\n\t\t\t\tvar clonedPopupUi = conditionsContainer\n\t\t\t\t\t.find('.popupUi')\n\t\t\t\t\t.clone(true, true)\n\t\t\t\t\t.removeClass('popupUi')\n\t\t\t\t\t.addClass('clonedPopupUi');\n\t\t\t\tclonedPopupUi.find('select').addClass('select2');\n\t\t\t\tclonedPopupUi.find('.fieldValue').val(fieldValue);\n\t\t\t\tlet value;\n\t\t\t\tif (fieldValueElement.hasClass('date')) {\n\t\t\t\t\tclonedPopupUi.find('.textType').find('option[value=\"rawtext\"]').attr('data-ui', 'input');\n\t\t\t\t\tconst dataFormat = fieldValueElement.data('date-format');\n\t\t\t\t\tif (valueType === 'rawtext') {\n\t\t\t\t\t\tvalue = fieldValueElement.val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = '';\n\t\t\t\t\t}\n\t\t\t\t\tconst clonedDateElement =\n\t\t\t\t\t\t'<input type=\"text\" class=\"dateField fieldValue col-md-4 form-control\" value=\"' +\n\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t'\" data-date-format=\"' +\n\t\t\t\t\t\tdataFormat +\n\t\t\t\t\t\t'\" data-input=\"true\" >';\n\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer').prepend(clonedDateElement);\n\t\t\t\t} else if (fieldValueElement.hasClass('time')) {\n\t\t\t\t\tclonedPopupUi.find('.textType').find('option[value=\"rawtext\"]').attr('data-ui', 'input');\n\t\t\t\t\tif (valueType === 'rawtext') {\n\t\t\t\t\t\tvalue = fieldValueElement.val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = '';\n\t\t\t\t\t}\n\t\t\t\t\tconst clonedTimeElement =\n\t\t\t\t\t\t'<input type=\"text\" class=\"timepicker-default fieldValue col-md-4 form-control\" value=\"' +\n\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t'\" data-input=\"true\" >';\n\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer').prepend(clonedTimeElement);\n\t\t\t\t} else if (fieldValueElement.hasClass('boolean')) {\n\t\t\t\t\tclonedPopupUi.find('.textType').find('option[value=\"rawtext\"]').attr('data-ui', 'input');\n\t\t\t\t\tif (valueType === 'rawtext') {\n\t\t\t\t\t\tvalue = fieldValueElement.val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = '';\n\t\t\t\t\t}\n\t\t\t\t\tconst clonedBooleanElement =\n\t\t\t\t\t\t'<input type=\"checkbox\" class=\"fieldValue col-md-4 form-control\" value=\"' + value + '\" data-input=\"true\" >';\n\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer').prepend(clonedBooleanElement);\n\t\t\t\t\tif (value === 'true:boolean' || value === '') {\n\t\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer input').attr('checked', 'checked');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclonedPopupUi.find('.fieldValueContainer input').removeAttr('checked');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconditionsContainer.find('.clonedPopUp').html(clonedPopupUi);\n\t\t\t\tconst clonedPopupElement = $('.clonedPopUp', conditionsContainer).find('.clonedPopupUi');\n\t\t\t\t$('.clonedPopupUi', conditionsContainer).on('shown.bs.modal', () => {\n\t\t\t\t\tconst data = $('.clonedPopupUi', conditionsContainer);\n\t\t\t\t\tdata.find('.clonedPopupUi').removeClass('d-none');\n\t\t\t\t\tconst moduleNameElement = conditionRow.find('[name=\"modulename\"]');\n\t\t\t\t\tif (moduleNameElement.length > 0) {\n\t\t\t\t\t\tconst moduleName = moduleNameElement.val();\n\t\t\t\t\t\tdata.find('.useFieldElement').addClass('d-none');\n\t\t\t\t\t\tdata.find('[name=\"' + moduleName + '\"]').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tApp.Fields.Picklist.changeSelectElementView(data);\n\t\t\t\t\tApp.Fields.Date.register(data);\n\t\t\t\t\tapp.registerEventForClockPicker(data);\n\t\t\t\t\tthis.postShowModalAction(data, valueType);\n\t\t\t\t\tthis.registerChangeFieldEvent(data);\n\t\t\t\t\tthis.registerSelectOptionEvent(data);\n\t\t\t\t\tthis.registerPopUpSaveEvent(data, fieldUiHolder);\n\t\t\t\t\tdata.find('.fieldValue').filter(':visible').trigger('focus');\n\t\t\t\t\tclonedPopupElement\n\t\t\t\t\t\t.find('[data-close-modal=\"modal\"], [data-dismiss=\"modal\"]')\n\t\t\t\t\t\t.off('click')\n\t\t\t\t\t\t.on('click', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t$(this).closest('.modal').removeClass('in').css('display', 'none');\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tclonedPopupElement.modal();\n\t\t\t});\n\t\t},\n\t\tregisterRemoveModalEvent: function (data) {\n\t\t\tdata.on('click', '.closeModal', function (e) {\n\t\t\t\tdata.modal('hide');\n\t\t\t});\n\t\t},\n\t\tregisterPopUpSaveEvent: function (data, fieldUiHolder) {\n\t\t\tjQuery('[name=\"saveButton\"]', data).on('click', function (e) {\n\t\t\t\tvar valueType = jQuery('.textType', data).val();\n\n\t\t\t\tfieldUiHolder.find('[name=\"valuetype\"]').val(valueType);\n\t\t\t\tvar fieldValueElement = fieldUiHolder.find('.getPopupUi');\n\t\t\t\tif (valueType != 'rawtext') {\n\t\t\t\t\tfieldValueElement.removeAttr('data-validation-engine');\n\t\t\t\t\tfieldValueElement.removeClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]');\n\t\t\t\t} else {\n\t\t\t\t\tfieldValueElement.addClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]');\n\t\t\t\t\tfieldValueElement.attr(\n\t\t\t\t\t\t'data-validation-engine',\n\t\t\t\t\t\t'validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tvar fieldType = data.find('.fieldValue').filter(':visible').attr('type');\n\t\t\t\tvar fieldValue = data.find('.fieldValue').filter(':visible').val();\n\t\t\t\t//For checkbox field type, handling fieldValue\n\t\t\t\tif (fieldType == 'checkbox') {\n\t\t\t\t\tif (data.find('.fieldValue').filter(':visible').is(':checked')) {\n\t\t\t\t\t\tfieldValue = 'true:boolean';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfieldValue = 'false:boolean';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfieldValueElement.val(fieldValue);\n\t\t\t\tfieldValueElement.validationEngine('hide');\n\t\t\t\tdata.remove();\n\t\t\t});\n\t\t},\n\t\tregisterSelectOptionEvent: (data) => {\n\t\t\t$('.useField,.useFunction', data).on('change', (e) => {\n\t\t\t\tlet currentElement = $(e.currentTarget);\n\t\t\t\tlet newValue = currentElement.val();\n\t\t\t\tlet oldValue = data.find('.fieldValue').filter(':visible').val(),\n\t\t\t\t\tconcatenatedValue;\n\t\t\t\tif (currentElement.hasClass('useField')) {\n\t\t\t\t\tif (oldValue != '') {\n\t\t\t\t\t\tconcatenatedValue = oldValue + ' ' + newValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconcatenatedValue = newValue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconcatenatedValue = oldValue + newValue;\n\t\t\t\t}\n\t\t\t\tdata.find('.fieldValue').val(concatenatedValue);\n\t\t\t\tcurrentElement.val('').trigger('change.select2');\n\t\t\t});\n\t\t},\n\t\tregisterChangeFieldEvent: function (data) {\n\t\t\tjQuery('.textType', data).on('change', function (e) {\n\t\t\t\tvar valueType = jQuery(e.currentTarget).val();\n\t\t\t\tvar useFieldContainer = jQuery('.useFieldContainer', data);\n\t\t\t\tvar useFunctionContainer = jQuery('.useFunctionContainer', data);\n\t\t\t\tvar uiType = jQuery(e.currentTarget).find('option:selected').data('ui');\n\t\t\t\tjQuery('.fieldValue', data).hide();\n\t\t\t\tjQuery('[data-' + uiType + ']', data).show();\n\t\t\t\tif (valueType == 'fieldname') {\n\t\t\t\t\tuseFieldContainer.removeClass('d-none');\n\t\t\t\t\tuseFunctionContainer.addClass('d-none');\n\t\t\t\t} else if (valueType == 'expression') {\n\t\t\t\t\tuseFieldContainer.removeClass('d-none');\n\t\t\t\t\tuseFunctionContainer.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tuseFieldContainer.addClass('d-none');\n\t\t\t\t\tuseFunctionContainer.addClass('d-none');\n\t\t\t\t}\n\t\t\t\tjQuery('.helpmessagebox', data).addClass('d-none');\n\t\t\t\tjQuery('#' + valueType + '_help', data).removeClass('d-none');\n\t\t\t\tdata.find('.fieldValue').val('');\n\t\t\t});\n\t\t},\n\t\tpostShowModalAction: function (data, valueType) {\n\t\t\tif (valueType == 'fieldname') {\n\t\t\t\tjQuery('.useFieldContainer', data).removeClass('d-none');\n\t\t\t\tjQuery('.textType', data).val(valueType).trigger('change');\n\t\t\t} else if (valueType == 'expression') {\n\t\t\t\tjQuery('.useFieldContainer', data).removeClass('d-none');\n\t\t\t\tjQuery('.useFunctionContainer', data).removeClass('d-none');\n\t\t\t\tjQuery('.textType', data).val(valueType).trigger('change');\n\t\t\t}\n\t\t\tjQuery('#' + valueType + '_help', data).removeClass('d-none');\n\t\t\tvar uiType = jQuery('.textType', data).find('option:selected').data('ui');\n\t\t\tjQuery('.fieldValue', data).hide();\n\t\t\tjQuery('[data-' + uiType + ']', data).show();\n\t\t},\n\t\t/*\n\t\t * Function to register the click event for back step\n\t\t */\n\t\tregisterBackStepClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\t\tthisInstance.back();\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar form = this.currentInstance.getContainer();\n\t\t\tthis.registerFormSubmitEvent(form);\n\t\t\tthis.registerBackStepClickEvent();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","instance","currentInstance","workFlowsContainer","init","initiate","getContainer","setContainer","element","getInstance","step","Settings_Workflows_Edit_Js","getStepValue","jQuery","container","val","is","initiateStep","registerEvents","stepVal","activateHeader","headersContainer","find","removeClass","addClass","registerFormSubmitEvent","form","thisInstance","isFunction","submit","on","e","isFormValidate","specialValidation","currentTarget","validationEngine","done","data","append","parseInt","initialize","preventDefault","back","prevStep","workflowRecordElement","workFlowId","remove","currentContainer","show","modulesList","length","attr","trigger","getPopUp","fieldValueElement","fieldValue","fieldUiHolder","closest","valueType","conditionsContainer","conditionRow","clonedPopupUi","clone","hasClass","value","clonedDateElement","dataFormat","prepend","clonedTimeElement","clonedBooleanElement","removeAttr","html","$","moduleNameElement","moduleName","App","Fields","Picklist","changeSelectElementView","Date","register","app","registerEventForClockPicker","postShowModalAction","registerChangeFieldEvent","registerSelectOptionEvent","registerPopUpSaveEvent","filter","clonedPopupElement","off","stopPropagation","css","modal","registerRemoveModalEvent","fieldType","currentElement","newValue","oldValue","concatenatedValue","useFieldContainer","useFunctionContainer","uiType","hide","registerBackStepClickEvent"],"mappings":"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"}