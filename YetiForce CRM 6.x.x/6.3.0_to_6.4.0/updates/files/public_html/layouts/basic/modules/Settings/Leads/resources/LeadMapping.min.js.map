{"version":3,"file":"LeadMapping.min.js","sources":["LeadMapping.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Settings_LeadMapping_Js',\n\t{\n\t\t/**\n\t\t * Function to register event to edit leads mapping\n\t\t */\n\t\ttriggerEdit: function (editUrl) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tAppConnector.request(editUrl)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar leadMappingInstance = new Settings_LeadMapping_Js();\n\t\t\t\t\tleadMappingInstance.registerEventsForEditView();\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for delete lead mapping\n\t\t */\n\t\ttriggerDelete: function (event, url) {\n\t\t\tvar element = jQuery(event.currentTarget);\n\t\t\tvar mappingContainer = element.closest('.listViewEntries');\n\t\t\tvar mappingId = mappingContainer.data('cfmid');\n\t\t\tvar deleteUrl = url + '&mappingId=' + mappingId;\n\t\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\t\tvar message = data.result[0];\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message\n\t\t\t\t};\n\t\t\t\tif (data.success) {\n\t\t\t\t\tmappingContainer.remove();\n\t\t\t\t} else {\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t}\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to register events for edit view of leads mapping\n\t\t */\n\t\tregisterEventsForEditView: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tvar select2Elements = form.find('.select2');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\tthis.registerEventForAddingNewMapping();\n\t\t\tthis.registerOnChangeEventForSourceModule();\n\t\t\tthis.registerEventToDeleteMapping();\n\t\t\tthis.registerEventForFormSubmit();\n\t\t\tthis.registerOnChangeEventOfTargetModule();\n\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2').trigger('change', false);\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for adding new convert to lead mapping\n\t\t */\n\t\tregisterEventForAddingNewMapping: function () {\n\t\t\tjQuery('#addMapping').on('click', function (e) {\n\t\t\t\tvar convertLeadMappingTable = jQuery('#convertLeadMapping');\n\t\t\t\tvar lastSequenceNumber = convertLeadMappingTable\n\t\t\t\t\t.find('tr:not(.newMapping):last[sequence-number]')\n\t\t\t\t\t.attr('sequence-number');\n\t\t\t\tvar newSequenceNumber = parseInt(lastSequenceNumber) + 1;\n\t\t\t\tvar newMapping = jQuery('.newMapping').clone(true, true);\n\t\t\t\tnewMapping.attr('sequence-number', newSequenceNumber);\n\t\t\t\tnewMapping.find('select.leadsFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][lead]');\n\t\t\t\tnewMapping.find('select.accountsFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][account]');\n\t\t\t\tnewMapping.find('select.contactFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][contact]');\n\t\t\t\tnewMapping.removeClass('d-none newMapping');\n\t\t\t\tnewMapping.appendTo(convertLeadMappingTable);\n\t\t\t\tnewMapping.find('.newSelect').removeClass('newSelect').addClass('select2');\n\t\t\t\tvar select2Elements = newMapping.find('.select2');\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2', newMapping).trigger('change', false);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register on change event for select2 element\n\t\t */\n\t\tregisterOnChangeEventForSourceModule: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('change', '.leadsFields', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar container = jQuery(element.closest('tr'));\n\t\t\t\tvar selectedValue = element.val();\n\t\t\t\tvar selectedOption = element.find('option[value=\"' + selectedValue + '\"]');\n\t\t\t\tvar selectedDataType = selectedOption.data('type');\n\t\t\t\tvar accountFieldsSelectElement = container.find('select.accountsFields.select2');\n\t\t\t\tvar contactFieldsSelectElement = container.find('select.contactFields.select2');\n\n\t\t\t\tvar accountFieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.accountsFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('[data-type=\"' + selectedDataType + '\"]')\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tvar contactFieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.contactFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('option[data-type=\"' + selectedDataType + '\"]')\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tselectedDataType = app.vtranslate('JS_' + selectedDataType);\n\t\t\t\tcontainer.find('.selectedFieldDataType').html(selectedDataType);\n\n\t\t\t\tvar noneValue = app.vtranslate('JS_NONE');\n\t\t\t\taccountFieldsSelectElement.html(accountFieldsBasedOnType);\n\t\t\t\tcontactFieldsSelectElement.html(contactFieldsBasedOnType);\n\n\t\t\t\tif (selectedDataType != 'None') {\n\t\t\t\t\taccountFieldsSelectElement.prepend(\n\t\t\t\t\t\t'<option data-type=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" label=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" value=\"0\" selected>' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t);\n\t\t\t\t\tcontactFieldsSelectElement.prepend(\n\t\t\t\t\t\t'<option data-type=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" label=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" value=\"0\" selected>' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\taccountFieldsSelectElement.trigger('change');\n\t\t\t\tcontactFieldsSelectElement.trigger('change');\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register event to delete mapping\n\t\t */\n\t\tregisterEventToDeleteMapping: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('click', '.deleteMapping', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar mappingContainer = element.closest('tr');\n\t\t\t\tvar mappingContainerSequenceNumber = mappingContainer.attr('sequence-number');\n\t\t\t\tvar deletableName = 'mapping[' + mappingContainerSequenceNumber + '][deletable]';\n\t\t\t\tmappingContainer.prepend('<input type=\"hidden\" name=\"' + deletableName + '\" />');\n\t\t\t\tmappingContainer.data('deletable', true).hide('slow');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: app.vtranslate('JS_MAPPING_DELETED_SUCCESSFULLY')\n\t\t\t\t};\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to handle edit view convert lead form submit\n\t\t */\n\t\tregisterEventForFormSubmit: function () {\n\t\t\tjQuery('#leadsMapping').on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar mappingDetails = jQuery(this).serializeFormData();\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'MappingSave',\n\t\t\t\t\tmapping: mappingDetails\n\t\t\t\t};\n\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\tvar detailViewParams = {\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\tview: 'MappingDetail'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tAppConnector.request(detailViewParams).done(function (data) {\n\t\t\t\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet notifyParams;\n\t\t\t\t\t\tif (!data.result.status) {\n\t\t\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_INVALID_MAPPING'),\n\t\t\t\t\t\t\t\ttext: data.result,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MAPPING_SAVED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.showNotify(notifyParams);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register on chnage event of target module\n\t\t */\n\t\tregisterOnChangeEventOfTargetModule: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('change', 'select.accountsFields.select2,select.contactFields.select2', function (e, executeChange) {\n\t\t\t\tif (typeof executeChange === 'undefined') {\n\t\t\t\t\texecuteChange = true;\n\t\t\t\t}\n\t\t\t\tvar selectElement = jQuery(e.currentTarget);\n\t\t\t\tvar selectedValue = selectElement.children().filter('option:selected').text();\n\t\t\t\tvar selectedOptionId = selectElement.children().filter('option:selected').val();\n\t\t\t\tvar mappingContainer = selectElement.closest('tr');\n\n\t\t\t\tvar duplicateOption = false;\n\t\t\t\tvar existingIdElement;\n\t\t\t\tif (selectedOptionId == '0') {\n\t\t\t\t\tselectedOptionId = 'false';\n\t\t\t\t}\n\n\t\t\t\tif (!executeChange || selectedOptionId == 'false') {\n\t\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//check for source module field\n\t\t\t\tvar sourceModuleSelect = mappingContainer.find('select.leadsFields.select2');\n\t\t\t\tvar sourceModuleSelectedField = sourceModuleSelect.val();\n\t\t\t\tvar sourceModuleSelectedFieldLabel = sourceModuleSelect\n\t\t\t\t\t.find('option[value=\"' + sourceModuleSelectedField + '\"]')\n\t\t\t\t\t.text();\n\t\t\t\tif (sourceModuleSelectedField == '0') {\n\t\t\t\t\tduplicateOption = true;\n\t\t\t\t\tvar errorParams = {\n\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\tapp.vtranslate('JS_CANT_MAP') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tselectedValue +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tapp.vtranslate('JS_WITH') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tsourceModuleSelectedFieldLabel,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(errorParams);\n\t\t\t\t}\n\n\t\t\t\tif (selectElement.hasClass('accountsFields')) {\n\t\t\t\t\texistingIdElement = jQuery('select.accountsFields.select2[selectedid=\"' + selectedOptionId + '\"]');\n\t\t\t\t} else {\n\t\t\t\t\texistingIdElement = jQuery('select.contactFields.select2[selectedid=\"' + selectedOptionId + '\"]');\n\t\t\t\t}\n\n\t\t\t\tif (existingIdElement.length > 0) {\n\t\t\t\t\tduplicateOption = true;\n\t\t\t\t}\n\n\t\t\t\tif (duplicateOption) {\n\t\t\t\t\tvar selectedFieldId = selectElement.attr('selectedid');\n\t\t\t\t\tif (selectedFieldId == 'false') {\n\t\t\t\t\t\tselectElement.attr('selectedId', 'false');\n\t\t\t\t\t} else if (selectedFieldId != 'false') {\n\t\t\t\t\t\tselectElement.attr('selectedId', selectedFieldId);\n\t\t\t\t\t}\n\t\t\t\t\tvar warningMessage = selectedValue + ' ' + app.vtranslate('JS_IS_ALREADY_BEEN_MAPPED');\n\t\t\t\t\tvar notificationParams = {\n\t\t\t\t\t\ttext: warningMessage,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(notificationParams);\n\t\t\t\t\tselectElement.val(0).trigger('change');\n\t\t\t\t} else {\n\t\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","triggerEdit","editUrl","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","AppConnector","request","done","data","detailContentsHolder","html","mode","leadMappingInstance","registerEventsForEditView","fail","promise","triggerDelete","event","url","currentTarget","mappingContainer","element","closest","mappingId","message","result","params","text","success","remove","Settings_Vtiger_Index_Js","showMessage","select2Elements","form","find","App","Fields","Picklist","showSelect2ElementView","registerEventForAddingNewMapping","registerOnChangeEventForSourceModule","registerEventToDeleteMapping","registerEventForFormSubmit","registerOnChangeEventOfTargetModule","trigger","on","lastSequenceNumber","convertLeadMappingTable","attr","newSequenceNumber","parseInt","newMapping","clone","removeClass","appendTo","addClass","e","container","selectedValue","val","selectedOption","selectedDataType","accountFieldsSelectElement","contactFieldsSelectElement","accountFieldsBasedOnType","children","filter","contactFieldsBasedOnType","app","vtranslate","prepend","noneValue","mappingContainerSequenceNumber","hide","preventDefault","mappingDetails","serializeFormData","module","getModuleName","parent","getParentModuleName","action","mapping","view","detailViewParams","notifyParams","status","title","type","showNotify","executeChange","selectElement","selectedOptionId","duplicateOption","sourceModuleSelect","sourceModuleSelectedField","sourceModuleSelectedFieldLabel","errorParams","existingIdElement","hasClass","length","selectedFieldId","warningMessage"],"mappings":"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"}