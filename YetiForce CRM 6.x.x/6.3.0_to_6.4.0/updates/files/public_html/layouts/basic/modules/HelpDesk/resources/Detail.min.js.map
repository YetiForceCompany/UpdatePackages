{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'HelpDesk_Detail_Js',\n\t{\n\t\tsetAccountsReference: function () {\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'Accounts',\n\t\t\t\t\tsrc_module: 'HelpDesk',\n\t\t\t\t\tsrc_record: app.getRecordId()\n\t\t\t\t},\n\t\t\t\t(_modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tVtiger_Detail_Js.getInstance()\n\t\t\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\t\t\tfield: 'parent_id',\n\t\t\t\t\t\t\t\tvalue: responseData.id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function () {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tregisterSetServiceContracts: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectServiceContracts').on('click', 'ul li', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tsetRelatedFields: true,\n\t\t\t\t\t\tfield: 'servicecontractsid',\n\t\t\t\t\t\tvalue: element.data('id')\n\t\t\t\t\t})\n\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to get response from hierarchy\n\t\t * @param {array} params\n\t\t * @returns {Promise}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = $.Deferred();\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to display the hierarchy response data\n\t\t * @param {array} data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modal) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll'));\n\t\t\t\tthisInstance.registerChangeStatusInHierarchy(modal);\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possible\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Shows hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events on update hierarchy button\n\t\t *\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterChangeStatusInHierarchy: function (container) {\n\t\t\tcontainer.find('.js-update-hierarchy').on('click', function () {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'ChangeStatus',\n\t\t\t\t\trecordsType: container.find('.js-selected-records').val(),\n\t\t\t\t\tstatus: container.find('.js-status').val(),\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tapp.showNotify({ text: data.result.data, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation: function (element, picklistName) {\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\ttext: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\t\tthis.saveFieldValues({\n\t\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\t\tfield: picklistName\n\t\t\t\t\t})\n\t\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function save field values\n\t\t * @param {array} fieldDetailList\n\t\t * @returns {Promise}\n\t\t */\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tconst self = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tconst recordId = app.getRecordId();\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tconst saveData = (reload = true) => {\n\t\t\t\tdata['record'] = recordId;\n\t\t\t\tdata['module'] = app.getModuleName();\n\t\t\t\tdata['action'] = 'SaveAjax';\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = data;\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (reponseData) {\n\t\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (\n\t\t\t\tfieldDetailList.field === 'ticketstatus' &&\n\t\t\t\t(CONFIG.checkIfRecordHasTimeControl || CONFIG.checkIfRelatedTicketsAreClosed)\n\t\t\t) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'CheckValidateToClose',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: fieldDetailList.value\n\t\t\t\t}).done((response) => {\n\t\t\t\t\tif (response.result.hasTimeControl.result && response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\tsaveData(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet addTimeControlCb = saveData;\n\t\t\t\t\t\tif (!response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.relatedTicketsClosed.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taddTimeControlCb = () => {\n\t\t\t\t\t\t\t\tthis.saveFieldValues(fieldDetailList);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!response.result.hasTimeControl.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.hasTimeControl.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.addTimeControl(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trecordId: recordId,\n\t\t\t\t\t\t\t\t\turl: `index.php?module=OSSTimeControl&view=Edit&sourceModule=HelpDesk&sourceRecord=${recordId}&relationOperation=true&subprocess=${recordId}&subprocess=${recordId}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taddTimeControlCb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t} else {\n\t\t\t\tsaveData(false);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add time control when closed ticket\n\t\t * @param {array} params\n\t\t * @returns {Promise}\n\t\t */\n\t\taddTimeControl(params, callback = () => {}) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet referenceModuleName = 'OSSTimeControl';\n\t\t\tlet parentId = params.recordId;\n\t\t\tlet parentModule = 'HelpDesk';\n\t\t\tlet quickCreateParams = {};\n\t\t\tlet relatedParams = {};\n\t\t\tlet relatedField = 'subprocess';\n\t\t\tlet fullFormUrl = params.url;\n\t\t\trelatedParams[relatedField] = parentId;\n\t\t\tlet eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\t\tlet preQuickCreateSave = function (data) {\n\t\t\t\tlet index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tlet field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\tlet queryParameters = queryString.split('&');\n\t\t\t\tfor (let index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParam = queryParameters[index];\n\t\t\t\t\tlet queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = callback;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSetServiceContracts();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","setAccountsReference","app","showRecordsList","module","src_module","src_record","getRecordId","_modal","instance","setSelectEvent","responseData","getInstance","saveFieldValues","field","value","id","done","location","reload","registerSetServiceContracts","$","on","e","jQuery","currentTarget","thisInstance","setRelatedFields","element","data","getHierarchyResponseData","params","aDeferred","Deferred","isEmptyObject","hierarchyResponseCache","AppConnector","request","then","resolve","promise","displayHierarchyResponseData","callbackFunction","showScrollBar","height","railVisible","size","showModalWindow","modal","App","Components","Scrollbar","xy","registerChangeStatusInHierarchy","registerHierarchyRecordCount","getModuleName","action","record","mode","hierarchyButton","length","response","success","html","result","registerShowHierarchy","view","progressIndicator","position","blockInfo","enabled","progressIndicatorElement","container","find","recordsType","val","status","showNotify","text","type","hideModalWindow","showProgressConfirmation","picklistName","picklistValue","showConfirmModal","title","vtranslate","confirmedCallback","window","fail","error","err","errorLog","fieldDetailList","self","recordId","async","dataType","reponseData","CONFIG","checkIfRecordHasTimeControl","checkIfRelatedTicketsAreClosed","hasTimeControl","relatedTicketsClosed","saveData","message","addTimeControlCb","addTimeControl","url","parentId","quickCreateParams","relatedParams","relatedField","fullFormUrl","eliminatedKeys","indexOf","split","queryString","urlSplit","queryParameters","index","queryParamComponents","queryParam","inArray","callback","preQuickCreateSave","trigger","appendTo","QuickCreate","createRecord","registerEvents","_super"],"mappings":"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"}