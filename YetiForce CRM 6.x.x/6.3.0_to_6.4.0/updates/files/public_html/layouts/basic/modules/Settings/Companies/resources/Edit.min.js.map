{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Companies_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Register events for form checkbox element\n\t\t */\n\t\tregisterNewsletter() {\n\t\t\tconst form = $('[name=\"EditCompanies\"]');\n\t\t\tform.find('[id$=\"newsletter\"]').on('click', (e) => {\n\t\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\t\tinputsContainer.find('[id$=\"email\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tinputsContainer.find('[id$=\"firstname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\t\tinputsContainer.find('[id$=\"lastname\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\t\tinputsContainer.find('[id$=\"email\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterSubmitForm: function () {\n\t\t\tvar form = this.getForm();\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\tapp.removeEmptyFilesInput(form[0]);\n\t\t\t\t\tvar formData = new FormData(form[0]);\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\turl: 'index.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\tprocessData: false,\n\t\t\t\t\t\tcontentType: false\n\t\t\t\t\t};\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (true == data.result.success) {\n\t\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message, type: 'error' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar form = this.getForm();\n\t\t\tif (form.length) {\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tform.find('[data-inputmask]').inputmask();\n\t\t\t}\n\t\t\tthis.registerSubmitForm();\n\t\t\tthis.registerNewsletter();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","registerNewsletter","$","form","find","on","e","target","closest","prop","inputsContainer","attr","removeClass","removeAttr","val","addClass","registerSubmitForm","getForm","preventDefault","validationEngine","app","removeEmptyFilesInput","formData","FormData","progressIndicatorElement","jQuery","progressIndicator","blockInfo","enabled","AppConnector","request","url","type","data","processData","contentType","done","mode","result","success","window","location","href","Settings_Vtiger_Index_Js","showMessage","text","message","formAlignmentAfterValidation","registerEvents","length","validationEngineOptions","inputmask"],"mappings":"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"}