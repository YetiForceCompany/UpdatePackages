{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'Partners_Detail_Js',\n\t{},\n\t{\n\t\thierarchyResponseCache: {},\n\t\t/**\n\t\t * Get response data\n\t\t * @param {Object} params\n\t\t * @returns {Object}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tif (!jQuery.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Display hierarchy count\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.detailViewTitle .hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Display hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'Hierarchy',\n\t\t\t\trecord: app.getRecordId()\n\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\t\tthisInstance.getHierarchyResponseData(params).done(function (data) {\n\t\t\t\t\tapp.showModalWindow(data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","thisInstance","aDeferred","jQuery","Deferred","isEmptyObject","AppConnector","request","done","data","resolve","promise","registerHierarchyRecordCount","$","hierarchyButton","length","module","app","getModuleName","action","record","getRecordId","mode","response","success","html","result","registerShowHierarchy","view","on","showModalWindow","registerEvents","_super"],"mappings":";;AAAA,kKACA,YAAA,CAEAA,gBAAgB,CACf,oBADe,CAEf,EAFe,CAGf,CACCC,sBAAsB,CAAE,EADzB;AAGD;AACA;AACA;AACA,KACEC,wBAAwB,CAAE,SAAUC,wBAAAA,CAAAA,MAAV,CAAkB,CACvCC,IAAAA,YAAY,CAAG,IADwB,CAEvCC,SAAS,CAAGC,MAAM,CAACC,QAAP,EAF2B,CAW3C,OARW,MAAA,CAACC,aAAP,CAAqBJ,YAAY,CAACH,sBAAlC,CAQL,CALCQ,YAAY,CAACC,OAAb,CAAqBP,MAArB,EAA6BQ,IAA7B,CAAkC,SAAUC,IAAV,CAAgB,CACjDR,YAAY,CAACH,sBAAb,CAAsCW,IADW,CAEjDP,SAAS,CAACQ,OAAV,CAAkBT,YAAY,CAACH,sBAA/B,EACA,CAHD,CAKD,CAPCI,SAAS,CAACQ,OAAV,CAAkBT,YAAY,CAACH,sBAA/B,CAOD,CAAOI,SAAS,CAACS,OAAV,EACP,CAnBF;AAqBD;AACA,KACEC,4BAA4B,CAAE,SAAA,4BAAA,EAAY,CACzC,mBAAmB,CAAGC,CAAC,CAAC,6BAAD,CAAvB,CACA,GAAIC,eAAe,CAACC,MAApB,CAA4B,CAC3B,IAAIf,MAAM,CAAG,CACZgB,MAAM,CAAEC,GAAG,CAACC,aAAJ,EADI,CAEZC,MAAM,CAAE,cAFI,CAGZC,MAAM,CAAEH,GAAG,CAACI,WAAJ,EAHI,CAIZC,IAAI,CAAE,mBAJM,CAAb,CAMAhB,YAAY,CAACC,OAAb,CAAqBP,MAArB,EAA6BQ,IAA7B,CAAkC,SAAUe,QAAV,CAAoB,CACjDA,QAAQ,CAACC,OADwC,EAEpDX,CAAC,CAAC,oCAAD,CAAD,CAAwCY,IAAxC,CAA6CF,QAAQ,CAACG,MAAtD,EAED,CAJD,EAKA,CACD,CAtCF;AAwCD;AACA,KACEC,qBAAqB,CAAE,SAAA,qBAAA,EAAY,KAClB,YAAA,CAAG,IADe,CAE9Bb,eAAe,CAAGD,CAAC,CAAC,kBAAD,CAFW,CAG9Bb,MAAM,CAAG,CACZgB,MAAM,CAAEC,GAAG,CAACC,aAAJ,EADI,CAEZU,IAAI,CAAE,WAFM,CAGZR,MAAM,CAAEH,GAAG,CAACI,WAAJ,EAHI,CAHqB,CAQlCP,eAAe,CAACe,EAAhB,CAAmB,OAAnB,CAA4B,kBAA5B,CAAgD,UAAa,CAC5D5B,YAAY,CAACF,wBAAb,CAAsCC,MAAtC,EAA8CQ,IAA9C,CAAmD,SAAUC,IAAV,CAAgB,CAClEQ,GAAG,CAACa,eAAJ,CAAoBrB,IAApB,EACA,CAFD,EAGA,CAJD,EAKA,CAvDF,CAwDCsB,cAAc,CAAE,SAAY,cAAA,EAAA,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,IAAKpB,CAAAA,4BAAL,EAF2B,CAG3B,IAAA,CAAKe,qBAAL,GACA,CA5DF,CAHe;;"}