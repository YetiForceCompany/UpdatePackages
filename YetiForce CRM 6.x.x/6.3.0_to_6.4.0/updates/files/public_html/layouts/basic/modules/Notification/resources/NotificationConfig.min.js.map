{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Notification_NotificationConfig_Js',\n\t{},\n\t{\n\t\tregisterEventForModal: function (container) {\n\t\t\tconst self = this;\n\t\t\tlet table = app.registerDataTables(container.find('.js-watching-data-table'));\n\t\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\t\tif (state) {\n\t\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\tlet selectedModules = [];\n\t\t\t\tlet sendNoticeModules = [];\n\t\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\t\tlet currentTarget = $(this);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\t\tlet value = $(this).closest('tr').data('id');\n\t\t\t\t\tsendNoticeModules.push(value);\n\t\t\t\t});\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: 'Notification',\n\t\t\t\t\taction: 'Notification',\n\t\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\t\tselectedModules: selectedModules,\n\t\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t\t};\n\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t\t});\n\t\t\tcontainer.find('.sentNoticeAll').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tlet val = !element.hasClass('sandNoticeOn');\n\t\t\t\tself.changeSendNoticeState(element, val);\n\t\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\t\tself.changeSendNoticeState($(this), val);\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.$('.sentNotice').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tself.changeSendNoticeState(element);\n\t\t\t});\n\t\t},\n\t\tchangeSendNoticeState: function (element, val) {\n\t\t\tif (val !== undefined) {\n\t\t\t\tif (val === true) {\n\t\t\t\t\telement.addClass('fa-bell').removeClass('fa-bell-slash');\n\t\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t\t} else {\n\t\t\t\t\telement.addClass('fa-bell-slash').removeClass('fa-bell');\n\t\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.toggleClass('fa-bell fa-bell-slash');\n\t\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tlet container = $('.modalNotificationNotificationConfig');\n\t\t\tthis.registerEventForModal(container);\n\t\t}\n\t}\n);\njQuery(document).ready(function () {\n\tlet instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","registerEventForModal","container","self","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","sendNoticeModules","$","each","currentTarget","is","selectedModules","push","val","value","closest","data","params","module","action","mode","sendNotifications","frequency","progress","progressIndicator","AppConnector","request","done","hideModalWindow","fail","stopPropagation","prop","element","hasClass","changeSendNoticeState","toggleClass","registerEvents","document","ready","instance"],"mappings":"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"}