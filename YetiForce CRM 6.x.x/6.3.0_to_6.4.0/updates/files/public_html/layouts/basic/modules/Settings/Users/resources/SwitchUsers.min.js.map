{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Users_SwitchUsers_Js',\n\t{},\n\t{\n\t\tregisterAdd: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('.addItem').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.sufrom').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tvar id = parseInt(content.find('#suCount').val()) + 1;\n\t\t\t\tvar cloneItem = content.find('.cloneItem tbody').clone(true, true);\n\t\t\t\tvar suFrom = cloneItem.find('.sufrom option');\n\t\t\t\tsuFrom.each(function (index, option) {\n\t\t\t\t\t$.each(data, function (key, selectedUser) {\n\t\t\t\t\t\tif ($(option).val() == selectedUser.user) {\n\t\t\t\t\t\t\tcloneItem.find(option).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tcloneItem\n\t\t\t\t\t.find('tr')\n\t\t\t\t\t.attr('data-id', id)\n\t\t\t\t\t.addClass('row' + id);\n\t\t\t\tcontent.find('.switchUsersTable tbody').append(cloneItem.html());\n\t\t\t\tcontent.find('#suCount').val(id);\n\t\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t\t});\n\t\t},\n\t\tregisterDelete: function (content) {\n\t\t\tcontent.find('.delate').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\ttarget.closest('tr').remove();\n\t\t\t});\n\t\t},\n\t\tregisterSave: function (content) {\n\t\t\tcontent.find('.saveItems').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tif ($(this).find('.suto :selected').length > 0) {\n\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t\t\t\taccess: $(this).find('.suto').val()\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSwitchUsers', data).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('.contentsDiv');\n\t\t\tthis.registerAdd(content);\n\t\t\tthis.registerDelete(content);\n\t\t\tthis.registerSave(content);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerAdd","content","find","on","data","each","push","user","$","val","parseInt","cloneItem","clone","suFrom","index","option","key","selectedUser","remove","attr","id","addClass","append","html","thisInstance","registerDelete","App","Fields","Picklist","showSelect2ElementView","e","currentTarget","target","closest","registerSave","length","access","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":"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"}