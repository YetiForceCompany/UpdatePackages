{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_CronTasks_List_Js',\n\t{\n\t\ttriggerEditEvent: function (editUrl) {\n\t\t\tAppConnector.request(editUrl).done(function (data) {\n\t\t\t\tapp.showModalWindow(data);\n\t\t\t\tjQuery('#cronJobSaveAjax').validationEngine(app.validationEngineOptions);\n\t\t\t\tvar listViewInstance = Settings_CronTasks_List_Js.getInstance();\n\t\t\t\tlistViewInstance.registerSaveEvent();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tgetListViewRecords: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'List'\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tjQuery('#listViewContents').html(data);\n\t\t\t\tthisInstance.registerSortableEvent();\n\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterSaveEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#cronJobSaveAjax').on('submit', function (e) {\n\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\tvar validationResult = form.validationEngine('validate');\n\t\t\t\tif (validationResult == true) {\n\t\t\t\t\tvar timeFormat = jQuery('#time_format').val();\n\t\t\t\t\tvar frequencyElement = jQuery('#frequencyValue');\n\t\t\t\t\tif (timeFormat == 'hours') {\n\t\t\t\t\t\tvar frequencyValue = frequencyElement.val() * 60 * 60;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrequencyValue = frequencyElement.val() * 60;\n\t\t\t\t\t}\n\t\t\t\t\tvar message = app.vtranslate('JS_VALUE_SHOULD_NOT_BE_LESS_THAN');\n\t\t\t\t\tvar minimumFrequency = jQuery('#minimumFrequency').val();\n\t\t\t\t\tvar minutes = app.vtranslate('JS_MINUTES');\n\t\t\t\t\tif (frequencyValue < minimumFrequency) {\n\t\t\t\t\t\tfrequencyElement.validationEngine(\n\t\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\t\tmessage + ' ' + minimumFrequency / 60 + ' ' + minutes,\n\t\t\t\t\t\t\t'error'\n\t\t\t\t\t\t);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery('#frequency').val(frequencyValue);\n\t\t\t\t\t}\n\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tif (typeof data.result !== 'undefined' && data.result[0] == true) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\n\t\tregisterSortableEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar sequenceList = {};\n\t\t\tvar tbody = jQuery('tbody', jQuery('.listViewEntriesTable'));\n\t\t\ttbody.sortable({\n\t\t\t\thelper: function (e, ui) {\n\t\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t\t//look like distrubed\n\t\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\t\telement = jQuery(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tcontainment: tbody,\n\t\t\t\trevert: true,\n\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\tjQuery('tbody tr').each(function (i) {\n\t\t\t\t\t\tsequenceList[++i] = jQuery(this).data('id');\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'UpdateSequence'\n\t\t\t\t\t};\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events\n\t\t * @returns {undefined}\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerSortableEvent();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","triggerEditEvent","editUrl","AppConnector","request","done","data","app","showModalWindow","jQuery","validationEngine","validationEngineOptions","listViewInstance","Settings_CronTasks_List_Js","getInstance","registerSaveEvent","getListViewRecords","thisInstance","params","module","getModuleName","parent","getParentModuleName","view","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","html","registerSortableEvent","mode","on","e","currentTarget","validationResult","form","timeFormat","val","frequencyElement","frequencyValue","message","vtranslate","minimumFrequency","minutes","preventDefault","serializeFormData","result","hideModalWindow","sequenceList","tbody","sortable","helper","ui","children","each","index","element","width","containment","revert","update","i","sequencesList","JSON","stringify","action","registerEvents"],"mappings":"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"}