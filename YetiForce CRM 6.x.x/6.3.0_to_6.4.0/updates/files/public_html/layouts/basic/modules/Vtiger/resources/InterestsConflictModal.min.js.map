{"version":3,"file":"InterestsConflictModal.min.js","sources":["InterestsConflictModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_InterestsConflictModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tswitch (modalContainer.data('mode')) {\n\t\t\t\tcase 'users':\n\t\t\t\t\tthis.registerUsersEvents(modalContainer);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'unlock':\n\t\t\t\t\tthis.registerUnlockEvents(modalContainer);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'confirmation':\n\t\t\t\t\tthis.registerConfirmationEvents(modalContainer);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register users events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterUsersEvents: function (modalContainer) {\n\t\t\tmodalContainer.find('.js-ic-canceled-btn').click(function (e) {\n\t\t\t\tlet btn = $(e.currentTarget);\n\t\t\t\tlet tr = btn.closest('tr');\n\t\t\t\tlet icon = tr.find('.js-change-icon');\n\t\t\t\tapp.hideModalWindow();\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_ENTER_A_REASON'),\n\t\t\t\t\tshowDialog: true,\n\t\t\t\t\tmultiLineDialog: true,\n\t\t\t\t\tconfirmedCallback: (notice, value) => {\n\t\t\t\t\t\tAppConnector.request(\n\t\t\t\t\t\t\t$.extend(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\taction: 'InterestsConflict',\n\t\t\t\t\t\t\t\t\tmode: 'usersCancel',\n\t\t\t\t\t\t\t\t\tid: tr.data('id'),\n\t\t\t\t\t\t\t\t\tcomment: value\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmodalContainer.find('.js-modal-form').serializeFormData()\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t).done(function (data) {\n\t\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\t\tbtn.hide();\n\t\t\t\t\t\t\t\tif (icon.length) {\n\t\t\t\t\t\t\t\t\ticon.removeClass('fa-times text-danger').addClass('fa-slash text-dark');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\t\ttype: data.result.type\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register unlock events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterUnlockEvents: function (modalContainer) {\n\t\t\tlet form = modalContainer.find('.js-modal-form');\n\t\t\tmodalContainer.find('.js-ic-send-btn').click(function (e) {\n\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\taction: 'InterestsConflict',\n\t\t\t\t\t\t\tmode: 'unlock'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tform.serializeFormData()\n\t\t\t\t\t)\n\t\t\t\t).done(function (data) {\n\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\ttype: data.result.type\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (data.result.type === 'success') {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register confirmation events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterConfirmationEvents: function (modalContainer) {\n\t\t\tmodalContainer.find('.js-ic-confirmation').click(function (e) {\n\t\t\t\tlet value = $(e.currentTarget).data('value');\n\t\t\t\tAppConnector.request(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\taction: 'InterestsConflict',\n\t\t\t\t\t\t\tmode: 'confirmation',\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodalContainer.find('.js-modal-form').serializeFormData()\n\t\t\t\t\t)\n\t\t\t\t).done(function (data) {\n\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\ttype: data.result.type\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["$","Class","registerEvents","modalContainer","data","registerUsersEvents","registerUnlockEvents","registerConfirmationEvents","find","click","e","currentTarget","tr","btn","closest","icon","app","hideModalWindow","showConfirmModal","title","vtranslate","showDialog","multiLineDialog","confirmedCallback","notice","value","AppConnector","request","extend","module","getModuleName","action","mode","id","comment","serializeFormData","done","result","hide","length","removeClass","addClass","showNotify","text","message","type","form","validationEngine","window","location","reload"],"mappings":"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"}