{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_PDF_List_Js',\n\t{},\n\t{\n\t\tgetListContainer: function () {\n\t\t\treturn jQuery('#listViewContainer');\n\t\t},\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the list view row click event\n\t\t */\n\t\tregisterRowClickEvent: function () {\n\t\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\t\tlistViewContentDiv.on('click', '.listViewEntries', function (e) {\n\t\t\t\tif ($(e.target).closest('div').hasClass('actions')) return;\n\t\t\t\tif ($(e.target).is('button') || $(e.target).parent().is('button')) return;\n\t\t\t\tif ($(e.target).closest('a').hasClass('noLinkBtn')) return;\n\t\t\t\tif ($(e.target).is('input[type=\"checkbox\"]')) return;\n\t\t\t\tif ($.contains($(e.currentTarget).find('td:last-child').get(0), e.target)) return;\n\t\t\t\tif ($.contains($(e.currentTarget).find('td:first-child').get(0), e.target)) return;\n\t\t\t\tlet recordUrl = $(e.currentTarget).find('a.js-edit').attr('href');\n\t\t\t\tif (typeof recordUrl !== 'undefined') {\n\t\t\t\t\twindow.location.href = recordUrl;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetDefaultParams: function () {\n\t\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar parent = app.getParentModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: module,\n\t\t\t\tparent: parent,\n\t\t\t\tpage: pageNumber,\n\t\t\t\tview: 'List',\n\t\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\tregisterAddNewTemplate: function (container) {\n\t\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tif (selectedModule.length) {\n\t\t\t\t\turl += '&source_module=' + selectedModule;\n\t\t\t\t}\n\t\t\t\twindow.location.href = url;\n\t\t\t});\n\t\t},\n\t\tregisterImportTemplate: function (container) {\n\t\t\tjQuery('#importButton', container).on('click', function () {\n\t\t\t\twindow.location.href = jQuery(this).data('url');\n\t\t\t});\n\t\t},\n\t\tregisterTemplateDelete: function (container) {\n\t\t\tconst self = this;\n\t\t\tif (container == undefined) {\n\t\t\t\tcontainer = self.getListContainer();\n\t\t\t}\n\t\t\tcontainer.find('.templateDelete').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tlet deleteId = $(this).closest('tr').data('id');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tSettings_PDF_List_Js.deleteById(deleteId, false).done(function () {\n\t\t\t\t\t\t\tself.registerTemplateDelete(container);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function which will give you all the list view params\n\t\t */\n\t\tgetListViewRecords: function (urlParams) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tthis._super(urlParams).done(function (data) {\n\t\t\t\tthisInstance.registerTemplateDelete();\n\t\t\t\taDeferred.resolve(data);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tvar container = this.getListContainer();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerAddNewTemplate(container);\n\t\t\tthis.registerTemplateDelete(container);\n\t\t\tthis.registerImportTemplate(container);\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","getListContainer","registerFilterChangeEvent","jQuery","on","e","val","module","app","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","thisInstance","getListViewRecords","params","done","updatePagination","registerRowClickEvent","getListViewContentContainer","listViewContentDiv","$","target","closest","hasClass","is","contains","find","get","attr","recordUrl","window","location","href","getDefaultParams","page","pageNumber","view","registerAddNewTemplate","container","url","data","selectedModule","length","registerImportTemplate","registerTemplateDelete","self","stopPropagation","preventDefault","showConfirmModal","title","vtranslate","confirmedCallback","Settings_PDF_List_Js","deleteById","deleteId","urlParams","aDeferred","Deferred","_super","resolve","promise","registerEvents"],"mappings":"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"}