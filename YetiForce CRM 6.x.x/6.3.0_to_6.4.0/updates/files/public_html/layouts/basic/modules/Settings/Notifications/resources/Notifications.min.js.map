{"version":3,"file":"Notifications.min.js","sources":["Notifications.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Notifications_List_Js',\n\t{},\n\t{\n\t\tregisterSave: function (container, id) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar containerValidate = container.find('.validationEngineContainer');\n\t\t\tvar roleId = $('[name=\"roleMenu\"]').val();\n\t\t\tcontainerValidate.validationEngine(app.validationEngineOptions);\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\tif (containerValidate.validationEngine('validate')) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\tmode: 'saveType',\n\t\t\t\t\t\tname: container.find('[name=\"name\"]').val(),\n\t\t\t\t\t\twidth: container.find('[name=\"width\"]').val(),\n\t\t\t\t\t\theight: container.find('[name=\"height\"]').val(),\n\t\t\t\t\t\troleId: roleId,\n\t\t\t\t\t\tid: id\n\t\t\t\t\t};\n\t\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterButtons: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.createNotification').on('click', function () {\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=Notifications&parent=Settings&view=CreateNotification',\n\t\t\t\t\tfunction (container) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tthisInstance.registerSave(container, 0);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\t$('[name=\"roleMenu\"]').on('change', function () {\n\t\t\t\tthisInstance.showTable();\n\t\t\t});\n\t\t},\n\t\tshowTable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('.listWithNotifications');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'ListContent',\n\t\t\t\troleId: $('[name=\"roleMenu\"]').val()\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tcontainer.html(data);\n\t\t\t\tthisInstance.registerTableEvents(container);\n\t\t\t});\n\t\t},\n\t\tregisterTableEvents: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tapp.showModalWindow(null, currentTarget.data('url'), function (container) {\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar trRow = currentTarget.closest('tr');\n\t\t\t\t\tthisInstance.registerSave(container, trRow.data('id'));\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\t\tlet removeButton = jQuery(e.currentTarget);\n\t\t\t\tlet currentTrElement = removeButton.closest('tr');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_DELETE_CONFIRMATION'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\taction: 'Delete',\n\t\t\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis.registerButtons();\n\t\t\tthis.showTable();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerSave","container","id","containerValidate","find","roleId","$","val","validationEngine","app","validationEngineOptions","on","params","module","getModuleName","parent","getParentModuleName","action","mode","name","width","height","progress","progressIndicator","AppConnector","request","done","hideModalWindow","thisInstance","showTable","registerButtons","showModalWindow","view","data","html","registerTableEvents","e","currentTarget","closest","trRow","removeButton","currentTrElement","showConfirmModal","title","vtranslate","confirmedCallback","registerEvents"],"mappings":"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"}