{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Leads_Detail_Js',\n\t{\n\t\t//cache will store the convert lead data(Model)\n\t\tcache: {},\n\t\t//Holds detail view instance\n\t\tdetailCurrentInstance: false,\n\t\t/*\n\t\t * function to trigger Convert Lead action\n\t\t * @param: Convert Lead url, currentElement.\n\t\t */\n\t\tconvertLead: function (convertLeadUrl, buttonElement) {\n\t\t\tvar instance = Leads_Detail_Js.detailCurrentInstance;\n\t\t\t//Initially clear the elements to overwtite earliear cache\n\t\t\tinstance.convertLeadContainer = false;\n\t\t\tinstance.convertLeadForm = false;\n\t\t\tinstance.convertLeadModules = false;\n\t\t\tif (jQuery.isEmptyObject(Leads_Detail_Js.cache)) {\n\t\t\t\tAppConnector.request(convertLeadUrl).done(\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tLeads_Detail_Js.cache = data;\n\t\t\t\t\t\t\tinstance.displayConvertLeadModel(data, buttonElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction (error, err) {}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinstance.displayConvertLeadModel(Leads_Detail_Js.cache, buttonElement);\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t//Contains the convert lead form\n\t\tconvertLeadForm: false,\n\t\t//contains the convert lead container\n\t\tconvertLeadContainer: false,\n\t\t//contains all the checkbox elements of modules\n\t\tconvertLeadModules: false,\n\t\t//constructor\n\t\tinit: function () {\n\t\t\tthis._super();\n\t\t\tLeads_Detail_Js.detailCurrentInstance = this;\n\t\t},\n\t\t/*\n\t\t * function to disable the Convert Lead button\n\t\t */\n\t\tdisableConvertLeadButton: function (button) {\n\t\t\tjQuery(button).attr('disabled', 'disabled');\n\t\t},\n\t\t/*\n\t\t * function to enable the Convert Lead button\n\t\t */\n\t\tenableConvertLeadButton: function (button) {\n\t\t\tjQuery(button).removeAttr('disabled');\n\t\t},\n\t\t/*\n\t\t * function to enable all the input and textarea elements\n\t\t */\n\t\tremoveDisableAttr: function (moduleBlock) {\n\t\t\tmoduleBlock.find('input,textarea,select').removeAttr('disabled');\n\t\t},\n\t\t/*\n\t\t * function to disable all the input and textarea elements\n\t\t */\n\t\taddDisableAttr: function (moduleBlock) {\n\t\t\tmoduleBlock.find('input,textarea,select').attr('disabled', 'disabled');\n\t\t},\n\t\t/*\n\t\t * function to display the convert lead model\n\t\t * @param: data used to show the model, currentElement.\n\t\t */\n\t\tdisplayConvertLeadModel: function (data, buttonElement) {\n\t\t\tvar instance = this;\n\t\t\tvar errorElement = jQuery(data).find('#convertLeadError');\n\t\t\tif (errorElement.length != '0') {\n\t\t\t\tvar errorMsg = errorElement.val();\n\t\t\t\tvar errorTitle = jQuery(data).find('#convertLeadErrorTitle').val();\n\t\t\t\tvar params = {\n\t\t\t\t\ttitle: errorTitle,\n\t\t\t\t\ttext: errorMsg,\n\t\t\t\t\taddclass: 'convertLeadNotify',\n\t\t\t\t\twidth: '35%',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tpnotify_after_open: function () {\n\t\t\t\t\t\tinstance.disableConvertLeadButton(buttonElement);\n\t\t\t\t\t},\n\t\t\t\t\tpnotify_after_close: function () {\n\t\t\t\t\t\tinstance.enableConvertLeadButton(buttonElement);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tapp.showNotify(params);\n\t\t\t} else {\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tvar editViewObj = Vtiger_Edit_Js.getInstance();\n\t\t\t\t\tjQuery(data).find('.fieldInfo').collapse({\n\t\t\t\t\t\tparent: '#leadAccordion',\n\t\t\t\t\t\ttoggle: false\n\t\t\t\t\t});\n\t\t\t\t\teditViewObj.registerBasicEvents(data);\n\t\t\t\t\tvar checkBoxElements = instance.getConvertLeadModules();\n\t\t\t\t\tjQuery.each(checkBoxElements, function (index, element) {\n\t\t\t\t\t\tinstance.checkingModuleSelection(element);\n\t\t\t\t\t});\n\t\t\t\t\tinstance.registerForReferenceField();\n\t\t\t\t\tinstance.registerConvertLeadEvents();\n\t\t\t\t\tinstance.getConvertLeadForm().validationEngine(app.validationEngineOptions);\n\t\t\t\t\tinstance.registerConvertLeadSubmit();\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tdata,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'text-align': 'left'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * function to check which module is selected\n\t\t * to disable or enable all the elements with in the block\n\t\t */\n\t\tcheckingModuleSelection: function (element) {\n\t\t\tvar instance = this;\n\t\t\tvar module = jQuery(element).val();\n\t\t\tvar moduleBlock = jQuery(element)\n\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t.find('#' + module + '_FieldInfo');\n\t\t\tif (jQuery(element).is(':checked')) {\n\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t} else {\n\t\t\t\tinstance.addDisableAttr(moduleBlock);\n\t\t\t}\n\t\t},\n\t\tregisterForReferenceField: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tvar referenceField = jQuery('.reference', container);\n\t\t\tif (referenceField.length > 0) {\n\t\t\t\tjQuery('#AccountsModule').attr('readonly', 'readonly');\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * function to register Convert Lead Events\n\t\t */\n\t\tregisterConvertLeadEvents: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tvar instance = this;\n\t\t\t//Trigger Event to change the icon while shown and hidden the accordion body\n\t\t\tcontainer\n\t\t\t\t.on('hide.bs.collapse', '.js-collapse ', function (e) {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.removeClass('fa-chevron-up')\n\t\t\t\t\t\t.addClass('fa-chevron-down');\n\t\t\t\t})\n\t\t\t\t.on('show.bs.collapse', '.js-collapse ', function (e) {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.removeClass('fa-chevron-down')\n\t\t\t\t\t\t.addClass('fa-chevron-up');\n\t\t\t\t});\n\n\t\t\t//Trigger Event on click of Transfer related records modules\n\t\t\tcontainer.on('click', '.transferModule', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar module = currentTarget.val();\n\t\t\t\tvar moduleBlock = jQuery('#' + module + '_FieldInfo');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tjQuery('#' + module + 'Module').prop('checked', true);\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//Trigger Event on click of the Modules selection to convert the lead\n\t\t\tcontainer.on('click', '.convertLeadModuleSelection', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar currentModuleName = currentTarget.val();\n\t\t\t\tvar moduleBlock = currentTarget.closest('.convertLeadModules').find('#' + currentModuleName + '_FieldInfo');\n\t\t\t\tvar currentTransferModuleElement = jQuery('#transfer' + currentModuleName);\n\t\t\t\tvar otherTransferModuleElement = jQuery('input[name=\"transferModule\"]').not(currentTransferModuleElement);\n\t\t\t\tvar otherTransferModuleValue = jQuery(otherTransferModuleElement).val();\n\t\t\t\tvar otherModuleElement = jQuery('#' + otherTransferModuleValue + 'Module');\n\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t\t\tif (!otherModuleElement.is(':checked')) {\n\t\t\t\t\t\tjQuery(currentTransferModuleElement).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmoduleBlock.collapse('hide');\n\t\t\t\t\tinstance.addDisableAttr(moduleBlock);\n\t\t\t\t\tjQuery(currentTransferModuleElement).prop('checked', false);\n\t\t\t\t\tif (otherModuleElement.is(':checked')) {\n\t\t\t\t\t\tjQuery(otherTransferModuleElement).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to register Convert Lead Submit Event\n\t\t */\n\t\tregisterConvertLeadSubmit: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar formElement = this.getConvertLeadForm();\n\n\t\t\tformElement.on('jqv.form.validating', function (e) {\n\t\t\t\tvar jQv = jQuery(e.currentTarget).data('jqv');\n\t\t\t\t//Remove the earlier validated fields from history so that it wont count disabled fields\n\t\t\t\tjQv.InvalidFields = [];\n\t\t\t});\n\n\t\t\t//Convert Lead Form Submission\n\t\t\tformElement.on('submit', function (e) {\n\t\t\t\tvar convertLeadModuleElements = thisInstance.getConvertLeadModules();\n\t\t\t\tvar moduleArray = [];\n\t\t\t\tvar accountModel = formElement.find('#AccountsModule');\n\n\t\t\t\t//If the validation fails in the hidden Block, we should show that Block with error.\n\t\t\t\tvar invalidFields = formElement.data('jqv').InvalidFields;\n\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\tvar fieldElement = invalidFields[0];\n\t\t\t\t\tvar moduleBlock = jQuery(fieldElement).closest('.js-collapse');\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tjQuery.each(convertLeadModuleElements, function (index, element) {\n\t\t\t\t\tif (jQuery(element).is(':checked')) {\n\t\t\t\t\t\tmoduleArray.push(jQuery(element).val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tformElement.find('input[name=\"modules\"]').val(JSON.stringify(moduleArray));\n\n\t\t\t\tvar organizationElement = accountModel.length;\n\t\t\t\tif (organizationElement != '0') {\n\t\t\t\t\tif (jQuery.inArray('Accounts', moduleArray) == -1) {\n\t\t\t\t\t\tapp.showAlert(app.vtranslate('JS_SELECT_ORGANIZATION'));\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to get all the checkboxes which are representing the modules selection\n\t\t */\n\t\tgetConvertLeadModules: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tif (this.convertLeadModules == false) {\n\t\t\t\tthis.convertLeadModules = jQuery('.convertLeadModuleSelection', container);\n\t\t\t}\n\t\t\treturn this.convertLeadModules;\n\t\t},\n\t\t/*\n\t\t * function to get Convert Lead Form\n\t\t */\n\t\tgetConvertLeadForm: function () {\n\t\t\tif (this.convertLeadForm == false) {\n\t\t\t\tthis.convertLeadForm = jQuery('#convertLeadForm');\n\t\t\t}\n\t\t\treturn this.convertLeadForm;\n\t\t},\n\t\t/*\n\t\t * function to get Convert Lead Container\n\t\t */\n\t\tgetConvertLeadContainer: function () {\n\t\t\tif (this.convertLeadContainer == false) {\n\t\t\t\tthis.convertLeadContainer = jQuery('#leadAccordion');\n\t\t\t}\n\t\t\treturn this.convertLeadContainer;\n\t\t},\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar recordId = this.getRecordId();\n\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\n\t\t\tdata['record'] = recordId;\n\t\t\tdata['module'] = app.getModuleName();\n\t\t\tdata['action'] = 'SaveAjax';\n\n\t\t\tAppConnector.request(data).done(function (reponseData) {\n\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t});\n\t\t\tif (fieldDetailList && fieldDetailList.field == 'leadstatus') {\n\t\t\t\tlet btn = jQuery('.btn-convertLead');\n\t\t\t\tlet conversionAvailableStatus = jQuery('#conversion_available_status').val();\n\t\t\t\tif (conversionAvailableStatus) {\n\t\t\t\t\tlet status = JSON.parse(conversionAvailableStatus);\n\t\t\t\t\tif (status.length === 0 || jQuery.inArray(fieldDetailList.value, status) != -1) {\n\t\t\t\t\t\tbtn.removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbtn.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbtn.addClass('d-none');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tupdateConvertLeadvalue: function () {\n\t\t\tvar thisInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tdetailContentsHolder.on(thisInstance.fieldUpdatedEvent, 'input,select', function (e, params) {\n\t\t\t\tvar elem = jQuery(e.currentTarget);\n\t\t\t\tvar fieldName = elem.attr('name');\n\t\t\t\tvar ajaxnewValue = params['new'];\n\n\t\t\t\tif (!jQuery.isEmptyObject(Leads_Detail_Js.cache)) {\n\t\t\t\t\tvar sampleCache = jQuery(Leads_Detail_Js.cache);\n\t\t\t\t\tvar contextElem = sampleCache.find('[name=\"' + fieldName + '\"]');\n\n\t\t\t\t\tif (elem.is('select')) {\n\t\t\t\t\t\tvar oldvalue = contextElem.val();\n\t\t\t\t\t\tcontextElem.find('option[value=\"' + oldvalue + '\"]').removeAttr('selected');\n\t\t\t\t\t\tcontextElem.find('option[value=\"' + ajaxnewValue + '\"]').attr('selected', 'selected');\n\t\t\t\t\t\tcontextElem.trigger('change');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontextElem.attr('value', ajaxnewValue);\n\t\t\t\t\t}\n\t\t\t\t\tLeads_Detail_Js.cache = sampleCache;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.updateConvertLeadvalue();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","cache","detailCurrentInstance","convertLead","convertLeadUrl","buttonElement","Leads_Detail_Js","instance","convertLeadContainer","convertLeadForm","convertLeadModules","jQuery","isEmptyObject","AppConnector","request","done","data","displayConvertLeadModel","init","_super","disableConvertLeadButton","button","attr","enableConvertLeadButton","removeAttr","removeDisableAttr","moduleBlock","find","addDisableAttr","errorElement","length","errorMsg","val","errorTitle","params","title","text","addclass","width","type","pnotify_after_open","pnotify_after_close","app","showNotify","callBackFunction","Vtiger_Edit_Js","getInstance","collapse","parent","toggle","editViewObj","registerBasicEvents","checkBoxElements","getConvertLeadModules","each","index","element","checkingModuleSelection","registerForReferenceField","registerConvertLeadEvents","getConvertLeadForm","validationEngine","validationEngineOptions","registerConvertLeadSubmit","showModalWindow","module","closest","is","container","getConvertLeadContainer","referenceField","on","e","$","currentTarget","removeClass","addClass","prop","currentModuleName","currentTransferModuleElement","otherTransferModuleElement","not","otherTransferModuleValue","otherModuleElement","stopImmediatePropagation","formElement","jQv","InvalidFields","convertLeadModuleElements","thisInstance","moduleArray","accountModel","invalidFields","fieldElement","preventDefault","push","JSON","stringify","organizationElement","inArray","showAlert","vtranslate","saveFieldValues","fieldDetailList","Deferred","recordId","getRecordId","getModuleName","reponseData","aDeferred","resolve","field","btn","conversionAvailableStatus","parse","status","value","promise","updateConvertLeadvalue","detailContentsHolder","getContentHolder","fieldUpdatedEvent","elem","fieldName","ajaxnewValue","sampleCache","contextElem","oldvalue","trigger","registerEvents"],"mappings":"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"}