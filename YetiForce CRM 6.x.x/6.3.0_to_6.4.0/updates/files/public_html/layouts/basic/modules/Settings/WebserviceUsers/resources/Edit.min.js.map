{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'Settings_WebserviceUsers_Edit_Js',\n\t{},\n\t{\n\t\tgetForm: function () {\n\t\t\tif (this.formElement == false) {\n\t\t\t\tthis.setForm(jQuery('#modalEdit'));\n\t\t\t}\n\t\t\treturn this.formElement;\n\t\t},\n\t\t/**\n\t\t * Show hide fields\n\t\t * @param {Object} typeElement\n\t\t * @param {Object} params\n\t\t */\n\t\tshowHideFields: function (typeElement, params) {\n\t\t\tlet elementContainer = this.getForm()\n\t\t\t\t.find('[name=\"' + params.fieldHide + '\"]')\n\t\t\t\t.closest('.form-group');\n\t\t\tif (typeElement.val() === params.value) {\n\t\t\t\tlet clearReference = elementContainer.find('.clearReferenceSelection');\n\t\t\t\tif (clearReference.length > 0) {\n\t\t\t\t\tclearReference.trigger('click');\n\t\t\t\t}\n\t\t\t\telementContainer.addClass('d-none');\n\t\t\t} else {\n\t\t\t\telementContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getForm();\n\t\t\tthis.registerBasicEvents(container);\n\t\t\tlet form = container.find('form');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\tlet listInstance = Settings_WebserviceUsers_List_Js.getInstance();\n\t\t\t\t\t\t\tlistInstance.reloadTab();\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet typeElement = form.find('[name=\"type\"]');\n\t\t\tlet typeParams = { fieldHide: 'crmid', value: '1' };\n\t\t\tself.showHideFields(typeElement, typeParams);\n\t\t\ttypeElement.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), typeParams);\n\t\t\t});\n\n\t\t\tlet loginMethod = form.find('[name=\"login_method\"]');\n\t\t\tlet loginMethodParams = { fieldHide: 'authy_methods', value: 'PLL_PASSWORD' };\n\t\t\tself.showHideFields(loginMethod, loginMethodParams);\n\t\t\tloginMethod.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), loginMethodParams);\n\t\t\t});\n\t\t}\n\t}\n);\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_WebserviceUsers_Edit_Js();\n\tinstance.registerEvents();\n});\n"],"names":["Vtiger_Edit_Js","getForm","formElement","setForm","jQuery","showHideFields","typeElement","params","elementContainer","find","fieldHide","closest","val","value","clearReference","length","trigger","addClass","removeClass","registerEvents","container","registerBasicEvents","form","on","e","preventDefault","validationEngine","serializeFormData","AppConnector","request","formData","done","data","result","success","Settings_Vtiger_Index_Js","showMessage","text","app","vtranslate","listInstance","Settings_WebserviceUsers_List_Js","getInstance","reloadTab","hideModalWindow","message","showNotify","type","typeParams","self","currentTarget","loginMethodParams","loginMethod","document","ready","instance"],"mappings":"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"}