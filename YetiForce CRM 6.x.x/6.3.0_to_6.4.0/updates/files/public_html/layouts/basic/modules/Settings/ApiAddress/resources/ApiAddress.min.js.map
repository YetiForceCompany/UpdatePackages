{"version":3,"file":"ApiAddress.min.js","sources":["ApiAddress.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_ApiAddress_Configuration_Js',\n\t{},\n\t{\n\t\tregisterSave: function (container) {\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tcontainer.find('.saveGlobal').on('click', (e) => {\n\t\t\t\tif (!container.validationEngine('validate')) {\n\t\t\t\t\tapp.formAlignmentAfterValidation(container);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet form = $(e.currentTarget).closest('form');\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet active = {};\n\t\t\t\t$('[name=\"active\"]').each((i, e) => {\n\t\t\t\t\tactive[e.dataset.type] = e.checked ? 1 : 0;\n\t\t\t\t});\n\t\t\t\tformData['active'] = active;\n\t\t\t\tformData['module'] = 'ApiAddress';\n\t\t\t\tformData['parent'] = 'Settings';\n\t\t\t\tformData['mode'] = 'global';\n\t\t\t\tformData['action'] = 'SaveConfig';\n\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterConfigModal(container) {\n\t\t\tcontainer.find('.js-show-config-modal').on('click', (e) => {\n\t\t\t\tconst providerName = e.currentTarget.dataset.provider;\n\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: `index.php?module=ApiAddress&parent=Settings&view=ApiConfigModal&provider=${providerName}`,\n\t\t\t\t\tcb: (modalContainer) => {\n\t\t\t\t\t\tmodalContainer.on('click', '.js-modal__save', () => {\n\t\t\t\t\t\t\tlet form = modalContainer.find('form');\n\t\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t\t.saveAjax('', [], formData)\n\t\t\t\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.always(() => {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst container = $('.js-validation-form');\n\t\t\tthis.registerConfigModal(container);\n\t\t\tthis.registerSave(container);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerSave","container","validationEngine","app","validationEngineOptions","find","on","e","formAlignmentAfterValidation","form","$","currentTarget","closest","formData","serializeFormData","active","each","i","dataset","type","checked","AppConnector","request","done","data","showNotify","text","fail","vtranslate","registerConfigModal","providerName","provider","showModalWindow","url","cb","modalContainer","progress","progressIndicator","message","blockInfo","enabled","saveAjax","window","location","reload","always","hideModalWindow","mode","registerEvents"],"mappings":"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"}