{"version":3,"file":"ApiAddress.min.js","sources":["ApiAddress.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_ApiAddress_Configuration_Js',\n\t{},\n\t{\n\t\tregisterSave: function (container) {\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tcontainer.find('.saveGlobal').on('click', (event) => {\n\t\t\t\tif (!container.validationEngine('validate')) {\n\t\t\t\t\tapp.formAlignmentAfterValidation(container);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst defaultProvider = $('[name=\"default_provider\"]:checked');\n\t\t\t\tlet elements = {\n\t\t\t\t\tglobal: {\n\t\t\t\t\t\tmin_length: $('[name=\"min_length\"]').val(),\n\t\t\t\t\t\tresult_num: $('[name=\"result_num\"]').val(),\n\t\t\t\t\t\tdefault_provider: defaultProvider.length ? defaultProvider.val() : 0\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t$('[name=\"active\"]').each((i, e) => {\n\t\t\t\t\telements[e.dataset.type] = { active: e.checked ? 1 : 0 };\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmodule: 'ApiAddress',\n\t\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\t\taction: 'SaveConfig',\n\t\t\t\t\t\telements: elements\n\t\t\t\t\t},\n\t\t\t\t\tasync: false,\n\t\t\t\t\tdataType: 'json'\n\t\t\t\t})\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterConfigModal(container) {\n\t\t\tcontainer.find('.js-show-config-modal').on('click', (e) => {\n\t\t\t\tconst providerName = e.currentTarget.dataset.provider;\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t`index.php?module=ApiAddress&parent=Settings&view=ApiConfigModal&provider=${providerName}`,\n\t\t\t\t\t(modalContainer) => {\n\t\t\t\t\t\tconst form = modalContainer.find('.js-form-validation');\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tmodalContainer.find('.js-modal__save').on('click', (_) => {\n\t\t\t\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(container);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet elements = {};\n\t\t\t\t\t\t\tlet customField = modalContainer.find('.js-custom-field');\n\t\t\t\t\t\t\tcustomField.each((i, e) => {\n\t\t\t\t\t\t\t\telements[$(e).attr('name')] = e.value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\telements = { [providerName]: elements };\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tmodule: 'ApiAddress',\n\t\t\t\t\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\t\t\t\t\taction: 'SaveConfig',\n\t\t\t\t\t\t\t\t\telements: elements\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tasync: false,\n\t\t\t\t\t\t\t\tdataType: 'json'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\tregisterValidateBtn(container) {\n\t\t\tcontainer.find('.js-validate').on('click', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tlet icon = currentTarget.find('.js-validate__icon');\n\t\t\t\ticon.addClass('fa-spin');\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: 'ApiAddress',\n\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\taction: 'ValidateConfiguration',\n\t\t\t\t\tprovider: currentTarget.data('provider')\n\t\t\t\t}).done((data) => {\n\t\t\t\t\ticon.removeClass('fa-spin');\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\ttype: data['result']['type']\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst container = $('.js-validation-form');\n\t\t\tthis.registerConfigModal(container);\n\t\t\tthis.registerSave(container);\n\t\t\tthis.registerValidateBtn(container);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerSave","container","validationEngine","app","validationEngineOptions","find","on","formAlignmentAfterValidation","$","elements","global","min_length","val","result_num","default_provider","defaultProvider","length","each","i","e","dataset","type","active","checked","AppConnector","request","data","module","parent","action","async","dataType","done","showNotify","text","fail","vtranslate","registerConfigModal","currentTarget","provider","showModalWindow","providerName","modalContainer","form","customField","attr","value","window","location","reload","registerValidateBtn","icon","addClass","removeClass","registerEvents"],"mappings":"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"}