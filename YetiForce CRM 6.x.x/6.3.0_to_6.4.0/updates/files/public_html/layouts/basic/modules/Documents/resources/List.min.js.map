{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\n\t'Documents_List_Js',\n\t{\n\t\tmassMove: function (url) {\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar postData = {\n\t\t\t\t\tselected_ids: selectedIds,\n\t\t\t\t\texcluded_ids: excludedIds,\n\t\t\t\t\tviewname: cvId\n\t\t\t\t};\n\n\t\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\t\tif (searchValue.length > 0) {\n\t\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tmoveDocuments: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteFilterClickEvent: function () {\n\t\t\tconst self = this;\n\t\t\tlet listViewFilterBlock = this.getFilterBlock();\n\t\t\tif (listViewFilterBlock != false) {\n\t\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t\t//to close the dropdown\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tself.getFilterSelectElement().data('select2').close();\n\t\t\t\t\tlet liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\t\tlet message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tlet currentOptionElement = self.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\t\t\tfolderid: currentOptionElement.data('folderid')\n\t\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tself.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\tAppConnector.requestForm(self.getSelectOptionFromChosenOption(liElement).data('deleteurl'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massMove","url","listInstance","getInstance","validationResult","checkListRecordSelected","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selected_ids","excluded_ids","viewname","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","jQuery","progressIndicator","AppConnector","request","data","done","progressIndicatorElement","mode","app","showModalWindow","moveDocuments","result","success","hideModalWindow","showNotify","title","vtranslate","text","message","delay","type","getDefaultParams","getListViewRecords","urlParams","noRecordSelectedAlert","Deferred","on","e","formData","currentTarget","serializeFormData","aDeferred","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","listViewFilterBlock","getFilterBlock","event","stopPropagation","self","getFilterSelectElement","close","liElement","closest","hasClass","find","showConfirmModal","confirmedCallback","currentOptionElement","getSelectOptionFromChosenOption","module","getModuleName","action","folderid","remove","trigger","requestForm"],"mappings":"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"}