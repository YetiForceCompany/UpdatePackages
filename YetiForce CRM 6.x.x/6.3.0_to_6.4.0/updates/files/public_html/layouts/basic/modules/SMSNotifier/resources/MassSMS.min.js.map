{"version":3,"file":"MassSMS.min.js","sources":["MassSMS.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'SMSNotifier_MassSMS_Js',\n\t{},\n\t{\n\t\t/** Modal container */\n\t\tcontainer: false,\n\t\t/** Message field */\n\t\tmessageField: false,\n\n\t\t/**\n\t\t * Register save\n\t\t */\n\t\tregisterSave: function () {\n\t\t\tthis.container.find('.js-modal__save').on('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(form.serializeFormData())\n\t\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttextTrusted: false,\n\t\t\t\t\t\t\t\ttext: response.result.message + ` (${response.result.count})`,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.always(() => {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register templates\n\t\t */\n\t\tregisterTemplate: function () {\n\t\t\tlet templateField = this.container.find('select#template');\n\t\t\ttemplateField.on('change', (e) => {\n\t\t\t\tif (e.target.value) {\n\t\t\t\t\tthis.messageField.val(e.target.value);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.messageField = this.container.find('[name=\"message\"]');\n\t\t\tthis.registerTemplate();\n\t\t\tthis.registerSave();\n\t\t\tnew App.Fields.Text.Completions(this.messageField, {\n\t\t\t\tcompletionsCollection: { emojis: true },\n\t\t\t\tautolink: false\n\t\t\t});\n\t\t\tApp.Fields.MultiImage.register(this.container);\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","messageField","registerSave","find","on","e","preventDefault","form","validationEngine","progress","progressIndicator","message","app","vtranslate","blockInfo","enabled","AppConnector","request","serializeFormData","done","response","showNotify","textTrusted","text","result","count","type","hideModalWindow","fail","title","always","mode","registerTemplate","templateField","target","value","val","registerEvents","modalContainer","Fields","Text","Completions","completionsCollection","emojis","autolink","App","MultiImage","register"],"mappings":";;AAAA,kKACA,aAEAA,CAAC,CAACC,KAAF,CACC,wBADD,CAEC,EAFD,CAGC,uBAECC,SAAS,CAAA,CAAA,CAFV,qBAICC,YAAY,GAJb;AAOD;AACA,KACEC,YAAY,CAAE,SAAA,YAAA,EAAY,CACzB,IAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAKF,SAAL,CAAeG,IAAf,CAAoB,iBAApB,EAAuCC,EAAvC,CAA0C,OAA1C,CAAmD,SAACC,CAAD,CAAO,CACzDA,CAAC,CAACC,cAAF,EADyD,CAEzD,IAAIC,IAAI,CAAG,KAAI,CAACP,SAAL,CAAeG,IAAf,CAAoB,MAApB,CAAX,CACA,GAAII,IAAI,CAACC,gBAAL,CAAsB,UAAtB,CAAJ,CAAuC,CACtC,IAAIC,QAAQ,CAAGX,CAAC,CAACY,iBAAF,CAAoB,CAClCC,OAAO,CAAEC,GAAG,CAACC,UAAJ,CAAe,qBAAf,CADyB,CAElCC,SAAS,CAAE,CAAEC,OAAO,GAAT,CAFuB,CAApB,CAAf,CAIAC,YAAY,CAACC,OAAb,CAAqBV,IAAI,CAACW,iBAAL,EAArB,CAAA,CACEC,IADF,CACO,SAACC,QAAD,CAAc,CACnBR,GAAG,CAACS,UAAJ,CAAe,CACdC,WAAW,CAAA,CAAA,CADG,CAEdC,IAAI,CAAEH,QAAQ,CAACI,MAAT,CAAgBb,OAAhB,aAA+BS,QAAQ,CAACI,MAAT,CAAgBC,KAA/C,CAFQ,GAAA,CAAA,CAGdC,IAAI,CAAE,MAHQ,CAAf,CADmB,CAMnBd,GAAG,CAACe,eAAJ,GACA,CARF,CASEC,CAAAA,IATF,CASO,UAAM,CACXhB,GAAG,CAACS,UAAJ,CAAe,CACdQ,KAAK,CAAEjB,GAAG,CAACC,UAAJ,CAAe,UAAf,CADO,CAEda,IAAI,CAAE,OAFQ,CAAf,EAIA,CAdF,CAAA,CAeEI,MAfF,CAeS,UAAM,CACbrB,QAAQ,CAACC,iBAAT,CAA2B,CAAEqB,IAAI,CAAE,MAAR,CAA3B,EACA,CAjBF,EAkBA,CACD,CA3BD,EA4BA,CAtCF;AAwCD;AACA,KACEC,gBAAgB,CAAE,SAAY,gBAAA,EAAA,CAAA,IAAA,MAAA,CAAA,IAAA,CACzBC,aAAa,CAAG,IAAA,CAAKjC,SAAL,CAAeG,IAAf,CAAoB,iBAApB,CADS,CAE7B8B,aAAa,CAAC7B,EAAd,CAAiB,QAAjB,CAA2B,SAACC,CAAD,CAAO,CAC7BA,CAAC,CAAC6B,MAAF,CAASC,KADoB,EAEhC,MAAI,CAAClC,YAAL,CAAkBmC,GAAlB,CAAsB/B,CAAC,CAAC6B,MAAF,CAASC,KAA/B,EAED,CAJD,EAKA,CAjDF;AAoDD;AACA;AACA,KACEE,cAAc,CAAE,SAAUC,cAAAA,CAAAA,cAAV,CAA0B,CACzC,IAAA,CAAKtC,SAAL,CAAiBsC,cADwB,CAEzC,IAAKrC,CAAAA,YAAL,CAAoB,IAAKD,CAAAA,SAAL,CAAeG,IAAf,CAAoB,oBAApB,CAFqB,CAGzC,KAAK6B,gBAAL,EAHyC,CAIzC,IAAA,CAAK9B,YAAL,EAJyC,CAKzC,OAAO,CAACqC,MAAJ,CAAWC,IAAX,CAAgBC,WAApB,CAAgC,IAAA,CAAKxC,YAArC,CAAmD,CAClDyC,qBAAqB,CAAE,CAAEC,MAAM,CAAR,CAAA,CAAA,CAD2B,CAElDC,QAAQ,CAAA,CAAA,CAF0C,CAAnD,CALyC,CASzCC,GAAG,CAACN,MAAJ,CAAWO,UAAX,CAAsBC,QAAtB,CAA+B,IAAK/C,CAAAA,SAApC,EACA,CAjEF,CAHD;;"}