{"version":3,"file":"Groups.min.js","sources":["Groups.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\nwindow.Users_Groups_JS = class {\n\t/**\n\t * Modal container\n\t */\n\tcontainer = false;\n\t/**\n\t * DataTable api object\n\t */\n\tdataTable;\n\n\t/**\n\t * Register DataTable\n\t */\n\tregisterDataTable() {\n\t\tlet table = this.container.find('.js-data-table');\n\t\tlet form = this.container.find('form');\n\t\treturn app.registerDataTables(table, {\n\t\t\torder: [],\n\t\t\tprocessing: true,\n\t\t\tserverSide: false,\n\t\t\tajax: {\n\t\t\t\turl: table.data('url'),\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: function (data) {\n\t\t\t\t\t$.extend(data, form.serializeFormData());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register remove member\n\t */\n\tregisterRemoveMember() {\n\t\tthis.container.find('.js-data-table').on('click', '.js-member-delete', (e) => {\n\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttext: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\tAppConnector.request(url)\n\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthis.dataTable.ajax.reload();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail((_) => {\n\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Register add members\n\t */\n\tregisterAddMember() {\n\t\tthis.container.find('.js-data-table').on('click', '.js-member-add', (e) => {\n\t\t\tlet url = e.currentTarget.dataset.url + '&groupID=' + this.container.find('form').serializeFormData()['groupID'];\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\turl,\n\t\t\t\t(modalContainer) => {\n\t\t\t\t\tmodalContainer.find('.js-modal__save').on('click', () => {\n\t\t\t\t\t\tlet modalForm = modalContainer.find('form');\n\t\t\t\t\t\tif (modalForm.validationEngine('validate')) {\n\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet formData = modalForm.serializeFormData();\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t.saveAjax('', [], formData)\n\t\t\t\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\t\t\t\tlet result = response.result;\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow(null, 'memberList');\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.ajax.reload();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\t\ttext: result.message ? result.message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\t\tdelay: 3000,\n\t\t\t\t\t\t\t\t\t\t\thide: true\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t{ modalId: 'memberList' }\n\t\t\t);\n\t\t});\n\t}\n\t/**\n\t * Register base events\n\t * @param {jQuery} modalContainer\n\t */\n\tregisterEvents(modalContainer) {\n\t\tthis.container = modalContainer;\n\t\tthis.dataTable = this.registerDataTable();\n\t\tthis.registerRemoveMember();\n\t\tthis.registerAddMember();\n\t\tthis.container.on('change', '[name=\"groupID\"]', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t}\n};\n"],"names":["window","Users_Groups_JS","table","container","find","form","registerDataTables","order","processing","serverSide","ajax","url","data","type","$","extend","serializeFormData","on","e","currentTarget","dataset","app","showConfirmModal","text","vtranslate","confirmedCallback","progress","jQuery","progressIndicator","AppConnector","request","done","mode","dataTable","reload","fail","showNotify","showModalWindow","modalContainer","modalForm","validationEngine","message","blockInfo","enabled","formData","saveAjax","response","result","success","hideModalWindow","delay","hide","modalId","registerDataTable","registerRemoveMember","registerAddMember"],"mappings":"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"}