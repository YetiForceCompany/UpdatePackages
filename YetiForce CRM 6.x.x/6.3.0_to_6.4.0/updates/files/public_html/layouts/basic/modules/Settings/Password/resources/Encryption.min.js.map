{"version":3,"file":"Encryption.min.js","sources":["Encryption.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Password_Encryption_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Container\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Set container\n\t\t * @param {Object} element\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.container = element;\n\t\t},\n\t\t/**\n\t\t * Get Container\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Get nav tab\n\t\t * @returns {Object}\n\t\t */\n\t\tgetActiveTabNav: function () {\n\t\t\treturn this.getContainer().find('.js-nav-container a.active');\n\t\t},\n\t\t/**\n\t\t * Get tab (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetTabForm: function () {\n\t\t\treturn this.getContainer().find('.tab-pane.active form');\n\t\t},\n\t\t/**\n\t\t * Register change tab\n\t\t */\n\t\tregisterChangeTab: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tthis.passwordAlert(container);\n\t\t\tcontainer.find('.js-nav-container a').on('click', (e) => {\n\t\t\t\tthis.loadTab(e.currentTarget.dataset.url);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load content from URL\n\t\t * @param {string} url\n\t\t */\n\t\tloadTab: function (url) {\n\t\t\tlet tabContainer = this.getContainer().find('.js-tab-container');\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\telementToBlock: tabContainer,\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done((data) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\ttabContainer.html(data);\n\t\t\t\t\tthis.registerBasicEvents(tabContainer);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(tabContainer.find('select'));\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeMethodName: function () {\n\t\t\tlet container = this.getTabForm();\n\t\t\tif (container.length) {\n\t\t\t\tthis.passwordAlert(container);\n\t\t\t}\n\t\t\tcontainer.find('[name=\"methods\"]').on('change', (e) => {\n\t\t\t\tthis.passwordAlert($(e.currentTarget).closest('form'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeModule: function () {\n\t\t\tthis.getTabForm()\n\t\t\t\t.find('[name=\"target\"]')\n\t\t\t\t.on('change', (e) => {\n\t\t\t\t\tlet url = this.getActiveTabNav().data('url') + '&target=' + e.currentTarget.value;\n\t\t\t\t\tthis.loadTab(url);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Password alerts\n\t\t * @param {jQuery} container\n\t\t */\n\t\tpasswordAlert: function (container) {\n\t\t\tlet methodElement = container.find('[name=\"methods\"]');\n\t\t\tlet mapLengthVector = JSON.parse($('[name=\"lengthVectors\"]').val());\n\t\t\tlet length = mapLengthVector[methodElement.val()];\n\t\t\tlet validator = '';\n\t\t\tlet passwordElement = container.find('#password');\n\t\t\tlet vectorElement = container.find('#vector');\n\t\t\tlet passwordInfoAlert = container.find('.js-password-alert');\n\t\t\tif (length == undefined) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t\tpasswordElement.attr('disabled', 'disabled');\n\t\t\t} else if (length === 0) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.val('');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tpasswordInfoAlert.removeClass('d-none');\n\t\t\t\tpasswordInfoAlert.find('.js-password-length').text(length);\n\t\t\t\tvectorElement.removeAttr('disabled');\n\t\t\t\tpasswordElement.removeAttr('disabled');\n\t\t\t\tvalidator = 'validate[required,maxSize[' + length + '],minSize[' + length + ']]';\n\t\t\t}\n\t\t\tvectorElement.attr('data-validation-engine', validator);\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm: function () {\n\t\t\tlet form = this.getTabForm();\n\t\t\tform.on('submit', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet save = () => {\n\t\t\t\t\t\tlet progressElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\t\tAppConnector.request(form.serializeFormData()).done((response) => {\n\t\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\thide: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.getActiveTabNav().trigger('click');\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tformData.mode = 'checkEncryptionStatus';\n\t\t\t\t\tAppConnector.request(formData).done((response) => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (response.result.message) {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: response.result.message + `<div>${app.vtranslate('JS_CHANGE_CONFIRMATION')}</div>`,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (response.result.result) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events to preview password\n\t\t */\n\t\tregisterPreviewPassword: function () {\n\t\t\tvar container = this.getTabForm();\n\t\t\tvar button = container.find('.previewPassword');\n\t\t\tbutton.on('mousedown', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'text');\n\t\t\t});\n\t\t\tbutton.on('mouseup', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t\tbutton.on('mouseout', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register basic events in view\n\t\t */\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.registerForm();\n\t\t\tthis.registerChangeMethodName();\n\t\t\tthis.registerChangeModule();\n\t\t\tthis.registerPreviewPassword();\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv'));\n\t\t\tthis.registerChangeTab();\n\t\t\tthis.registerBasicEvents();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","setContainer","element","getContainer","getActiveTabNav","find","getTabForm","registerChangeTab","passwordAlert","on","e","loadTab","currentTarget","dataset","url","tabContainer","progressIndicatorElement","$","progressIndicator","blockInfo","elementToBlock","enabled","AppConnector","request","done","data","mode","html","registerBasicEvents","App","Fields","Picklist","showSelect2ElementView","fail","textStatus","errorThrown","app","errorLog","registerChangeMethodName","length","closest","registerChangeModule","value","mapLengthVector","JSON","parse","val","methodElement","validator","passwordElement","vectorElement","passwordInfoAlert","addClass","attr","removeClass","text","removeAttr","registerForm","form","event","preventDefault","validationEngine","validationEngineOptions","progressElement","serializeFormData","response","showNotify","result","type","hide","trigger","formData","message","showConfirmModal","vtranslate","confirmedCallback","save","registerPreviewPassword","button","registerEvents"],"mappings":"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"}