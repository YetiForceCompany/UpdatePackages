{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_CurrencyUpdate_Index_Js',\n\t{},\n\t{\n\t\t/*\n\t\t * Shows or hides block informing about supported currencies by presently chosen bank\n\t\t */\n\t\tregisterInfoButton: function (container) {\n\t\t\tcontainer.find('#supportedCurrencies').on('click', function () {\n\t\t\t\tjQuery('#infoBlock').toggleClass('d-none');\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Shows or hides block informing about unsupported currencies by presently chosen bank\n\t\t */\n\t\tregisterAlertButton: function (container) {\n\t\t\tcontainer.find('#unsupportedCurrencies').on('click', function () {\n\t\t\t\tcontainer.find('#alertBlock').toggleClass('d-none');\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Event fired on bank picklist change.\n\t\t * Daves the chosen bank as active in database.\n\t\t * Updates information about supported and unsupported currencies for currently chosen bank,\n\t\t */\n\t\tregisterBankChange: function (container) {\n\t\t\tcontainer.find('#bank').on('change', function () {\n\t\t\t\tlet bankName = container.find('#bank option:selected').data('name');\n\t\t\t\tcontainer.find('#alertSpan').html('');\n\t\t\t\tcontainer.find('#infoSpan').html('');\n\t\t\t\tlet infoProgress = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tparams = {};\n\t\t\t\tparams.data = {\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'GetBankCurrencies',\n\t\t\t\t\tmode: 'supported',\n\t\t\t\t\tname: bankName\n\t\t\t\t};\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet response = data['result'],\n\t\t\t\t\t\thtml = '',\n\t\t\t\t\t\tname;\n\t\t\t\t\tfor (name in response) {\n\t\t\t\t\t\thtml += '<p><strong>' + name + '</strong> - ' + response[name] + '</p>';\n\t\t\t\t\t}\n\t\t\t\t\tcontainer.find('#infoSpan').html(html);\n\t\t\t\t});\n\n\t\t\t\tparams.data = {\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'GetBankCurrencies',\n\t\t\t\t\tmode: 'unsupported',\n\t\t\t\t\tname: bankName\n\t\t\t\t};\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet response = data['result'];\n\t\t\t\t\tif (jQuery.isEmptyObject(response)) {\n\t\t\t\t\t\tif (!container.find('#unsupportedCurrencies').hasClass('d-none')) {\n\t\t\t\t\t\t\tcontainer.find('#unsupportedCurrencies').addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!container.find('#alertBlock').hasClass('d-none')) {\n\t\t\t\t\t\t\tcontainer.find('#alertBlock').addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer.find('#unsupportedCurrencies').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tlet html = '',\n\t\t\t\t\t\tname;\n\t\t\t\t\tfor (name in response) {\n\t\t\t\t\t\thtml += '<p><strong>' + name + '</strong> - ' + response[name] + '</p>';\n\t\t\t\t\t}\n\t\t\t\t\tcontainer.find('#alertSpan').html(html);\n\t\t\t\t});\n\n\t\t\t\tlet bankId = jQuery('#bank option:selected').val();\n\t\t\t\tparams.data = {\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'SaveActiveBank',\n\t\t\t\t\tid: bankId\n\t\t\t\t};\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tlet response = data['result'];\n\t\t\t\t\tif (response['success']) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: response['message'],\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: response['message'],\n\t\t\t\t\t\t\thide: false,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tinfoProgress.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tvar container = jQuery('#currencyUpdateContainer');\n\t\t\tApp.Fields.Date.register('#datepicker', false, {});\n\t\t\tthis.registerInfoButton(container);\n\t\t\tthis.registerAlertButton(container);\n\t\t\tthis.registerBankChange(container);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerInfoButton","container","find","on","toggleClass","registerAlertButton","registerBankChange","data","html","progressIndicator","position","blockInfo","enabled","params","parent","app","getParentModuleName","module","getModuleName","action","mode","name","bankName","dataType","AppConnector","request","done","response","isEmptyObject","hasClass","addClass","removeClass","val","id","bankId","showNotify","text","type","hide","infoProgress","registerEvents","App","Fields","Date","register"],"mappings":"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"}