'use strict';

/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";jQuery.Class("Settings_ApiAddress_Configuration_Js",{},{registerSave:function registerSave(container){container.validationEngine(app.validationEngineOptions),container.find(".saveGlobal").on("click",function(e){if(!container.validationEngine("validate"))return app.formAlignmentAfterValidation(container),!1;var form=$(e.currentTarget).closest("form"),formData=form.serializeFormData(),active={};$("[name=\"active\"]").each(function(i,e){active[e.dataset.type]=e.checked?1:0;}),formData.active=active,formData.module="ApiAddress",formData.parent="Settings",formData.mode="global",formData.action="SaveConfig",AppConnector.request(formData).done(function(data){app.showNotify({text:data.result.message,type:"success"});}).fail(function(){app.showNotify({text:app.vtranslate("JS_ERROR"),type:"error"});});});},registerConfigModal:function registerConfigModal(container){container.find(".js-show-config-modal").on("click",function(e){var providerName=e.currentTarget.dataset.provider;app.showModalWindow({url:"index.php?module=ApiAddress&parent=Settings&view=ApiConfigModal&provider=".concat(providerName),cb:function cb(modalContainer){modalContainer.on("click",".js-modal__save",function(){var form=modalContainer.find("form");if(form.validationEngine("validate")){var formData=form.serializeFormData(),progress=$.progressIndicator({message:app.vtranslate("JS_SAVE_LOADER_INFO"),blockInfo:{enabled:!0}});app.saveAjax("",[],formData).done(function(){window.location.reload();}).fail(function(){app.showNotify({text:app.vtranslate("JS_ERROR"),type:"error"});}).always(function(){app.hideModalWindow(),progress.progressIndicator({mode:"hide"});});}});}});});},registerEvents:function registerEvents(){var container=$(".js-validation-form");this.registerConfigModal(container),this.registerSave(container);}});
//# sourceMappingURL=ApiAddress.min.js.map
