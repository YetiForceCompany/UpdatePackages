{"version":3,"file":"WidgetsManagement.min.js","sources":["WidgetsManagement.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_WidgetsManagement_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to create the array of block roles list\n\t\t */\n\t\tgetAuthorization: function () {\n\t\t\tlet authorization = [],\n\t\t\t\tcontainer = jQuery('#moduleBlocks');\n\t\t\tcontainer.find('.editFieldsTable').each(function () {\n\t\t\t\tauthorization.push(jQuery(this).data('code').toString());\n\t\t\t});\n\t\t\treturn authorization;\n\t\t},\n\n\t\tgetCurrentDashboardId() {\n\t\t\treturn $('.selectDashboard li a.active').parent().data('id');\n\t\t},\n\t\tregisterAddedDashboard() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.addDashboard').on('click', () => {\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: 'index.php?parent=Settings&module=' + app.getModuleName() + '&view=DashboardType',\n\t\t\t\t\tsendByAjaxCb: () => {\n\t\t\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\t\t\tthisInstance.getModuleLayoutEditor('Home').done((data) => {\n\t\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', (e) => {\n\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\tthisInstance\n\t\t\t\t\t.getModuleLayoutEditor($('#selectedModuleName').val(), $(e.currentTarget).data('id'))\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDashboardAction() {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.editDashboard').on('click', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\te.stopPropagation();\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=' +\n\t\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t\t'&view=DashboardType&dashboardId=' +\n\t\t\t\t\t\tcurrentTarget.closest('li').data('id'),\n\t\t\t\t\tsendByAjaxCb: () => {\n\t\t\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\t\t\tthisInstance.getModuleLayoutEditor('Home', currentTarget.closest('li').data('id')).done((data) => {\n\t\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t$('.deleteDashboard').on('click', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\te.stopPropagation();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Dashboard',\n\t\t\t\t\tmode: 'delete',\n\t\t\t\t\tdashboardId: currentTarget.closest('li').data('id')\n\t\t\t\t}).done(() => {\n\t\t\t\t\tlet contentsDiv = $('.contentsDiv');\n\t\t\t\t\tthisInstance.getModuleLayoutEditor('Home', 1).done((data) => {\n\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click event for add custom block button\n\t\t */\n\t\tregisterAddBlockDashBoard: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = jQuery('#layoutDashBoards');\n\t\t\tcontents.find('.addBlockDashBoard').on('click', function (e) {\n\t\t\t\tvar addBlockContainer = contents.find('.addBlockDashBoardModal').clone(true, true);\n\t\t\t\tvar inUseAuthorization = thisInstance.getAuthorization();\n\t\t\t\taddBlockContainer.find('select.authorized option').each(function () {\n\t\t\t\t\tif (jQuery.inArray(jQuery(this).val(), inUseAuthorization) != -1) jQuery(this).remove();\n\t\t\t\t});\n\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tApp.Fields.Picklist.changeSelectElementView(data.find('select'));\n\t\t\t\t\tvar form = data.find('.addBlockDashBoardForm');\n\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tvar paramsForm = form.serializeFormData();\n\t\t\t\t\t\t\tdelete paramsForm._csrf;\n\t\t\t\t\t\t\tthisInstance.save(paramsForm, 'addBlock').done(function (data) {\n\t\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\t\tvar response = data.result;\n\t\t\t\t\t\t\t\tif (response['success']) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_ADDED');\n\t\t\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparams['text'] = response['message'];\n\t\t\t\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddBlockContainer,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.js-authorized'));\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\tsave: function (form, mode, params = null) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!params) {\n\t\t\t\tparams = {};\n\t\t\t\tparams['form'] = form;\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['sourceModule'] = jQuery('#selectedModuleName').val();\n\t\t\t\tparams['action'] = 'SaveAjax';\n\t\t\t\tparams['mode'] = mode;\n\t\t\t}\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\tregisterSpecialWidget: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('#layoutDashBoards');\n\t\t\tcontainer.find('.addNotebook').on('click', function (e) {\n\t\t\t\tthisInstance.addNoteBookWidget(this, jQuery(this).data('url'));\n\t\t\t});\n\t\t\tcontainer.find('.addMiniList').on('click', function (e) {\n\t\t\t\tthisInstance.addMiniListWidget(this, jQuery(this).data('url'));\n\t\t\t});\n\t\t\tcontainer.find('.addRss').on('click', function (e) {\n\t\t\t\tthisInstance.addRssWidget($(e.currentTarget), jQuery(this).data('url'));\n\t\t\t});\n\t\t},\n\t\taddRssWidget: function (element, url) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar objectToShowModal = {\n\t\t\t\turl: 'index.php?module=' + app.getModuleName() + '&parent=' + app.getParentModuleName() + '&view=AddRss',\n\t\t\t\tcb: function (container) {\n\t\t\t\t\tcontainer.find('.removeChannel').on('click', function (e) {\n\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\tvar row = currentTarget.closest('.form-group');\n\t\t\t\t\t\trow.remove();\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('.addChannel').on('click', function (e) {\n\t\t\t\t\t\tvar newRow = container.find('.newChannel').clone();\n\t\t\t\t\t\tvar formContainer = container.find('.formContainer');\n\t\t\t\t\t\tformContainer.append(newRow);\n\t\t\t\t\t\tnewRow.removeClass('d-none');\n\t\t\t\t\t\tnewRow.removeClass('newChannel');\n\t\t\t\t\t\tnewRow.find('input').removeAttr('disabled');\n\t\t\t\t\t\tnewRow.find('.removeChannel').on('click', function (e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tvar row = currentTarget.closest('.form-group');\n\t\t\t\t\t\t\trow.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('[name=\"blockId\"]').val(element.data('blockId'));\n\t\t\t\t\tcontainer.find('[name=\"linkId\"]').val(element.data('linkid'));\n\t\t\t\t\tvar form = container.find('form');\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar channels = [];\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tform.find('.channelRss:not(:disabled)').each(function () {\n\t\t\t\t\t\t\t\tchannels.push(jQuery(this).val());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet paramsForm = form.serializeFormData();\n\t\t\t\t\t\t\tparamsForm.channels = channels;\n\t\t\t\t\t\t\tAppConnector.request(paramsForm).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_WIDGET_ADDED') });\n\t\t\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tapp.showModalWindow(objectToShowModal);\n\t\t},\n\t\taddNoteBookWidget: function (element, url) {\n\t\t\tvar thisInstance = this;\n\t\t\telement = jQuery(element);\n\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=AddNotePad', function (wizardContainer) {\n\t\t\t\tvar form = jQuery('form', wizardContainer);\n\t\t\t\tform.validationEngine(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tonValidationComplete: function (form, valid) {\n\t\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\t\t//To prevent multiple click on save\n\t\t\t\t\t\t\t\t\tjQuery(\"[name='saveButton']\", wizardContainer).attr('disabled', 'disabled');\n\t\t\t\t\t\t\t\t\tvar notePadName = form.find('[name=\"notePadName\"]').val();\n\t\t\t\t\t\t\t\t\tvar notePadContent = form.find('[name=\"notePadContent\"]').val();\n\t\t\t\t\t\t\t\t\tvar isDefault = 0;\n\t\t\t\t\t\t\t\t\tvar linkId = element.data('linkid');\n\t\t\t\t\t\t\t\t\tvar blockId = element.data('block-id');\n\t\t\t\t\t\t\t\t\tvar noteBookParams = {\n\t\t\t\t\t\t\t\t\t\tmodule: jQuery('#selectedModuleName').val(),\n\t\t\t\t\t\t\t\t\t\taction: 'NoteBook',\n\t\t\t\t\t\t\t\t\t\tmode: 'noteBookCreate',\n\t\t\t\t\t\t\t\t\t\tnotePadName: notePadName,\n\t\t\t\t\t\t\t\t\t\tnotePadContent: notePadContent,\n\t\t\t\t\t\t\t\t\t\tblockid: blockId,\n\t\t\t\t\t\t\t\t\t\tlinkId: linkId,\n\t\t\t\t\t\t\t\t\t\tisdefault: isDefault,\n\t\t\t\t\t\t\t\t\t\twidth: 4,\n\t\t\t\t\t\t\t\t\t\theight: 3\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tAppConnector.request(noteBookParams).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\t\t\t\t\tvar widgetId = data.result.widgetId;\n\t\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\t\tnoteBookParams['id'] = widgetId;\n\t\t\t\t\t\t\t\t\t\t\tnoteBookParams['label'] = notePadName;\n\t\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_ADDED')\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tapp.validationEngineOptions\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\taddMiniListWidget: function (element, url) {\n\t\t\t// 1. Show popup window for selection (module, filter, fields)\n\t\t\t// 2. Compute the dynamic mini-list widget url\n\t\t\t// 3. Add widget with URL to the page.\n\t\t\tconst thisInstance = this;\n\t\t\telement = $(element);\n\t\t\tapp.showModalWindow(null, url, function (wizardContainer) {\n\t\t\t\tlet form = $('form', wizardContainer),\n\t\t\t\t\tmoduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer),\n\t\t\t\t\tfilteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer),\n\t\t\t\t\tfieldHrefDOM = $('select[name=\"field_href\"]', wizardContainer),\n\t\t\t\t\tfieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer),\n\t\t\t\t\tfilterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer),\n\t\t\t\t\tmoduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t}),\n\t\t\t\t\tfilteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t}),\n\t\t\t\t\tfieldHrefSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldHrefDOM, {\n\t\t\t\t\t\tallowClear: true\n\t\t\t\t\t}),\n\t\t\t\t\tfieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t}),\n\t\t\t\t\tfilterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t}),\n\t\t\t\t\tfooter = $('.modal-footer', wizardContainer);\n\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\tfieldHrefDOM.closest('tr').hide();\n\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\tfilterFieldsSelectDOM.closest('tr').hide();\n\t\t\t\tfooter.hide();\n\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\tfilterFieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfooter.hide();\n\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\tfilterFieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\tres = $(res);\n\t\t\t\t\t\tfieldsSelectDOM.empty().html(res.find('select[name=\"fields\"]').html()).trigger('change');\n\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(res.find('select[name=\"filter_fields\"]').html()).trigger('change');\n\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldHrefSelect2.closest('tr').show();\n\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t\tfilterFieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\tfieldHrefDOM.find('option:not([value=\"\"]').remove();\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('option:checked')\n\t\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\t\tlet option = $(element);\n\t\t\t\t\t\t\tlet newOption = new Option(option.text(), option.val(), true, true);\n\t\t\t\t\t\t\tfieldHrefSelect2.append(newOption);\n\t\t\t\t\t\t});\n\t\t\t\t\tfieldHrefSelect2.val('').trigger('change');\n\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\tfieldsSelect2.select2('data').map(function (obj) {\n\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t});\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tmodule: moduleNameSelect2.val()\n\t\t\t\t\t};\n\t\t\t\t\tdata['fields'] = selectedFields;\n\t\t\t\t\tdata['filterFields'] = filterFieldsSelect2.val();\n\t\t\t\t\tdata['fieldHref'] = fieldHrefSelect2.val();\n\t\t\t\t\tlet paramsForm = {\n\t\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\t\tlabel: moduleNameSelect2.find(':selected').text() + ' - ' + filteridSelect2.find(':selected').text(),\n\t\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\t\tfilterid: filteridSelect2.val(),\n\t\t\t\t\t\tisdefault: 0,\n\t\t\t\t\t\tcache: 0,\n\t\t\t\t\t\theight: 4,\n\t\t\t\t\t\twidth: 4,\n\t\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\t\tdefault_owner: 'mine'\n\t\t\t\t\t};\n\t\t\t\t\tlet sourceModule = $('[name=\"widgetsManagementEditorModules\"]').val();\n\t\t\t\t\tlet baseParams = {\n\t\t\t\t\t\tform: paramsForm,\n\t\t\t\t\t\tmodule: sourceModule,\n\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\taction: 'Widget',\n\t\t\t\t\t\tmode: 'add',\n\t\t\t\t\t\taddToUser: false,\n\t\t\t\t\t\tlinkid: paramsForm.linkid,\n\t\t\t\t\t\tname: paramsForm.name\n\t\t\t\t\t};\n\t\t\t\t\tthisInstance.save(paramsForm, 'save', baseParams).done(function (data) {\n\t\t\t\t\t\tlet result = data['result'],\n\t\t\t\t\t\t\tparams = {};\n\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_WIDGET_ADDED');\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\t\t\terrorField;\n\t\t\t\t\t\t\tif (data['error']['code'] !== 513) {\n\t\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Reload content\n\t\t */\n\t\treloadContent: function () {\n\t\t\t$('.selectDashboard .nav-link.active').trigger('click');\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom block\n\t\t */\n\t\tregisterDeleteCustomBlockEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = jQuery('#layoutDashBoards');\n\t\t\tcontents.on('click', '.js-delete-custom-block-btn', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar table = currentTarget.closest('div.editFieldsTable');\n\t\t\t\tvar blockId = table.data('block-id');\n\t\t\t\tvar paramsFrom = {};\n\t\t\t\tparamsFrom['blockid'] = blockId;\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tthisInstance.save(paramsFrom, 'removeBlock').done(function (_) {\n\t\t\t\t\t\t\tthisInstance.reloadContent();\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_CUSTOM_BLOCK_DELETED') });\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = $('#widgetsManagementEditorContainer');\n\t\t\tlet contentsDiv = container.closest('.contentsDiv');\n\t\t\tApp.Fields.Picklist.changeSelectElementView(container.find('[name=\"widgetsManagementEditorModules\"]'));\n\t\t\tcontainer.on('change', '[name=\"widgetsManagementEditorModules\"]', (e) => {\n\t\t\t\tthisInstance\n\t\t\t\t\t.getModuleLayoutEditor($(e.currentTarget).val(), thisInstance.getCurrentDashboardId())\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tthisInstance.updateContentsDiv(contentsDiv, data);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Update contents div and register events.\n\t\t * @param {jQuery} contentsDiv\n\t\t * @param {HTMLElement} data\n\t\t */\n\t\tupdateContentsDiv(contentsDiv, data) {\n\t\t\tcontentsDiv.html(data);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(contentsDiv.find('.select2'));\n\t\t\tthis.registerEvents();\n\t\t},\n\t\t/**\n\t\t * Function to get the respective module layout editor through pjax\n\t\t */\n\t\tgetModuleLayoutEditor: function (selectedModule, selectedDashboard) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Configuration';\n\t\t\tparams['sourceModule'] = selectedModule;\n\t\t\tparams['dashboardId'] = selectedDashboard;\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/**\n\t\t * Function to register the click event for delete widget\n\t\t */\n\t\tregisterDeleteWidgetEvent: function (contents) {\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = jQuery('#layoutDashBoards');\n\t\t\t}\n\t\t\tcontents.find('.js-delete-widget').on('click', (e) => {\n\t\t\t\tlet widgetId = e.currentTarget.dataset.id;\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.saveAjax('delete', null, { widgetId: widgetId }).done((data) => {\n\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_CUSTOM_FIELD_DELETED')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthis.reloadContent();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterWidgetEvent: function () {\n\t\t\tlet contents = $('#layoutDashBoards');\n\t\t\tcontents.find('.js-edit-widget').on('click', (e) => {\n\t\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\t\tthis.addWidget(url);\n\t\t\t});\n\n\t\t\tcontents.find('.js-add-widget').on('click', (e) => {\n\t\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\t\tif (!url) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: url,\n\t\t\t\t\tcb: (modalContainer) => {\n\t\t\t\t\t\tmodalContainer.on('click', '.js-modal__save', (_) => {\n\t\t\t\t\t\t\tlet selectedOption = modalContainer.find('.js-widget').val();\n\t\t\t\t\t\t\tif (selectedOption) {\n\t\t\t\t\t\t\t\tthis.addWidget(selectedOption);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.registerDeleteWidgetEvent(contents);\n\t\t},\n\n\t\taddWidget: function (url) {\n\t\t\tapp.showModalWindow({\n\t\t\t\turl: url,\n\t\t\t\tcb: (container) => {\n\t\t\t\t\tapp.showPopoverElementView(container.find('.js-popover-tooltip'));\n\t\t\t\t},\n\t\t\t\tsendByAjaxCb: (_, response) => {\n\t\t\t\t\tif (response.result === true) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_ADDED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.reloadContent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for layout editor\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerAddBlockDashBoard();\n\t\t\tthis.registerWidgetEvent();\n\t\t\tthis.registerSpecialWidget();\n\t\t\tthis.registerDeleteCustomBlockEvent();\n\t\t\tthis.registerModulesChangeEvent();\n\t\t\tthis.registerAddedDashboard();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerDashboardAction();\n\t\t}\n\t}\n);\n\n$(function () {\n\tvar instance = new Settings_WidgetsManagement_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","getAuthorization","container","find","each","authorization","push","data","toString","getCurrentDashboardId","parent","registerAddedDashboard","$","on","app","showModalWindow","url","getModuleName","sendByAjaxCb","thisInstance","getModuleLayoutEditor","done","updateContentsDiv","contentsDiv","registerSelectDashboard","e","val","currentTarget","registerDashboardAction","stopPropagation","closest","AppConnector","request","module","action","mode","dashboardId","registerAddBlockDashBoard","contents","addBlockContainer","clone","inUseAuthorization","inArray","remove","App","Fields","Picklist","changeSelectElementView","form","validationEngine","validationEngineOptions","serializeFormData","paramsForm","_csrf","save","params","response","result","hideModalWindow","vtranslate","reloadContent","Settings_Vtiger_Index_Js","showMessage","preventDefault","callBackFunction","showSelect2ElementView","width","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","getParentModuleName","resolve","fail","error","reject","promise","registerSpecialWidget","addNoteBookWidget","addMiniListWidget","addRssWidget","element","objectToShowModal","cb","row","formContainer","append","newRow","removeClass","removeAttr","channels","text","wizardContainer","extend","onValidationComplete","valid","attr","notePadContent","linkId","blockId","noteBookParams","notePadName","blockid","isdefault","height","success","widgetId","moduleNameSelectDOM","filteridSelectDOM","fieldHrefDOM","fieldsSelectDOM","filterFieldsSelectDOM","moduleNameSelect2","placeholder","filteridSelect2","fieldHrefSelect2","allowClear","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","footer","hide","view","step","selectedModule","res","empty","html","trigger","show","filterid","$selection","css","index","newOption","Option","option","select2","map","obj","selectedFields","id","JSON","stringify","title","linkid","label","name","cache","owners_all","default_owner","sourceModule","baseParams","addToUser","message","errorField","registerDeleteCustomBlockEvent","table","paramsFrom","showConfirmModal","confirmedCallback","registerModulesChangeEvent","registerEvents","selectedDashboard","requestPjax","registerDeleteWidgetEvent","dataset","saveAjax","type","progress","registerWidgetEvent","addWidget","modalContainer","selectedOption","showPopoverElementView","_","Settings_WidgetsManagement_Js","instance"],"mappings":"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"}