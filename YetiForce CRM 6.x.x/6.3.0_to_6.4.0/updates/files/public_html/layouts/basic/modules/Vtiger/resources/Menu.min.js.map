{"version":3,"file":"Menu.min.js","sources":["Menu.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\njQuery.Class('Vtiger_Menu_Js', {\n\tregisterMenu: function () {\n\t\tvar largeNav = jQuery('#largeNavDiv nav').width();\n\t\tvar tabsWidth = 0;\n\n\t\tjQuery('#largeNavDiv ul.nav.modulesList')\n\t\t\t.children('li')\n\t\t\t.each(function () {\n\t\t\t\tvar eWidth = jQuery(this).width();\n\t\t\t\tvar moreMenuElement = jQuery('#commonMoreMenu li[data-id=\"' + jQuery(this).data('id') + '\"]');\n\t\t\t\ttabsWidth += eWidth;\n\t\t\t\tif (tabsWidth > largeNav) {\n\t\t\t\t\tjQuery(this).hide();\n\t\t\t\t\tmoreMenuElement.show();\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(this).show();\n\t\t\t\t\tmoreMenuElement.hide();\n\t\t\t\t}\n\t\t\t});\n\t\tif (tabsWidth < largeNav) jQuery('#commonMoreMenu').hide();\n\t},\n\n\t/**\n\t * Gets the number of entries according to the selected filter\n\t */\n\tregisterRecordsCount() {\n\t\t$('.js-menu__content .js-count').each(function (_index, element) {\n\t\t\tlet countEntries = $(element);\n\t\t\tif (countEntries.length > 0) {\n\t\t\t\tAppConnector.request(countEntries.parent().attr('href') + '&action=Pagination&mode=getTotalCount').done(\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tcountEntries.text(JSON.parse(data).result.totalCount);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n});\nvar menu = new Vtiger_Menu_Js();\njQuery(window).on('resize', () => {\n\tmenu.registerMenu();\n});\njQuery(function () {\n\tmenu.registerMenu();\n\tmenu.registerRecordsCount();\n});\n"],"names":["jQuery","Class","registerMenu","largeNav","width","tabsWidth","children","each","moreMenuElement","data","eWidth","hide","show","registerRecordsCount","$","_index","element","countEntries","length","AppConnector","request","parent","attr","done","text","JSON","parse","result","totalCount","menu","window","on"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFACA,YAAA,CAEAA,MAAM,CAACC,KAAP,CAAa,gBAAb,CAA+B,CAC9BC,YAAY,CAAE,SAAA,YAAA,EAAY,CACrBC,IAAAA,QAAQ,CAAGH,MAAM,CAAC,kBAAD,CAAN,CAA2BI,KAA3B,EADU,CAErBC,SAAS,CAAG,CAFS,CAIzBL,MAAM,CAAC,iCAAD,CAAN,CACEM,QADF,CACW,IADX,CAAA,CAEEC,IAFF,CAEO,UAAY,CAAA,IACP,MAAA,CAAGP,MAAM,CAAC,IAAD,CAAN,CAAaI,KAAb,EADI,CAEbI,eAAe,CAAGR,MAAM,CAAC,+BAAA,CAAiCA,MAAM,CAAC,IAAD,CAAN,CAAaS,IAAb,CAAkB,IAAlB,CAAjC,CAA2D,KAA5D,CAFX,CAGjBJ,SAAS,EAAIK,MAHI,CAIbL,SAAS,CAAGF,QAJC,EAKhBH,MAAM,CAAC,IAAD,CAAN,CAAaW,IAAb,EALgB,CAMhBH,eAAe,CAACI,IAAhB,EANgB,GAQhBZ,MAAM,CAAC,IAAD,CAAN,CAAaY,IAAb,EARgB,CAShBJ,eAAe,CAACG,IAAhB,EATgB,EAWjB,CAbF,CAJyB,CAkBrBN,SAAS,CAAGF,QAlBS,EAkBCH,MAAM,CAAC,iBAAD,CAAN,CAA0BW,IAA1B,GAC1B,CApB6B;AAuB/B;AACA,IACCE,oBAzB8B,CAyBP,SAAA,oBAAA,EAAA,CACtBC,CAAC,CAAC,6BAAD,CAAD,CAAiCP,IAAjC,CAAsC,SAAUQ,MAAV,CAAkBC,OAAlB,CAA2B,CAChE,IAAgB,YAAA,CAAGF,CAAC,CAACE,OAAD,CAApB,CAC0B,CAAtB,CAAAC,YAAY,CAACC,MAF+C,EAG/DC,YAAY,CAACC,OAAb,CAAqBH,YAAY,CAACI,MAAb,EAAA,CAAsBC,IAAtB,CAA2B,MAA3B,CAAqC,CAAA,uCAA1D,CAAmGC,CAAAA,IAAnG,CACC,SAAUd,IAAV,CAAgB,CACfQ,YAAY,CAACO,IAAb,CAAkBC,IAAI,CAACC,KAAL,CAAWjB,IAAX,CAAA,CAAiBkB,MAAjB,CAAwBC,UAA1C,EACA,CAHF,EAMD,CATD,EAUA,CApC6B,CAA/B,EAsCA,IAAIC,IAAI,CAAG,kBAAX,CACA7B,MAAM,CAAC8B,MAAD,CAAN,CAAeC,EAAf,CAAkB,QAAlB,CAA4B,UAAM,CACjCF,IAAI,CAAC3B,YAAL,GACA,CAFD,EAGAF,MAAM,CAAC,UAAY,CAClB6B,IAAI,CAAC3B,YAAL,EADkB,CAElB2B,IAAI,CAAChB,oBAAL,GACA,CAHK;;"}