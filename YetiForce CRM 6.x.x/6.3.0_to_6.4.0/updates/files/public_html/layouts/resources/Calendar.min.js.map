{"version":3,"file":"Calendar.min.js","sources":["Calendar.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 5.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n/** Class representing a calendar. */\nwindow.Calendar_Js = class {\n\tstatic monthFormat = {\n\t\t'yyyy-mm-dd': 'YYYY-MMMM',\n\t\t'mm-dd-yyyy': 'MMMM-YYYY',\n\t\t'dd-mm-yyyy': 'MMMM-YYYY',\n\t\t'yyyy.mm.dd': 'YYYY.MMMM',\n\t\t'mm.dd.yyyy': 'MMMM.YYYY',\n\t\t'dd.mm.yyyy': 'MMMM.YYYY',\n\t\t'yyyy/mm/dd': 'YYYY/MMMM',\n\t\t'mm/dd/yyyy': 'MMMM/YYYY',\n\t\t'dd/mm/yyyy': 'MMMM/YYYY'\n\t};\n\tstatic viewsNamesMap = {\n\t\tmonth: 'dayGridMonth',\n\t\tbasicWeek: 'dayGridWeek',\n\t\tbasicDay: 'dayGridDay',\n\t\ttimeGridWeek: 'timeGridWeek',\n\t\ttimeGridDay: 'timeGridDay'\n\t};\n\tstatic viewsNamesLabels = {\n\t\tdayGridMonth: 'month',\n\t\tdayGridWeek: 'week',\n\t\tdayGridDay: 'day',\n\t\tlistWeek: 'week',\n\t\ttimeGridWeek: 'week',\n\t\ttimeGridDay: 'day'\n\t};\n\t/**\n\t * Create calendar's options.\n\t * @param {jQuery} container\n\t * @param {bool} readonly\n\t * @param {boolean} browserHistory\n\t */\n\tconstructor(container = $('.js-base-container'), readonly = false, browserHistory = true) {\n\t\tthis.calendarCreateView = false;\n\t\tthis.container = container;\n\t\tthis.calendarView = container.find('.js-calendar__container');\n\t\tthis.readonly = readonly;\n\t\tthis.eventCreate = app.getMainParams('eventCreate');\n\t\tthis.eventEdit = app.getMainParams('eventEdit');\n\t\tthis.browserHistory = !readonly && browserHistory;\n\t\tthis.sidebarView = {\n\t\t\tlength: 0\n\t\t};\n\t\tthis.startHour = app.getMainParams('startHour');\n\t\tthis.endHour = app.getMainParams('endHour');\n\t\tif (this.startHour == '') {\n\t\t\tthis.startHour = '00';\n\t\t}\n\t\tif (this.endHour == '') {\n\t\t\tthis.endHour = '00';\n\t\t}\n\t\tthis.browserHistoryOptions = {};\n\t\tthis.browserHistoryConfig = this.browserHistory ? this.setBrowserHistoryOptions() : {};\n\t\tthis.calendarOptions = this.setCalendarOptions();\n\t\tthis.eventTypeKeyName = false;\n\t\tthis.module = app.getModuleName();\n\n\t\tapp.event.on('QuickEdit.AfterSaveFinal', () => {\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Set calendar's options.\n\t * @returns {object}\n\t */\n\tsetCalendarOptions() {\n\t\treturn Object.assign(\n\t\t\tthis.setCalendarBasicOptions(),\n\t\t\tthis.setCalendarAdvancedOptions(),\n\t\t\tthis.setCalendarModuleOptions(),\n\t\t\tthis.browserHistoryOptions\n\t\t);\n\t}\n\t/**\n\t * Set calendar's basic options.\n\t * @returns {object}\n\t */\n\tsetCalendarBasicOptions() {\n\t\tlet eventLimit = app.getMainParams('eventLimit'),\n\t\t\tuserView = app.getMainParams('activity_view'),\n\t\t\tdefaultView = app.moduleCacheGet('defaultView'),\n\t\t\tuserTimeFormat = CONFIG.hourFormat;\n\t\tif (eventLimit == 'true') {\n\t\t\teventLimit = true;\n\t\t} else if (eventLimit == 'false') {\n\t\t\teventLimit = false;\n\t\t} else {\n\t\t\teventLimit = parseInt(eventLimit) + 1;\n\t\t}\n\t\tif (userView === 'Today') {\n\t\t\tuserView = app.getMainParams('dayView');\n\t\t} else if (userView === 'This Week') {\n\t\t\tuserView = app.getMainParams('weekView');\n\t\t} else if (userView === 'This Year') {\n\t\t\tuserView = 'year';\n\t\t} else {\n\t\t\tuserView = 'dayGridMonth';\n\t\t}\n\t\tif (defaultView != null) {\n\t\t\tuserView = defaultView;\n\t\t}\n\t\tif (userTimeFormat == 24) {\n\t\t\tuserTimeFormat = {\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t\thour12: false,\n\t\t\t\tmeridiem: false\n\t\t\t};\n\t\t} else {\n\t\t\tuserTimeFormat = {\n\t\t\t\thour: 'numeric',\n\t\t\t\tminute: '2-digit',\n\t\t\t\tmeridiem: 'short'\n\t\t\t};\n\t\t}\n\n\t\tlet options = {\n\t\t\teventTimeFormat: userTimeFormat,\n\t\t\tslotLabelFormat: userTimeFormat,\n\t\t\tinitialView: Calendar_Js.viewsNamesMap[userView] ? Calendar_Js.viewsNamesMap[userView] : userView,\n\t\t\tforceEventDuration: true,\n\t\t\tdefaultTimedEventDuration: '01:00:00',\n\t\t\tdayMaxEvents: eventLimit,\n\t\t\tselectMirror: true,\n\t\t\tscrollTime: this.startHour + ':00'\n\t\t};\n\t\tif (app.moduleCacheGet('start') !== null && app.moduleCacheGet('start') !== undefined) {\n\t\t\tlet s = App.Fields.Date.getDateInstance(app.moduleCacheGet('start'));\n\t\t\tlet e = App.Fields.Date.getDateInstance(app.moduleCacheGet('end'));\n\t\t\toptions.initialDate = App.Fields.Date.dateToDbFormat(new Date(e - (e - s) / 2));\n\t\t}\n\n\t\treturn Object.assign(this.setCalendarMinimalOptions(), options);\n\t}\n\t/**\n\t * Set calendar's minimal options.\n\t * @returns {object}\n\t */\n\tsetCalendarMinimalOptions() {\n\t\tlet hiddenDays = [];\n\t\tif (app.getMainParams('switchingDays') === 'workDays') {\n\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t}\n\t\treturn {\n\t\t\tnavLinks: true,\n\t\t\tfirstDay: CONFIG.firstDayOfWeekNo,\n\t\t\tselectable: true,\n\t\t\thiddenDays: hiddenDays,\n\t\t\tmoreLinkContent: app.vtranslate('JS_MORE'),\n\t\t\tallDayText: app.vtranslate('JS_ALL_DAY'),\n\t\t\tnoEventsText: app.vtranslate('JS_NO_RECORDS'),\n\t\t\tbuttonText: {\n\t\t\t\ttoday: '',\n\t\t\t\tyear: app.vtranslate('JS_YEAR'),\n\t\t\t\tweek: app.vtranslate('JS_WEEK'),\n\t\t\t\tmonth: app.vtranslate('JS_MONTH'),\n\t\t\t\tday: app.vtranslate('JS_DAY'),\n\t\t\t\tdayGridMonth: app.vtranslate('JS_MONTH'),\n\t\t\t\tdayGridWeek: app.vtranslate('JS_WEEK'),\n\t\t\t\tlistWeek: app.vtranslate('JS_WEEK'),\n\t\t\t\tdayGridDay: app.vtranslate('JS_DAY'),\n\t\t\t\ttimeGridDay: app.vtranslate('JS_DAY'),\n\t\t\t\tlist: app.vtranslate('JS_CALENDAR_LIST')\n\t\t\t},\n\t\t\tbuttonHints: {\n\t\t\t\tprev(buttonText) {\n\t\t\t\t\treturn `${app.vtranslate('JS_PREV')} ${buttonText}`;\n\t\t\t\t},\n\t\t\t\tnext(buttonText) {\n\t\t\t\t\treturn `${app.vtranslate('JS_NEXT')} ${buttonText}`;\n\t\t\t\t},\n\t\t\t\ttoday(buttonText) {\n\t\t\t\t\treturn `${app.vtranslate('JS_CURRENT')} ${buttonText}`;\n\t\t\t\t}\n\t\t\t},\n\t\t\tviewHint: '$0',\n\t\t\tnavLinkHint: (_dateStr, zonedDate) => {\n\t\t\t\treturn App.Fields.Date.dateToUserFormat(zonedDate);\n\t\t\t},\n\t\t\tdayHeaderContent: (arg) => {\n\t\t\t\tif (this.container.width() < 600) {\n\t\t\t\t\treturn App.Fields.Date.daysTranslated[arg.date.getDay()];\n\t\t\t\t}\n\t\t\t\treturn App.Fields.Date.fullDaysTranslated[arg.date.getDay()];\n\t\t\t}\n\t\t};\n\t}\n\t/**\n\t * Set calendar's advanced options.\n\t * @returns {object}\n\t */\n\tsetCalendarAdvancedOptions() {\n\t\tconst self = this;\n\t\treturn {\n\t\t\teditable: !this.readonly && this.eventEdit == 1,\n\t\t\tselectable: !this.readonly && this.eventCreate == 1,\n\t\t\theaderToolbar: {\n\t\t\t\tleft: 'dayGridMonth,' + app.getMainParams('weekView') + ',' + app.getMainParams('dayView'),\n\t\t\t\tcenter: 'title,today',\n\t\t\t\tright: 'prev,next'\n\t\t\t},\n\t\t\tallDaySlot: app.getMainParams('allDaySlot'),\n\t\t\tviews: {\n\t\t\t\tbasic: {\n\t\t\t\t\tdayMaxEvents: false\n\t\t\t\t},\n\t\t\t\tdayGridMonth: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'month');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttimeGridWeek: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'week');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttimeGridDay: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'day');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlistWeek: {\n\t\t\t\t\ttitleFormat: (args) => {\n\t\t\t\t\t\treturn this.formatDate(args.date, 'week');\n\t\t\t\t\t},\n\t\t\t\t\tdayHeaderContent: (arg) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtml: `<span class=\"fc-list-day-text\">${App.Fields.Date.fullDaysTranslated[arg.date.getDay()]}</span>\n\t\t\t\t\t\t\t<span class=\"fc-list-day-side-text\">${App.Fields.Date.dateToUserFormat(arg.date)}</span>`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbasicDay: {\n\t\t\t\t\ttype: 'timeGridDay'\n\t\t\t\t}\n\t\t\t},\n\t\t\teventDrop: self.updateEvent,\n\t\t\teventResize: self.updateEvent,\n\t\t\tdatesSet: (dateInfo) => {\n\t\t\t\tapp.event.trigger('Calendar.DatesSet', dateInfo, this);\n\t\t\t\tself.loadCalendarData();\n\t\t\t},\n\t\t\teventContent: self.eventRenderer,\n\t\t\theight: this.setCalendarHeight()\n\t\t};\n\t}\n\t/**\n\t * Set calendar module's options.\n\t * @returns {object}\n\t */\n\tsetCalendarModuleOptions() {\n\t\treturn {};\n\t}\n\t/**\n\t * Invokes FullCalendar with options.\n\t */\n\trenderCalendar() {\n\t\tthis.fullCalendar = new FullCalendar.Calendar(this.calendarView.get(0), this.calendarOptions);\n\t\tthis.fullCalendar.render();\n\t\tthis.registerViewRenderEvents();\n\t}\n\t/**\n\t * Get calendar container.\n\t * @returns {(boolean|jQuery)}\n\t */\n\tgetCalendarView() {\n\t\tif (!this.calendarView) {\n\t\t\tthis.calendarView = this.container.find('.js-calendar__container');\n\t\t}\n\t\treturn this.calendarView;\n\t}\n\t/**\n\t * Load calendar data\n\t */\n\tloadCalendarData() {\n\t\tconst defaultParams = this.getDefaultParams();\n\t\tthis.fullCalendar.removeAllEvents();\n\t\tif (!defaultParams.emptyFilters) {\n\t\t\tconst progressInstance = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\tAppConnector.request(defaultParams).done((events) => {\n\t\t\t\tthis.fullCalendar.addEventSource(events.result);\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t}\n\t}\n\t/**\n\t * Reload calendar data after changing search parameters\n\t */\n\treloadCalendarData() {\n\t\tthis.loadCalendarData();\n\t}\n\t/**\n\t * Default params\n\t * @returns {{module: string, action: string, mode: string, start: string, end: string, user: *, cvid: int, emptyFilters: boolean}}\n\t */\n\tgetDefaultParams() {\n\t\tlet users = app.moduleCacheGet('calendar-users') || CONFIG.userId,\n\t\t\tsideBar = this.getSidebarView(),\n\t\t\tfilters = [],\n\t\t\tparams = {\n\t\t\t\tmodule: this.module ? this.module : CONFIG.module,\n\t\t\t\taction: 'Calendar',\n\t\t\t\tmode: 'getEvents',\n\t\t\t\tstart: App.Fields.Date.dateToUserFormat(this.fullCalendar.view.activeStart),\n\t\t\t\tend: App.Fields.Date.dateToUserFormat(this.fullCalendar.view.activeEnd),\n\t\t\t\tuser: users,\n\t\t\t\tcvid: this.getCurrentCvId(),\n\t\t\t\temptyFilters: users.length === 0\n\t\t\t};\n\t\tsideBar.find('.calendarFilters .filterField').each(function () {\n\t\t\tlet element = $(this),\n\t\t\t\tname,\n\t\t\t\tvalue;\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tname = element.val();\n\t\t\t\tvalue = element.prop('checked') ? 1 : 0;\n\t\t\t} else {\n\t\t\t\tname = element.attr('name');\n\t\t\t\tvalue = element.val();\n\t\t\t}\n\t\t\tfilters.push({ name: name, value: value });\n\t\t});\n\t\tif (filters.length) {\n\t\t\tparams.filters = filters;\n\t\t}\n\t\tsideBar.find('.js-sidebar-filter-container').each((_, e) => {\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.data('name');\n\t\t\tlet cacheName = element.data('cache');\n\t\t\tif (name && cacheName && app.moduleCacheGet(cacheName)) {\n\t\t\t\tparams[name] = app.moduleCacheGet(cacheName);\n\t\t\t\tparams.emptyFilters = !params.emptyFilters && params[name].length === 0;\n\t\t\t}\n\t\t});\n\t\tsideBar.find('.js-filter__container_checkbox_list').each((_, e) => {\n\t\t\tlet filters = [];\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.data('name');\n\t\t\telement.find('.js-filter__item__val:checked').each(function () {\n\t\t\t\tfilters.push($(this).val());\n\t\t\t});\n\t\t\tif (name) {\n\t\t\t\tparams[name] = filters;\n\t\t\t}\n\t\t});\n\t\tsideBar.find('.js-calendar__filter__select').each((_, e) => {\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.attr('name');\n\t\t\tlet cacheName = element.data('cache');\n\t\t\tif (name) {\n\t\t\t\tparams[name] = cacheName && app.moduleCacheGet(cacheName) ? app.moduleCacheGet(cacheName) : element.val();\n\t\t\t\tparams.emptyFilters = !params.emptyFilters && params[name].length === 0;\n\t\t\t}\n\t\t});\n\t\treturn params;\n\t}\n\t/**\n\t * Converts the date format.\n\t * @param {object} date\n\t * @param {string} type\n\t * @returns {string}\n\t */\n\tformatDate(date, type) {\n\t\tswitch (type) {\n\t\t\tcase 'month':\n\t\t\t\treturn Calendar_Js.monthFormat[CONFIG.dateFormat]\n\t\t\t\t\t.replace('YYYY', date['year'])\n\t\t\t\t\t.replace('MMMM', App.Fields.Date.fullMonthsTranslated[date['month']]);\n\t\t\tcase 'week':\n\t\t\t\treturn CONFIG.dateFormat\n\t\t\t\t\t.replace('yyyy', date['year'])\n\t\t\t\t\t.replace('mm', App.Fields.Date.monthsTranslated[date['month']])\n\t\t\t\t\t.replace('dd', date['day'] + ' - ' + (date['day'] + 7));\n\t\t\tcase 'day':\n\t\t\t\treturn CONFIG.dateFormat\n\t\t\t\t\t.replace('yyyy', date['year'])\n\t\t\t\t\t.replace('mm', App.Fields.Date.monthsTranslated[date['month']])\n\t\t\t\t\t.replace('dd', date['day']);\n\t\t}\n\t}\n\t/**\n\t * Update calendar's event.\n\t * @param {Object} info\n\t */\n\tupdateEvent(info) {\n\t\tconst progressInstance = jQuery.progressIndicator({ blockInfo: { enabled: true } });\n\t\tAppConnector.request({\n\t\t\tmodule: this.module ? this.module : CONFIG.module,\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'updateEvent',\n\t\t\tid: info.event.id,\n\t\t\tstart: App.Fields.DateTime.dateToUserFormat(info.event.start),\n\t\t\tend: App.Fields.DateTime.dateToUserFormat(info.event.end),\n\t\t\tallDay: info.event.allDay\n\t\t})\n\t\t\t.done(function (response) {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tif (!response['result']) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NO_EDIT_PERMISSION'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tinfo.revert();\n\t\t\t\t} else {\n\t\t\t\t\twindow.popoverCache = {};\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NO_EDIT_PERMISSION'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\tinfo.revert();\n\t\t\t});\n\t}\n\t/**\n\t * Render event.\n\t * @param {Object} arg\n\t * @returns {Object}\n\t */\n\teventRenderer(arg) {\n\t\tif (arg.event.display === 'background') {\n\t\t\treturn {\n\t\t\t\thtml: `<span class=\"${arg.event.extendedProps.icon} js-popover-icon mr-1\"></span>${arg.event._def.title}`\n\t\t\t};\n\t\t}\n\t}\n\t/**\n\t * Returns counted calendar height.\n\t * @returns {(number|string)}\n\t */\n\tsetCalendarHeight() {\n\t\tlet defaultHeightValue = 'auto';\n\t\tif ($(window).width() > 993) {\n\t\t\tlet calendarPadding;\n\t\t\tif (this.container.hasClass('js-modal-container')) {\n\t\t\t\tcalendarPadding = this.container.find('.js-modal-header').outerHeight(); // modal needs bigger padding to prevent modal's scrollbar\n\t\t\t} else {\n\t\t\t\tcalendarPadding = this.container.find('.js-contents-div').css('margin-left').replace('px', ''); //equals calendar padding bottom to left margin\n\t\t\t}\n\t\t\tlet setCalendarH = () => {\n\t\t\t\treturn (\n\t\t\t\t\t$(window).height() -\n\t\t\t\t\tthis.container.find('.js-calendar__container').offset().top -\n\t\t\t\t\t$('.js-footer').height() -\n\t\t\t\t\tcalendarPadding\n\t\t\t\t);\n\t\t\t};\n\t\t\tdefaultHeightValue = setCalendarH();\n\t\t\tnew ResizeSensor(this.container.find('.contentsDiv'), () => {\n\t\t\t\tlet currentHeight = setCalendarH();\n\t\t\t\tif (currentHeight !== defaultHeightValue) {\n\t\t\t\t\tthis.fullCalendar.setOption('height', currentHeight);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn defaultHeightValue;\n\t}\n\t/**\n\t * Set calendar options from browser history.\n\t * @returns {object}\n\t */\n\tsetBrowserHistoryOptions() {\n\t\tconst historyParams = app.getMainParams('historyParams', true);\n\t\tlet options = {};\n\t\tif (historyParams && (historyParams.length || Object.keys(historyParams).length)) {\n\t\t\tlet s = App.Fields.Date.getDateInstance(historyParams.start);\n\t\t\tlet e = App.Fields.Date.getDateInstance(historyParams.end);\n\t\t\tthis.browserHistoryOptions = {\n\t\t\t\tinitialView: historyParams.viewType,\n\t\t\t\tinitialDate: App.Fields.Date.dateToDbFormat(new Date(e - (e - s) / 2)),\n\t\t\t\thiddenDays: historyParams.hiddenDays.split(',').map((x) => {\n\t\t\t\t\tlet parsedValue = parseInt(x);\n\t\t\t\t\treturn isNaN(parsedValue) ? '' : parsedValue;\n\t\t\t\t})\n\t\t\t};\n\t\t\toptions = {\n\t\t\t\tstart: historyParams.start,\n\t\t\t\tend: historyParams.end,\n\t\t\t\ttime: historyParams.time,\n\t\t\t\tuser: historyParams.user,\n\t\t\t\tcvid: historyParams.cvid\n\t\t\t};\n\t\t\tObject.keys(options).forEach((key) => options[key] === 'undefined' && delete options[key]);\n\t\t\tObject.keys(this.browserHistoryOptions).forEach(\n\t\t\t\t(key) => this.browserHistoryOptions[key] === 'undefined' && delete this.browserHistoryOptions[key]\n\t\t\t);\n\t\t\tapp.moduleCacheSet('browserHistoryEvent', false);\n\t\t\tif (historyParams.cvid && historyParams.cvid !== 'undefined') {\n\t\t\t\tapp.moduleCacheSet('CurrentCvId', historyParams.cvid);\n\t\t\t}\n\t\t\tapp.setMainParams('showType', options.time);\n\t\t\tapp.setMainParams('usersId', options.user);\n\t\t\tapp.setMainParams('defaultView', this.browserHistoryOptions);\n\t\t}\n\t\twindow.addEventListener(\n\t\t\t'popstate',\n\t\t\tfunction () {\n\t\t\t\tapp.moduleCacheSet('browserHistoryEvent', true);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t\treturn options;\n\t}\n\t/**\n\t * Register filters\n\t */\n\tregisterFilters() {\n\t\tconst self = this;\n\t\tlet sideBar = self.getSidebarView();\n\t\tif (!sideBar || sideBar.length <= 0) {\n\t\t\treturn;\n\t\t}\n\t\tsideBar.find('.js-sidebar-filter-container').each((_, row) => {\n\t\t\tlet formContainer = $(row);\n\t\t\tself.registerUsersChange(formContainer);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(formContainer.find('select'));\n\t\t\tapp.showNewScrollbar(formContainer, {\n\t\t\t\tsuppressScrollX: true\n\t\t\t});\n\t\t\tself.registerFilterForm(formContainer);\n\t\t});\n\t\tself.registerSelectAll(sideBar);\n\t\tif (app.moduleCacheGet('CurrentCvId') !== null) {\n\t\t\tthis.container\n\t\t\t\t.find('.js-calendar__extended-filter-tab [data-cvid=\"' + app.moduleCacheGet('CurrentCvId') + '\"] a')\n\t\t\t\t.addClass('active');\n\t\t}\n\t}\n\t/**\n\t * Register filter for users and groups\n\t * @param {jQuery} container\n\t */\n\tregisterFilterForm(container) {\n\t\tconst self = this;\n\t\tif (container.find('.js-filter__search').length) {\n\t\t\tcontainer.find('.js-filter__search').on('keyup', this.findElementOnList.bind(self));\n\t\t}\n\t\tcontainer.find('.js-calendar__filter__select, .filterField').each((_, e) => {\n\t\t\tlet element = $(e);\n\t\t\tlet name = element.data('cache');\n\t\t\tlet cachedValue = app.moduleCacheGet(name);\n\t\t\tif (element.length > 0 && cachedValue !== undefined) {\n\t\t\t\tif (element.prop('tagName') == 'SELECT') {\n\t\t\t\t\telement.val(cachedValue);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tname &&\n\t\t\t\telement.length > 0 &&\n\t\t\t\tcachedValue === undefined &&\n\t\t\t\t!element.find(':selected').length &&\n\t\t\t\telement.data('selected') !== 0\n\t\t\t) {\n\t\t\t\tlet allOptions = [];\n\t\t\t\telement.find('option').each((i, option) => {\n\t\t\t\t\tallOptions.push($(option).val());\n\t\t\t\t});\n\t\t\t\telement.val(allOptions);\n\t\t\t\tapp.moduleCacheSet(name, cachedValue);\n\t\t\t}\n\t\t\telement.off('change');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(element);\n\t\t\telement.on('change', (e) => {\n\t\t\t\tlet item = $(e.currentTarget);\n\t\t\t\tlet value = item.val();\n\t\t\t\tif (value == null) {\n\t\t\t\t\tvalue = '';\n\t\t\t\t}\n\t\t\t\tif (item.attr('type') == 'checkbox') {\n\t\t\t\t\tvalue = element.is(':checked');\n\t\t\t\t}\n\t\t\t\tapp.moduleCacheSet(item.data('cache'), value);\n\t\t\t\tself.reloadCalendarData();\n\t\t\t});\n\t\t});\n\t\tcontainer\n\t\t\t.find('.js-filter__container_checkbox_list .js-filter__item__val')\n\t\t\t.off('change')\n\t\t\t.on('change', (e) => {\n\t\t\t\tself.reloadCalendarData();\n\t\t\t});\n\t}\n\t/**\n\t * Find element on list (user, group)\n\t * @param {jQuery.Event} e\n\t */\n\tfindElementOnList(e) {\n\t\tconst target = $(e.target),\n\t\t\tvalue = target.val().toLowerCase(),\n\t\t\tcontainer = target.closest('.js-filter__container');\n\t\tcontainer.find('.js-filter__item__value').filter(function () {\n\t\t\tlet item = $(this).closest('.js-filter__item__container');\n\t\t\tif ($(this).text().trim().toLowerCase().indexOf(value) > -1) {\n\t\t\t\titem.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\titem.addClass('d-none');\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register users change\n\t * @param {jQuery} formContainer\n\t */\n\tregisterUsersChange(formContainer) {\n\t\tformContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id').on('change', () => {\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register change on select all checkbox\n\t * @param {jQuery} formContainer\n\t */\n\tregisterSelectAll(formContainer) {\n\t\tformContainer.find('.js-select-all').on('change', (e) => {\n\t\t\tlet checkboxSelectAll = $(e.currentTarget);\n\t\t\tlet checkboxes = formContainer.find('.js-input-user-owner-id-ajax, .js-input-user-owner-id');\n\t\t\tif (checkboxSelectAll.is(':checked')) {\n\t\t\t\tcheckboxes.prop('checked', true);\n\t\t\t} else {\n\t\t\t\tcheckboxes.prop('checked', false);\n\t\t\t\tformContainer.find('#ownerId' + CONFIG.userId).prop('checked', true);\n\t\t\t}\n\t\t\tthis.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register sidebar events.\n\t */\n\tregisterSidebarEvents() {\n\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', () => {\n\t\t\tthis.registerSelect2Event();\n\t\t});\n\t}\n\t/**\n\t * Get sidebar view panel\n\t * @returns {jQuery}\n\t */\n\tgetSidebarView() {\n\t\tif (!this.sidebarView || !this.sidebarView.length) {\n\t\t\tthis.sidebarView = this.container.find('.js-calendar-right-panel');\n\t\t}\n\t\treturn this.sidebarView;\n\t}\n\t/**\n\t * Get current cv id\n\t * @returns {int}\n\t */\n\tgetCurrentCvId() {\n\t\tlet tab = $('.js-calendar__container .js-calendar__extended-filter-tab');\n\t\tif (tab.length === 0) {\n\t\t\ttab = $('.js-calendar__header-buttons .js-calendar__extended-filter-tab');\n\t\t}\n\t\treturn tab.find('.active').parent().data('cvid');\n\t}\n\t/**\n\t * Register select2 event.\n\t */\n\tregisterSelect2Event() {\n\t\tconst self = this;\n\t\t$('.siteBarRight .js-calendar__filter__select').each(function () {\n\t\t\tlet element = $(this);\n\t\t\tlet name = element.data('cache');\n\t\t\tlet cachedValue = app.moduleCacheGet(name);\n\t\t\tif (element.length > 0 && cachedValue !== undefined) {\n\t\t\t\tif (element.prop('tagName') == 'SELECT') {\n\t\t\t\t\telement.val(cachedValue);\n\t\t\t\t}\n\t\t\t} else if (element.length > 0 && cachedValue === undefined && !element.find(':selected').length) {\n\t\t\t\tlet allOptions = [];\n\t\t\t\telement.find('option').each((_i, option) => {\n\t\t\t\t\tallOptions.push($(option).val());\n\t\t\t\t});\n\t\t\t\telement.val(allOptions);\n\t\t\t\tapp.moduleCacheSet(name, cachedValue);\n\t\t\t}\n\t\t});\n\t\tlet selectsElements = $('.siteBarRight .select2, .siteBarRight .filterField');\n\t\tselectsElements.off('change');\n\t\tApp.Fields.Picklist.showSelect2ElementView(selectsElements);\n\t\tselectsElements.on('change', function () {\n\t\t\tlet element = $(this);\n\t\t\tlet value = element.val();\n\t\t\tif (value == null) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tvalue = element.is(':checked');\n\t\t\t}\n\t\t\tapp.moduleCacheSet(element.data('cache'), value);\n\t\t\tself.reloadCalendarData();\n\t\t});\n\t}\n\t/**\n\t * Register button select all.\n\t */\n\tregisterButtonSelectAll() {\n\t\t$('.selectAllBtn').on('click', function () {\n\t\t\tconst selectAllLabel = $(this).find('.selectAll'),\n\t\t\t\tdeselectAllLabel = $(this).find('.deselectAll');\n\t\t\tif (selectAllLabel.hasClass('d-none')) {\n\t\t\t\tselectAllLabel.removeClass('d-none');\n\t\t\t\tdeselectAllLabel.addClass('d-none');\n\t\t\t\t$(this).closest('.quickWidget').find('select option').prop('selected', false);\n\t\t\t} else {\n\t\t\t\t$(this).closest('.quickWidget').find('select option').prop('selected', true);\n\t\t\t\tdeselectAllLabel.removeClass('d-none');\n\t\t\t\tselectAllLabel.addClass('d-none');\n\t\t\t}\n\t\t\t$(this).closest('.quickWidget').find('select').trigger('change');\n\t\t});\n\t}\n\t/**\n\t * Register add button.\n\t */\n\tregisterAddButton() {\n\t\t$('.js-add').on('click', () => {\n\t\t\tthis.getCalendarCreateView().done((data) => {\n\t\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\t\tcallbackFunction: () => {\n\t\t\t\t\t\tthis.reloadCalendarData();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Get calendar create view.\n\t * @returns {promise}\n\t */\n\tgetCalendarCreateView() {\n\t\tconst self = this,\n\t\t\taDeferred = jQuery.Deferred();\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView);\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tlet progressInstance = jQuery.progressIndicator();\n\t\tthis.loadCalendarCreateView()\n\t\t\t.done(function (data) {\n\t\t\t\tprogressInstance.hide();\n\t\t\t\tself.calendarCreateView = data;\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function () {\n\t\t\t\tprogressInstance.hide();\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Load calendar create view.\n\t * @returns {promise}\n\t */\n\tloadCalendarCreateView() {\n\t\tconst aDeferred = jQuery.Deferred(),\n\t\t\tmoduleName = app.getModuleName();\n\t\tApp.Components.QuickCreate.getForm('index.php?module=' + moduleName + '&view=QuickCreateAjax', moduleName)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\t/**\n\t * Function invokes by FullCalendar, sets selected days in form\n\t * @param info\n\t */\n\tselectDays(info) {\n\t\tthis.getCalendarCreateView().done((data) => {\n\t\t\tApp.Components.QuickCreate.showModal(data, {\n\t\t\t\tcallbackFunction: () => {\n\t\t\t\t\tself.reloadCalendarData();\n\t\t\t\t},\n\t\t\t\tcallbackPostShown: (modal) => {\n\t\t\t\t\tthis.selectCallbackCreateModal(modal, info);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Callback after shown create modal\n\t * @param {jQuery} modal\n\t */\n\tselectCallbackCreateModal(modal, info) {\n\t\tlet startDate = info.start,\n\t\t\tendDate = info.end;\n\t\tif (info['allDay']) {\n\t\t\tendDate.setDate(endDate.getDate() - 1);\n\t\t}\n\t\tif (info['allDay']) {\n\t\t\tlet startDateSplitted = this.startHour.split(':');\n\t\t\tlet endDateSplitted = this.endHour.split(':');\n\t\t\tstartDate.setHours(startDateSplitted[0], startDateSplitted[1]);\n\t\t\tendDate.setHours(endDateSplitted[0], endDateSplitted[1]);\n\t\t\tif (startDate.toDateString() === endDate.toDateString()) {\n\t\t\t\tlet activityType = modal.find('[name=\"activitytype\"]').val();\n\t\t\t\tlet activityDurations = JSON.parse(modal.find('[name=\"defaultOtherEventDuration\"]').val());\n\t\t\t\tlet minutes = 60;\n\t\t\t\tfor (let i in activityDurations) {\n\t\t\t\t\tif (activityDurations[i].activitytype === activityType) {\n\t\t\t\t\t\tminutes = parseInt(activityDurations[i].duration);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (minutes) {\n\t\t\t\t\tendDate.setMinutes(endDate.getMinutes() + minutes);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet dateFormat = CONFIG.dateFormat;\n\t\tlet timeFormat = CONFIG.hourFormat;\n\t\tlet dateField = modal.find('[name=\"date_start\"]');\n\t\tif (dateField.length) {\n\t\t\tdateFormat = dateField.data('dateFormat');\n\t\t}\n\t\tlet timeField = modal.find('[name=\"time_start\"]');\n\t\tif (timeField.length) {\n\t\t\ttimeFormat = timeField.data('format');\n\t\t}\n\t\tlet defaultTimeFormat = '';\n\t\tif (timeFormat == 24) {\n\t\t\tdefaultTimeFormat = 'HH:mm';\n\t\t} else {\n\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t}\n\t\tmodal.find('[name=\"date_start\"]').val(App.Fields.Date.dateToUserFormat(startDate, dateFormat));\n\t\tmodal.find('[name=\"due_date\"]').val(App.Fields.Date.dateToUserFormat(endDate, dateFormat));\n\t\tif (modal.find('.js-autofill').prop('checked') === true) {\n\t\t\tCalendar_Edit_Js.getInstance().getFreeTime(modal);\n\t\t} else {\n\t\t\tmodal.find('[name=\"time_start\"]').val(moment(startDate).format(defaultTimeFormat));\n\t\t\tmodal.find('[name=\"time_end\"]').val(moment(endDate).format(defaultTimeFormat));\n\t\t}\n\t}\n\t/**\n\t * Register events.\n\t */\n\tregisterEvents() {\n\t\tthis.registerFilters();\n\t\tthis.registerSidebarEvents();\n\t\tthis.renderCalendar();\n\t\tthis.registerButtonSelectAll();\n\t\tthis.registerAddButton();\n\t}\n};\n"],"names":["window","Calendar_Js","container","$","readonly","browserHistory","calendarCreateView","calendarView","find","eventCreate","app","getMainParams","eventEdit","sidebarView","length","startHour","endHour","browserHistoryOptions","browserHistoryConfig","setBrowserHistoryOptions","calendarOptions","setCalendarOptions","eventTypeKeyName","module","getModuleName","event","on","reloadCalendarData","assign","setCalendarBasicOptions","setCalendarAdvancedOptions","setCalendarModuleOptions","userView","defaultView","moduleCacheGet","userTimeFormat","CONFIG","hourFormat","eventLimit","parseInt","hour","minute","hour12","meridiem","eventTimeFormat","slotLabelFormat","initialView","viewsNamesMap","forceEventDuration","defaultTimedEventDuration","dayMaxEvents","selectMirror","scrollTime","s","App","Fields","Date","getDateInstance","e","options","initialDate","dateToDbFormat","setCalendarMinimalOptions","hiddenDays","navLinks","firstDay","firstDayOfWeekNo","selectable","moreLinkContent","vtranslate","allDayText","noEventsText","buttonText","today","year","week","month","day","dayGridMonth","dayGridWeek","listWeek","dayGridDay","timeGridDay","list","buttonHints","prev","next","viewHint","navLinkHint","_dateStr","zonedDate","dateToUserFormat","dayHeaderContent","arg","width","daysTranslated","date","getDay","fullDaysTranslated","self","editable","headerToolbar","left","center","right","allDaySlot","views","basic","titleFormat","args","formatDate","timeGridWeek","html","basicDay","type","eventDrop","updateEvent","eventResize","datesSet","dateInfo","trigger","loadCalendarData","eventContent","eventRenderer","height","setCalendarHeight","fullCalendar","Calendar","get","render","registerViewRenderEvents","defaultParams","getDefaultParams","removeAllEvents","emptyFilters","progressInstance","progressIndicator","blockInfo","enabled","AppConnector","request","done","events","addEventSource","result","mode","userId","sideBar","getSidebarView","filters","params","action","start","view","activeStart","end","activeEnd","user","users","cvid","getCurrentCvId","each","value","element","attr","name","val","prop","push","_","data","cacheName","monthFormat","dateFormat","replace","fullMonthsTranslated","monthsTranslated","info","jQuery","id","DateTime","allDay","response","popoverCache","showNotify","text","revert","fail","display","extendedProps","icon","_def","title","defaultHeightValue","calendarPadding","hasClass","outerHeight","css","offset","top","setCalendarH","currentHeight","setOption","historyParams","Object","keys","viewType","split","map","x","isNaN","parsedValue","time","forEach","key","moduleCacheSet","setMainParams","addEventListener","row","registerUsersChange","formContainer","Picklist","showSelect2ElementView","showNewScrollbar","suppressScrollX","registerFilterForm","registerSelectAll","addClass","findElementOnList","bind","cachedValue","i","option","allOptions","off","currentTarget","item","is","target","toLowerCase","closest","filter","trim","indexOf","removeClass","checkboxSelectAll","checkboxes","registerSelect2Event","tab","parent","_i","selectsElements","selectAllLabel","deselectAllLabel","getCalendarCreateView","Components","QuickCreate","showModal","callbackFunction","aDeferred","Deferred","resolve","promise","loadCalendarCreateView","hide","moduleName","getForm","textStatus","errorThrown","reject","callbackPostShown","modal","selectCallbackCreateModal","startDate","endDate","setDate","getDate","endDateSplitted","setHours","startDateSplitted","toDateString","activityDurations","JSON","parse","minutes","activitytype","activityType","duration","setMinutes","getMinutes","timeFormat","dateField","timeField","defaultTimeFormat","Calendar_Edit_Js","getInstance","getFreeTime","moment","format","registerFilters","registerSidebarEvents","renderCalendar","registerButtonSelectAll","registerAddButton","basicWeek"],"mappings":"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"}