{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function ($) {\n\tvar ProgressIndicatorHelper = function () {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\tposition: 'append',\n\t\t\tmode: 'show',\n\t\t\tblockInfo: {\n\t\t\t\telementToBlock: 'body'\n\t\t\t},\n\t\t\tmessage: ''\n\t\t};\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t};\n\n\t\tthis.blockOverlayCSS = {\n\t\t\topacity: 0.8,\n\t\t\t'background-color': '#fff'\n\t\t};\n\n\t\tthis.blockCss = {\n\t\t\tborder: '',\n\t\t\t'background-color': '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t};\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\tleft: '37.5%',\n\t\t\tposition: 'fixed',\n\t\t\ttop: '4.5%',\n\t\t\t'z-index': '100000'\n\t\t};\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function (element, options = {}) {\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.blockOverlayCSS = Object.assign(\n\t\t\t\tthisInstance.blockOverlayCSS,\n\t\t\t\toptions.blockOverlayCSS ? options.blockOverlayCSS : {}\n\t\t\t);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== 'undefined') {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.initActions = function () {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.isPageBlockMode = function () {\n\t\t\tif (typeof this.elementToBlock !== 'undefined' && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isBlockMode = function () {\n\t\t\tif (typeof this.options.blockInfo !== 'undefined' && this.options.blockInfo.enabled == true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.show = function () {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml =\n\t\t\t\t'<div class=\"imageHolder ' +\n\t\t\t\tclassName +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage !== false) {\n\t\t\t\tif (jQMessage.length == 0) {\n\t\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t\t}\n\t\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage);\n\t\t\t\t}\n\t\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\t}\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t};\n\n\t\tthis.hide = function () {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== 'undefined') {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t};\n\t};\n\n\t$.fn.progressIndicator = function (options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function (index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== 'undefined') {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\t};\n\n\t$.progressIndicator = function (options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t};\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n"],"names":["$","thisInstance","defaults","position","mode","blockInfo","elementToBlock","message","imageContainerCss","blockOverlayCSS","opacity","blockCss","border","showTopCSS","width","left","top","showOnTop","init","element","options","extend","Object","assign","container","isBlockMode","initActions","show","hide","isPageBlockMode","is","enabled","smallLoadingImage","className","jQImageHtml","jQuery","imageHtml","css","jQMessage","length","app","vtranslate","html","append","messageContainer","addClass","prepend","replaceWith","blockedElement","blockUI","overlayCSS","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","progressIndicatorInstance","jQueryObject","data","progressImageContainer","ProgressIndicatorHelper","baseZ"],"mappings":"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"}