{"version":3,"file":"MultiImage.min.js","sources":["MultiImage.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass MultiImage {\n\t/**\n\t * Create class instance\n\t *\n\t * @param {HTMLElement|jQuery} inputElement - input type file element inside component\n\t */\n\tconstructor(element) {\n\t\tconst thisInstance = this;\n\t\tthis.elements = {};\n\t\tthis.options = {\n\t\t\tshowCarousel: true\n\t\t};\n\t\tthis.detailView = false;\n\t\tthis.elements.fileInput = element.find('.js-multi-image__file').eq(0);\n\t\tif (this.elements.fileInput.length === 0) {\n\t\t\tthis.detailView = true;\n\t\t}\n\t\tthis.elements.component = element.eq(0);\n\t\tthis.elements.form = element.closest('form').eq(0);\n\t\t$(this.elements.form).on('submit', this.onFormSubmit);\n\t\tthis.elements.addButton = this.elements.component.find('.js-multi-image__file-btn').eq(0);\n\t\tthis.elements.values = this.elements.component.find('.js-multi-image__values').eq(0);\n\t\tthis.elements.progressBar = this.elements.component.find('.js-multi-image__progress-bar').eq(0);\n\t\tthis.elements.progress = this.elements.component.find('.js-multi-image__progress').eq(0);\n\t\tthis.elements.result = this.elements.component.find('.js-multi-image__result').eq(0);\n\t\tthis.fieldInfo = this.elements.values.data('fieldinfo');\n\t\tthis.options.formats = this.fieldInfo.formats;\n\t\tthis.options.limit = this.fieldInfo.limit;\n\t\tif (!this.detailView) {\n\t\t\tthis.files = JSON.parse(this.elements.values.val());\n\t\t} else {\n\t\t\tthis.files = this.elements.values.data('value');\n\t\t}\n\t\tif (!this.detailView) {\n\t\t\tthis.elements.fileInput.detach();\n\t\t\tthis.elements.addButton.click(this.addButtonClick.bind(this));\n\t\t\tthis.elements.fileInput.fileupload({\n\t\t\t\tdataType: 'json',\n\t\t\t\treplaceFileInput: false,\n\t\t\t\tfileInput: this.fileInput,\n\t\t\t\tautoUpload: false,\n\t\t\t\tsubmit: this.submit.bind(this),\n\t\t\t\tadd: this.add.bind(this),\n\t\t\t\tprogressall: this.progressAll.bind(this),\n\t\t\t\tchange: this.change.bind(this),\n\t\t\t\tdrop: this.change.bind(this),\n\t\t\t\tdragover: this.dragOver.bind(this),\n\t\t\t\tfail: this.uploadError.bind(this),\n\t\t\t\tdone: this.uploadSuccess.bind(this)\n\t\t\t});\n\t\t\tthis.elements.component.on('dragleave', this.dragLeave.bind(this));\n\t\t\tthis.elements.component.on('dragend', this.dragLeave.bind(this));\n\t\t\tthis.elements.fileInput.fileupload('option', 'dropZone', $(this.elements.component));\n\t\t\tthis.enableDragNDrop();\n\t\t}\n\t\tthis.elements.component.on('click', '.js-multi-image__popover-img', function (e) {\n\t\t\tthisInstance.zoomPreview($(this).data('hash'));\n\t\t});\n\t\tthis.elements.component.on('click', '.js-multi-image__popover-btn-zoom', function (e) {\n\t\t\te.preventDefault();\n\t\t\tthisInstance.zoomPreview($(this).data('hash'));\n\t\t});\n\t\tthis.elements.component.on('click', '.js-multi-image__popover-btn-download', function (e) {\n\t\t\te.preventDefault();\n\t\t\tthisInstance.download($(this).data('hash'));\n\t\t});\n\t\tif (!this.detailView) {\n\t\t\tthis.elements.component.on('click', '.js-multi-image__popover-btn-delete', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthisInstance.deleteFile($(this).data('hash'));\n\t\t\t});\n\t\t}\n\t\tthis.loadExistingFiles();\n\t}\n\n\t/**\n\t * Prevent form submission before file upload end\n\t * @param e\n\t */\n\tonFormSubmit(e) {\n\t\tif (App.Fields.MultiImage.currentFileUploads) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tbootbox.alert(app.vtranslate('JS_WAIT_FOR_FILE_UPLOAD'));\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Prevent form submission\n\t *\n\t * @param {Event} e\n\t */\n\taddButtonClick(e) {\n\t\te.preventDefault();\n\t\tthis.elements.fileInput.trigger('click');\n\t}\n\n\t/**\n\t * Submit event handler from jQuery-file-upload\n\t *\n\t * @param {Event} e\n\t * @param {Object} data\n\t */\n\tsubmit(e, data) {\n\t\tdata.formData = {\n\t\t\thash: data.files[0].hash\n\t\t};\n\t\tApp.Fields.MultiImage.currentFileUploads++;\n\t}\n\n\t/**\n\t * Get file information\n\t *\n\t * @param {String} hash - file id\n\t * @returns {Object}\n\t */\n\tgetFileInfo(hash) {\n\t\tfor (let i = 0, len = this.files.length; i < len; i++) {\n\t\t\tconst file = this.files[i];\n\t\t\tif (file.hash === hash) {\n\t\t\t\treturn file;\n\t\t\t}\n\t\t}\n\t\tapp.errorLog(`File '${hash}' not found.`);\n\t\tapp.showNotify({\n\t\t\ttext: app.vtranslate('JS_INVALID_FILE_HASH') + ` [${hash}]`,\n\t\t\ttype: 'error'\n\t\t});\n\t}\n\n\t/**\n\t * Add property to file info object\n\t *\n\t * @param {String} hash - file id\n\t * @param {String} propertyName\n\t * @param {any} value\n\t * @returns {Object}\n\t */\n\taddFileInfoProperty(hash, propertyName, value) {\n\t\tconst fileInfo = this.getFileInfo(hash);\n\t\tfileInfo[propertyName] = value;\n\t\treturn fileInfo;\n\t}\n\n\t/**\n\t * Error event handler from file upload request\n\t *\n\t * @param {Event} e\n\t * @param {Object} data\n\t */\n\tuploadError(e, data) {\n\t\tapp.errorLog('File upload error.');\n\t\tconst { jqXHR, files } = data;\n\t\tif (typeof jqXHR.responseJSON === 'undefined' || jqXHR.responseJSON === null) {\n\t\t\tApp.Fields.MultiImage.currentFileUploads--;\n\t\t\treturn app.showNotify({\n\t\t\t\ttext: app.vtranslate('JS_FILE_UPLOAD_ERROR'),\n\t\t\t\ttype: 'error'\n\t\t\t});\n\t\t}\n\t\tconst response = jqXHR.responseJSON;\n\t\t// first try to show error for concrete file\n\t\tif (\n\t\t\ttypeof response.result !== 'undefined' &&\n\t\t\ttypeof response.result.attach !== 'undefined' &&\n\t\t\tArray.isArray(response.result.attach)\n\t\t) {\n\t\t\tresponse.result.attach.forEach((fileAttach) => {\n\t\t\t\tApp.Fields.MultiImage.currentFileUploads--;\n\t\t\t\tthis.deleteFile(fileAttach.hash, false);\n\t\t\t\tif (typeof fileAttach.error === 'string') {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: fileAttach.error + ` [${fileAttach.name}]`,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_FILE_UPLOAD_ERROR') + ` [${fileAttach.name}]`,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.updateFormValues();\n\t\t\treturn;\n\t\t}\n\t\t// else show default upload error\n\t\tfiles.forEach((file) => {\n\t\t\tApp.Fields.MultiImage.currentFileUploads--;\n\t\t\tthis.deleteFile(file.hash, false);\n\t\t\tapp.showNotify({\n\t\t\t\ttext: app.vtranslate('JS_FILE_UPLOAD_ERROR') + ` [${file.name}]`,\n\t\t\t\ttype: 'error'\n\t\t\t});\n\t\t});\n\t\tthis.updateFormValues();\n\t}\n\n\t/**\n\t * Success event handler from file upload request\n\t *\n\t * @param {Event} e\n\t * @param {Object} data\n\t */\n\tuploadSuccess(e, data) {\n\t\tconst { result } = data;\n\t\tconst attach = result.result.attach;\n\t\tattach.forEach((fileAttach) => {\n\t\t\tconst hash = fileAttach.hash;\n\t\t\tif (!hash) {\n\t\t\t\treturn app.errorLog(new Error(app.vtranslate('JS_INVALID_FILE_HASH') + ` [${hash}]`));\n\t\t\t}\n\t\t\tif (typeof fileAttach.key === 'undefined') {\n\t\t\t\treturn this.uploadError(e, data);\n\t\t\t}\n\t\t\tif (typeof fileAttach.info !== 'undefined' && fileAttach.info) {\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttype: 'notice',\n\t\t\t\t\ttext: fileAttach.info + ` [${fileAttach.name}]`\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst fileInfo = this.getFileInfo(hash);\n\t\t\tthis.addFileInfoProperty(hash, 'key', fileAttach.key);\n\t\t\tthis.addFileInfoProperty(hash, 'size', fileAttach.size);\n\t\t\tthis.addFileInfoProperty(hash, 'name', fileAttach.name);\n\t\t\tthis.removePreviewPopover(hash);\n\t\t\tthis.addPreviewPopover(fileInfo.file, fileInfo.previewElement, fileInfo.imageSrc);\n\t\t\tApp.Fields.MultiImage.currentFileUploads--;\n\t\t});\n\t\tthis.updateFormValues();\n\t}\n\n\t/**\n\t * Update form input values\n\t */\n\tupdateFormValues() {\n\t\tthis.elements.fileInput.val(null);\n\t\tconst formValues = this.files.map((file) => {\n\t\t\treturn { key: file.key, name: file.name, size: file.size };\n\t\t});\n\t\tthis.elements.values.val(JSON.stringify(formValues));\n\t}\n\n\t/**\n\t * Validate file\n\t *\n\t * @param {Object} file\n\t * @returns {boolean}\n\t */\n\tvalidateFile(file) {\n\t\tlet valid = false;\n\t\tthis.options.formats.forEach((format) => {\n\t\t\tif (file.type === 'image/' + format) {\n\t\t\t\tvalid = true;\n\t\t\t}\n\t\t});\n\t\tif (!valid) {\n\t\t\tapp.showNotify({\n\t\t\t\ttext: `${app.vtranslate('JS_INVALID_FILE_TYPE')} [${file.name}]\\n${app.vtranslate(\n\t\t\t\t\t'JS_AVAILABLE_FILE_TYPES'\n\t\t\t\t)}  [${this.options.formats.join(', ')}]`,\n\t\t\t\ttype: 'error'\n\t\t\t});\n\t\t}\n\t\treturn valid;\n\t}\n\n\t/**\n\t * Show limit error\n\t */\n\tshowLimitError() {\n\t\tthis.elements.fileInput.val('');\n\t\tapp.showNotify({\n\t\t\ttext: `${app.vtranslate('JS_FILE_LIMIT')} [${this.options.limit}]`,\n\t\t\ttype: 'error'\n\t\t});\n\t}\n\n\t/**\n\t * Get only valid files from list\n\t *\n\t * @param {Array} files\n\t * @returns {Array}\n\t */\n\tfilterValidFiles(files) {\n\t\tif (files.length + this.files.length > this.options.limit) {\n\t\t\tthis.showLimitError();\n\t\t\treturn [];\n\t\t}\n\t\treturn files.filter((file) => {\n\t\t\treturn this.validateFile(file);\n\t\t});\n\t}\n\n\t/**\n\t * Set files hash\n\t * @param {Array} files\n\t * @returns {Array}\n\t */\n\tsetFilesHash(files) {\n\t\tconst addedFiles = [];\n\t\tfor (let i = 0, len = files.length; i < len; i++) {\n\t\t\tconst file = files[i];\n\t\t\tif (typeof file.hash === 'undefined') {\n\t\t\t\tif (this.files.length < this.options.limit) {\n\t\t\t\t\tfile.hash = App.Fields.Text.generateRandomHash(CONFIG.userId);\n\t\t\t\t\tthis.files.push({ hash: file.hash, imageSrc: file.imageSrc, name: file.name, file });\n\t\t\t\t\taddedFiles.push(file);\n\t\t\t\t} else {\n\t\t\t\t\tthis.showLimitError();\n\t\t\t\t\treturn addedFiles;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn addedFiles;\n\t}\n\n\t/**\n\t * Add event handler from jQuery-file-upload\n\t *\n\t * @param {Event} e\n\t * @param {object} data\n\t */\n\tadd(e, data) {\n\t\tif (data.files.length > 0) {\n\t\t\tdata.submit();\n\t\t}\n\t}\n\n\t/**\n\t * Progressall event handler from jQuery-file-upload\n\t *\n\t * @param {Event} e\n\t * @param {Object} data\n\t */\n\tprogressAll(e, data) {\n\t\tconst progress = parseInt((data.loaded / data.total) * 100, 10);\n\t\tthis.elements.progressBar.css({ width: progress + '%' });\n\t\tif (progress === 100) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.elements.progress.addClass('d-none');\n\t\t\t\tthis.elements.progressBar.css({ width: '0%' });\n\t\t\t}, 1000);\n\t\t} else {\n\t\t\tthis.elements.progress.removeClass('d-none');\n\t\t}\n\t}\n\n\t/**\n\t * Dragover event handler from jQuery-file-upload\n\t *\n\t * @param {Event} e\n\t */\n\tdragOver(e) {\n\t\tthis.elements.component.addClass('c-multi-image__drop-effect');\n\t}\n\n\t/**\n\t * Dragleave event handler\n\t * @param {Event} e\n\t */\n\tdragLeave(e) {\n\t\tthis.elements.component.removeClass('c-multi-image__drop-effect');\n\t}\n\n\t/**\n\t * Download file according to source type (base64/file from server)\n\t *\n\t * @param {String} hash\n\t */\n\tdownload(hash) {\n\t\tconst fileInfo = this.getFileInfo(hash);\n\t\tif (fileInfo.imageSrc.substr(0, 8).toLowerCase() === 'file.php') {\n\t\t\treturn this.downloadFile(hash);\n\t\t} else {\n\t\t\treturn this.downloadBase64(hash);\n\t\t}\n\t}\n\n\t/**\n\t * Download file that exists on the server already\n\t * @param {String} hash\n\t */\n\tdownloadFile(hash) {\n\t\tconst fileInfo = this.getFileInfo(hash);\n\t\tconst link = document.createElement('a');\n\t\t$(link).css('display', 'none');\n\t\tif (typeof link.download === 'string') {\n\t\t\tdocument.body.appendChild(link); // Firefox requires the link to be in the body\n\t\t\tlink.download = fileInfo.name;\n\t\t\tlink.href = fileInfo.imageSrc;\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link); // remove the link when done\n\t\t} else {\n\t\t\tlocation.replace(fileInfo.imageSrc);\n\t\t}\n\t}\n\n\t/**\n\t * Download file from base64 image\n\t *\n\t * @param {String} hash\n\t */\n\tdownloadBase64(hash) {\n\t\tconst fileInfo = this.getFileInfo(hash);\n\t\tconst imageUrl =\n\t\t\t`data:application/octet-stream;filename=${fileInfo.name};base64,` + fileInfo.imageSrc.split(',')[1];\n\t\tconst link = document.createElement('a');\n\t\t$(link).css('display', 'none');\n\t\tif (typeof link.download === 'string') {\n\t\t\tdocument.body.appendChild(link); // Firefox requires the link to be in the body\n\t\t\tlink.download = fileInfo.name;\n\t\t\tlink.href = imageUrl;\n\t\t\tlink.click();\n\t\t\tdocument.body.removeChild(link); // remove the link when done\n\t\t} else {\n\t\t\tlocation.replace(imageUrl);\n\t\t}\n\t}\n\n\t/**\n\t * Display modal window with large preview\n\t *\n\t * @param {string} hash\n\t */\n\tzoomPreview(hash) {\n\t\tconst thisInstance = this;\n\t\tlet fileInfo = this.getFileInfo(hash);\n\t\tconst titleTemplate = () => `<i class=\"fa fa-image\"></i> ${fileInfo.name}`;\n\t\tconst bootboxOptions = {\n\t\t\tsize: 'large',\n\t\t\tbackdrop: true,\n\t\t\tonEscape: true,\n\t\t\ttitle: `<span id=\"bootbox-title-${hash}\">${titleTemplate()}</span>`,\n\t\t\tmessage: `<img src=\"${fileInfo.imageSrc}\" class=\"w-100\" />`,\n\t\t\tbuttons: {}\n\t\t};\n\t\tif (this.options.showCarousel) {\n\t\t\tbootboxOptions.message = this.generateCarousel(hash);\n\t\t}\n\t\tif (!this.detailView) {\n\t\t\tbootboxOptions.buttons.Delete = {\n\t\t\t\tlabel: `<i class=\"fa fa-trash-alt\"></i> ${app.vtranslate('JS_DELETE')}`,\n\t\t\t\tclassName: 'float-left btn btn-danger',\n\t\t\t\tcallback() {\n\t\t\t\t\tthisInstance.deleteFile(fileInfo.hash);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tbootboxOptions.buttons.Download = {\n\t\t\tlabel: `<i class=\"fa fa-download\"></i> ${app.vtranslate('JS_DOWNLOAD')}`,\n\t\t\tclassName: 'float-left btn btn-success',\n\t\t\tcallback() {\n\t\t\t\tthisInstance.download(fileInfo.hash);\n\t\t\t}\n\t\t};\n\t\tbootboxOptions.buttons.Close = {\n\t\t\tlabel: `<i class=\"fa fa-times\"></i> ${app.vtranslate('JS_CLOSE')}`,\n\t\t\tclassName: 'btn btn-warning',\n\t\t\tcallback: () => {}\n\t\t};\n\t\tbootbox.dialog(bootboxOptions);\n\t\tif (this.options.showCarousel) {\n\t\t\t$(`#carousel-${hash}`).on('slid.bs.carousel', (e) => {\n\t\t\t\tfileInfo = this.getFileInfo($(e.relatedTarget).data('hash'));\n\t\t\t\t$(`#bootbox-title-${hash}`).html(titleTemplate());\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Remove file from preview and from file list\n\t *\n\t * @param {String} hash\n\t */\n\tdeleteFileCallback(hash) {\n\t\tconst fileInfo = this.getFileInfo(hash);\n\t\tfileInfo.previewElement.popover('dispose').remove();\n\t\tthis.files = this.files.filter((file) => file.hash !== fileInfo.hash);\n\t\tthis.updateFormValues();\n\t}\n\n\t/**\n\t * Delete image from input field\n\t * Should be called with this pointing on button element with data-hash attribute\n\t *\n\t * @param {string} hash\n\t * @param {boolean} showConfirmation - dialog?\n\t */\n\tdeleteFile(hash, showConfirmation = true) {\n\t\tif (showConfirmation) {\n\t\t\tconst fileInfo = this.getFileInfo(hash);\n\t\t\tbootbox.confirm({\n\t\t\t\ttitle: `<i class=\"fa fa-trash-alt\"></i> ${app.vtranslate('JS_DELETE_FILE')}`,\n\t\t\t\tmessage: `${app.vtranslate('JS_DELETE_FILE_CONFIRMATION')} <span class=\"font-weight-bold\">${\n\t\t\t\t\tfileInfo.name\n\t\t\t\t}</span>`,\n\t\t\t\tcallback: (result) => {\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tthis.deleteFileCallback(hash);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.deleteFileCallback(hash);\n\t\t}\n\t}\n\n\t/**\n\t * File change event handler from jQuery-file-upload\n\t *\n\t * @param {Event} e\n\t * @param {object} data\n\t */\n\tchange(e, data) {\n\t\tdata.files = this.filterValidFiles(data.files);\n\t\tdata.files = this.setFilesHash(data.files);\n\t\tthis.dragLeave(e);\n\t\tif (data.files.length) {\n\t\t\tthis.generatePreviewElements(data.files, (element) => {\n\t\t\t\tthis.redraw();\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Generate and apply popover to preview\n\t *\n\t * @param {File} file\n\t * @param {string} template\n\t * @param {string} imageSrc\n\t * @returns {jQuery}\n\t */\n\taddPreviewPopover(file, template, imageSrc) {\n\t\tconst thisInstance = this;\n\t\tlet fileSize = '';\n\t\tconst fileInfo = this.getFileInfo(file.hash);\n\t\tif (typeof fileInfo.size !== 'undefined') {\n\t\t\tfileSize = `<div class=\"p-1 bg-white border rounded small position-absolute\">${fileInfo.size}</div>`;\n\t\t}\n\t\tlet deleteBtn = '';\n\t\tif (!this.detailView) {\n\t\t\tdeleteBtn = `<button class=\"btn btn-sm btn-danger c-btn-collapsible js-multi-image__popover-btn-delete\" type=\"button\" data-hash=\"${\n\t\t\t\tfile.hash\n\t\t\t}\" data-js=\"click\"><i class=\"fa fa-trash-alt\"></i> <span class=\"c-btn-collapsible__text\">${app.vtranslate(\n\t\t\t\t'JS_DELETE'\n\t\t\t)}</span></button>`;\n\t\t}\n\t\treturn $(template).popover({\n\t\t\tcontainer: thisInstance.elements.component,\n\t\t\ttitle: `<div class=\"u-text-ellipsis\"><i class=\"fa fa-image\"></i> ${file.name}</div>`,\n\t\t\thtml: true,\n\t\t\tsanitize: false,\n\t\t\ttrigger: 'focus',\n\t\t\tplacement: 'top',\n\t\t\tcontent: `<img src=\"${imageSrc}\" class=\"w-100 js-multi-image__popover-img c-multi-image__popover-img\" data-hash=\"${file.hash}\" data-js=\"click\"/>`,\n\t\t\ttemplate: `<div class=\"popover\" role=\"tooltip\">\n\t\t\t\t<div class=\"arrow\"></div>\n\t\t\t\t<h3 class=\"popover-header\"></h3>\n\t\t\t\t<div class=\"popover-body\"></div>\n\t\t\t\t<div class=\"text-right popover-footer js-multi-image__popover-actions\">\n\t\t\t\t\t${fileSize}\n\t\t\t\t\t${deleteBtn}\n\t\t\t\t\t<button class=\"btn btn-sm btn-success c-btn-collapsible js-multi-image__popover-btn-download\" type=\"button\" data-hash=\"${\n\t\t\t\t\t\tfile.hash\n\t\t\t\t\t}\" data-js=\"click\"><i class=\"fa fa-download\"></i> <span class=\"c-btn-collapsible__text\">${app.vtranslate(\n\t\t\t\t'JS_DOWNLOAD'\n\t\t\t)}</span></button>\n\t\t\t\t\t<button class=\"btn btn-sm btn-primary c-btn-collapsible js-multi-image__popover-btn-zoom\" type=\"button\" data-hash=\"${\n\t\t\t\t\t\tfile.hash\n\t\t\t\t\t}\" data-js=\"click\"><i class=\"fa fa-search-plus\"></i> <span class=\"c-btn-collapsible__text\">${app.vtranslate(\n\t\t\t\t'JS_ZOOM_IN'\n\t\t\t)}</span></button>\n\t\t\t\t</div>\n\t\t\t</div>`\n\t\t});\n\t}\n\n\t/**\n\t * Remove preview popover\n\t *\n\t * @param {String} hash\n\t */\n\tremovePreviewPopover(hash) {\n\t\tconst fileInfo = this.getFileInfo(hash);\n\t\tif (typeof fileInfo.previewElement !== 'undefined') {\n\t\t\tfileInfo.previewElement.popover('dispose');\n\t\t}\n\t}\n\n\t/**\n\t * Hide popovers when user starts moving file preview\n\t *\n\t * @param {Event} e\n\t * @param {Object} ui\n\t */\n\tsortOver(e, ui) {\n\t\tthis.elements.result.find('.js-multi-image__preview').popover('hide');\n\t}\n\n\t/**\n\t * Update file position according to elements order\n\t *\n\t * @param {Event} e\n\t * @param {Object} ui\n\t */\n\tsortStop(e, ui) {\n\t\tconst actualElements = this.elements.result.find('.js-multi-image__preview').toArray();\n\t\tthis.files = actualElements.map((element) => {\n\t\t\tfor (let i = 0, len = this.files.length; i < len; i++) {\n\t\t\t\tconst elementHash = $(element).data('hash');\n\t\t\t\tif (this.files[i].hash === elementHash) {\n\t\t\t\t\treturn this.files[i];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.redraw();\n\t}\n\n\t/**\n\t * Redraw view according to in-memory positions\n\t */\n\tredraw() {\n\t\tthis.files.forEach((file) => {\n\t\t\tthis.elements.result.append(file.previewElement);\n\t\t});\n\t\tthis.updateFormValues();\n\t}\n\n\t/**\n\t * Enable drag and drop files repositioning\n\t */\n\tenableDragNDrop() {\n\t\tthis.elements.result\n\t\t\t.sortable({\n\t\t\t\thandle: '.js-multi-image__preview-img',\n\t\t\t\titems: '.js-multi-image__preview',\n\t\t\t\tover: this.sortOver.bind(this),\n\t\t\t\tstop: this.sortStop.bind(this)\n\t\t\t})\n\t\t\t.disableSelection()\n\t\t\t.on('mousedown', '.js-multi-image__preview-img', function (e) {\n\t\t\t\tthis.focus(); // focus to show popover\n\t\t\t});\n\t}\n\n\t/**\n\t * Generate preview of images and append to multi image results view\n\t *\n\t * @param {Array} files - array of Files\n\t * @param {function} callback\n\t */\n\tgeneratePreviewElements(files, callback) {\n\t\tfiles.forEach((file) => {\n\t\t\tif (file instanceof File) {\n\t\t\t\tthis.generatePreviewFromFile(file, (template, imageSrc) => {\n\t\t\t\t\tfile.preview = this.addPreviewPopover(file, template, imageSrc);\n\t\t\t\t\tthis.addFileInfoProperty(file.hash, 'previewElement', file.preview);\n\t\t\t\t\tcallback(file.preview);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.generatePreviewFromValue(file, (template, imageSrc) => {\n\t\t\t\t\tfile.preview = this.addPreviewPopover(file, template, imageSrc);\n\t\t\t\t\tthis.addFileInfoProperty(file.hash, 'previewElement', file.preview);\n\t\t\t\t\tcallback(file.preview);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Generate preview of image as html string\n\t *\n\t * @param {File} file\n\t * @param {function} callback\n\t */\n\tgeneratePreviewFromFile(file, callback) {\n\t\tconst fr = new FileReader();\n\t\tfr.onload = () => {\n\t\t\tfile.imageSrc = fr.result;\n\t\t\tthis.addFileInfoProperty(file.hash, 'imageSrc', file.imageSrc);\n\t\t\tcallback(\n\t\t\t\t`<div class=\"d-inline-block mr-1 js-multi-image__preview\" id=\"js-multi-image__preview-hash-${file.hash}\" data-hash=\"${file.hash}\" data-js=\"container|click\">\n\t\t\t\t\t<div class=\"img-thumbnail js-multi-image__preview-img c-multi-image__preview-img\" data-hash=\"${file.hash}\" data-js=\"drag\" style=\"background-image:url(${fr.result})\" tabindex=\"0\" title=\"${file.name}\"></div>\n\t\t\t</div>`,\n\t\t\t\tfr.result\n\t\t\t);\n\t\t};\n\t\tfr.readAsDataURL(file);\n\t}\n\n\t/**\n\t * Generate preview of image as html string from existing values\n\t *\n\t * @param {File} file\n\t * @param {function} callback\n\t */\n\tgeneratePreviewFromValue(file, callback) {\n\t\tcallback(\n\t\t\t`<div class=\"d-inline-block mr-1 js-multi-image__preview\" id=\"js-multi-image__preview-hash-${file.hash}\" data-hash=\"${file.hash}\" data-js=\"container|click\">\n\t\t\t\t<div class=\"img-thumbnail js-multi-image__preview-img c-multi-image__preview-img\" data-hash=\"${file.hash}\" data-js=\"drag\" style=\"background-image:url(${file.imageSrc})\" tabindex=\"0\" title=\"${file.name}\"></div>\n\t\t</div>`,\n\t\t\tfile.imageSrc\n\t\t);\n\t}\n\n\t/**\n\t * Load files that were in valueInput as json string\n\t */\n\tloadExistingFiles() {\n\t\tthis.files = this.files\n\t\t\t.map((file) => {\n\t\t\t\tfile.hash = App.Fields.Text.generateRandomHash(CONFIG.userId);\n\t\t\t\treturn file;\n\t\t\t})\n\t\t\t.slice(0, this.options.limit);\n\t\tthis.generatePreviewElements(this.files, (element) => {\n\t\t\tthis.elements.result.append(element);\n\t\t});\n\t\tthis.updateFormValues();\n\t}\n\n\t/**\n\t * Generate carousel for all files in large preview\n\t *\n\t * @param {String} hash\n\t */\n\tgenerateCarousel(hash) {\n\t\tif (this.files.length <= 1) {\n\t\t\tconst fileInfo = this.getFileInfo(hash);\n\t\t\treturn `<img class=\"d-block w-100\" src=\"${fileInfo.imageSrc}\">`;\n\t\t}\n\t\tlet template = `<div id=\"carousel-${hash}\" class=\"carousel slide c-carousel\" data-ride=\"carousel\" data-js=\"container\">\n\t\t  <div class=\"carousel-inner\">`;\n\t\tthis.files.forEach((file) => {\n\t\t\ttemplate += `<div class=\"carousel-item c-carousel__item`;\n\t\t\tif (file.hash === hash) {\n\t\t\t\ttemplate += ` active`;\n\t\t\t}\n\t\t\ttemplate += `\" data-hash=\"${file.hash}\">\n\t\t      <img class=\"d-block w-100 c-carousel__image\" src=\"${file.imageSrc}\">\n\t\t    </div>`;\n\t\t});\n\t\ttemplate += `<a class=\"carousel-control-prev c-carousel__prevnext-btn c-carousel__prev-btn\" href=\"#carousel-${hash}\" role=\"button\" data-slide=\"prev\" data-js=\"click\">\n\t\t    <span class=\"fas fa-caret-left fa-2x c-carousel__prev-icon mr-1\" aria-hidden=\"true\"></span>\n\t\t  </a>\n\t\t  <a class=\"carousel-control-next c-carousel__prevnext-btn c-carousel__next-btn\" href=\"#carousel-${hash}\" role=\"button\" data-slide=\"next\" data-js=\"click\">\n\t\t    <span class=\"fas fa-caret-right fa-2x c-carousel__next-icon ml-1\" aria-hidden=\"true\"></span>\n\t\t  </a>\n\t\t</div>`;\n\t\treturn template;\n\t}\n}\n"],"names":["MultiImage","element","thisInstance","elements","options","showCarousel","detailView","fileInput","find","eq","length","component","form","closest","$","on","onFormSubmit","addButton","values","progressBar","progress","result","fieldInfo","data","formats","limit","files","JSON","parse","val","detach","click","addButtonClick","bind","fileupload","dataType","replaceFileInput","autoUpload","submit","add","progressall","progressAll","change","drop","dragover","dragOver","fail","uploadError","done","uploadSuccess","dragLeave","enableDragNDrop","zoomPreview","e","preventDefault","download","deleteFile","loadExistingFiles","App","Fields","currentFileUploads","stopPropagation","stopImmediatePropagation","bootbox","alert","app","vtranslate","trigger","formData","hash","file","i","len","errorLog","showNotify","text","type","propertyName","value","fileInfo","getFileInfo","jqXHR","responseJSON","response","attach","Array","isArray","forEach","fileAttach","error","name","updateFormValues","Error","key","info","addFileInfoProperty","size","removePreviewPopover","addPreviewPopover","previewElement","imageSrc","formValues","map","stringify","valid","format","join","showLimitError","filter","validateFile","addedFiles","Text","generateRandomHash","CONFIG","userId","push","parseInt","loaded","total","css","width","setTimeout","addClass","removeClass","substr","toLowerCase","downloadFile","downloadBase64","link","document","createElement","body","appendChild","href","removeChild","location","replace","imageUrl","split","titleTemplate","bootboxOptions","backdrop","onEscape","title","message","buttons","generateCarousel","Delete","label","className","callback","Download","Close","dialog","relatedTarget","html","popover","remove","showConfirmation","confirm","deleteFileCallback","filterValidFiles","setFilesHash","generatePreviewElements","redraw","template","fileSize","deleteBtn","container","sanitize","placement","content","actualElements","toArray","elementHash","append","sortable","handle","items","over","sortOver","stop","sortStop","disableSelection","focus","File","generatePreviewFromFile","preview","generatePreviewFromValue","fr","FileReader","onload","readAsDataURL","slice"],"mappings":"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"}