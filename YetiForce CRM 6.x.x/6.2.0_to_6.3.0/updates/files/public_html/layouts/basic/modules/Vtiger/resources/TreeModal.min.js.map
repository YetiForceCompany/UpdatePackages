{"version":3,"file":"TreeModal.min.js","sources":["TreeModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TreeModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Event for select row\n\t\t */\n\t\tselectEvent: false,\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\t\t/**\n\t\t * Jstree element\n\t\t */\n\t\ttree: false,\n\t\t/**\n\t\t * Multiple selection\n\t\t */\n\t\tmultiple: false,\n\t\t/**\n\t\t * Set event for select row\n\t\t * @param {function} cb\n\t\t */\n\t\tsetSelectEvent: function (cb) {\n\t\t\tthis.selectEvent = cb;\n\t\t},\n\t\t/**\n\t\t * Generate tree\n\t\t */\n\t\tgenerateTree: function () {\n\t\t\tlet plugins = [];\n\t\t\tif (this.multiple) {\n\t\t\t\tplugins.push('category');\n\t\t\t\tplugins.push('checkbox');\n\t\t\t}\n\t\t\tplugins.push('search');\n\t\t\tthis.tree.jstree(\n\t\t\t\t$.extend(\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\tcore: {\n\t\t\t\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\t\t\t\tthemes: {\n\t\t\t\t\t\t\t\tname: 'proton',\n\t\t\t\t\t\t\t\tresponsive: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcheckbox: {\n\t\t\t\t\t\t\tthree_state: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tplugins: plugins\n\t\t\t\t\t},\n\t\t\t\t\tthis.tree.data('params')\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Register select events\n\t\t */\n\t\tregisterSelectEvent: function () {\n\t\t\tif (this.multiple) {\n\t\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\tlet id = [],\n\t\t\t\t\t\tname = [];\n\t\t\t\t\t$.each(this.tree.jstree('getCategory', true), function (index, value) {\n\t\t\t\t\t\tid.push('T' + value.id);\n\t\t\t\t\t\tname.push(value.text);\n\t\t\t\t\t});\n\t\t\t\t\tthis.selectEvent({ id: id.join(), name: name.join(', ') });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\t\tthis.selectEvent({ id: 'T' + data.node.id, name: data.node.text });\n\t\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterSearchEvent: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\t\tvalueSearch.on('keypress', function (e) {\n\t\t\t\tif (e.which == 13) {\n\t\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.container.find('#btnSearchTree').on('click', function () {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t});\n\t\t},\n\t\tsearchingInTree: function (text) {\n\t\t\tthis.tree.jstree(true).search(text);\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\t\tthis.generateTree();\n\t\t\tthis.registerSearchEvent();\n\t\t\tthis.registerSelectEvent();\n\t\t}\n\t}\n);\n"],"names":["$","Class","selectEvent","container","tree","multiple","setSelectEvent","cb","generateTree","plugins","push","jstree","extend","core","data","JSON","parse","find","val","themes","name","responsive","checkbox","three_state","registerSelectEvent","on","id","each","index","value","text","join","app","hideModalWindow","parent","attr","event","node","registerSearchEvent","thisInstance","valueSearch","e","which","searchingInTree","search","registerEvents","modalContainer"],"mappings":"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"}