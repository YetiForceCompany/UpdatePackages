{"version":3,"file":"showRelatedModulePass.min.js","sources":["showRelatedModulePass.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// show/hide password\n'use strict';\nvar clipBoardInstances = [];\n$('.show_pass').on('click', function (e) {\n\tlet btn = $(this);\n\tlet record = btn.data('id');\n\tlet iconElement = btn.find('span');\n\tlet text = btn.data('title-copy');\n\tlet copyKey = `.copy_pass${record}`;\n\tlet copyBtn = $(`<button type=\"button\" id=\"copybtn_${record}\" data-id=\"pass_${record}\"\n\t\tclass=\"copy_pass${record} btn btn-light btn-sm mr-2 js-popover-tooltip\" data-content=\"${text}\" data-js=\"popover\"><span class=\"fas fa-download\"></span></button>`);\n\tlet element = $('[id=\"pass_' + record + '\"]');\n\tlet passVal = element.html();\n\tlet showPassText = btn.data('titleShow') ? btn.data('titleShow') : app.vtranslate('LBL_ShowPassword');\n\tlet hidePassText = btn.data('titleHide') ? btn.data('titleHide') : app.vtranslate('LBL_HidePassword');\n\n\tif (clipBoardInstances[copyKey] === undefined) {\n\t\tlet clipboard = new ClipboardJS(copyKey, {\n\t\t\ttext: function (trigger) {\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn $('#' + trigger.getAttribute('data-id')).text();\n\t\t\t}\n\t\t});\n\t\tclipBoardInstances[copyKey] = clipboard;\n\t}\n\tif (passVal == '**********') {\n\t\tvar params = {\n\t\t\tmodule: 'OSSPasswords',\n\t\t\taction: 'GetPass',\n\t\t\trecord: record\n\t\t};\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tif (response['success']) {\n\t\t\t\telement.text(response['password']);\n\t\t\t\t// change button title to 'Hide Password'\n\t\t\t\tbtn.on('show.bs.popover', function () {\n\t\t\t\t\tthis.dataset.content = hidePassText;\n\t\t\t\t});\n\t\t\t\ticonElement.removeClass('adminIcon-passwords-encryption').addClass('fas fa-lock');\n\t\t\t\t// show copy to clipboard button\n\t\t\t\tcopyBtn.insertBefore(btn);\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t} else {\n\t\telement.html('**********');\n\t\t// change button title to 'Show Password'\n\t\tbtn.on('show.bs.popover', function () {\n\t\t\tthis.dataset.content = showPassText;\n\t\t});\n\t\tapp.showPopoverElementView(element);\n\t\ticonElement.removeClass('fas fa-lock').addClass('adminIcon-passwords-encryption');\n\t\t// hide copy to clipboard button\n\t\t$(copyKey).remove();\n\t\tclipBoardInstances[copyKey].destroy();\n\t\tdelete clipBoardInstances[copyKey];\n\t}\n\treturn false;\n});\n"],"names":["clipBoardInstances","$","on","btn","record","data","iconElement","find","text","copyKey","copyBtn","element","passVal","html","showPassText","app","vtranslate","hidePassText","clipboard","ClipboardJS","trigger","showNotify","type","getAttribute","progressIndicatorElement","jQuery","progressIndicator","position","blockInfo","enabled","AppConnector","request","module","action","done","response","dataset","content","removeClass","addClass","insertBefore","mode","showPopoverElementView","remove","destroy"],"mappings":"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"}