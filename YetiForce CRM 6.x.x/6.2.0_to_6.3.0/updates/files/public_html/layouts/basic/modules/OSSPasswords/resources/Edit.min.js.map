{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'OSSPasswords_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register recordpresave event\n\t\t */\n\t\tregisterRecordPreSaveEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\t\tvar password = form.find('[name=\"password\"]').val();\n\t\t\t\tvar id = form.find('[name=\"record\"]').val();\n\t\t\t\tvar params = {};\n\t\t\t\tif (password === '**********') {\n\t\t\t\t\tparams = {};\n\t\t\t\t\tparams.data = {\n\t\t\t\t\t\tmodule: 'OSSPasswords',\n\t\t\t\t\t\taction: 'GetPass',\n\t\t\t\t\t\trecord: id\n\t\t\t\t\t};\n\t\t\t\t\tparams.async = false;\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\t\tif (response['success']) {\n\t\t\t\t\t\t\tvar el = document.getElementById('OSSPasswords_editView_fieldName_password');\n\t\t\t\t\t\t\tel.value = response['password'];\n\t\t\t\t\t\t\tel.onchange();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// validate password\n\t\t\t\t\tPasswordHelper.passwordStrength('', '');\n\t\t\t\t}\n\t\t\t\tpassword = form.find('[name=\"password\"]').val();\n\t\t\t\tparams = {};\n\t\t\t\tparams.data = { module: 'OSSPasswords', action: 'CheckPass', password: password, id: id };\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data.result.success === false) {\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\tsticker: false,\n\t\t\t\t\t\t\tsticker_hover: false,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tapp.showNotify(params);\n\t\t\t\t\t\tthisInstance.sending = false;\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t} else if (data.result.success === true && (thisInstance.sending === undefined || !thisInstance.sending)) {\n\t\t\t\t\t\tthisInstance.sending = true;\n\t\t\t\t\t} else if (thisInstance.sending) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgeneratePassword: function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar form = element.closest('form');\n\t\t\tvar min = parseInt(jQuery('#minChars').val());\n\t\t\tvar max = parseInt(jQuery('#maxChars').val());\n\t\t\tvar allowedChars = jQuery('#allowedLetters').val();\n\t\t\tvar password = ''; // variable holding new password\n\t\t\t// array of allowed characters that will consist of password\n\t\t\t// if there there is something wrong build the password from only exclamation marks\n\t\t\tif (typeof allowedChars === 'undefined') allowedChars = '!';\n\t\t\tvar chArray = allowedChars.split(',');\n\t\t\t// min length of a password\n\t\t\tif (typeof min === 'undefined') min = 10; // default 10\n\t\t\t// max length of a password\n\t\t\tif (typeof max === 'undefined') max = 15; // default 15\n\t\t\t// get the password length\n\t\t\tvar passlength = parseInt(Math.random() * (max - min) + min);\n\t\t\tvar i = 0; // index for the loop\n\t\t\t// loop to get random string with *pass_length* characters\n\t\t\tfor (i = 0; i <= passlength; i++) {\n\t\t\t\tvar charIndex = parseInt(Math.random() * chArray.length);\n\t\t\t\tpassword += chArray[charIndex];\n\t\t\t}\n\t\t\t// get desired text field\n\t\t\tvar passForm = form.find('[name =\"password\"]');\n\t\t\t// change its value to the generated password\n\t\t\tpassForm.val(password);\n\t\t\tpassForm.trigger('change');\n\t\t},\n\t\tregisterButtonsEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.js-generatePass').on('click', function (e) {\n\t\t\t\tthisInstance.generatePassword(e);\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function (container) {\n\t\t\tthis._super(container);\n\t\t\tthis.registerButtonsEvents();\n\t\t\tthis.registerRecordPreSaveEvent(container);\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","registerRecordPreSaveEvent","form","thisInstance","getForm","on","recordPreSave","e","password","find","val","id","params","data","module","action","record","async","AppConnector","request","done","response","el","document","getElementById","value","onchange","PasswordHelper","passwordStrength","dataType","result","success","text","message","sticker","sticker_hover","type","app","showNotify","sending","preventDefault","stopPropagation","generatePassword","element","jQuery","currentTarget","closest","min","parseInt","max","allowedChars","chArray","split","passlength","Math","random","i","charIndex","length","passForm","trigger","registerButtonsEvents","$","registerBasicEvents","container","_super"],"mappings":"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"}