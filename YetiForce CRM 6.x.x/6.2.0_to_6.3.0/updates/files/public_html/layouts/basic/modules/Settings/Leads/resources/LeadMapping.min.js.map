{"version":3,"file":"LeadMapping.min.js","sources":["LeadMapping.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Settings_LeadMapping_Js',\n\t{\n\t\t/**\n\t\t * Function to register event to edit leads mapping\n\t\t */\n\t\ttriggerEdit: function (editUrl) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tAppConnector.request(editUrl)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar leadMappingInstance = new Settings_LeadMapping_Js();\n\t\t\t\t\tleadMappingInstance.registerEventsForEditView();\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for delete lead mapping\n\t\t */\n\t\ttriggerDelete: function (event, url) {\n\t\t\tvar element = jQuery(event.currentTarget);\n\t\t\tvar mappingContainer = element.closest('.listViewEntries');\n\t\t\tvar mappingId = mappingContainer.data('cfmid');\n\t\t\tvar deleteUrl = url + '&mappingId=' + mappingId;\n\t\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\t\tvar message = data.result[0];\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message\n\t\t\t\t};\n\t\t\t\tif (data.success) {\n\t\t\t\t\tmappingContainer.remove();\n\t\t\t\t} else {\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t}\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to register events for edit view of leads mapping\n\t\t */\n\t\tregisterEventsForEditView: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tvar select2Elements = form.find('.select2');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\tthis.registerEventForAddingNewMapping();\n\t\t\tthis.registerOnChangeEventForSourceModule();\n\t\t\tthis.registerEventToDeleteMapping();\n\t\t\tthis.registerEventForFormSubmit();\n\t\t\tthis.registerOnChangeEventOfTargetModule();\n\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2').trigger('change', false);\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for adding new convert to lead mapping\n\t\t */\n\t\tregisterEventForAddingNewMapping: function () {\n\t\t\tjQuery('#addMapping').on('click', function (e) {\n\t\t\t\tvar convertLeadMappingTable = jQuery('#convertLeadMapping');\n\t\t\t\tvar lastSequenceNumber = convertLeadMappingTable\n\t\t\t\t\t.find('tr:not(.newMapping):last[sequence-number]')\n\t\t\t\t\t.attr('sequence-number');\n\t\t\t\tvar newSequenceNumber = parseInt(lastSequenceNumber) + 1;\n\t\t\t\tvar newMapping = jQuery('.newMapping').clone(true, true);\n\t\t\t\tnewMapping.attr('sequence-number', newSequenceNumber);\n\t\t\t\tnewMapping.find('select.leadsFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][lead]');\n\t\t\t\tnewMapping.find('select.accountsFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][account]');\n\t\t\t\tnewMapping.find('select.contactFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][contact]');\n\t\t\t\tnewMapping.removeClass('d-none newMapping');\n\t\t\t\tnewMapping.appendTo(convertLeadMappingTable);\n\t\t\t\tnewMapping.find('.newSelect').removeClass('newSelect').addClass('select2');\n\t\t\t\tvar select2Elements = newMapping.find('.select2');\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2', newMapping).trigger('change', false);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register on change event for select2 element\n\t\t */\n\t\tregisterOnChangeEventForSourceModule: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('change', '.leadsFields', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar container = jQuery(element.closest('tr'));\n\t\t\t\tvar selectedValue = element.val();\n\t\t\t\tvar selectedOption = element.find('option[value=\"' + selectedValue + '\"]');\n\t\t\t\tvar selectedDataType = selectedOption.data('type');\n\t\t\t\tvar accountFieldsSelectElement = container.find('select.accountsFields.select2');\n\t\t\t\tvar contactFieldsSelectElement = container.find('select.contactFields.select2');\n\n\t\t\t\tvar accountFieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.accountsFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('[data-type=\"' + selectedDataType + '\"]')\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tvar contactFieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.contactFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('option[data-type=\"' + selectedDataType + '\"]')\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tselectedDataType = app.vtranslate('JS_' + selectedDataType);\n\t\t\t\tcontainer.find('.selectedFieldDataType').html(selectedDataType);\n\n\t\t\t\tvar noneValue = app.vtranslate('JS_NONE');\n\t\t\t\taccountFieldsSelectElement.html(accountFieldsBasedOnType);\n\t\t\t\tcontactFieldsSelectElement.html(contactFieldsBasedOnType);\n\n\t\t\t\tif (selectedDataType != 'None') {\n\t\t\t\t\taccountFieldsSelectElement.prepend(\n\t\t\t\t\t\t'<option data-type=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" label=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" value=\"0\" selected>' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t);\n\t\t\t\t\tcontactFieldsSelectElement.prepend(\n\t\t\t\t\t\t'<option data-type=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" label=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" value=\"0\" selected>' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\taccountFieldsSelectElement.trigger('change');\n\t\t\t\tcontactFieldsSelectElement.trigger('change');\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register event to delete mapping\n\t\t */\n\t\tregisterEventToDeleteMapping: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('click', '.deleteMapping', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar mappingContainer = element.closest('tr');\n\t\t\t\tvar mappingContainerSequenceNumber = mappingContainer.attr('sequence-number');\n\t\t\t\tvar deletableName = 'mapping[' + mappingContainerSequenceNumber + '][deletable]';\n\t\t\t\tmappingContainer.prepend('<input type=\"hidden\" name=\"' + deletableName + '\" />');\n\t\t\t\tmappingContainer.data('deletable', true).hide('slow');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: app.vtranslate('JS_MAPPING_DELETED_SUCCESSFULLY')\n\t\t\t\t};\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to handle edit view convert lead form submit\n\t\t */\n\t\tregisterEventForFormSubmit: function () {\n\t\t\tjQuery('#leadsMapping').on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar mappingDetails = jQuery(this).serializeFormData();\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'MappingSave',\n\t\t\t\t\tmapping: mappingDetails\n\t\t\t\t};\n\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\tvar detailViewParams = {\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\tview: 'MappingDetail'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tAppConnector.request(detailViewParams).done(function (data) {\n\t\t\t\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet notifyParams;\n\t\t\t\t\t\tif (!data.result.status) {\n\t\t\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_INVALID_MAPPING'),\n\t\t\t\t\t\t\t\ttext: data.result,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MAPPING_SAVED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.showNotify(notifyParams);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register on chnage event of target module\n\t\t */\n\t\tregisterOnChangeEventOfTargetModule: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('change', 'select.accountsFields.select2,select.contactFields.select2', function (e, executeChange) {\n\t\t\t\tif (typeof executeChange === 'undefined') {\n\t\t\t\t\texecuteChange = true;\n\t\t\t\t}\n\t\t\t\tvar selectElement = jQuery(e.currentTarget);\n\t\t\t\tvar selectedValue = selectElement.children().filter('option:selected').text();\n\t\t\t\tvar selectedOptionId = selectElement.children().filter('option:selected').val();\n\t\t\t\tvar mappingContainer = selectElement.closest('tr');\n\n\t\t\t\tvar duplicateOption = false;\n\t\t\t\tvar existingIdElement;\n\t\t\t\tif (selectedOptionId == '0') {\n\t\t\t\t\tselectedOptionId = 'false';\n\t\t\t\t}\n\n\t\t\t\tif (!executeChange || selectedOptionId == 'false') {\n\t\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//check for source module field\n\t\t\t\tvar sourceModuleSelect = mappingContainer.find('select.leadsFields.select2');\n\t\t\t\tvar sourceModuleSelectedField = sourceModuleSelect.val();\n\t\t\t\tvar sourceModuleSelectedFieldLabel = sourceModuleSelect\n\t\t\t\t\t.find('option[value=\"' + sourceModuleSelectedField + '\"]')\n\t\t\t\t\t.text();\n\t\t\t\tif (sourceModuleSelectedField == '0') {\n\t\t\t\t\tduplicateOption = true;\n\t\t\t\t\tvar errorParams = {\n\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\tapp.vtranslate('JS_CANT_MAP') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tselectedValue +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tapp.vtranslate('JS_WITH') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tsourceModuleSelectedFieldLabel,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(errorParams);\n\t\t\t\t}\n\n\t\t\t\tif (selectElement.hasClass('accountsFields')) {\n\t\t\t\t\texistingIdElement = jQuery('select.accountsFields.select2[selectedid=\"' + selectedOptionId + '\"]');\n\t\t\t\t} else {\n\t\t\t\t\texistingIdElement = jQuery('select.contactFields.select2[selectedid=\"' + selectedOptionId + '\"]');\n\t\t\t\t}\n\n\t\t\t\tif (existingIdElement.length > 0) {\n\t\t\t\t\tduplicateOption = true;\n\t\t\t\t}\n\n\t\t\t\tif (duplicateOption) {\n\t\t\t\t\tvar selectedFieldId = selectElement.attr('selectedid');\n\t\t\t\t\tif (selectedFieldId == 'false') {\n\t\t\t\t\t\tselectElement.attr('selectedId', 'false');\n\t\t\t\t\t} else if (selectedFieldId != 'false') {\n\t\t\t\t\t\tselectElement.attr('selectedId', selectedFieldId);\n\t\t\t\t\t}\n\t\t\t\t\tvar warningMessage = selectedValue + ' ' + app.vtranslate('JS_IS_ALREADY_BEEN_MAPPED');\n\t\t\t\t\tvar notificationParams = {\n\t\t\t\t\t\ttext: warningMessage,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(notificationParams);\n\t\t\t\t\tselectElement.val(0).trigger('change');\n\t\t\t\t} else {\n\t\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","triggerEdit","editUrl","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","AppConnector","request","done","data","detailContentsHolder","html","mode","leadMappingInstance","Settings_LeadMapping_Js","registerEventsForEditView","fail","promise","triggerDelete","event","url","element","currentTarget","mappingContainer","closest","mappingId","message","result","params","text","success","remove","Settings_Vtiger_Index_Js","showMessage","form","select2Elements","find","App","Fields","Picklist","showSelect2ElementView","registerEventForAddingNewMapping","registerOnChangeEventForSourceModule","registerEventToDeleteMapping","registerEventForFormSubmit","registerOnChangeEventOfTargetModule","trigger","on","convertLeadMappingTable","lastSequenceNumber","attr","newSequenceNumber","parseInt","newMapping","clone","removeClass","appendTo","addClass","e","container","selectedValue","val","selectedOption","selectedDataType","accountFieldsSelectElement","contactFieldsSelectElement","accountFieldsBasedOnType","children","filter","contactFieldsBasedOnType","app","vtranslate","noneValue","prepend","mappingContainerSequenceNumber","hide","preventDefault","mappingDetails","serializeFormData","module","getModuleName","parent","getParentModuleName","action","mapping","detailViewParams","view","notifyParams","status","title","type","showNotify","executeChange","existingIdElement","selectElement","selectedOptionId","duplicateOption","sourceModuleSelect","sourceModuleSelectedField","sourceModuleSelectedFieldLabel","errorParams","hasClass","length","selectedFieldId","warningMessage"],"mappings":"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"}