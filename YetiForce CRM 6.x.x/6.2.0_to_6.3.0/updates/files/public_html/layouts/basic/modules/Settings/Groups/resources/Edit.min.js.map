{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Groups_Edit_Js',\n\t{},\n\t{\n\t\tmemberSelectElement: false,\n\n\t\tgetMemberSelectElement: function () {\n\t\t\tif (this.memberSelectElement == false) {\n\t\t\t\tthis.memberSelectElement = jQuery('#memberList');\n\t\t\t}\n\t\t\treturn this.memberSelectElement;\n\t\t},\n\t\t/**\n\t\t * Function to register form for validation\n\t\t */\n\t\tregisterFormForValidation: function () {\n\t\t\tvar editViewForm = this.getForm();\n\t\t\teditViewForm.validationEngine(app.getvalidationEngineOptions(true));\n\t\t},\n\n\t\t/**\n\t\t * Function to register the submit event of form\n\t\t */\n\t\tregisterSubmitEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#EditView');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.checkDuplicateName({\n\t\t\t\t\t\t\t\tgroupname: formData.groupname,\n\t\t\t\t\t\t\t\trecord: formData.record\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Group Names\n\t\t * returns boolean true or false\n\t\t */\n\t\tcheckDuplicateName: function (details) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'EditAjax',\n\t\t\t\tmode: 'checkDuplicate',\n\t\t\t\tgroupname: details.groupname,\n\t\t\t\trecord: details.record\n\t\t\t};\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tvar result = response['success'];\n\t\t\t\t\tif (result == true) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Register events for section \"modules\"\n\t\t */\n\t\tregisterButtonsModule: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function (e) {\n\t\t\t\t$('#modulesList option').prop('selected', $(this).hasClass('js-modules-select-all')).parent().trigger('change');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will handle the registrations for the elements\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerButtonsModule();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","memberSelectElement","getMemberSelectElement","jQuery","registerFormForValidation","editViewForm","getForm","validationEngine","app","getvalidationEngineOptions","registerSubmitEvent","thisInstance","form","on","e","data","InvalidFields","length","formData","serializeFormData","checkDuplicateName","groupname","record","done","submit","fail","params","Settings_Vtiger_Index_Js","showMessage","removeData","formAlignmentAfterValidation","preventDefault","details","aDeferred","Deferred","module","getModuleName","parent","getParentModuleName","action","mode","AppConnector","request","response","result","reject","resolve","error","err","promise","registerButtonsModule","find","$","prop","hasClass","trigger","registerEvents","_super"],"mappings":"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"}