{"version":3,"file":"ChartFilter.min.js","sources":["ChartFilter.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_ChartFilter_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Widget type name\n\t\t */\n\t\twidgetName: 'ChartFilter',\n\t\tregisterContainers() {\n\t\t\tthis.widgetId = $('.js-widget-id', this.container).val();\n\t\t\tthis.linkId = $('.js-link-id', this.container).val();\n\t\t\tthis.step1 = $('.step1', this.container);\n\t\t\tthis.step2 = $('.step2', this.container);\n\t\t\tthis.step3 = $('.step3', this.container);\n\t\t\tthis.step4 = $('.step4', this.container);\n\t\t\tthis.step5 = $('.step5', this.container);\n\t\t\tthis.footer = $('.js-chart-footer', this.container);\n\t\t\tthis.form = $('form', this.container);\n\t\t\tthis.stepNumber = $('#widgetStep', this.container);\n\t\t},\n\t\t/**\n\t\t * Register first step elements\n\t\t */\n\t\tregisterStep1() {\n\t\t\tlet chartType = $('select[name=\"chartType\"]', this.container);\n\t\t\tlet moduleElement = $('select[name=\"module\"]', this.container);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(moduleElement, {\n\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t});\n\n\t\t\tthis.moduleName = moduleElement.val();\n\t\t\tthis.chartTypeValue = chartType.val();\n\n\t\t\tchartType.on('change', (e) => {\n\t\t\t\tthis.chartTypeValue = e.currentTarget.value;\n\t\t\t\tmoduleElement.trigger('change');\n\t\t\t});\n\t\t\tmoduleElement.on('change', (e) => {\n\t\t\t\tthis.moduleName = e.currentTarget.value;\n\t\t\t\tif (!this.moduleName) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.footer.hide();\n\t\t\t\tthis.step2.empty();\n\t\t\t\tthis.step3.empty();\n\t\t\t\tthis.step4.empty();\n\t\t\t\tthis.step5.empty();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.sourceModuleName,\n\t\t\t\t\tview: this.widgetName,\n\t\t\t\t\tstep: 'step2',\n\t\t\t\t\tchartType: this.chartTypeValue,\n\t\t\t\t\tselectedModule: this.moduleName,\n\t\t\t\t\ttemplateId: this.widgetId,\n\t\t\t\t\tlinkId: this.linkId\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tthis.registerStep2(data);\n\t\t\t\t});\n\t\t\t});\n\t\t\tif (this.widgetId) {\n\t\t\t\tmoduleElement.trigger('change');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register second step elements\n\t\t */\n\t\tregisterStep2(stepContainer) {\n\t\t\tthis.step2.append(stepContainer);\n\t\t\tthis.stepNumber.val(2);\n\t\t\tthis.footer.hide();\n\t\t\tlet filtersIdElement = this.step2.find('.filtersId');\n\t\t\tlet valueTypeElement = this.step2.find('.valueType');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(filtersIdElement);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(valueTypeElement);\n\t\t\tthis.step2.find('.filtersId, .valueType').on('change', (e) => {\n\t\t\t\tthis.step3.empty();\n\t\t\t\tthis.step4.empty();\n\t\t\t\tthis.step5.empty();\n\t\t\t\tthis.footer.hide();\n\t\t\t\tlet filterId = filtersIdElement.val(),\n\t\t\t\t\ttype = valueTypeElement.val();\n\t\t\t\tif (!filterId || Object.keys(filterId).length === 0 || !type || Object.keys(type).length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.sourceModuleName,\n\t\t\t\t\tview: this.widgetName,\n\t\t\t\t\tstep: 'step3',\n\t\t\t\t\tselectedModule: this.moduleName,\n\t\t\t\t\tchartType: this.chartTypeValue,\n\t\t\t\t\tfiltersId: filterId,\n\t\t\t\t\tvalueType: type,\n\t\t\t\t\ttemplateId: this.widgetId,\n\t\t\t\t\tlinkId: this.linkId\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tthis.registerStep3(data);\n\t\t\t\t});\n\t\t\t});\n\t\t\tif (this.widgetId) {\n\t\t\t\tvalueTypeElement.trigger('change');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register third step elements\n\t\t */\n\t\tregisterStep3(stepContainer) {\n\t\t\tthis.step3.append(stepContainer);\n\t\t\tthis.stepNumber.val(3);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.step3.find('select'));\n\t\t\tthis.footer.hide();\n\t\t\tlet groupField = this.step3.find('.groupField');\n\t\t\tgroupField.on('change', (e) => {\n\t\t\t\tthis.step4.empty();\n\t\t\t\tthis.step5.empty();\n\t\t\t\tif (!groupField.val()) return;\n\t\t\t\tthis.footer.show();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: this.sourceModuleName,\n\t\t\t\t\tview: this.widgetName,\n\t\t\t\t\tstep: 'step4',\n\t\t\t\t\tselectedModule: this.moduleName,\n\t\t\t\t\tfiltersId: this.step2.find('.filtersId').val(),\n\t\t\t\t\tgroupField: groupField.val(),\n\t\t\t\t\tchartType: this.chartTypeValue,\n\t\t\t\t\ttemplateId: this.widgetId,\n\t\t\t\t\tlinkId: this.linkId\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tthis.registerStep4(data);\n\t\t\t\t});\n\t\t\t});\n\t\t\tif (this.widgetId) {\n\t\t\t\tgroupField.trigger('change');\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register fourth step elements\n\t\t */\n\t\tregisterStep4(stepContainer) {\n\t\t\tthis.step4.append(stepContainer);\n\t\t\tthis.stepNumber.val(4);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.step4.find('select'));\n\t\t\tlet dividingField = this.step4.find('[name=\"dividingField\"]');\n\t\t\tdividingField.on('change', (e) => {\n\t\t\t\tlet selectedOption = e.currentTarget.selectedOptions[0];\n\t\t\t\tlet type = selectedOption ? selectedOption.dataset.fieldType : '';\n\t\t\t\tlet selector = this.step4.find('.js-sector-container');\n\t\t\t\tif (type === 'datetime' || type === 'date') {\n\t\t\t\t\tselector.removeClass('d-none');\n\t\t\t\t\tselector.find('select').attr('disabled', false);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(selector.find('select'));\n\t\t\t\t} else {\n\t\t\t\t\tselector.addClass('d-none');\n\t\t\t\t\tselector.find('select').attr('disabled', true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.registerRequestForStep5();\n\t\t\tthis.step4.find('[name=\"dividingField\"], [name=\"stacked\"], [name=\"sectorField\"]').on('change', (e) => {\n\t\t\t\tthis.step5.empty();\n\t\t\t\tthis.registerRequestForStep5();\n\t\t\t});\n\t\t\tif (this.widgetId && dividingField.length && dividingField.val()) {\n\t\t\t\tdividingField.trigger('change');\n\t\t\t}\n\t\t\tapp.registerModalEvents(this.container);\n\t\t},\n\t\tregisterRequestForStep5() {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: this.sourceModuleName,\n\t\t\t\tview: this.widgetName,\n\t\t\t\tstep: 'step5',\n\t\t\t\tselectedModule: this.moduleName,\n\t\t\t\tfiltersId: this.step2.find('.filtersId').val(),\n\t\t\t\tgroupField: this.step3.find('.groupField option:selected').val(),\n\t\t\t\tchartType: this.chartTypeValue,\n\t\t\t\tdividingField: this.step4.find('[name=\"dividingField\"] option:selected').val(),\n\t\t\t\tsectorField: this.step4.find('[name=\"sectorField\"] option:selected').val(),\n\t\t\t\tstacked: this.step4.find('[name=\"stacked\"]').is(':checked'),\n\t\t\t\ttemplateId: this.widgetId,\n\t\t\t\tlinkId: this.linkId\n\t\t\t}).done((data) => {\n\t\t\t\tthis.registerStep5(data);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register fifth step elements\n\t\t */\n\t\tregisterStep5(stepContainer) {\n\t\t\tthis.step5.append(stepContainer);\n\t\t\tthis.stepNumber.val(5);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(this.step5.find('select'));\n\t\t},\n\t\t/**\n\t\t * Register submit\n\t\t */\n\t\tregisterSubmit() {\n\t\t\tlet form = this.form;\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.data('jqv').InvalidFields.length === 0) {\n\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({ position: 'html', blockInfo: { enabled: true } });\n\t\t\t\t\tlet params = this.widgetId ? this.getParamsForEdit() : this.getParams();\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tthis.postSave(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t * @param {object} response\n\t\t */\n\t\tpostSave(response) {\n\t\t\tlet result = response['result'];\n\t\t\tVtiger_Helper_Js.showMessage({ type: 'success', text: result['text'] });\n\t\t\tif (this.isDashboard()) {\n\t\t\t\tlet linkElement = this.source.clone();\n\t\t\t\tlinkElement.data('name', this.widgetName);\n\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\tnew Vtiger_DashBoard_Js().addWidget(\n\t\t\t\t\tlinkElement,\n\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=ChartFilter&linkid=' +\n\t\t\t\t\t\tthis.source.data('linkid') +\n\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t'&active=0'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Gets params for save\n\t\t * @returns {object}\n\t\t */\n\t\tgetParamsForEdit() {\n\t\t\tlet paramsForm = this.form.serializeFormData();\n\t\t\tparamsForm.module = 'WidgetsManagement';\n\t\t\tparamsForm.parent = 'Settings';\n\t\t\tparamsForm.action = 'SaveAjax';\n\t\t\tparamsForm.mode = 'save';\n\t\t\tparamsForm.chartModule = this.moduleName;\n\t\t\tparamsForm.linkId = this.source.data('linkid');\n\t\t\tparamsForm.widgetId = this.widgetId;\n\t\t\treturn paramsForm;\n\t\t},\n\t\t/**\n\t\t * Gets params for save\n\t\t * @returns {object}\n\t\t */\n\t\tgetParams() {\n\t\t\tlet data = {};\n\t\t\tlet paramsForm = this.form.serializeFormData();\n\t\t\tthis.form.find('.saveParam').each(function (_, element) {\n\t\t\t\tif (typeof paramsForm[element.name] !== 'undefined') {\n\t\t\t\t\tdata[element.name] = paramsForm[element.name];\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet filtersId = this.step2.find('.filtersId').val();\n\t\t\tif (Array.isArray(filtersId)) {\n\t\t\t\tfiltersId = filtersId.join(',');\n\t\t\t}\n\t\t\tconst formData = {\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tblockid: this.source.data('block-id'),\n\t\t\t\tlinkid: this.source.data('linkid'),\n\t\t\t\tname: this.widgetName,\n\t\t\t\ttitle: paramsForm['title'],\n\t\t\t\tfilterid: filtersId,\n\t\t\t\tisdefault: 0,\n\t\t\t\theight: 4,\n\t\t\t\twidth: 4,\n\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\tdefault_owner: 'mine',\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tform: formData,\n\t\t\t\tmodule: this.sourceModuleName,\n\t\t\t\tsourceModule: this.sourceModuleName || app.getModuleName(),\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: 'add',\n\t\t\t\taddToUser: this.isDashboard(),\n\t\t\t\tlinkid: this.source.data('linkid'),\n\t\t\t\tname: this.widgetName\n\t\t\t};\n\t\t},\n\t\t/**\n\t\t * Gets dashboard ID\n\t\t * @returns {int}\n\t\t */\n\t\tgetCurrentDashboard() {\n\t\t\treturn $('.selectDashboard li a.active').closest('li').data('id') || 1;\n\t\t},\n\t\t/**\n\t\t * Check if the widget is added on the dashboard\n\t\t * @returns {boolean}\n\t\t */\n\t\tisDashboard() {\n\t\t\treturn $('.dashboardViewContainer').length > 0 && typeof Vtiger_DashBoard_Js !== 'undefined';\n\t\t},\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = $(modalContainer);\n\t\t\tlet id = this.container.closest('.js-modal-container').attr('id');\n\t\t\tthis.source = $(`[data-modalid=\"${id}\"]`);\n\t\t\tthis.sourceModuleName = this.source.data('module');\n\t\t\tthis.registerContainers();\n\t\t\tthis.registerStep1();\n\t\t\tthis.registerSubmit();\n\t\t}\n\t}\n);\n"],"names":["$","Class","widgetName","registerContainers","widgetId","container","val","linkId","step1","step2","step3","step4","step5","footer","form","stepNumber","registerStep1","chartType","moduleElement","App","Fields","Picklist","showSelect2ElementView","placeholder","app","vtranslate","moduleName","chartTypeValue","on","e","currentTarget","value","trigger","hide","empty","AppConnector","request","module","sourceModuleName","view","step","selectedModule","templateId","done","data","registerStep2","stepContainer","append","filtersIdElement","find","valueTypeElement","filterId","type","Object","keys","length","filtersId","valueType","registerStep3","groupField","show","registerStep4","dividingField","selectedOption","selectedOptions","dataset","fieldType","selector","removeClass","attr","addClass","registerRequestForStep5","registerModalEvents","sectorField","stacked","is","registerStep5","registerSubmit","validationEngine","validationEngineOptions","preventDefault","InvalidFields","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","params","getParamsForEdit","getParams","success","hideModalWindow","mode","postSave","fail","formAlignmentAfterValidation","response","result","Vtiger_Helper_Js","showMessage","text","isDashboard","linkElement","source","clone","Vtiger_DashBoard_Js","addWidget","window","location","reload","paramsForm","serializeFormData","parent","action","chartModule","each","_","element","name","Array","isArray","join","formData","JSON","stringify","blockid","linkid","title","filterid","isdefault","height","width","owners_all","default_owner","dashboardId","getCurrentDashboard","sourceModule","getModuleName","addToUser","closest","registerEvents","modalContainer","id"],"mappings":"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"}