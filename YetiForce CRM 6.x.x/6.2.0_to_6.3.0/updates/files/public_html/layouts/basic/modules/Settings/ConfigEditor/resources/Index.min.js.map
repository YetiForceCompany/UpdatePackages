{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n\n'use strict';\n\njQuery.Class(\n\t'Settings_ConfigEditor_Index_Js',\n\t{},\n\t{\n\t\t/*\n\t\t * Function to save the Configuration Editor content\n\t\t */\n\t\tsaveConfigEditor: function (form) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tlet params = form.serializeFormData();\n\t\t\tparams.module = app.getModuleName();\n\t\t\tparams.parent = app.getParentModuleName();\n\t\t\tparams.action = 'SaveAjax';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to load the contents from the url through pjax\n\t\t */\n\t\tloadContents: function (url) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tAppConnector.requestPjax(url)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * function to register the events in editView\n\t\t */\n\t\tregisterEditViewEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#ConfigEditorForm');\n\t\t\tvar detailUrl = form.data('detailUrl');\n\n\t\t\t//register all select2 Elements\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('select.select2'), {\n\t\t\t\tdropdownCss: { 'z-index': 0 }\n\t\t\t});\n\n\t\t\t//register validation engine\n\t\t\tvar params = app.validationEngineOptions;\n\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.saveConfigEditor(form)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CONFIGURATION_DETAILS_SAVED');\n\t\t\t\t\t\t\t\tthisInstance.loadContents(detailUrl).done(function (data) {\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\treturn valid;\n\t\t\t\t}\n\t\t\t};\n\t\t\tform.validationEngine(params);\n\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t\t//Register click event for cancel link\n\t\t\tvar cancelLink = form.find('.cancelLink');\n\t\t\tcancelLink.on('click', function () {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.loadContents(detailUrl).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tjQuery('.contentsDiv').html(data);\n\t\t\t\t\tthisInstance.registerDetailViewEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to register the events in DetailView\n\t\t */\n\t\tregisterDetailViewEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('#ConfigEditorDetails');\n\t\t\tvar editButton = container.find('.editButton');\n\n\t\t\t//Register click event for edit button\n\t\t\teditButton.on('click', function () {\n\t\t\t\tvar url = editButton.data('url');\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance\n\t\t\t\t\t.loadContents(url)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tjQuery('.contentsDiv').html(data);\n\t\t\t\t\t\tthisInstance.registerEditViewEvents();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tlet container = $('.contentsDiv');\n\t\t\tapp.showPopoverElementView(container.find('.js-popover-tooltip'));\n\t\t\tif (jQuery('#ConfigEditorDetails').length > 0) {\n\t\t\t\tthis.registerDetailViewEvents();\n\t\t\t} else {\n\t\t\t\tthis.registerEditViewEvents();\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_NumberRange100_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_NumberRange100_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the percentage field data\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue < 1 || fieldValue > 100) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO100');\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","saveConfigEditor","form","aDeferred","Deferred","params","serializeFormData","module","app","getModuleName","parent","getParentModuleName","action","AppConnector","request","done","data","resolve","fail","error","err","reject","promise","loadContents","url","requestPjax","registerEditViewEvents","thisInstance","detailUrl","App","Fields","Picklist","showSelect2ElementView","find","dropdownCss","validationEngineOptions","onValidationComplete","valid","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","vtranslate","window","location","reload","Settings_Vtiger_Index_Js","showMessage","mode","validationEngine","on","e","preventDefault","cancelLink","html","registerDetailViewEvents","container","editButton","registerEvents","$","showPopoverElementView","length","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","field","rangeInstance","Vtiger_NumberRange100_Validator_Js","setElement","response","validate","getError","_super","fieldValue","getFieldValue","errorInfo","setError"],"mappings":";;AAAA,kKAEA,aAEAA,MAAM,CAACC,KAAP,CACC,gCADD,CAEC,EAFD,CAGC;AAED;AACA,KACEC,gBAAgB,CAAE,0BAAUC,IAAV,CAAgB,KAC7BC,SAAS,CAAGJ,MAAM,CAACK,QAAP,EADiB,CAG7BC,MAAM,CAAGH,IAAI,CAACI,iBAAL,EAHoB,CAcjC,OAVAD,MAAM,CAACE,MAAP,CAAgBC,GAAG,CAACC,aAAJ,EAUhB,CATAJ,MAAM,CAACK,MAAP,CAAgBF,GAAG,CAACG,mBAAJ,EAShB,CARAN,MAAM,CAACO,MAAP,CAAgB,UAQhB,CAPAC,YAAY,CAACC,OAAb,CAAqBT,MAArB,EACEU,IADF,CACO,SAAUC,IAAV,CAAgB,CACrBb,SAAS,CAACc,OAAV,CAAkBD,IAAlB,EACA,CAHF,EAIEE,IAJF,CAIO,SAAUC,KAAV,CAAiBC,GAAjB,CAAsB,CAC3BjB,SAAS,CAACkB,MAAV,CAAiBF,KAAjB,CAAwBC,GAAxB,EACA,CANF,CAOA,CAAOjB,SAAS,CAACmB,OAAV,EACP,CAnBF;AAsBD;AACA,KACEC,YAAY,CAAE,sBAAUC,GAAV,CAAe,CAC5B,IAAIrB,SAAS,CAAGJ,MAAM,CAACK,QAAP,EAAhB,CAQA,OAPAS,YAAY,CAACY,WAAb,CAAyBD,GAAzB,EACET,IADF,CACO,SAAUC,IAAV,CAAgB,CACrBb,SAAS,CAACc,OAAV,CAAkBD,IAAlB,EACA,CAHF,EAIEE,IAJF,CAIO,UAAsB,CAC3Bf,SAAS,CAACkB,MAAV,GACA,CANF,CAOA,CAAOlB,SAAS,CAACmB,OAAV,EACP,CAlCF;AAqCD;AACA,KACEI,sBAAsB,CAAE,iCAAY,KAC/BC,YAAY,CAAG,IADgB,CAE/BzB,IAAI,CAAGH,MAAM,CAAC,mBAAD,CAFkB,CAG/B6B,SAAS,CAAG1B,IAAI,CAACc,IAAL,CAAU,WAAV,CAHmB,CAMnCa,GAAG,CAACC,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2C9B,IAAI,CAAC+B,IAAL,CAAU,gBAAV,CAA3C,CAAwE,CACvEC,WAAW,CAAE,CAAE,UAAW,CAAb,CAD0D,CAAxE,CANmC,CAUnC;AACA,IAAI7B,MAAM,CAAGG,GAAG,CAAC2B,uBAAjB,CACA9B,MAAM,CAAC+B,oBAAP,CAA8B,SAAUlC,IAAV,CAAgBmC,KAAhB,CAAuB,CACpD,GAAIA,KAAJ,CAAW,CACV,IAAIC,wBAAwB,CAAGvC,MAAM,CAACwC,iBAAP,CAAyB,CACvDC,QAAQ,CAAE,MAD6C,CAEvDC,SAAS,CAAE,CACVC,OAAO,GADG,CAF4C,CAAzB,CAA/B,CAuBA,OAjBAf,YAAY,CACV1B,gBADF,CACmBC,IADnB,EAEEa,IAFF,CAEO,SAAUC,IAAV,CAAgB,CACrB,IAAIX,MAAM,CAAG,EAAb,CACIW,IAAI,QAFa,EAGpBX,MAAM,KAAN,CAAiBG,GAAG,CAACmC,UAAJ,CAAe,gCAAf,CAHG,CAIpBhB,YAAY,CAACJ,YAAb,CAA0BK,SAA1B,EAAqCb,IAArC,CAA0C,UAAgB,CACzD6B,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACA,CAFD,CAJoB,CAOpBC,wBAAwB,CAACC,WAAzB,CAAqC3C,MAArC,CAPoB,EASpBiC,wBAAwB,CAACC,iBAAzB,CAA2C,CAAEU,IAAI,CAAE,MAAR,CAA3C,EAED,CAbF,EAcE/B,IAdF,CAcO,UAAsB,CAC3BoB,wBAAwB,CAACC,iBAAzB,CAA2C,CAAEU,IAAI,CAAE,MAAR,CAA3C,EACA,CAhBF,CAiBA,CAAOZ,KACP,CACD,CAvCkC,CAwCnCnC,IAAI,CAACgD,gBAAL,CAAsB7C,MAAtB,CAxCmC,CA0CnCH,IAAI,CAACiD,EAAL,CAAQ,QAAR,CAAkB,SAAUC,CAAV,CAAa,CAC9BA,CAAC,CAACC,cAAF,GACA,CAFD,CA1CmC,CA8CnC;AACA,IAAIC,UAAU,CAAGpD,IAAI,CAAC+B,IAAL,CAAU,aAAV,CAAjB,CACAqB,UAAU,CAACH,EAAX,CAAc,OAAd,CAAuB,UAAY,CAClC,IAAIb,wBAAwB,CAAGvC,MAAM,CAACwC,iBAAP,CAAyB,CACvDC,QAAQ,CAAE,MAD6C,CAEvDC,SAAS,CAAE,CACVC,OAAO,GADG,CAF4C,CAAzB,CAA/B,CAMAf,YAAY,CAACJ,YAAb,CAA0BK,SAA1B,EAAqCb,IAArC,CAA0C,SAAUC,IAAV,CAAgB,CACzDsB,wBAAwB,CAACC,iBAAzB,CAA2C,CAAEU,IAAI,CAAE,MAAR,CAA3C,CADyD,CAEzDlD,MAAM,CAAC,cAAD,CAAN,CAAuBwD,IAAvB,CAA4BvC,IAA5B,CAFyD,CAGzDW,YAAY,CAAC6B,wBAAb,GACA,CAJD,EAKA,CAZD,EAaA,CApGF;AAuGD;AACA,KACEA,wBAAwB,CAAE,mCAAY,KACjC7B,YAAY,CAAG,IADkB,CAEjC8B,SAAS,CAAG1D,MAAM,CAAC,sBAAD,CAFe,CAGjC2D,UAAU,CAAGD,SAAS,CAACxB,IAAV,CAAe,aAAf,CAHoB,CAKrC;AACAyB,UAAU,CAACP,EAAX,CAAc,OAAd,CAAuB,UAAY,KAC9B3B,GAAG,CAAGkC,UAAU,CAAC1C,IAAX,CAAgB,KAAhB,CADwB,CAE9BsB,wBAAwB,CAAGvC,MAAM,CAACwC,iBAAP,CAAyB,CACvDC,QAAQ,CAAE,MAD6C,CAEvDC,SAAS,CAAE,CACVC,OAAO,GADG,CAF4C,CAAzB,CAFG,CAQlCf,YAAY,CACVJ,YADF,CACeC,GADf,EAEET,IAFF,CAEO,SAAUC,IAAV,CAAgB,CACrBsB,wBAAwB,CAACC,iBAAzB,CAA2C,CAAEU,IAAI,CAAE,MAAR,CAA3C,CADqB,CAErBlD,MAAM,CAAC,cAAD,CAAN,CAAuBwD,IAAvB,CAA4BvC,IAA5B,CAFqB,CAGrBW,YAAY,CAACD,sBAAb,GACA,CANF,EAOER,IAPF,CAOO,UAAsB,CAC3BoB,wBAAwB,CAACC,iBAAzB,CAA2C,CAAEU,IAAI,CAAE,MAAR,CAA3C,EACA,CATF,EAUA,CAlBD,EAmBA,CAlIF,CAoICU,cAAc,CAAE,yBAAY,CAC3B,IAAIF,SAAS,CAAGG,CAAC,CAAC,cAAD,CAAjB,CACApD,GAAG,CAACqD,sBAAJ,CAA2BJ,SAAS,CAACxB,IAAV,CAAe,qBAAf,CAA3B,CAF2B,CAGiB,CAAxC,CAAAlC,MAAM,CAAC,sBAAD,CAAN,CAA+B+D,MAHR,CAI1B,KAAKN,wBAAL,EAJ0B,CAM1B,KAAK9B,sBAAL,GAED,CA5IF,CAHD,EAmJAqC,8CAA8C,CAC7C,oCAD6C,CAE7C;AAED;AACA;AACA;AACA,KACEC,gBAAgB,CAAE,0BAAUC,KAAV,CAAoC,CACrD,IAAIC,aAAa,CAAG,IAAIC,kCAAxB,CACAD,aAAa,CAACE,UAAd,CAAyBH,KAAzB,CAFqD,CAGrD,IAAII,QAAQ,CAAGH,aAAa,CAACI,QAAd,EAAf,CACA,GAAI,IAAAD,QAAJ,CACC,OAAOH,aAAa,CAACK,QAAd,EAER,CAbF,CAF6C,CAiB7C;AAED;AACA;AACA;AACA,KACED,QAAQ,CAAE,mBAAY,CACrB,IAAID,QAAQ,CAAG,KAAKG,MAAL,EAAf,CACA,GAAI,IAAAH,QAAJ,CACC,OAAOA,QAAP,CAEA,IAAII,UAAU,CAAG,KAAKC,aAAL,EAAjB,CACA,GAAiB,CAAb,CAAAD,UAAU,EAAqB,GAAb,CAAAA,UAAtB,CAAwC,CACvC,IAAIE,SAAS,CAAGnE,GAAG,CAACmC,UAAJ,CAAe,wCAAf,CAAhB,CAEA,YADKiC,QAAL,CAAcD,SAAd,CACA,GACA,CACD,SAED,CAnBF,CAjB6C;;"}