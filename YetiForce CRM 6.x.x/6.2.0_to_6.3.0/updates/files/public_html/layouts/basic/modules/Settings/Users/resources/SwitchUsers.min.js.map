{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Users_SwitchUsers_Js',\n\t{},\n\t{\n\t\tregisterAdd: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('.addItem').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.sufrom').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tvar id = parseInt(content.find('#suCount').val()) + 1;\n\t\t\t\tvar cloneItem = content.find('.cloneItem tbody').clone(true, true);\n\t\t\t\tvar suFrom = cloneItem.find('.sufrom option');\n\t\t\t\tsuFrom.each(function (index, option) {\n\t\t\t\t\t$.each(data, function (key, selectedUser) {\n\t\t\t\t\t\tif ($(option).val() == selectedUser.user) {\n\t\t\t\t\t\t\tcloneItem.find(option).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tcloneItem\n\t\t\t\t\t.find('tr')\n\t\t\t\t\t.attr('data-id', id)\n\t\t\t\t\t.addClass('row' + id);\n\t\t\t\tcontent.find('.switchUsersTable tbody').append(cloneItem.html());\n\t\t\t\tcontent.find('#suCount').val(id);\n\t\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t\t});\n\t\t},\n\t\tregisterDelete: function (content) {\n\t\t\tcontent.find('.delate').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\ttarget.closest('tr').remove();\n\t\t\t});\n\t\t},\n\t\tregisterSave: function (content) {\n\t\t\tcontent.find('.saveItems').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tif ($(this).find('.suto :selected').length > 0) {\n\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t\t\t\taccess: $(this).find('.suto').val()\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSwitchUsers', data).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('.contentsDiv');\n\t\t\tthis.registerAdd(content);\n\t\t\tthis.registerDelete(content);\n\t\t\tthis.registerSave(content);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerAdd","content","thisInstance","find","on","data","each","push","user","$","val","id","parseInt","cloneItem","clone","suFrom","index","option","key","selectedUser","remove","attr","addClass","append","html","registerDelete","App","Fields","Picklist","showSelect2ElementView","e","target","currentTarget","closest","registerSave","length","access","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":"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"}