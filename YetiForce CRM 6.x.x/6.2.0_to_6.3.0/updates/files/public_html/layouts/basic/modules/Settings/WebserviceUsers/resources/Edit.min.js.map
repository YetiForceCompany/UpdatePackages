{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'Settings_WebserviceUsers_Edit_Js',\n\t{},\n\t{\n\t\tgetForm: function () {\n\t\t\tif (this.formElement == false) {\n\t\t\t\tthis.setForm(jQuery('#modalEdit'));\n\t\t\t}\n\t\t\treturn this.formElement;\n\t\t},\n\t\t/**\n\t\t * Show hide fields\n\t\t * @param {Object} typeElement\n\t\t * @param {Object} params\n\t\t */\n\t\tshowHideFields: function (typeElement, params) {\n\t\t\tlet elementContainer = this.getForm()\n\t\t\t\t.find('[name=\"' + params.fieldHide + '\"]')\n\t\t\t\t.closest('.form-group');\n\t\t\tif (typeElement.val() === params.value) {\n\t\t\t\tlet clearReference = elementContainer.find('.clearReferenceSelection');\n\t\t\t\tif (clearReference.length > 0) {\n\t\t\t\t\tclearReference.trigger('click');\n\t\t\t\t}\n\t\t\t\telementContainer.addClass('d-none');\n\t\t\t} else {\n\t\t\t\telementContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getForm();\n\t\t\tthis.registerBasicEvents(container);\n\t\t\tlet form = container.find('form');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\tlet listInstance = Settings_WebserviceUsers_List_Js.getInstance();\n\t\t\t\t\t\t\tlistInstance.reloadTab();\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet typeElement = form.find('[name=\"type\"]');\n\t\t\tlet typeParams = { fieldHide: 'crmid', value: '1' };\n\t\t\tself.showHideFields(typeElement, typeParams);\n\t\t\ttypeElement.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), typeParams);\n\t\t\t});\n\n\t\t\tlet loginMethod = form.find('[name=\"login_method\"]');\n\t\t\tlet loginMethodParams = { fieldHide: 'authy_methods', value: 'PLL_PASSWORD' };\n\t\t\tself.showHideFields(loginMethod, loginMethodParams);\n\t\t\tloginMethod.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), loginMethodParams);\n\t\t\t});\n\t\t}\n\t}\n);\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_WebserviceUsers_Edit_Js();\n\tinstance.registerEvents();\n});\n"],"names":["Vtiger_Edit_Js","getForm","formElement","setForm","jQuery","showHideFields","typeElement","params","elementContainer","find","fieldHide","closest","val","value","clearReference","length","trigger","addClass","removeClass","registerEvents","self","container","registerBasicEvents","form","on","e","preventDefault","validationEngine","formData","serializeFormData","AppConnector","request","done","data","result","success","Settings_Vtiger_Index_Js","showMessage","text","app","vtranslate","listInstance","Settings_WebserviceUsers_List_Js","getInstance","reloadTab","hideModalWindow","message","showNotify","type","typeParams","currentTarget","loginMethod","loginMethodParams","document","ready","instance","Settings_WebserviceUsers_Edit_Js"],"mappings":"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"}