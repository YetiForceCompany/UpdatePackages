{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function ($) {\n\tvar ProgressIndicatorHelper = function () {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\tposition: 'append',\n\t\t\tmode: 'show',\n\t\t\tblockInfo: {\n\t\t\t\telementToBlock: 'body'\n\t\t\t},\n\t\t\tmessage: ''\n\t\t};\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t};\n\n\t\tthis.blockOverlayCSS = {\n\t\t\topacity: 0.8,\n\t\t\t'background-color': '#fff'\n\t\t};\n\n\t\tthis.blockCss = {\n\t\t\tborder: '',\n\t\t\t'background-color': '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t};\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\tleft: '37.5%',\n\t\t\tposition: 'fixed',\n\t\t\ttop: '4.5%',\n\t\t\t'z-index': '100000'\n\t\t};\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function (element, options = {}) {\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.blockOverlayCSS = Object.assign(\n\t\t\t\tthisInstance.blockOverlayCSS,\n\t\t\t\toptions.blockOverlayCSS ? options.blockOverlayCSS : {}\n\t\t\t);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== 'undefined') {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.initActions = function () {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.isPageBlockMode = function () {\n\t\t\tif (typeof this.elementToBlock !== 'undefined' && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isBlockMode = function () {\n\t\t\tif (typeof this.options.blockInfo !== 'undefined' && this.options.blockInfo.enabled == true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.show = function () {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml =\n\t\t\t\t'<div class=\"imageHolder ' +\n\t\t\t\tclassName +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage !== false) {\n\t\t\t\tif (jQMessage.length == 0) {\n\t\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t\t}\n\t\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage);\n\t\t\t\t}\n\t\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\t}\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t};\n\n\t\tthis.hide = function () {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== 'undefined') {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t};\n\t};\n\n\t$.fn.progressIndicator = function (options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function (index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== 'undefined') {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\t};\n\n\t$.progressIndicator = function (options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t};\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n"],"names":["$","ProgressIndicatorHelper","thisInstance","defaults","position","mode","blockInfo","elementToBlock","message","imageContainerCss","\"text-align\"","blockOverlayCSS","opacity","\"background-color\"","blockCss","border","\"background-clip\"","\"border-radius\"","showTopCSS","width","left","top","\"z-index\"","showOnTop","init","element","options","arguments","length","extend","Object","assign","container","isBlockMode","initActions","show","hide","isPageBlockMode","is","enabled","className","smallLoadingImage","imageHtml","jQImageHtml","jQuery","css","jQMessage","app","vtranslate","html","messageContainer","append","addClass","prepend","replaceWith","blockedElement","blockUI","overlayCSS","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","progressIndicatorInstance","jQueryObject","data","progressImageContainer","baseZ"],"mappings":"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"}