{"version":3,"file":"Tax.min.js","sources":["Tax.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Settings_Vtiger_Tax_Js',\n\t{},\n\t{\n\t\t//Stored history of TaxName and duplicate check result\n\t\tduplicateCheckCache: {},\n\n\t\t/**\n\t\t * This function will show the model for Add/Edit tax\n\t\t */\n\t\teditTax: function (url, currentTrElement) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar thisInstance = this;\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\t//cache should be empty when modal opened\n\t\t\t\t\t\tthisInstance.duplicateCheckCache = {};\n\t\t\t\t\t\tvar form = jQuery('#editTax');\n\n\t\t\t\t\t\tvar params = app.validationEngineOptions;\n\t\t\t\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\t\tthisInstance.saveTaxDetails(form, currentTrElement);\n\t\t\t\t\t\t\t\treturn valid;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tform.validationEngine(params);\n\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: '500px' }\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to Save the Tax Details\n\t\t */\n\t\tsaveTaxDetails: function (form, currentTrElement) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = form.serializeFormData();\n\n\t\t\tif (typeof params === 'undefined') {\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tthisInstance.validateTaxName(params).done(function (data) {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tparams.module = app.getModuleName();\n\t\t\t\tparams.parent = app.getParentModuleName();\n\t\t\t\tparams.action = 'TaxAjax';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t//Adding or update the tax details in the list\n\t\t\t\t\tif (form.find('.addTaxView').val() == 'true') {\n\t\t\t\t\t\tthisInstance.addTaxDetails(data['result']);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthisInstance.updateTaxDetails(data['result'], currentTrElement);\n\t\t\t\t\t}\n\t\t\t\t\t//show notification after tax details saved\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_TAX_SAVED_SUCCESSFULLY')\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to add the Tax Details in the list after saving\n\t\t */\n\t\taddTaxDetails: function (details) {\n\t\t\tlet container = jQuery('#TaxCalculationsContainer'),\n\t\t\t\ttaxTable;\n\n\t\t\t//Based on tax type, we will add the tax details row\n\t\t\tif (details.type === '0') {\n\t\t\t\ttaxTable = jQuery('.inventoryTaxTable', container);\n\t\t\t} else {\n\t\t\t\ttaxTable = jQuery('.shippingTaxTable', container);\n\t\t\t}\n\n\t\t\tlet trElementForTax = jQuery(\n\t\t\t\t'<tr class=\"opacity\" data-taxid=\"' +\n\t\t\t\t\tdetails.taxid +\n\t\t\t\t\t'\" data-taxtype=\"' +\n\t\t\t\t\tdetails.type +\n\t\t\t\t\t'\"><td style=\"border-left: none;\" class=\"textAlignCenter ' +\n\t\t\t\t\tdetails.row_type +\n\t\t\t\t\t'\"><label class=\"taxLabel\">' +\n\t\t\t\t\tdetails.taxlabel +\n\t\t\t\t\t'</label></td><td style=\"border-left: none;\" class=\"textAlignCenter ' +\n\t\t\t\t\tdetails.row_type +\n\t\t\t\t\t'\"><span class=\"taxPercentage\">' +\n\t\t\t\t\tdetails.percentage +\n\t\t\t\t\t'%</span></td><td style=\"border-left: none;\" class=\"textAlignCenter ' +\n\t\t\t\t\tdetails.row_type +\n\t\t\t\t\t'\"><input class=\"editTaxStatus\" type=\"checkbox\" checked>' +\n\t\t\t\t\t'<div class=\"pull-right actions\"><a class=\"editTax u-cursor-pointer\" data-url=\"' +\n\t\t\t\t\tdetails._editurl +\n\t\t\t\t\t'\"><i class=\"yfi yfi-full-editing-view alignBottom\" title=\"' +\n\t\t\t\t\tapp.vtranslate('JS_EDIT') +\n\t\t\t\t\t'\"></i></a></div></td></tr>'\n\t\t\t);\n\t\t\ttaxTable.append(trElementForTax);\n\t\t},\n\n\t\t/*\n\t\t * Function to update the tax details in the list after edit\n\t\t */\n\t\tupdateTaxDetails: function (data, currentTrElement) {\n\t\t\tcurrentTrElement.find('.taxLabel').text(data['taxlabel']);\n\t\t\tcurrentTrElement.find('.taxPercentage').text(data['percentage'] + '%');\n\t\t\tif (data['deleted'] == '0') {\n\t\t\t\tcurrentTrElement.find('.editTaxStatus').attr('checked', 'true');\n\t\t\t} else {\n\t\t\t\tcurrentTrElement.find('.editTaxStatus').removeAttr('checked');\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Function to validate the TaxName to avoid duplicates\n\t\t */\n\t\tvalidateTaxName: function (data) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar taxName = data.taxlabel;\n\t\t\tvar form = jQuery('#editTax');\n\t\t\tvar taxLabelElement = form.find('[name=\"taxlabel\"]');\n\n\t\t\tif (!(taxName in thisInstance.duplicateCheckCache)) {\n\t\t\t\tthisInstance\n\t\t\t\t\t.checkDuplicateName(data)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tthisInstance.duplicateCheckCache[taxName] = data['success'];\n\t\t\t\t\t\taDeferred.resolve();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\tthisInstance.duplicateCheckCache[taxName] = data['success'];\n\t\t\t\t\t\tthisInstance.duplicateCheckCache['message'] = data['message'];\n\t\t\t\t\t\ttaxLabelElement.validationEngine('showPrompt', data['message'], 'error', 'bottomLeft', true);\n\t\t\t\t\t\taDeferred.reject(data);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (thisInstance.duplicateCheckCache[taxName] == true) {\n\t\t\t\t\tvar result = thisInstance.duplicateCheckCache['message'];\n\t\t\t\t\ttaxLabelElement.validationEngine('showPrompt', result, 'error', 'bottomLeft', true);\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Tax Name\n\t\t */\n\t\tcheckDuplicateName: function (details) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar taxName = details.taxlabel;\n\t\t\tvar taxId = details.taxid;\n\t\t\tvar moduleName = app.getModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: moduleName,\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'TaxAjax',\n\t\t\t\tmode: 'checkDuplicateName',\n\t\t\t\ttaxlabel: taxName,\n\t\t\t\ttaxid: taxId,\n\t\t\t\ttype: details.type\n\t\t\t};\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tvar result = response['success'];\n\t\t\t\t\tif (result == true) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to update tax status as enabled or disabled\n\t\t */\n\t\tupdateTaxStatus: function (currentTarget) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar currentTrElement = currentTarget.closest('tr');\n\t\t\tvar taxId = currentTrElement.data('taxid');\n\t\t\tvar taxType = currentTrElement.data('taxtype');\n\t\t\tvar deleted = currentTarget.is(':checked') ? 0 : 1;\n\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'TaxAjax',\n\t\t\t\ttaxid: taxId,\n\t\t\t\ttype: taxType,\n\t\t\t\tdeleted: deleted\n\t\t\t};\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to register all actions in the Tax List\n\t\t */\n\t\tregisterActions: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('#TaxCalculationsContainer');\n\n\t\t\t//register click event for Add New Tax button\n\t\t\tcontainer.find('.addTax').on('click', function (e) {\n\t\t\t\tvar addTaxButton = jQuery(e.currentTarget);\n\t\t\t\tvar createTaxUrl = addTaxButton.data('url') + '&type=' + addTaxButton.data('type');\n\t\t\t\tthisInstance.editTax(createTaxUrl);\n\t\t\t});\n\n\t\t\t//register event for edit tax icon\n\t\t\tcontainer.on('click', '.editTax', function (e) {\n\t\t\t\tvar editTaxButton = jQuery(e.currentTarget);\n\t\t\t\tvar currentTrElement = editTaxButton.closest('tr');\n\t\t\t\tthisInstance.editTax(editTaxButton.data('url'), currentTrElement);\n\t\t\t});\n\n\t\t\t//register event for checkbox to change the tax Status\n\t\t\tcontainer.on('click', '.editTaxStatus', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\n\t\t\t\tthisInstance.updateTaxStatus(currentTarget).done(function (data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tparams.text = app.vtranslate('JS_TAX_ENABLED');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.text = app.vtranslate('JS_TAX_DISABLED');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tthis.registerActions();\n\t\t}\n\t}\n);\n\njQuery(document).ready(function (e) {\n\tvar taxInstance = new Settings_Vtiger_Tax_Js();\n\ttaxInstance.registerEvents();\n});\n"],"names":["jQuery","Class","duplicateCheckCache","editTax","url","currentTrElement","aDeferred","Deferred","thisInstance","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","AppConnector","request","done","data","callBackFunction","form","params","app","validationEngineOptions","onValidationComplete","valid","saveTaxDetails","validationEngine","on","e","preventDefault","mode","showModalWindow","width","fail","error","reject","promise","serializeFormData","validateTaxName","module","getModuleName","parent","getParentModuleName","action","hideModalWindow","find","val","addTaxDetails","result","updateTaxDetails","text","vtranslate","Settings_Vtiger_Index_Js","showMessage","details","taxTable","container","type","trElementForTax","taxid","row_type","taxlabel","percentage","_editurl","append","deleted","attr","removeAttr","taxName","taxLabelElement","checkDuplicateName","success","resolve","message","taxId","moduleName","response","err","updateTaxStatus","currentTarget","closest","taxType","is","registerActions","addTaxButton","createTaxUrl","editTaxButton","registerEvents","document","ready","taxInstance","Settings_Vtiger_Tax_Js"],"mappings":"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"}