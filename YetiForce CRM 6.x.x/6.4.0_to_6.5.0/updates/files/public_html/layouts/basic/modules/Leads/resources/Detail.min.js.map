{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Leads_Detail_Js',\n\t{\n\t\t//cache will store the convert lead data(Model)\n\t\tcache: {},\n\t\t//Holds detail view instance\n\t\tdetailCurrentInstance: false,\n\t\t/*\n\t\t * function to trigger Convert Lead action\n\t\t * @param: Convert Lead url, currentElement.\n\t\t */\n\t\tconvertLead: function (convertLeadUrl, buttonElement) {\n\t\t\tvar instance = Leads_Detail_Js.detailCurrentInstance;\n\t\t\t//Initially clear the elements to overwtite earliear cache\n\t\t\tinstance.convertLeadContainer = false;\n\t\t\tinstance.convertLeadForm = false;\n\t\t\tinstance.convertLeadModules = false;\n\t\t\tif (jQuery.isEmptyObject(Leads_Detail_Js.cache)) {\n\t\t\t\tAppConnector.request(convertLeadUrl).done(\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tLeads_Detail_Js.cache = data;\n\t\t\t\t\t\t\tinstance.displayConvertLeadModel(data, buttonElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction (error, err) {}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinstance.displayConvertLeadModel(Leads_Detail_Js.cache, buttonElement);\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t//Contains the convert lead form\n\t\tconvertLeadForm: false,\n\t\t//contains the convert lead container\n\t\tconvertLeadContainer: false,\n\t\t//contains all the checkbox elements of modules\n\t\tconvertLeadModules: false,\n\t\t//constructor\n\t\tinit: function () {\n\t\t\tthis._super();\n\t\t\tLeads_Detail_Js.detailCurrentInstance = this;\n\t\t},\n\t\t/*\n\t\t * function to disable the Convert Lead button\n\t\t */\n\t\tdisableConvertLeadButton: function (button) {\n\t\t\tjQuery(button).attr('disabled', 'disabled');\n\t\t},\n\t\t/*\n\t\t * function to enable the Convert Lead button\n\t\t */\n\t\tenableConvertLeadButton: function (button) {\n\t\t\tjQuery(button).removeAttr('disabled');\n\t\t},\n\t\t/*\n\t\t * function to enable all the input and textarea elements\n\t\t */\n\t\tremoveDisableAttr: function (moduleBlock) {\n\t\t\tmoduleBlock.find('input,textarea,select').removeAttr('disabled');\n\t\t},\n\t\t/*\n\t\t * function to disable all the input and textarea elements\n\t\t */\n\t\taddDisableAttr: function (moduleBlock) {\n\t\t\tmoduleBlock.find('input,textarea,select').attr('disabled', 'disabled');\n\t\t},\n\t\t/*\n\t\t * function to display the convert lead model\n\t\t * @param: data used to show the model, currentElement.\n\t\t */\n\t\tdisplayConvertLeadModel: function (data, buttonElement) {\n\t\t\tvar instance = this;\n\t\t\tvar errorElement = jQuery(data).find('#convertLeadError');\n\t\t\tif (errorElement.length != '0') {\n\t\t\t\tvar errorMsg = errorElement.val();\n\t\t\t\tvar errorTitle = jQuery(data).find('#convertLeadErrorTitle').val();\n\t\t\t\tvar params = {\n\t\t\t\t\ttitle: errorTitle,\n\t\t\t\t\ttext: errorMsg,\n\t\t\t\t\taddclass: 'convertLeadNotify',\n\t\t\t\t\twidth: '35%',\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tpnotify_after_open: function () {\n\t\t\t\t\t\tinstance.disableConvertLeadButton(buttonElement);\n\t\t\t\t\t},\n\t\t\t\t\tpnotify_after_close: function () {\n\t\t\t\t\t\tinstance.enableConvertLeadButton(buttonElement);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tapp.showNotify(params);\n\t\t\t} else {\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tvar editViewObj = Vtiger_Edit_Js.getInstance();\n\t\t\t\t\tjQuery(data).find('.fieldInfo').collapse({\n\t\t\t\t\t\tparent: '#leadAccordion',\n\t\t\t\t\t\ttoggle: false\n\t\t\t\t\t});\n\t\t\t\t\teditViewObj.registerBasicEvents(data);\n\t\t\t\t\tvar checkBoxElements = instance.getConvertLeadModules();\n\t\t\t\t\tjQuery.each(checkBoxElements, function (index, element) {\n\t\t\t\t\t\tinstance.checkingModuleSelection(element);\n\t\t\t\t\t});\n\t\t\t\t\tinstance.registerForReferenceField();\n\t\t\t\t\tinstance.registerConvertLeadEvents();\n\t\t\t\t\tinstance.getConvertLeadForm().validationEngine(app.validationEngineOptions);\n\t\t\t\t\tinstance.registerConvertLeadSubmit();\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tdata,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'text-align': 'left'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * function to check which module is selected\n\t\t * to disable or enable all the elements with in the block\n\t\t */\n\t\tcheckingModuleSelection: function (element) {\n\t\t\tvar instance = this;\n\t\t\tvar module = jQuery(element).val();\n\t\t\tvar moduleBlock = jQuery(element)\n\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t.find('#' + module + '_FieldInfo');\n\t\t\tif (jQuery(element).is(':checked')) {\n\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t} else {\n\t\t\t\tinstance.addDisableAttr(moduleBlock);\n\t\t\t}\n\t\t},\n\t\tregisterForReferenceField: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tvar referenceField = jQuery('.reference', container);\n\t\t\tif (referenceField.length > 0) {\n\t\t\t\tjQuery('#AccountsModule').attr('readonly', 'readonly');\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * function to register Convert Lead Events\n\t\t */\n\t\tregisterConvertLeadEvents: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tvar instance = this;\n\t\t\t//Trigger Event to change the icon while shown and hidden the accordion body\n\t\t\tcontainer\n\t\t\t\t.on('hide.bs.collapse', '.js-collapse ', function (e) {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.removeClass('fa-chevron-up')\n\t\t\t\t\t\t.addClass('fa-chevron-down');\n\t\t\t\t})\n\t\t\t\t.on('show.bs.collapse', '.js-collapse ', function (e) {\n\t\t\t\t\t$(e.currentTarget)\n\t\t\t\t\t\t.closest('.convertLeadModules')\n\t\t\t\t\t\t.find('.fas')\n\t\t\t\t\t\t.removeClass('fa-chevron-down')\n\t\t\t\t\t\t.addClass('fa-chevron-up');\n\t\t\t\t});\n\n\t\t\t//Trigger Event on click of Transfer related records modules\n\t\t\tcontainer.on('click', '.transferModule', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar module = currentTarget.val();\n\t\t\t\tvar moduleBlock = jQuery('#' + module + '_FieldInfo');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tjQuery('#' + module + 'Module').prop('checked', true);\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//Trigger Event on click of the Modules selection to convert the lead\n\t\t\tcontainer.on('click', '.convertLeadModuleSelection', function (e) {\n\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\tvar currentModuleName = currentTarget.val();\n\t\t\t\tvar moduleBlock = currentTarget.closest('.convertLeadModules').find('#' + currentModuleName + '_FieldInfo');\n\t\t\t\tvar currentTransferModuleElement = jQuery('#transfer' + currentModuleName);\n\t\t\t\tvar otherTransferModuleElement = jQuery('input[name=\"transferModule\"]').not(currentTransferModuleElement);\n\t\t\t\tvar otherTransferModuleValue = jQuery(otherTransferModuleElement).val();\n\t\t\t\tvar otherModuleElement = jQuery('#' + otherTransferModuleValue + 'Module');\n\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\tinstance.removeDisableAttr(moduleBlock);\n\t\t\t\t\tif (!otherModuleElement.is(':checked')) {\n\t\t\t\t\t\tjQuery(currentTransferModuleElement).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tmoduleBlock.collapse('hide');\n\t\t\t\t\tinstance.addDisableAttr(moduleBlock);\n\t\t\t\t\tjQuery(currentTransferModuleElement).prop('checked', false);\n\t\t\t\t\tif (otherModuleElement.is(':checked')) {\n\t\t\t\t\t\tjQuery(otherTransferModuleElement).prop('checked', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to register Convert Lead Submit Event\n\t\t */\n\t\tregisterConvertLeadSubmit: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar formElement = this.getConvertLeadForm();\n\n\t\t\tformElement.on('jqv.form.validating', function (e) {\n\t\t\t\tvar jQv = jQuery(e.currentTarget).data('jqv');\n\t\t\t\t//Remove the earlier validated fields from history so that it wont count disabled fields\n\t\t\t\tjQv.InvalidFields = [];\n\t\t\t});\n\n\t\t\t//Convert Lead Form Submission\n\t\t\tformElement.on('submit', function (e) {\n\t\t\t\tvar convertLeadModuleElements = thisInstance.getConvertLeadModules();\n\t\t\t\tvar moduleArray = [];\n\t\t\t\tvar accountModel = formElement.find('#AccountsModule');\n\n\t\t\t\t//If the validation fails in the hidden Block, we should show that Block with error.\n\t\t\t\tvar invalidFields = formElement.data('jqv').InvalidFields;\n\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\tvar fieldElement = invalidFields[0];\n\t\t\t\t\tvar moduleBlock = jQuery(fieldElement).closest('.js-collapse');\n\t\t\t\t\tmoduleBlock.collapse('show');\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tjQuery.each(convertLeadModuleElements, function (index, element) {\n\t\t\t\t\tif (jQuery(element).is(':checked')) {\n\t\t\t\t\t\tmoduleArray.push(jQuery(element).val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tformElement.find('input[name=\"modules\"]').val(JSON.stringify(moduleArray));\n\n\t\t\t\tvar organizationElement = accountModel.length;\n\t\t\t\tif (organizationElement != '0') {\n\t\t\t\t\tif (jQuery.inArray('Accounts', moduleArray) == -1) {\n\t\t\t\t\t\tapp.showAlert(app.vtranslate('JS_SELECT_ORGANIZATION'));\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * function to get all the checkboxes which are representing the modules selection\n\t\t */\n\t\tgetConvertLeadModules: function () {\n\t\t\tvar container = this.getConvertLeadContainer();\n\t\t\tif (this.convertLeadModules == false) {\n\t\t\t\tthis.convertLeadModules = jQuery('.convertLeadModuleSelection', container);\n\t\t\t}\n\t\t\treturn this.convertLeadModules;\n\t\t},\n\t\t/*\n\t\t * function to get Convert Lead Form\n\t\t */\n\t\tgetConvertLeadForm: function () {\n\t\t\tif (this.convertLeadForm == false) {\n\t\t\t\tthis.convertLeadForm = jQuery('#convertLeadForm');\n\t\t\t}\n\t\t\treturn this.convertLeadForm;\n\t\t},\n\t\t/*\n\t\t * function to get Convert Lead Container\n\t\t */\n\t\tgetConvertLeadContainer: function () {\n\t\t\tif (this.convertLeadContainer == false) {\n\t\t\t\tthis.convertLeadContainer = jQuery('#leadAccordion');\n\t\t\t}\n\t\t\treturn this.convertLeadContainer;\n\t\t},\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar recordId = this.getRecordId();\n\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\n\t\t\tdata['record'] = recordId;\n\t\t\tdata['module'] = app.getModuleName();\n\t\t\tdata['action'] = 'SaveAjax';\n\n\t\t\tAppConnector.request(data).done(function (reponseData) {\n\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t});\n\t\t\tif (fieldDetailList && fieldDetailList.field == 'leadstatus') {\n\t\t\t\tlet btn = jQuery('.btn-convertLead');\n\t\t\t\tlet conversionAvailableStatus = jQuery('#conversion_available_status').val();\n\t\t\t\tif (conversionAvailableStatus) {\n\t\t\t\t\tlet status = JSON.parse(conversionAvailableStatus);\n\t\t\t\t\tif (status.length === 0 || jQuery.inArray(fieldDetailList.value, status) != -1) {\n\t\t\t\t\t\tbtn.removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbtn.addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbtn.addClass('d-none');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tupdateConvertLeadvalue: function () {\n\t\t\tvar thisInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tdetailContentsHolder.on(thisInstance.fieldUpdatedEvent, 'input,select', function (e, params) {\n\t\t\t\tvar elem = jQuery(e.currentTarget);\n\t\t\t\tvar fieldName = elem.attr('name');\n\t\t\t\tvar ajaxnewValue = params['new'];\n\n\t\t\t\tif (!jQuery.isEmptyObject(Leads_Detail_Js.cache)) {\n\t\t\t\t\tvar sampleCache = jQuery(Leads_Detail_Js.cache);\n\t\t\t\t\tvar contextElem = sampleCache.find('[name=\"' + fieldName + '\"]');\n\n\t\t\t\t\tif (elem.is('select')) {\n\t\t\t\t\t\tvar oldvalue = contextElem.val();\n\t\t\t\t\t\tcontextElem.find('option[value=\"' + oldvalue + '\"]').removeAttr('selected');\n\t\t\t\t\t\tcontextElem.find('option[value=\"' + ajaxnewValue + '\"]').attr('selected', 'selected');\n\t\t\t\t\t\tcontextElem.trigger('change');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontextElem.attr('value', ajaxnewValue);\n\t\t\t\t\t}\n\t\t\t\t\tLeads_Detail_Js.cache = sampleCache;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.updateConvertLeadvalue();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","cache","detailCurrentInstance","convertLead","convertLeadUrl","buttonElement","instance","Leads_Detail_Js","convertLeadContainer","convertLeadForm","convertLeadModules","jQuery","isEmptyObject","AppConnector","request","done","data","displayConvertLeadModel","init","_super","disableConvertLeadButton","button","attr","enableConvertLeadButton","removeAttr","removeDisableAttr","moduleBlock","find","addDisableAttr","errorElement","length","errorMsg","val","errorTitle","params","title","text","addclass","width","type","pnotify_after_open","pnotify_after_close","app","showNotify","callBackFunction","editViewObj","Vtiger_Edit_Js","getInstance","collapse","parent","toggle","registerBasicEvents","checkBoxElements","getConvertLeadModules","each","index","element","checkingModuleSelection","registerForReferenceField","registerConvertLeadEvents","getConvertLeadForm","validationEngine","validationEngineOptions","registerConvertLeadSubmit","showModalWindow","\"text-align\"","module","closest","is","container","getConvertLeadContainer","referenceField","on","e","$","currentTarget","removeClass","addClass","prop","currentModuleName","currentTransferModuleElement","otherTransferModuleElement","not","otherTransferModuleValue","otherModuleElement","stopImmediatePropagation","thisInstance","formElement","jQv","InvalidFields","convertLeadModuleElements","moduleArray","accountModel","invalidFields","fieldElement","preventDefault","push","JSON","stringify","organizationElement","inArray","showAlert","vtranslate","saveFieldValues","fieldDetailList","aDeferred","Deferred","recordId","getRecordId","record","getModuleName","action","reponseData","resolve","field","btn","conversionAvailableStatus","status","parse","value","promise","updateConvertLeadvalue","detailContentsHolder","getContentHolder","fieldUpdatedEvent","elem","fieldName","ajaxnewValue","sampleCache","contextElem","oldvalue","trigger","registerEvents"],"mappings":"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"}