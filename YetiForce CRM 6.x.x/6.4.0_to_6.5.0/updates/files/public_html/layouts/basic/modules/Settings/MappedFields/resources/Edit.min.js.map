{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_MappedFields_Edit_Js',\n\t{\n\t\tinstance: {}\n\t},\n\t{\n\t\tcurrentInstance: false,\n\t\teditContainer: false,\n\t\tinit: function () {\n\t\t\tthis.initiate();\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the workflow elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.editContainer;\n\t\t},\n\t\t/**\n\t\t * Function to set the reports container\n\t\t * @params : element - which represents the workflow container\n\t\t * @return : current instance\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.editContainer = element;\n\t\t\treturn this;\n\t\t},\n\t\t/*\n\t\t * Function to return the instance based on the step of the Workflow\n\t\t */\n\t\tgetInstance: function (step) {\n\t\t\tif (step in Settings_MappedFields_Edit_Js.instance) {\n\t\t\t\treturn Settings_MappedFields_Edit_Js.instance[step];\n\t\t\t} else {\n\t\t\t\tvar moduleClassName = 'Settings_MappedFields_Edit' + step + '_Js';\n\t\t\t\tSettings_MappedFields_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\t\treturn Settings_MappedFields_Edit_Js.instance[step];\n\t\t\t}\n\t\t},\n\t\t/*\n\t\t * Function to get the value of the step\n\t\t * returns 1 or 2 or 3\n\t\t */\n\t\tgetStepValue: function () {\n\t\t\tvar container = this.currentInstance.getContainer();\n\t\t\treturn jQuery('.step', container).val();\n\t\t},\n\t\t/*\n\t\t * Function to initiate the step 1 instance\n\t\t */\n\t\tinitiate: function (container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.mfTemplateContents');\n\t\t\t}\n\t\t\tif (container.is('.mfTemplateContents')) {\n\t\t\t\tthis.setContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setContainer(jQuery('.mfTemplateContents', container));\n\t\t\t}\n\t\t\tthis.initiateStep('1');\n\t\t\tthis.currentInstance.registerEvents();\n\t\t},\n\t\t/*\n\t\t * Function to initiate all the operations for a step\n\t\t * @params step value\n\t\t */\n\t\tinitiateStep: function (stepVal) {\n\t\t\tvar step = 'step' + stepVal;\n\t\t\tthis.activateHeader(step);\n\t\t\tthis.currentInstance = this.getInstance(stepVal);\n\t\t},\n\t\t/*\n\t\t * Function to activate the header based on the class\n\t\t * @params class name\n\t\t */\n\t\tactivateHeader: function (step) {\n\t\t\tvar headersContainer = jQuery('.crumbs ');\n\t\t\theadersContainer.find('.active').removeClass('active');\n\t\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t\t},\n\t\t/*\n\t\t * Function to register the click event for next button\n\t\t */\n\t\tregisterFormSubmitEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\t\tvar specialValidation = true;\n\t\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t\t}\n\t\t\t\t\tif (form.validationEngine('validate') && specialValidation) {\n\t\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tthisInstance.getContainer().append(data);\n\t\t\t\t\t\t\t\tvar stepVal = thisInstance.getStepValue();\n\t\t\t\t\t\t\t\tvar nextStepVal = parseInt(stepVal) + 1;\n\t\t\t\t\t\t\t\tthisInstance.initiateStep(nextStepVal);\n\t\t\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\t\t\tvar container = thisInstance.currentInstance.getContainer();\n\t\t\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(container);\n\t\t\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tback: function () {\n\t\t\tvar step = this.getStepValue();\n\t\t\tvar prevStep = parseInt(step) - 1;\n\t\t\tthis.currentInstance.initialize();\n\t\t\tvar container = this.currentInstance.getContainer();\n\t\t\tvar mfRecordElement = jQuery('[name=\"record\"]', container);\n\t\t\tvar mfId = mfRecordElement.val();\n\t\t\tcontainer.remove();\n\t\t\tthis.initiateStep(prevStep);\n\t\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\t\tcurrentContainer.show();\n\t\t\tjQuery('[name=\"record\"]', currentContainer).val(mfId);\n\t\t},\n\t\tregisterCancelStepClickEvent: function (form) {\n\t\t\tjQuery('button.cancelLink', form).on('click', function () {\n\t\t\t\twindow.history.back();\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the click event for back step\n\t\t */\n\t\tregisterBackStepClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\t\tthisInstance.back();\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar form = this.currentInstance.getContainer();\n\t\t\tthis.registerFormSubmitEvent(form);\n\t\t\tthis.registerBackStepClickEvent();\n\t\t\tthis.registerCancelStepClickEvent(form);\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","instance","currentInstance","editContainer","init","initiate","getContainer","setContainer","element","getInstance","step","Settings_MappedFields_Edit_Js","window","getStepValue","container","jQuery","val","is","initiateStep","registerEvents","stepVal","activateHeader","headersContainer","find","removeClass","addClass","registerFormSubmitEvent","form","thisInstance","isFunction","submit","on","e","currentTarget","specialValidation","isFormValidate","validationEngine","done","data","append","nextStepVal","parseInt","initialize","preventDefault","back","prevStep","mfRecordElement","mfId","remove","currentContainer","show","registerCancelStepClickEvent","history","registerBackStepClickEvent"],"mappings":"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"}