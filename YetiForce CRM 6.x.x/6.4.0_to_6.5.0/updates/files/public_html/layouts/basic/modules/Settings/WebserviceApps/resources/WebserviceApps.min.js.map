{"version":3,"file":"WebserviceApps.min.js","sources":["WebserviceApps.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Settings_WebserviceApps_Index_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Get container\n\t\t *\n\t\t * @returns {HTMLElement|jQuery}\n\t\t */\n\t\tgetContainer() {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Register actions for record\n\t\t */\n\t\tregisterTableEvents: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tconst container = (this.container = $('.configContainer'));\n\t\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet trRow = currentTarget.closest('tr');\n\t\t\t\tthisInstance.showFormToEditKey(trRow.data('id'));\n\t\t\t});\n\t\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\t\tlet currentTrElement = jQuery(e.currentTarget).closest('tr');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_DELETE_CONFIRMATION'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\taction: 'Delete',\n\t\t\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthisInstance.loadTable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Refresh tables with records\n\t\t */\n\t\tloadTable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'Index'\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t$('.configContainer').html(data);\n\t\t\t\tthisInstance.registerTableEvents();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show forms to edit or create record\n\t\t * @param {int} id\n\t\t */\n\t\tshowFormToEditKey: function (id, type) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'CreateApp',\n\t\t\t\ttype: type\n\t\t\t};\n\t\t\tif (id != '') {\n\t\t\t\tparams['record'] = id;\n\t\t\t}\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done((data) => {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tapp.showModalWindow(data, (container) => {\n\t\t\t\t\tconst prevButton = container.find('.previewPassword');\n\t\t\t\t\tconst password = container.find('[name=\"pass\"]');\n\t\t\t\t\tprevButton.on('mousedown', function (e) {\n\t\t\t\t\t\tpassword.attr('type', 'text');\n\t\t\t\t\t});\n\t\t\t\t\tprevButton.on('mouseup', function (e) {\n\t\t\t\t\t\tpassword.attr('type', 'password');\n\t\t\t\t\t});\n\t\t\t\t\tprevButton.on('mouseout', function (e) {\n\t\t\t\t\t\tpassword.attr('type', 'password');\n\t\t\t\t\t});\n\t\t\t\t\tconst clipboard = App.Fields.Text.registerCopyClipboard(container, '.copyPassword');\n\t\t\t\t\tcontainer.one('hidden.bs.modal', function () {\n\t\t\t\t\t\tclipboard.destroy();\n\t\t\t\t\t});\n\t\t\t\t\tvar form = container.find('form');\n\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\tformData['module'] = app.getModuleName();\n\t\t\t\t\t\t\tformData['parent'] = app.getParentModuleName();\n\t\t\t\t\t\t\tformData['action'] = 'SaveAjax';\n\t\t\t\t\t\t\tformData['status'] = container.find('[name=\"status\"]').is(':checked');\n\t\t\t\t\t\t\tif (id != '') {\n\t\t\t\t\t\t\t\tformData['id'] = id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.result === true) {\n\t\t\t\t\t\t\t\t\tthisInstance.loadTable();\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t} else if (typeof data.result.error !== 'undefined') {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: data.result.error,\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.find('[name=\"type\"]').on('change', (e) => {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthis.showFormToEditKey('', $(e.currentTarget).val());\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register button to create record\n\t\t */\n\t\tregisterAddButton: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.createKey').on('click', function () {\n\t\t\t\tthisInstance.showFormToEditKey();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Main function\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerAddButton();\n\t\t\tthis.registerTableEvents();\n\t\t\tApp.Fields.Text.registerCopyClipboard(this.getContainer());\n\t\t}\n\t}\n);\n"],"names":["$","Class","getContainer","container","registerTableEvents","thisInstance","find","on","e","currentTarget","trRow","closest","showFormToEditKey","data","currentTrElement","jQuery","app","showConfirmModal","title","vtranslate","confirmedCallback","progress","progressIndicator","AppConnector","request","module","getModuleName","parent","getParentModuleName","action","id","done","mode","loadTable","params","view","html","type","_this","record","showModalWindow","prevButton","password","attr","clipboard","App","Fields","Text","registerCopyClipboard","one","destroy","form","validationEngine","validationEngineOptions","formData","serializeFormData","status","is","result","hideModalWindow","error","showNotify","text","val","registerAddButton","registerEvents"],"mappings":"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"}