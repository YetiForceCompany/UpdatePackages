{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_Mail_List_Js',\n\t{},\n\t{\n\t\tregisterAcceptanceEvent: function () {\n\t\t\tvar list = jQuery('.listViewEntriesDiv');\n\t\t\tlist.on('click', '.acceptanceRecord', function (e) {\n\t\t\t\tvar elem = this;\n\t\t\t\tvar id = $(this).closest('tr').data('id');\n\t\t\t\tvar progressIndicator = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'acceptanceRecord',\n\t\t\t\t\tid: id\n\t\t\t\t})\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message });\n\t\t\t\t\t\t$(elem).remove();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tmassDeleteAction: function () {\n\t\t\t$('.massDelete').on('click', function () {\n\t\t\t\tlet listInstance = Settings_Vtiger_List_Js.getInstance();\n\t\t\t\tlet validationResult = listInstance.checkListRecordSelected();\n\t\t\t\tif (validationResult != true) {\n\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\ttitle: app.vtranslate('LBL_MASS_DELETE_CONFIRMATION'),\n\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\tlet params = {};\n\t\t\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\t\t\tparams['action'] = 'MassDelete';\n\t\t\t\t\t\t\tparams['selected_ids'] = listInstance.readSelectedIds(true);\n\t\t\t\t\t\t\tlet deleteMessage = app.vtranslate('JS_RECORDS_ARE_GETTING_DELETED');\n\t\t\t\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: deleteMessage,\n\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (data && data.result && data.result.notify) {\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(data.result.notify);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlistInstance.postMassDeleteRecords();\n\t\t\t\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\trejectedCallback: () => {\n\t\t\t\t\t\t\tVtiger_List_Js.clearList();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#mailQueueFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\torderby: jQuery(e.currentTarget).val(),\n\t\t\t\t\tpage: 1\n\t\t\t\t};\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetParams: function () {\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tvar searchParams = {};\n\t\t\tlistViewContainer.find('input.listSearchContributor, select.listSearchContributor').each(function (i, obj) {\n\t\t\t\tif ($(obj).val() != null) {\n\t\t\t\t\tvar column = $(obj).attr('name');\n\t\t\t\t\tsearchParams[column] = {};\n\t\t\t\t\tsearchParams[column]['value'] = $(obj).val();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tpage: 1,\n\t\t\t\tview: 'List',\n\t\t\t\tsearchParams: searchParams\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\tregisterListSearch: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function (e) {\n\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function (e) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterListViewSelect: function () {\n\t\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\t\tvar thisInstance = this;\n\t\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\t\tlistViewContainer.on('change', '.listViewEntriesTable select', function (e) {\n\t\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.massDeleteAction();\n\t\t\tthis.registerAcceptanceEvent();\n\t\t\tthis.registerListSearch();\n\t\t\tthis.registerListViewSelect();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","registerAcceptanceEvent","list","jQuery","on","elem","id","$","closest","data","progressIndicator","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","done","Settings_Vtiger_Index_Js","showMessage","text","result","message","remove","fail","massDeleteAction","listInstance","getInstance","validationResult","checkListRecordSelected","noRecordSelectedAlert","showConfirmModal","title","vtranslate","confirmedCallback","params","selected_ids","readSelectedIds","deleteMessage","progressIndicatorElement","position","blockInfo","enabled","notify","Vtiger_Helper_Js","postMassDeleteRecords","error","showNotify","type","rejectedCallback","Vtiger_List_Js","clearList","registerFilterChangeEvent","thisInstance","e","val","orderby","currentTarget","page","getListViewRecords","updatePagination","getParams","listViewContainer","getListViewContainer","searchParams","find","each","i","obj","column","attr","value","view","registerListSearch","keyCode","registerListViewSelect","getMainParams","registerEvents","_super"],"mappings":"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"}