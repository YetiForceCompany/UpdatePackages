{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'Partners_Detail_Js',\n\t{},\n\t{\n\t\thierarchyResponseCache: {},\n\t\t/**\n\t\t * Get response data\n\t\t * @param {Object} params\n\t\t * @returns {Object}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tif (!jQuery.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Display hierarchy count\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.detailViewTitle .hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Display hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'Hierarchy',\n\t\t\t\trecord: app.getRecordId()\n\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\t\tthisInstance.getHierarchyResponseData(params).done(function (data) {\n\t\t\t\t\tapp.showModalWindow(data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","thisInstance","aDeferred","jQuery","Deferred","isEmptyObject","AppConnector","request","done","data","resolve","promise","registerHierarchyRecordCount","hierarchyButton","$","length","module","app","getModuleName","action","record","getRecordId","mode","response","success","html","result","registerShowHierarchy","view","on","showModalWindow","registerEvents","_super"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,gBAAgB,CACf,oBAAoB,CACpB,EAAE,CACF,CACCC,sBAAsB,CAAE,EAAE;AAE5B;AACA;AACA;AACA,KACEC,wBAAwB,CAAE,SAAAA,wBAAUC,CAAAA,MAAM,CAAE,CACvC,IAAAC,YAAY,CAAG,IAAI,CACnBC,SAAS,CAAGC,MAAM,CAACC,QAAQ,EAAE,CASjC,OARKD,MAAM,CAACE,aAAa,CAACJ,YAAY,CAACH,sBAAsB,CAAC,CAG7DQ,YAAY,CAACC,OAAO,CAACP,MAAM,CAAC,CAACQ,IAAI,CAAC,SAAUC,IAAI,CAAE,CACjDR,YAAY,CAACH,sBAAsB,CAAGW,IAAI,CAC1CP,SAAS,CAACQ,OAAO,CAACT,YAAY,CAACH,sBAAsB,EACtD,CAAC,CAAC,CALFI,SAAS,CAACQ,OAAO,CAACT,YAAY,CAACH,sBAAsB,CAAC,CAOhDI,SAAS,CAACS,OAAO,EACzB,CAAC;AAEH;AACA,KACEC,4BAA4B,CAAE,SAAAA,4BAAA,EAAY,CACzC,IAAIC,eAAe,CAAGC,CAAC,CAAC,6BAA6B,CAAC,CACtD,GAAID,eAAe,CAACE,MAAM,CAAE,CAC3B,IAAIf,MAAM,CAAG,CACZgB,MAAM,CAAEC,GAAG,CAACC,aAAa,EAAE,CAC3BC,MAAM,CAAE,cAAc,CACtBC,MAAM,CAAEH,GAAG,CAACI,WAAW,EAAE,CACzBC,IAAI,CAAE,mBACP,CAAC,CACDhB,YAAY,CAACC,OAAO,CAACP,MAAM,CAAC,CAACQ,IAAI,CAAC,SAAUe,QAAQ,CAAE,CACjDA,QAAQ,CAACC,OAAO,EACnBV,CAAC,CAAC,oCAAoC,CAAC,CAACW,IAAI,CAACF,QAAQ,CAACG,MAAM,EAE9D,CAAC,EACF,CACD,CAAC;AAEH;AACA,KACEC,qBAAqB,CAAE,SAAAA,qBAAAA,EAAY,CAC9B,IAAA1B,YAAY,CAAG,IAAI,CACnBY,eAAe,CAAGC,CAAC,CAAC,kBAAkB,CAAC,CACvCd,MAAM,CAAG,CACZgB,MAAM,CAAEC,GAAG,CAACC,aAAa,EAAE,CAC3BU,IAAI,CAAE,WAAW,CACjBR,MAAM,CAAEH,GAAG,CAACI,WAAW,EACxB,CAAC,CACDR,eAAe,CAACgB,EAAE,CAAC,OAAO,CAAE,kBAAkB,CAAE,UAAa,CAC5D5B,YAAY,CAACF,wBAAwB,CAACC,MAAM,CAAC,CAACQ,IAAI,CAAC,SAAUC,IAAI,CAAE,CAClEQ,GAAG,CAACa,eAAe,CAACrB,IAAI,EACzB,CAAC,EACF,CAAC,EACF,CAAC,CACDsB,cAAc,CAAE,SAAAA,gBAAY,CAC3B,IAAI,CAACC,MAAM,EAAE,CACb,IAAI,CAACpB,4BAA4B,EAAE,CACnC,IAAI,CAACe,qBAAqB,GAC3B,CACD,CACD,CAAC;;"}