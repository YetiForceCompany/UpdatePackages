{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Notification_NotificationConfig_Js',\n\t{},\n\t{\n\t\tregisterEventForModal: function (container) {\n\t\t\tconst self = this;\n\t\t\tlet table = app.registerDataTables(container.find('.js-watching-data-table'));\n\t\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\t\tif (state) {\n\t\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\tlet selectedModules = [];\n\t\t\t\tlet sendNoticeModules = [];\n\t\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\t\tlet currentTarget = $(this);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\t\tlet value = $(this).closest('tr').data('id');\n\t\t\t\t\tsendNoticeModules.push(value);\n\t\t\t\t});\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: 'Notification',\n\t\t\t\t\taction: 'Notification',\n\t\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\t\tselectedModules: selectedModules,\n\t\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t\t};\n\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t\t});\n\t\t\tcontainer.find('.sentNoticeAll').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tlet val = !element.hasClass('sandNoticeOn');\n\t\t\t\tself.changeSendNoticeState(element, val);\n\t\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\t\tself.changeSendNoticeState($(this), val);\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.$('.sentNotice').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tself.changeSendNoticeState(element);\n\t\t\t});\n\t\t},\n\t\tchangeSendNoticeState: function (element, val) {\n\t\t\tif (val !== undefined) {\n\t\t\t\tif (val === true) {\n\t\t\t\t\telement.addClass('fa-bell').removeClass('fa-bell-slash');\n\t\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t\t} else {\n\t\t\t\t\telement.addClass('fa-bell-slash').removeClass('fa-bell');\n\t\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.toggleClass('fa-bell fa-bell-slash');\n\t\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tlet container = $('.modalNotificationNotificationConfig');\n\t\t\tthis.registerEventForModal(container);\n\t\t}\n\t}\n);\njQuery(document).ready(function () {\n\tlet instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","registerEventForModal","container","self","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","selectedModules","sendNoticeModules","$","each","currentTarget","is","push","val","value","closest","data","params","module","action","mode","sendNotifications","frequency","progress","progressIndicator","AppConnector","request","done","hideModalWindow","fail","stopPropagation","prop","element","hasClass","changeSendNoticeState","toggleClass","registerEvents","document","ready","instance","Notification_NotificationConfig_Js"],"mappings":"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"}