{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'SSalesProcesses_Detail_Js',\n\t{},\n\t{\n\t\t//It stores the IStorages Hierarchy response data\n\t\thierarchyResponseCache: {},\n\t\t/*\n\t\t * function to get the IStoragesHierarchy response data\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\t//Check in the cache\n\t\t\tif (!jQuery.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t//store it in the cache, so that we dont do multiple request\n\t\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the IStorages Hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function (data) {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modalContainer) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll', modalContainer));\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll', modalContainer).height() > 300) {\n\t\t\t\t\tcallbackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.detailViewTitle .hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'Hierarchy',\n\t\t\t\trecord: app.getRecordId()\n\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\t\tthisInstance.getHierarchyResponseData(params).done(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","thisInstance","aDeferred","jQuery","Deferred","isEmptyObject","AppConnector","request","done","data","resolve","fail","textStatus","errorThrown","reject","promise","displayHierarchyResponseData","callbackFunction","app","showScrollBar","$","height","railVisible","size","showModalWindow","modalContainer","App","Components","Scrollbar","xy","registerHierarchyRecordCount","hierarchyButton","length","module","getModuleName","action","record","getRecordId","mode","response","success","html","result","registerShowHierarchy","view","on","registerEvents","_super"],"mappings":"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"}