{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'EmailTemplates_Edit_Js',\n\t{},\n\t{\n\t\tloadVariablePanel: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tvar panel = form.find('#variablePanel');\n\t\t\tpanel.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'EmailTemplates',\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\tview: 'VariablePanel',\n\t\t\t\ttype: 'mail',\n\t\t\t\tselectedModule: form.find('[name=\"module_name\"]').val()\n\t\t\t})\n\t\t\t\t.done(function (response) {\n\t\t\t\t\tpanel.html(response);\n\t\t\t\t\tthisInstance.afterLoadVariablePanel(panel);\n\t\t\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(panel);\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tpanel.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\tafterLoadVariablePanel: function (html) {\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(html.find('select.select2'));\n\t\t\tApp.Fields.Text.registerCopyClipboard(html);\n\t\t},\n\t\tregisterVariablePanelEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\t\t\tform\n\t\t\t\t.find('.js-toggle-panel[data-label=\"LBL_CONTENT_MAIL\"] .blockContent')\n\t\t\t\t.prepend('<div id=\"variablePanel\" class=\"row px-0 borderBottom bc-gray-lighter mt-n1\"></div>');\n\t\t\tthisInstance.loadVariablePanel(form);\n\t\t\tform.find('[name=\"module_name\"]').on('change', function () {\n\t\t\t\tthisInstance.loadVariablePanel(form);\n\t\t\t});\n\t\t},\n\t\tregisterBasicEvents: function (container) {\n\t\t\tthis._super(container);\n\t\t\tthis.registerVariablePanelEvent(container);\n\t\t\tApp.Tools.VariablesPanel.registerRefreshCompanyVariables(container);\n\t\t\tApp.Tools.VariablesPanel.refreshCompanyVariables(container);\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","loadVariablePanel","form","thisInstance","getForm","panel","find","progressIndicator","AppConnector","request","module","record","app","getRecordId","view","type","selectedModule","val","done","response","html","afterLoadVariablePanel","App","Tools","VariablesPanel","registerRefreshCompanyVariables","fail","mode","Fields","Picklist","showSelect2ElementView","Text","registerCopyClipboard","registerVariablePanelEvent","prepend","on","registerBasicEvents","container","_super","refreshCompanyVariables"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,cAAc,CACb,wBAAwB,CACxB,EAAE,CACF,CACCC,iBAAiB,CAAE,SAAAA,kBAAUC,IAAI,CAAE,CAClC,IAAIC,YAAY,CAAG,IAAI,CACH,WAAW,EAA3B,OAAOD,IAAoB,GAC9BA,IAAI,CAAG,IAAI,CAACE,OAAO,EAAE,CAAA,CAEtB,IAAIC,KAAK,CAAGH,IAAI,CAACI,IAAI,CAAC,gBAAgB,CAAC,CACvCD,KAAK,CAACE,iBAAiB,EAAE,CACzBC,YAAY,CAACC,OAAO,CAAC,CACpBC,MAAM,CAAE,gBAAgB,CACxBC,MAAM,CAAEC,GAAG,CAACC,WAAW,EAAE,CACzBC,IAAI,CAAE,eAAe,CACrBC,IAAI,CAAE,MAAM,CACZC,cAAc,CAAEd,IAAI,CAACI,IAAI,CAAC,wBAAsB,CAAC,CAACW,GAAG,EACtD,CAAC,CAAC,CACAC,IAAI,CAAC,SAAUC,QAAQ,CAAE,CACzBd,KAAK,CAACe,IAAI,CAACD,QAAQ,CAAC,CACpBhB,YAAY,CAACkB,sBAAsB,CAAChB,KAAK,CAAC,CAC1CiB,GAAG,CAACC,KAAK,CAACC,cAAc,CAACC,+BAA+B,CAACpB,KAAK,EAC/D,CAAC,CAAC,CACDqB,IAAI,CAAC,UAAY,CACjBrB,KAAK,CAACE,iBAAiB,CAAC,CAAEoB,IAAI,CAAE,MAAO,CAAC,EACzC,CAAC,EACH,CAAC,CACDN,sBAAsB,CAAE,SAAAA,sBAAUD,CAAAA,IAAI,CAAE,CACvCE,GAAG,CAACM,MAAM,CAACC,QAAQ,CAACC,sBAAsB,CAACV,IAAI,CAACd,IAAI,CAAC,gBAAgB,CAAC,CAAC,CACvEgB,GAAG,CAACM,MAAM,CAACG,IAAI,CAACC,qBAAqB,CAACZ,IAAI,EAC3C,CAAC,CACDa,0BAA0B,CAAE,SAAAA,0BAAU/B,CAAAA,IAAI,CAAE,CAC3C,IAAIC,YAAY,CAAG,IAAI,CACH,WAAW,EAA3B,OAAOD,IAAoB,GAC9BA,IAAI,CAAG,IAAI,CAACE,OAAO,EAAE,CAAA,CAEtBF,IAAI,CACFI,IAAI,CAAC,iEAA+D,CAAC,CACrE4B,OAAO,CAAC,wFAAoF,CAAC,CAC/F/B,YAAY,CAACF,iBAAiB,CAACC,IAAI,CAAC,CACpCA,IAAI,CAACI,IAAI,CAAC,wBAAsB,CAAC,CAAC6B,EAAE,CAAC,QAAQ,CAAE,UAAY,CAC1DhC,YAAY,CAACF,iBAAiB,CAACC,IAAI,EACpC,CAAC,EACF,CAAC,CACDkC,mBAAmB,CAAE,SAAAA,mBAAUC,CAAAA,SAAS,CAAE,CACzC,IAAI,CAACC,MAAM,CAACD,SAAS,CAAC,CACtB,IAAI,CAACJ,0BAA0B,CAACI,SAAS,CAAC,CAC1Cf,GAAG,CAACC,KAAK,CAACC,cAAc,CAACC,+BAA+B,CAACY,SAAS,CAAC,CACnEf,GAAG,CAACC,KAAK,CAACC,cAAc,CAACe,uBAAuB,CAACF,SAAS,EAC3D,CACD,CACD,CAAC;;"}