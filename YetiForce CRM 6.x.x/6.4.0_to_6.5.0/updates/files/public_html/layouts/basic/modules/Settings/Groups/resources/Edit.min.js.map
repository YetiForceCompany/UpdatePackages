{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Groups_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register form for validation\n\t\t */\n\t\tregisterFormForValidation: function () {\n\t\t\tthis.getForm().validationEngine(app.getvalidationEngineOptions(true));\n\t\t},\n\n\t\t/**\n\t\t * Function to register the submit event of form\n\t\t */\n\t\tregisterSubmitEvent: function () {\n\t\t\tlet form = this.getForm();\n\t\t\tform.on('submit', (e) => {\n\t\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\tthis.validate(formData)\n\t\t\t\t\t\t\t.done(function (_) {\n\t\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data['message'], type: 'error' });\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Group Names\n\t\t * returns boolean true or false\n\t\t */\n\t\tvalidate: function (params) {\n\t\t\tconst aDeferred = jQuery.Deferred();\n\t\t\tparams.mode = 'preSaveValidation';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet response = data.result;\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Register events for section \"modules\"\n\t\t */\n\t\tregisterButtonsModule: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function (e) {\n\t\t\t\teditViewForm\n\t\t\t\t\t.find('[name=\"modules[]\"] option')\n\t\t\t\t\t.prop('selected', $(this).hasClass('js-modules-select-all'))\n\t\t\t\t\t.parent()\n\t\t\t\t\t.trigger('change');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will handle the registrations for the elements\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerButtonsModule();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","registerFormForValidation","getForm","validationEngine","app","getvalidationEngineOptions","registerSubmitEvent","_this","form","on","e","data","document","progressLoader","$","progressIndicator","message","vtranslate","position","blockInfo","enabled","InvalidFields","length","formData","serializeFormData","validate","done","submit","fail","Settings_Vtiger_Index_Js","showMessage","text","type","removeData","formAlignmentAfterValidation","preventDefault","params","aDeferred","jQuery","Deferred","mode","AppConnector","request","response","result","success","reject","resolve","error","err","promise","registerButtonsModule","editViewForm","find","prop","hasClass","parent","trigger","registerEvents","_super"],"mappings":"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"}