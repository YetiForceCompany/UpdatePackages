{"version":3,"file":"Groups.min.js","sources":["Groups.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\nwindow.Users_Groups_JS = class {\n\t/**\n\t * Modal container\n\t */\n\tcontainer = false;\n\t/**\n\t * DataTable api object\n\t */\n\tdataTable;\n\n\t/**\n\t * Register DataTable\n\t */\n\tregisterDataTable() {\n\t\tlet table = this.container.find('.js-data-table');\n\t\tlet form = this.container.find('form');\n\t\treturn app.registerDataTables(table, {\n\t\t\torder: [],\n\t\t\tprocessing: true,\n\t\t\tserverSide: false,\n\t\t\tajax: {\n\t\t\t\turl: table.data('url'),\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: function (data) {\n\t\t\t\t\t$.extend(data, form.serializeFormData());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Register remove member\n\t */\n\tregisterRemoveMember() {\n\t\tthis.container.find('.js-data-table').on('click', '.js-member-delete', (e) => {\n\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttext: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\tAppConnector.request(url)\n\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthis.dataTable.ajax.reload();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail((_) => {\n\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Register add members\n\t */\n\tregisterAddMember() {\n\t\tthis.container.find('.js-data-table').on('click', '.js-member-add', (e) => {\n\t\t\tlet url = e.currentTarget.dataset.url + '&groupID=' + this.container.find('form').serializeFormData()['groupID'];\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\turl,\n\t\t\t\t(modalContainer) => {\n\t\t\t\t\tmodalContainer.find('.js-modal__save').on('click', () => {\n\t\t\t\t\t\tlet modalForm = modalContainer.find('form');\n\t\t\t\t\t\tif (modalForm.validationEngine('validate')) {\n\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tlet formData = modalForm.serializeFormData();\n\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t.saveAjax('', [], formData)\n\t\t\t\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\t\t\t\tlet result = response.result;\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow(null, 'memberList');\n\t\t\t\t\t\t\t\t\t\tthis.dataTable.ajax.reload();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\t\ttext: result.message ? result.message : app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\t\tdelay: 3000,\n\t\t\t\t\t\t\t\t\t\t\thide: true\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tapp.showNotify({ text: app.vtranslate('JS_ERROR'), type: 'error' });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t{ modalId: 'memberList' }\n\t\t\t);\n\t\t});\n\t}\n\t/**\n\t * Register base events\n\t * @param {jQuery} modalContainer\n\t */\n\tregisterEvents(modalContainer) {\n\t\tthis.container = modalContainer;\n\t\tthis.dataTable = this.registerDataTable();\n\t\tthis.registerRemoveMember();\n\t\tthis.registerAddMember();\n\t\tthis.container.on('change', '[name=\"groupID\"]', () => {\n\t\t\tthis.dataTable.ajax.reload();\n\t\t});\n\t}\n};\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","i","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","_defineProperty","obj","value","arg","_toPrimitive","String","input","hint","prim","toPrimitive","res","call","Number","window","Users_Groups_JS","_class2","registerDataTable","table","container","find","form","app","registerDataTables","order","processing","serverSide","ajax","url","data","type","$","extend","serializeFormData","registerRemoveMember","_this","on","e","currentTarget","dataset","showConfirmModal","text","vtranslate","confirmedCallback","progress","jQuery","progressIndicator","AppConnector","request","done","mode","dataTable","reload","fail","showNotify","registerAddMember","_this2","groupID","showModalWindow","modalContainer","modalForm","validationEngine","message","blockInfo","enabled","formData","saveAjax","response","result","success","hideModalWindow","delay","hide","modalId","registerEvents","_this3"],"mappings":"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"}