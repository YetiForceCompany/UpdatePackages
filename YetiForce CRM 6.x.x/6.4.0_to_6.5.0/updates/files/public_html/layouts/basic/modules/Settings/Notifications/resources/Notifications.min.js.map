{"version":3,"file":"Notifications.min.js","sources":["Notifications.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Notifications_List_Js',\n\t{},\n\t{\n\t\tregisterSave: function (container, id) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar containerValidate = container.find('.validationEngineContainer');\n\t\t\tvar roleId = $('[name=\"roleMenu\"]').val();\n\t\t\tcontainerValidate.validationEngine(app.validationEngineOptions);\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\tif (containerValidate.validationEngine('validate')) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\t\tmode: 'saveType',\n\t\t\t\t\t\tname: container.find('[name=\"name\"]').val(),\n\t\t\t\t\t\twidth: container.find('[name=\"width\"]').val(),\n\t\t\t\t\t\theight: container.find('[name=\"height\"]').val(),\n\t\t\t\t\t\troleId: roleId,\n\t\t\t\t\t\tid: id\n\t\t\t\t\t};\n\t\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterButtons: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.createNotification').on('click', function () {\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=Notifications&parent=Settings&view=CreateNotification',\n\t\t\t\t\tfunction (container) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tthisInstance.registerSave(container, 0);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\t$('[name=\"roleMenu\"]').on('change', function () {\n\t\t\t\tthisInstance.showTable();\n\t\t\t});\n\t\t},\n\t\tshowTable: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('.listWithNotifications');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'ListContent',\n\t\t\t\troleId: $('[name=\"roleMenu\"]').val()\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\tcontainer.html(data);\n\t\t\t\tthisInstance.registerTableEvents(container);\n\t\t\t});\n\t\t},\n\t\tregisterTableEvents: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tapp.showModalWindow(null, currentTarget.data('url'), function (container) {\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar trRow = currentTarget.closest('tr');\n\t\t\t\t\tthisInstance.registerSave(container, trRow.data('id'));\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\t\tlet removeButton = jQuery(e.currentTarget);\n\t\t\t\tlet currentTrElement = removeButton.closest('tr');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_DELETE_CONFIRMATION'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\taction: 'Delete',\n\t\t\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis.registerButtons();\n\t\t\tthis.showTable();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerSave","container","id","thisInstance","containerValidate","find","roleId","$","val","validationEngine","app","validationEngineOptions","on","params","module","getModuleName","parent","getParentModuleName","action","mode","name","width","height","progress","progressIndicator","AppConnector","request","done","hideModalWindow","showTable","registerButtons","showModalWindow","view","data","html","registerTableEvents","e","currentTarget","trRow","closest","removeButton","currentTrElement","showConfirmModal","title","vtranslate","confirmedCallback","registerEvents"],"mappings":"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"}