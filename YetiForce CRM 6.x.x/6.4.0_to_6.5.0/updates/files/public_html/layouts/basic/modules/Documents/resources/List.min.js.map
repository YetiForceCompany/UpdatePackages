{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\n\t'Documents_List_Js',\n\t{\n\t\tmassMove: function (url) {\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar postData = {\n\t\t\t\t\tselected_ids: selectedIds,\n\t\t\t\t\texcluded_ids: excludedIds,\n\t\t\t\t\tviewname: cvId\n\t\t\t\t};\n\n\t\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\t\tif (searchValue.length > 0) {\n\t\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tmoveDocuments: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteFilterClickEvent: function () {\n\t\t\tconst self = this;\n\t\t\tlet listViewFilterBlock = this.getFilterBlock();\n\t\t\tif (listViewFilterBlock != false) {\n\t\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t\t//to close the dropdown\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tself.getFilterSelectElement().data('select2').close();\n\t\t\t\t\tlet liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\t\tlet message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tlet currentOptionElement = self.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\t\t\tfolderid: currentOptionElement.data('folderid')\n\t\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\t\t\tself.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\tAppConnector.requestForm(self.getSelectOptionFromChosenOption(liElement).data('deleteurl'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massMove","url","listInstance","getInstance","validationResult","checkListRecordSelected","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selected_ids","excluded_ids","viewname","searchValue","getAlphabetSearchValue","length","search_key","getAlphabetSearchField","search_value","operator","progressIndicatorElement","jQuery","progressIndicator","AppConnector","request","data","done","mode","app","showModalWindow","callBackFunction","moveDocuments","result","success","hideModalWindow","showNotify","title","vtranslate","text","message","delay","type","urlParams","getDefaultParams","getListViewRecords","noRecordSelectedAlert","aDeferred","Deferred","on","e","formData","currentTarget","serializeFormData","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","self","listViewFilterBlock","getFilterBlock","event","stopPropagation","getFilterSelectElement","close","liElement","closest","hasClass","find","showConfirmModal","confirmedCallback","currentOptionElement","getSelectOptionFromChosenOption","module","getModuleName","action","folderid","remove","trigger","requestForm"],"mappings":"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"}