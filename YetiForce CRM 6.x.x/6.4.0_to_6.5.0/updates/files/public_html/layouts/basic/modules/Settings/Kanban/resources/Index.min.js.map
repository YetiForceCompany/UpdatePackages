{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Index_Js(\n\t'Settings_Kanban_Index_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Register add modal\n\t\t */\n\t\tregisterAddModal() {\n\t\t\t$('.js-add-board').on('click', (e) => {\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=Kanban&parent=Settings&view=AddModal&sourceModule=' + this.module,\n\t\t\t\t\t(modalContainer) => {\n\t\t\t\t\t\tmodalContainer.find('.js-modal__save').on('click', function (e) {\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\taction: 'Save',\n\t\t\t\t\t\t\t\tmode: 'add',\n\t\t\t\t\t\t\t\tfield: modalContainer.find('.js-system-fields').val()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register delete event\n\t\t */\n\t\tregisterDeleteEvent() {\n\t\t\tthis.container.find('.js-delete').on('click', (e) => {\n\t\t\t\tlet board = $(e.currentTarget).closest('.js-board');\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Save',\n\t\t\t\t\tmode: 'delete',\n\t\t\t\t\tboard: board.data('id')\n\t\t\t\t})\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register add modal\n\t\t */\n\t\tregisterFieldsEvents() {\n\t\t\tlet fields = this.container.find('.js-sortable-fields');\n\t\t\tfields.on('sortable:change', (e) => {\n\t\t\t\tthis.saveField($(e.currentTarget));\n\t\t\t});\n\t\t\tfields.on('change', (e) => {\n\t\t\t\tthis.saveField($(e.currentTarget));\n\t\t\t});\n\t\t\tlet boards = this.container.find('.js-boards');\n\t\t\tboards.sortable({\n\t\t\t\tcontainment: boards,\n\t\t\t\titems: boards.find('.js-board'),\n\t\t\t\thandle: '.js-drag',\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: () => {\n\t\t\t\t\tthis.saveSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Save field\n\t\t */\n\t\tsaveField: function (element) {\n\t\t\tlet board = element.closest('.js-board');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Save',\n\t\t\t\tmode: 'update',\n\t\t\t\tboard: board.data('id'),\n\t\t\t\ttype: element.data('type'),\n\t\t\t\tvalue: element.val()\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\tapp.showNotify(data.result.message);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_UNEXPECTED_ERROR'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Save sequence\n\t\t */\n\t\tsaveSequence: function () {\n\t\t\tlet boards = [];\n\t\t\tthis.container.find('.js-board').each(function (index) {\n\t\t\t\tboards[index] = $(this).data('id');\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: this.module,\n\t\t\t\taction: 'Save',\n\t\t\t\tmode: 'sequence',\n\t\t\t\tboards: boards\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\tapp.showNotify(data.result.message);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_UNEXPECTED_ERROR'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register module change\n\t\t */\n\t\tregisterModuleEvents: function () {\n\t\t\t$('.js-module-list').on('change', (e) => {\n\t\t\t\twindow.location.href =\n\t\t\t\t\t'index.php?module=Kanban&parent=Settings&view=Index&sourceModule=' + $(e.currentTarget).val();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis._super();\n\t\t\tthis.module = $('#js-module-name').val();\n\t\t\tthis.container = $('.js-fields-list');\n\t\t\tthis.registerAddModal();\n\t\t\tthis.registerDeleteEvent();\n\t\t\tthis.registerFieldsEvents();\n\t\t\tthis.registerModuleEvents();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Index_Js","registerAddModal","_this","$","on","app","showModalWindow","module","modalContainer","find","AppConnector","request","getModuleName","parent","getParentModuleName","action","mode","field","val","done","data","result","message","hideModalWindow","window","location","reload","fail","error","err","errorLog","registerDeleteEvent","container","e","board","currentTarget","closest","registerFieldsEvents","_this2","fields","saveField","boards","sortable","containment","items","handle","revert","tolerance","cursor","update","saveSequence","element","type","value","showNotify","text","vtranslate","each","index","sourceModule","registerModuleEvents","href","registerEvents","_super"],"mappings":"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"}