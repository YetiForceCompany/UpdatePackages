{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n\nVtiger_Edit_Js(\n\t'FCorectingInvoice_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Load correcting invoice data to before block\n\t\t * @param {int} recordId\n\t\t */\n\t\tloadInvoiceData(recordId = false) {\n\t\t\tif (!recordId) {\n\t\t\t\trecordId = parseInt(this.getForm().find('input[name=\"finvoiceid\"]').val());\n\t\t\t}\n\t\t\tif (recordId && recordId != 0) {\n\t\t\t\tconst form = this.getForm();\n\t\t\t\tconst progressLoader = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: 'FInvoice',\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tmode: 'showInventoryDetails',\n\t\t\t\t\tview: 'Detail'\n\t\t\t\t})\n\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\tform.find('.js-before-inventory').html(response);\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t})\n\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * register reference fields events\n\t\t */\n\t\tregisterReferenceFieldsEvents() {\n\t\t\tapp.event.on('EditView.SelectReference', (e, params) => {\n\t\t\t\tif (params.module === 'FInvoice') {\n\t\t\t\t\tthis.loadInvoiceData(params.record);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst form = this.getForm();\n\t\t\tapp.event.on('EditView.ClearField', (e, params) => {\n\t\t\t\tif (params.fieldName === 'finvoiceid') {\n\t\t\t\t\tconst invoiceidInput = form.find('[name=\"finvoiceid\"]');\n\t\t\t\t\tif (invoiceidInput.length) {\n\t\t\t\t\t\tform\n\t\t\t\t\t\t\t.find('.js-before-inventory')\n\t\t\t\t\t\t\t.html('<div class=\"text-center\">' + app.vtranslate('JS_FCORECTINGINVOICE_CHOOSE_INVOICE') + '</div>');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Action for copy from correcting invoice button - load data before positions to position in data after block\n\t\t */\n\t\tregisterCopyFromInvoice() {\n\t\t\tconst form = this.getForm();\n\t\t\tconst thisInstance = this;\n\t\t\tform.find('.js-copy-from-invoice').on('click', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tconst finvoiceidInput = form.find('input[name=\"finvoiceid\"]');\n\t\t\t\tif (!finvoiceidInput.length) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst finvoiceid = finvoiceidInput.val();\n\t\t\t\tif (!finvoiceid || finvoiceid == 0) {\n\t\t\t\t\treturn Vtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_FCORECTINGINVOICE_CHOOSE_INVOICE')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthisInstance.inventoryController.loadInventoryData(finvoiceid, 'FInvoice');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * registerEvents override\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis._super();\n\t\t\tthis.registerCopyFromInvoice();\n\t\t\tthis.registerReferenceFieldsEvents();\n\t\t\tthis.loadInvoiceData();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","loadInvoiceData","recordId","arguments","length","parseInt","getForm","find","val","form","progressLoader","$","progressIndicator","blockInfo","enabled","AppConnector","request","module","record","mode","view","done","response","html","fail","registerReferenceFieldsEvents","_this","app","event","on","e","params","fieldName","invoiceidInput","vtranslate","registerCopyFromInvoice","thisInstance","preventDefault","stopPropagation","finvoiceidInput","finvoiceid","inventoryController","loadInventoryData","Vtiger_Helper_Js","showMessage","type","text","registerEvents","_super"],"mappings":"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"}