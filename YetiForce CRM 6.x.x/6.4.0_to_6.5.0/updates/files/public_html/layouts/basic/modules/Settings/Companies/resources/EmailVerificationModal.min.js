'use strict';

/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */"use strict";$.Class("Settings_Companies_EmailVerificationModal_Js",{},{/** Modal container */container:!1,/** Modal ID */modalId:!1,/** Source field */sourceField:!1,/** Toggle elements */toggleForms:function toggleForms(){this.container.find(".js-send-verification-email,.js-check-verification-code").toggle(250);},/** Request sending an email with a verification code */registerSendVerificationEmail:function registerSendVerificationEmail(){var _this=this;this.container.on("click",".js-email-verification-request-modal__save",function(e){e.preventDefault();var form=_this.container.find("form");if(form.validationEngine("validate")){var formData=form.serializeFormData(),progressIndicator=$.progressIndicator({blockInfo:{enabled:!0}});app.saveAjax("request",[],formData).done(function(data){if(progressIndicator.progressIndicator({mode:"hide"}),data.result&&data.result.success)_this.toggleForms();else {var _data$result,_data$result2;app.showNotify({text:null===data||void 0===data||null===(_data$result=data.result)||void 0===_data$result?void 0:_data$result.message,type:null===data||void 0===data||null===(_data$result2=data.result)||void 0===_data$result2?void 0:_data$result2.type,hide:!0,delay:8e3,textTrusted:!1});}});}});},/** Register an email address */registerCheckVerificationCode:function registerCheckVerificationCode(){var _this2=this;this.container.find("button.js-email-verification-modal__back").on("click",function(){_this2.container.find("input:visible").val(""),_this2.toggleForms();}),this.container.on("click",".js-email-verification-confirm-modal__save",function(e){e.preventDefault();var form=_this2.container.find("form");if(!form.validationEngine("validate"))return !1;var formData=form.serializeFormData(),progressIndicator=$.progressIndicator({blockInfo:{enabled:!0}});app.saveAjax("confirm",[],formData).done(function(data){progressIndicator.progressIndicator({mode:"hide"}),data.success&&data.result&&(app.showNotify({text:data.result.message,type:data.result.type,hide:!0,delay:8e3,textTrusted:!1}),data.result.success&&(_this2.getSourceField().val(formData.email),app.hideModalWindow(null,_this2.container.parent().attr("id"))));});});},/**
		 * Gets basic field
		 */getSourceField:function getSourceField(){return !1===this.sourceField&&(this.sourceField=$("[data-modalid="+this.modalId+"]").closest(".js-field-block-column").find("input[name=\"email\"]")),this.sourceField},/** @inheritdoc */registerEvents:function registerEvents(modal){this.container=modal,this.modalId=modal.closest(".js-modal-container").attr("id"),this.registerSendVerificationEmail(),this.registerCheckVerificationCode();}});
//# sourceMappingURL=EmailVerificationModal.min.js.map
