{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_TwoFactorAuthentication_Index_Js',\n\t{\n\t\tcheckIP: function (field, rules, i, options) {\n\t\t\tlet fieldValue = field.val(),\n\t\t\t\tnegativeRegex =\n\t\t\t\t\t/((^\\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\\s*$)|(^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$))/,\n\t\t\t\tresult = negativeRegex.test(fieldValue);\n\t\t\tif (!result) {\n\t\t\t\treturn app.vtranslate('INVALID_NUMBER');\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Container (Form)\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Get Container (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer() {\n\t\t\tif (this.container === null) {\n\t\t\t\tthis.container = $('form.js-two-factor-auth__form');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm() {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.container.on('change', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthisInstance.sendForm();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Send form data\n\t\t */\n\t\tsendForm: function () {\n\t\t\tthis.container.validationEngine(app.validationEngineOptions);\n\t\t\tif (this.container.validationEngine('validate')) {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet params = this.container.serializeFormData();\n\t\t\t\tlet ipAddresses = [];\n\t\t\t\tlet ipAddressContainer = this.container.find('.js-ip-container_element').not('.js-base-element');\n\t\t\t\tipAddressContainer.find('.js-ip-address').each(function () {\n\t\t\t\t\tipAddresses.push($(this).val());\n\t\t\t\t});\n\t\t\t\tparams['ip'] = ipAddresses;\n\t\t\t\tAppConnector.request(params).done((response) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: response.result.message,\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add new row\n\t\t */\n\t\taddRow: function () {\n\t\t\tlet sortContainer = this.container.find('.js-base-element').clone(true, true).removeClass('js-base-element');\n\t\t\tthis.container.find('.js-ip-container').append(sortContainer);\n\t\t\treturn sortContainer.removeClass('d-none');\n\t\t},\n\t\t/**\n\t\t * Register list events\n\t\t */\n\t\tregisterListEvents: function () {\n\t\t\tthis.container.find('.js-add').on('click', (e) => {\n\t\t\t\tthis.addRow();\n\t\t\t});\n\t\t\tthis.container.find('.js-clear').on('click', (e) => {\n\t\t\t\t$(e.currentTarget).closest('.js-ip-container_element').remove();\n\t\t\t\tthis.sendForm();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis.container = this.getContainer();\n\t\t\tthis.registerListEvents();\n\t\t\tthis.registerForm();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","checkIP","field","fieldValue","val","result","test","app","vtranslate","container","getContainer","$","registerForm","thisInstance","on","event","preventDefault","sendForm","validationEngine","validationEngineOptions","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","params","serializeFormData","ipAddresses","ipAddressContainer","find","not","each","push","ip","AppConnector","request","done","response","mode","showNotify","text","message","type","addRow","sortContainer","clone","removeClass","append","registerListEvents","_this","e","currentTarget","closest","remove","registerEvents"],"mappings":"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"}