{"version":3,"file":"Edit2.min.js","sources":["Edit2.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_MappedFields_Edit_Js(\n\t'Settings_MappedFields_Edit2_Js',\n\t{},\n\t{\n\t\tstep2Container: false,\n\t\tadvanceFilterInstance: false,\n\t\trestictName: ['_csrf', 'mode', 'module', 'parent', 'record', 'view'],\n\t\tinit: function () {\n\t\t\tthis.initialize();\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the reports step1 elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.step2Container;\n\t\t},\n\t\t/**\n\t\t * Function to set the reports step1 container\n\t\t * @params : element - which represents the reports step1 container\n\t\t * @return : current instance\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.step2Container = element;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function  to intialize the reports step1\n\t\t */\n\t\tinitialize: function (container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('#mf_step2');\n\t\t\t}\n\t\t\tif (container.is('#mf_step2')) {\n\t\t\t\tthis.setContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setContainer(jQuery('#mf_step2'));\n\t\t\t}\n\t\t},\n\t\tsubmit: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar form = this.getContainer();\n\t\t\tvar formData = form.serializeFormData();\n\t\t\tvar saveData = this.getData(formData);\n\t\t\tsaveData.record = formData.record;\n\t\t\tthis.validationMappingFields().done(function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.saveAjax('step2', saveData).done(function (data) {\n\t\t\t\t\t\tif (data.success == true) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_MF_SAVED_SUCCESSFULLY')\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar mfRecordElement = jQuery('[name=\"record\"]', form);\n\t\t\t\t\t\t\tif (mfRecordElement.val() === '') {\n\t\t\t\t\t\t\t\tmfRecordElement.val(data.result.id);\n\t\t\t\t\t\t\t\tformData['record'] = data.result.id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tformData['record'] = data.result.id;\n\t\t\t\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\t\tform.hide();\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetData: function (data) {\n\t\t\tvar mappingData = [];\n\t\t\tvar mappingConditions = [];\n\t\t\tfor (var i in data) {\n\t\t\t\tvar name = i.split('][');\n\t\t\t\tif (name.length == 2) {\n\t\t\t\t\tif (name[1] != 'default]' && data[i] != 0) mappingData[i] = data[i];\n\t\t\t\t\telse if (name[1] == 'default]') mappingData[i] = jQuery.isArray(data[i]) ? data[i].join(',') : data[i].trim();\n\t\t\t\t} else if (name.length != 2 && jQuery.inArray(i, this.restictName) == -1) {\n\t\t\t\t\tmappingConditions[i] = data[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tmappingData = jQuery.extend({}, mappingData);\n\t\t\tmappingConditions = jQuery.extend({}, mappingConditions);\n\t\t\treturn { mapping: mappingData, otherConditions: JSON.stringify(mappingConditions) };\n\t\t},\n\t\tregisterCancelStepClickEvent: function (form) {\n\t\t\tjQuery('button.cancelLink', form).on('click', function () {\n\t\t\t\twindow.history.back();\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar container = this.getContainer();\n\n\t\t\tvar opts = app.validationEngineOptions;\n\t\t\t// to prevent the page reload after the validation has completed\n\t\t\topts['onValidationComplete'] = function (form, valid) {\n\t\t\t\t//returns the valid status\n\t\t\t\treturn valid;\n\t\t\t};\n\t\t\topts['promptPosition'] = 'bottomRight';\n\t\t\tcontainer.validationEngine(opts);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2'));\n\t\t\tthis.registerCancelStepClickEvent(container);\n\t\t\tthis.registerEventsForEditView();\n\t\t},\n\t\t/**\n\t\t * Function to register event for adding new convert to field mapping\n\t\t */\n\t\tregisterEventForAddingNewMapping: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#addMapping').on('click', function (e) {\n\t\t\t\tvar mappingToGenerateTable = jQuery('#mappingToGenerate');\n\t\t\t\tvar lastSequenceNumber = mappingToGenerateTable.find('tr:not(.d-none)[sequence-number]').last();\n\t\t\t\tvar newSequenceNumber = thisInstance.getSequenceNumber(lastSequenceNumber) + 1;\n\t\t\t\tvar newMapping = jQuery('.newMapping').clone(true, true);\n\t\t\t\tnewMapping.attr('sequence-number', newSequenceNumber);\n\t\t\t\tnewMapping.find('select.sourceFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][source]');\n\t\t\t\tnewMapping.find('select.targetFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][target]');\n\t\t\t\tnewMapping.find('input.mappingType').attr('name', 'mapping[' + newSequenceNumber + '][type]');\n\t\t\t\tnewMapping.removeClass('d-none newMapping');\n\t\t\t\tnewMapping.appendTo(mappingToGenerateTable);\n\t\t\t\tnewMapping.find('.newSelect').removeClass('newSelect').addClass('select2');\n\t\t\t\tvar select2Elements = newMapping.find('.select2');\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\t\tjQuery('select.targetFields', newMapping).trigger('change', false);\n\t\t\t\tthisInstance.loadDefaultValueWidgetForMappedFields(newMapping.find('.select2'));\n\t\t\t});\n\t\t},\n\t\tgetSequenceNumber: function (element) {\n\t\t\tlet sequenceNumber;\n\t\t\tif (element.length) {\n\t\t\t\tsequenceNumber = element.attr('sequence-number');\n\t\t\t} else {\n\t\t\t\tsequenceNumber = 0;\n\t\t\t}\n\t\t\treturn parseInt(sequenceNumber);\n\t\t},\n\t\t/**\n\t\t * Function to register on change event for select2 element\n\t\t */\n\t\tregisterOnChangeEventForSourceModule: function () {\n\t\t\tvar form = this.getContainer();\n\t\t\tform.on('change', '.sourceFields', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar container = jQuery(element.closest('tr'));\n\t\t\t\tvar selectedValue = element.val();\n\t\t\t\tvar selectedOption = element.find('option[value=\"' + selectedValue + '\"]');\n\t\t\t\tvar selectedDataType = selectedOption.data('type');\n\t\t\t\tvar mappingType = selectedOption.data('mappingtype');\n\t\t\t\tvar fieldsSelectElement = container.find('select.targetFields.select2');\n\t\t\t\tvar fieldsBasedOnType = form.find('.newMapping').find('.targetFields').children().clone(true, true);\n\t\t\t\tvar options = jQuery('<div></div>');\n\t\t\t\tcontainer.find('.mappingType').val(mappingType);\n\t\t\t\tfieldsBasedOnType.each(function (i, e) {\n\t\t\t\t\tvar element = jQuery(e);\n\t\t\t\t\tif (element.is('option') && (element.data('type') == selectedDataType || element.data('type') == 'none')) {\n\t\t\t\t\t\toptions.append(element);\n\t\t\t\t\t} else if (element.is('optgroup') && element.find('[data-type=\"' + selectedDataType + '\"]').length > 0) {\n\t\t\t\t\t\telement.children().each(function (q, k) {\n\t\t\t\t\t\t\tvar option = jQuery(k);\n\t\t\t\t\t\t\tif (option.data('type') !== selectedDataType) {\n\t\t\t\t\t\t\t\toption.remove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\toptions.append(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tcontainer\n\t\t\t\t\t.find('.selectedFieldDataType')\n\t\t\t\t\t.html(selectedOption.data('type-name') ? selectedOption.data('type-name') : '');\n\t\t\t\tfieldsSelectElement.html(options.children());\n\n\t\t\t\tfieldsSelectElement.trigger('change', false);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register event to delete mapping\n\t\t */\n\t\tregisterEventToDeleteMapping: function () {\n\t\t\tvar form = this.getContainer();\n\t\t\tform.on('click', '.deleteMapping', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar trContainer = element.closest('tr');\n\t\t\t\ttrContainer.remove();\n\t\t\t});\n\t\t},\n\t\tloadDefaultValueWidget: function (element) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar id = element.val() + '_defaultvalue';\n\t\t\tvar affectedRow = jQuery('#defaultValuesElementsContainer').find('#' + id);\n\t\t\tvar dafeultTd = element.closest('td').next();\n\t\t\tvar defaultValueElement = dafeultTd.find('input.default');\n\t\t\tvar defaultValue = '';\n\t\t\tif (defaultValueElement.length) {\n\t\t\t\tdefaultValue = defaultValueElement.val();\n\t\t\t}\n\t\t\tdafeultTd.children().remove();\n\t\t\tvar exist = jQuery('#mappingToGenerate').find('#' + id);\n\t\t\tif (affectedRow.length === 0 || !element.val() || exist.length > 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar seqNumber = thisInstance.getSequenceNumber(element.closest('tr'));\n\t\t\tvar copyOfDefaultValue = affectedRow.clone(true, true);\n\t\t\tcopyOfDefaultValue.prop('disabled', false).attr('name', 'mapping[' + seqNumber + '][default]');\n\t\t\tif (copyOfDefaultValue.is(':checkbox') && defaultValue) {\n\t\t\t\tcopyOfDefaultValue.prop('checked', true);\n\t\t\t} else if (defaultValue) {\n\t\t\t\tdefaultValue =\n\t\t\t\t\ttypeof copyOfDefaultValue.attr('multiple') !== 'undefined' ? defaultValue.split(',') : defaultValue;\n\t\t\t\tcopyOfDefaultValue.val(defaultValue);\n\t\t\t}\n\t\t\tcopyOfDefaultValue.appendTo(dafeultTd);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(dafeultTd.find('select'));\n\t\t},\n\t\tloadDefaultValueWidgetForMappedFields: function (fieldsList) {\n\t\t\tvar thisInstance = this;\n\t\t\tfieldsList.each(function (i, element) {\n\t\t\t\tthisInstance.loadDefaultValueWidget(jQuery(this));\n\t\t\t});\n\t\t\tfieldsList.on('change', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance.loadDefaultValueWidget(element);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register events for edit view of fields mapping\n\t\t */\n\t\tregisterEventsForEditView: function () {\n\t\t\tthis.registerEventForAddingNewMapping();\n\t\t\tthis.registerOnChangeEventForSourceModule();\n\t\t\tthis.registerEventToDeleteMapping();\n\t\t\tthis.loadDefaultValueWidgetForMappedFields(jQuery('select.targetFields:not(.newSelect)'));\n\t\t},\n\t\t/*\n\t\t * Function to register on chnage event of target module\n\t\t */\n\t\tvalidationMappingFields: function () {\n\t\t\tlet aDeferred = jQuery.Deferred(),\n\t\t\t\tmappingTable = jQuery('#mappingToGenerate tr:not(.d-none)');\n\n\t\t\tmappingTable.each(function (i, e) {\n\t\t\t\tlet breakSave = false,\n\t\t\t\t\ttargetField = jQuery(this).find('.targetFields :selected'),\n\t\t\t\t\tmoduleName;\n\t\t\t\tif (mappingTable.find('.targetFields option[value=\"' + targetField.val() + '\"]:selected').length > 1) {\n\t\t\t\t\tmoduleName = jQuery('.targetModuleName').text();\n\t\t\t\t\tbreakSave = moduleName + ': ' + targetField.text();\n\t\t\t\t}\n\t\t\t\tif (breakSave) {\n\t\t\t\t\tlet warningMessage = breakSave + ' <br />' + app.vtranslate('JS_IS_ALREADY_BEEN_MAPPED'),\n\t\t\t\t\t\tnotificationParams = {\n\t\t\t\t\t\t\ttext: warningMessage,\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(notificationParams);\n\t\t\t\t\taDeferred.resolve(false);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\taDeferred.resolve(true);\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t}\n);\n"],"names":["Settings_MappedFields_Edit_Js","step2Container","advanceFilterInstance","restictName","init","initialize","getContainer","setContainer","element","container","jQuery","is","submit","aDeferred","Deferred","form","formData","serializeFormData","saveData","getData","record","validationMappingFields","done","data","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","app","saveAjax","success","Settings_Vtiger_Index_Js","showMessage","text","vtranslate","mfRecordElement","val","result","id","AppConnector","request","hide","mode","resolve","fail","error","err","errorLog","promise","mappingData","mappingConditions","i","name","split","length","isArray","join","trim","inArray","extend","mapping","otherConditions","JSON","stringify","registerCancelStepClickEvent","on","window","history","back","registerEvents","opts","validationEngineOptions","onValidationComplete","valid","promptPosition","validationEngine","App","Fields","Picklist","showSelect2ElementView","find","registerEventsForEditView","registerEventForAddingNewMapping","thisInstance","mappingToGenerateTable","lastSequenceNumber","last","newSequenceNumber","getSequenceNumber","newMapping","clone","attr","removeClass","appendTo","addClass","select2Elements","trigger","loadDefaultValueWidgetForMappedFields","sequenceNumber","parseInt","registerOnChangeEventForSourceModule","e","currentTarget","closest","selectedValue","selectedOption","selectedDataType","mappingType","fieldsSelectElement","fieldsBasedOnType","children","options","each","append","q","k","option","remove","html","registerEventToDeleteMapping","trContainer","loadDefaultValueWidget","affectedRow","dafeultTd","next","defaultValueElement","defaultValue","exist","seqNumber","copyOfDefaultValue","prop","fieldsList","mappingTable","moduleName","breakSave","targetField","warningMessage","type"],"mappings":"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"}