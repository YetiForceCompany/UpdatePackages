{"version":3,"file":"LeadMapping.min.js","sources":["LeadMapping.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Settings_LeadMapping_Js',\n\t{\n\t\t/**\n\t\t * Function to register event to edit leads mapping\n\t\t */\n\t\ttriggerEdit: function (editUrl) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tAppConnector.request(editUrl)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar leadMappingInstance = new Settings_LeadMapping_Js();\n\t\t\t\t\tleadMappingInstance.registerEventsForEditView();\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for delete lead mapping\n\t\t */\n\t\ttriggerDelete: function (event, url) {\n\t\t\tvar element = jQuery(event.currentTarget);\n\t\t\tvar mappingContainer = element.closest('.listViewEntries');\n\t\t\tvar mappingId = mappingContainer.data('cfmid');\n\t\t\tvar deleteUrl = url + '&mappingId=' + mappingId;\n\t\t\tAppConnector.request(deleteUrl).done(function (data) {\n\t\t\t\tvar message = data.result[0];\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message\n\t\t\t\t};\n\t\t\t\tif (data.success) {\n\t\t\t\t\tmappingContainer.remove();\n\t\t\t\t} else {\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t}\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to register events for edit view of leads mapping\n\t\t */\n\t\tregisterEventsForEditView: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tvar select2Elements = form.find('.select2');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\tthis.registerEventForAddingNewMapping();\n\t\t\tthis.registerOnChangeEventForSourceModule();\n\t\t\tthis.registerEventToDeleteMapping();\n\t\t\tthis.registerEventForFormSubmit();\n\t\t\tthis.registerOnChangeEventOfTargetModule();\n\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2').trigger('change', false);\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for adding new convert to lead mapping\n\t\t */\n\t\tregisterEventForAddingNewMapping: function () {\n\t\t\tjQuery('#addMapping').on('click', function (e) {\n\t\t\t\tvar convertLeadMappingTable = jQuery('#convertLeadMapping');\n\t\t\t\tvar lastSequenceNumber = convertLeadMappingTable\n\t\t\t\t\t.find('tr:not(.newMapping):last[sequence-number]')\n\t\t\t\t\t.attr('sequence-number');\n\t\t\t\tvar newSequenceNumber = parseInt(lastSequenceNumber) + 1;\n\t\t\t\tvar newMapping = jQuery('.newMapping').clone(true, true);\n\t\t\t\tnewMapping.attr('sequence-number', newSequenceNumber);\n\t\t\t\tnewMapping.find('select.leadsFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][lead]');\n\t\t\t\tnewMapping.find('select.accountsFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][account]');\n\t\t\t\tnewMapping.find('select.contactFields.newSelect').attr('name', 'mapping[' + newSequenceNumber + '][contact]');\n\t\t\t\tnewMapping.removeClass('d-none newMapping');\n\t\t\t\tnewMapping.appendTo(convertLeadMappingTable);\n\t\t\t\tnewMapping.find('.newSelect').removeClass('newSelect').addClass('select2');\n\t\t\t\tvar select2Elements = newMapping.find('.select2');\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select2Elements);\n\t\t\t\tjQuery('select.accountsFields.select2,select.contactFields.select2', newMapping).trigger('change', false);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register on change event for select2 element\n\t\t */\n\t\tregisterOnChangeEventForSourceModule: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('change', '.leadsFields', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar container = jQuery(element.closest('tr'));\n\t\t\t\tvar selectedValue = element.val();\n\t\t\t\tvar selectedOption = element.find('option[value=\"' + selectedValue + '\"]');\n\t\t\t\tvar selectedDataType = selectedOption.data('type');\n\t\t\t\tvar accountFieldsSelectElement = container.find('select.accountsFields.select2');\n\t\t\t\tvar contactFieldsSelectElement = container.find('select.contactFields.select2');\n\n\t\t\t\tvar accountFieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.accountsFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('[data-type=\"' + selectedDataType + '\"]')\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tvar contactFieldsBasedOnType = form\n\t\t\t\t\t.find('.newMapping')\n\t\t\t\t\t.find('.contactFields')\n\t\t\t\t\t.children()\n\t\t\t\t\t.filter('option[data-type=\"' + selectedDataType + '\"]')\n\t\t\t\t\t.clone(true, true);\n\t\t\t\tselectedDataType = app.vtranslate('JS_' + selectedDataType);\n\t\t\t\tcontainer.find('.selectedFieldDataType').html(selectedDataType);\n\n\t\t\t\tvar noneValue = app.vtranslate('JS_NONE');\n\t\t\t\taccountFieldsSelectElement.html(accountFieldsBasedOnType);\n\t\t\t\tcontactFieldsSelectElement.html(contactFieldsBasedOnType);\n\n\t\t\t\tif (selectedDataType != 'None') {\n\t\t\t\t\taccountFieldsSelectElement.prepend(\n\t\t\t\t\t\t'<option data-type=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" label=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" value=\"0\" selected>' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t);\n\t\t\t\t\tcontactFieldsSelectElement.prepend(\n\t\t\t\t\t\t'<option data-type=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" label=\"' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'\" value=\"0\" selected>' +\n\t\t\t\t\t\t\tnoneValue +\n\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\taccountFieldsSelectElement.trigger('change');\n\t\t\t\tcontactFieldsSelectElement.trigger('change');\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register event to delete mapping\n\t\t */\n\t\tregisterEventToDeleteMapping: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('click', '.deleteMapping', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar mappingContainer = element.closest('tr');\n\t\t\t\tvar mappingContainerSequenceNumber = mappingContainer.attr('sequence-number');\n\t\t\t\tvar deletableName = 'mapping[' + mappingContainerSequenceNumber + '][deletable]';\n\t\t\t\tmappingContainer.prepend('<input type=\"hidden\" name=\"' + deletableName + '\" />');\n\t\t\t\tmappingContainer.data('deletable', true).hide('slow');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: app.vtranslate('JS_MAPPING_DELETED_SUCCESSFULLY')\n\t\t\t\t};\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to handle edit view convert lead form submit\n\t\t */\n\t\tregisterEventForFormSubmit: function () {\n\t\t\tjQuery('#leadsMapping').on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar mappingDetails = jQuery(this).serializeFormData();\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'MappingSave',\n\t\t\t\t\tmapping: mappingDetails\n\t\t\t\t};\n\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\tvar detailViewParams = {\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\tview: 'MappingDetail'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tAppConnector.request(detailViewParams).done(function (data) {\n\t\t\t\t\t\t\t\tvar detailContentsHolder = jQuery('.contentsDiv');\n\t\t\t\t\t\t\t\tdetailContentsHolder.html(data);\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet notifyParams;\n\t\t\t\t\t\tif (!data.result.status) {\n\t\t\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_INVALID_MAPPING'),\n\t\t\t\t\t\t\t\ttext: data.result,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotifyParams = {\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MAPPING_SAVED_SUCCESSFULLY'),\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.showNotify(notifyParams);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register on chnage event of target module\n\t\t */\n\t\tregisterOnChangeEventOfTargetModule: function () {\n\t\t\tvar form = jQuery('#leadsMapping');\n\t\t\tform.on('change', 'select.accountsFields.select2,select.contactFields.select2', function (e, executeChange) {\n\t\t\t\tif (typeof executeChange === 'undefined') {\n\t\t\t\t\texecuteChange = true;\n\t\t\t\t}\n\t\t\t\tvar selectElement = jQuery(e.currentTarget);\n\t\t\t\tvar selectedValue = selectElement.children().filter('option:selected').text();\n\t\t\t\tvar selectedOptionId = selectElement.children().filter('option:selected').val();\n\t\t\t\tvar mappingContainer = selectElement.closest('tr');\n\n\t\t\t\tvar duplicateOption = false;\n\t\t\t\tvar existingIdElement;\n\t\t\t\tif (selectedOptionId == '0') {\n\t\t\t\t\tselectedOptionId = 'false';\n\t\t\t\t}\n\n\t\t\t\tif (!executeChange || selectedOptionId == 'false') {\n\t\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//check for source module field\n\t\t\t\tvar sourceModuleSelect = mappingContainer.find('select.leadsFields.select2');\n\t\t\t\tvar sourceModuleSelectedField = sourceModuleSelect.val();\n\t\t\t\tvar sourceModuleSelectedFieldLabel = sourceModuleSelect\n\t\t\t\t\t.find('option[value=\"' + sourceModuleSelectedField + '\"]')\n\t\t\t\t\t.text();\n\t\t\t\tif (sourceModuleSelectedField == '0') {\n\t\t\t\t\tduplicateOption = true;\n\t\t\t\t\tvar errorParams = {\n\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\tapp.vtranslate('JS_CANT_MAP') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tselectedValue +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tapp.vtranslate('JS_WITH') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\tsourceModuleSelectedFieldLabel,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(errorParams);\n\t\t\t\t}\n\n\t\t\t\tif (selectElement.hasClass('accountsFields')) {\n\t\t\t\t\texistingIdElement = jQuery('select.accountsFields.select2[selectedid=\"' + selectedOptionId + '\"]');\n\t\t\t\t} else {\n\t\t\t\t\texistingIdElement = jQuery('select.contactFields.select2[selectedid=\"' + selectedOptionId + '\"]');\n\t\t\t\t}\n\n\t\t\t\tif (existingIdElement.length > 0) {\n\t\t\t\t\tduplicateOption = true;\n\t\t\t\t}\n\n\t\t\t\tif (duplicateOption) {\n\t\t\t\t\tvar selectedFieldId = selectElement.attr('selectedid');\n\t\t\t\t\tif (selectedFieldId == 'false') {\n\t\t\t\t\t\tselectElement.attr('selectedId', 'false');\n\t\t\t\t\t} else if (selectedFieldId != 'false') {\n\t\t\t\t\t\tselectElement.attr('selectedId', selectedFieldId);\n\t\t\t\t\t}\n\t\t\t\t\tvar warningMessage = selectedValue + ' ' + app.vtranslate('JS_IS_ALREADY_BEEN_MAPPED');\n\t\t\t\t\tvar notificationParams = {\n\t\t\t\t\t\ttext: warningMessage,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(notificationParams);\n\t\t\t\t\tselectElement.val(0).trigger('change');\n\t\t\t\t} else {\n\t\t\t\t\tselectElement.attr('selectedId', selectedOptionId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","triggerEdit","editUrl","aDeferred","Deferred","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","AppConnector","request","done","data","detailContentsHolder","html","mode","leadMappingInstance","Settings_LeadMapping_Js","registerEventsForEditView","fail","promise","triggerDelete","event","url","element","currentTarget","mappingContainer","closest","mappingId","message","result","params","text","success","remove","type","Settings_Vtiger_Index_Js","showMessage","form","select2Elements","find","App","Fields","Picklist","showSelect2ElementView","registerEventForAddingNewMapping","registerOnChangeEventForSourceModule","registerEventToDeleteMapping","registerEventForFormSubmit","registerOnChangeEventOfTargetModule","trigger","on","convertLeadMappingTable","lastSequenceNumber","attr","newSequenceNumber","parseInt","newMapping","clone","removeClass","appendTo","addClass","e","container","selectedValue","val","selectedOption","selectedDataType","accountFieldsSelectElement","contactFieldsSelectElement","accountFieldsBasedOnType","children","filter","contactFieldsBasedOnType","app","vtranslate","noneValue","prepend","mappingContainerSequenceNumber","hide","preventDefault","mappingDetails","serializeFormData","module","getModuleName","parent","getParentModuleName","action","mapping","detailViewParams","view","notifyParams","status","title","showNotify","executeChange","existingIdElement","selectElement","selectedOptionId","duplicateOption","sourceModuleSelect","sourceModuleSelectedField","sourceModuleSelectedFieldLabel","errorParams","hasClass","length","selectedFieldId","warningMessage"],"mappings":"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"}