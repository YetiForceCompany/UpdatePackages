{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Companies_Edit_Js',\n\t{},\n\t{\n\t\t/** Submit form */\n\t\tregisterSubmitForm: function () {\n\t\t\tlet form = this.getForm();\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\tlet formData = new FormData(form[0]);\n\t\t\t\t\tlet params = {\n\t\t\t\t\t\turl: 'index.php',\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\tprocessData: false,\n\t\t\t\t\t\tcontentType: false\n\t\t\t\t\t};\n\t\t\t\t\tlet progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (true === data.result.success) {\n\t\t\t\t\t\t\twindow.location.href = data.result.url;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: data.result.message, type: 'error' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/** Check registration status */\n\t\tregisterRefreshStatus: function () {\n\t\t\tlet form = this.getForm();\n\t\t\tform.find('.js-refresh-status').on('click', function () {\n\t\t\t\tconst progressIndicator = $.progressIndicator({\n\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\tmodule: 'Companies',\n\t\t\t\t\taction: 'CheckStatus'\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\ttype: data.result.type,\n\t\t\t\t\t\t\t\thide: true,\n\t\t\t\t\t\t\t\tdelay: 8000,\n\t\t\t\t\t\t\t\ttextTrusted: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/** @inheritdoc */\n\t\tregisterEvents: function () {\n\t\t\tlet form = this.getForm();\n\t\t\tif (form.length) {\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tform.find('[data-inputmask]').inputmask();\n\t\t\t}\n\t\t\tthis.registerSubmitForm();\n\t\t\tthis.registerRefreshStatus();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","registerSubmitForm","form","getForm","on","e","preventDefault","validationEngine","formData","FormData","progressIndicatorElement","jQuery","progressIndicator","blockInfo","enabled","AppConnector","request","url","type","data","processData","contentType","done","mode","result","success","window","location","href","Settings_Vtiger_Index_Js","showMessage","text","message","app","formAlignmentAfterValidation","registerRefreshStatus","find","$","parent","module","action","showNotify","hide","delay","textTrusted","reload","registerEvents","length","validationEngineOptions","inputmask"],"mappings":"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"}