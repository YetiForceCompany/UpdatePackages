{"version":3,"file":"ApiAddress.min.js","sources":["ApiAddress.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_ApiAddress_Configuration_Js',\n\t{},\n\t{\n\t\tregisterSave: function (container) {\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tcontainer.find('.saveGlobal').on('click', (e) => {\n\t\t\t\tif (!container.validationEngine('validate')) {\n\t\t\t\t\tapp.formAlignmentAfterValidation(container);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet form = $(e.currentTarget).closest('form');\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet active = {};\n\t\t\t\t$('[name=\"active\"]').each((i, e) => {\n\t\t\t\t\tactive[e.dataset.type] = e.checked ? 1 : 0;\n\t\t\t\t});\n\t\t\t\tformData['active'] = active;\n\t\t\t\tformData['module'] = 'ApiAddress';\n\t\t\t\tformData['parent'] = 'Settings';\n\t\t\t\tformData['mode'] = 'global';\n\t\t\t\tformData['action'] = 'SaveConfig';\n\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterConfigModal(container) {\n\t\t\tcontainer.find('.js-show-config-modal').on('click', (e) => {\n\t\t\t\tconst providerName = e.currentTarget.dataset.provider;\n\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: `index.php?module=ApiAddress&parent=Settings&view=ApiConfigModal&provider=${providerName}`,\n\t\t\t\t\tcb: (modalContainer) => {\n\t\t\t\t\t\tmodalContainer.on('click', '.js-modal__save', () => {\n\t\t\t\t\t\t\tlet form = modalContainer.find('form');\n\t\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t\t\t.saveAjax('', [], formData)\n\t\t\t\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.always(() => {\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst container = $('.js-validation-form');\n\t\t\tthis.registerConfigModal(container);\n\t\t\tthis.registerSave(container);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerSave","container","validationEngine","app","validationEngineOptions","find","on","e","formAlignmentAfterValidation","form","$","currentTarget","closest","formData","serializeFormData","active","each","i","dataset","type","checked","module","parent","mode","action","AppConnector","request","done","data","showNotify","text","result","message","fail","vtranslate","registerConfigModal","providerName","provider","showModalWindow","url","concat","cb","modalContainer","progress","progressIndicator","blockInfo","enabled","saveAjax","window","location","reload","always","hideModalWindow","registerEvents"],"mappings":"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"}