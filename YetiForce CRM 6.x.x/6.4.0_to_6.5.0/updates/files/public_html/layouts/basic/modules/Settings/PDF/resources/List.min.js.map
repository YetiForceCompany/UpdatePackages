{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_PDF_List_Js',\n\t{},\n\t{\n\t\tgetListContainer: function () {\n\t\t\treturn jQuery('#listViewContainer');\n\t\t},\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function to register the list view row click event\n\t\t */\n\t\tregisterRowClickEvent: function () {\n\t\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\t\tlistViewContentDiv.on('click', '.listViewEntries', function (e) {\n\t\t\t\tif ($(e.target).closest('div').hasClass('actions')) return;\n\t\t\t\tif ($(e.target).is('button') || $(e.target).parent().is('button')) return;\n\t\t\t\tif ($(e.target).closest('a').hasClass('noLinkBtn')) return;\n\t\t\t\tif ($(e.target).is('input[type=\"checkbox\"]')) return;\n\t\t\t\tif ($.contains($(e.currentTarget).find('td:last-child').get(0), e.target)) return;\n\t\t\t\tif ($.contains($(e.currentTarget).find('td:first-child').get(0), e.target)) return;\n\t\t\t\tlet recordUrl = $(e.currentTarget).find('a.js-edit').attr('href');\n\t\t\t\tif (typeof recordUrl !== 'undefined') {\n\t\t\t\t\twindow.location.href = recordUrl;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetDefaultParams: function () {\n\t\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar parent = app.getParentModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: module,\n\t\t\t\tparent: parent,\n\t\t\t\tpage: pageNumber,\n\t\t\t\tview: 'List',\n\t\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\tregisterAddNewTemplate: function (container) {\n\t\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\t\tvar url = jQuery(this).data('url');\n\t\t\t\tif (selectedModule.length) {\n\t\t\t\t\turl += '&source_module=' + selectedModule;\n\t\t\t\t}\n\t\t\t\twindow.location.href = url;\n\t\t\t});\n\t\t},\n\t\tregisterImportTemplate: function (container) {\n\t\t\tjQuery('#importButton', container).on('click', function () {\n\t\t\t\twindow.location.href = jQuery(this).data('url');\n\t\t\t});\n\t\t},\n\t\tregisterTemplateDelete: function (container) {\n\t\t\tconst self = this;\n\t\t\tif (container == undefined) {\n\t\t\t\tcontainer = self.getListContainer();\n\t\t\t}\n\t\t\tcontainer.find('.templateDelete').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tlet deleteId = $(this).closest('tr').data('id');\n\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE'),\n\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\tSettings_PDF_List_Js.deleteById(deleteId, false).done(function () {\n\t\t\t\t\t\t\tself.registerTemplateDelete(container);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/*\n\t\t * Function which will give you all the list view params\n\t\t */\n\t\tgetListViewRecords: function (urlParams) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tthis._super(urlParams).done(function (data) {\n\t\t\t\tthisInstance.registerTemplateDelete();\n\t\t\t\taDeferred.resolve(data);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tvar container = this.getListContainer();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerAddNewTemplate(container);\n\t\t\tthis.registerTemplateDelete(container);\n\t\t\tthis.registerImportTemplate(container);\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","getListContainer","jQuery","registerFilterChangeEvent","thisInstance","on","e","val","params","module","app","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","getListViewRecords","done","updatePagination","registerRowClickEvent","listViewContentDiv","getListViewContentContainer","$","target","closest","hasClass","is","contains","find","get","recordUrl","attr","window","location","href","getDefaultParams","pageNumber","page","view","registerAddNewTemplate","container","selectedModule","url","data","length","registerImportTemplate","registerTemplateDelete","self","stopPropagation","preventDefault","deleteId","showConfirmModal","title","vtranslate","confirmedCallback","Settings_PDF_List_Js","deleteById","urlParams","aDeferred","Deferred","_super","resolve","promise","registerEvents"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,uBAAuB,CACtB,sBAAsB,CACtB,EAAE,CACF,CACCC,gBAAgB,CAAE,SAAAA,gBAAA,EAAY,CAC7B,OAAOC,MAAM,CAAC,oBAAoB,CACnC,CAAC,CACDC,yBAAyB,CAAE,SAAAA,yBAAA,EAAY,CACtC,IAAIC,YAAY,CAAG,IAAI,CACvBF,MAAM,CAAC,eAAe,CAAC,CAACG,EAAE,CAAC,QAAQ,CAAE,SAAUC,CAAC,CAAE,CACjDJ,MAAM,CAAC,aAAa,CAAC,CAACK,GAAG,CAAC,GAAG,CAAC,CAC9BL,MAAM,CAAC,aAAa,CAAC,CAACK,GAAG,CAAC,GAAG,CAAC,CAC9BL,MAAM,CAAC,UAAU,CAAC,CAACK,GAAG,CAAC,EAAE,CAAC,CAC1BL,MAAM,CAAC,YAAY,CAAC,CAACK,GAAG,CAAC,EAAE,CAAC,CAC5B,IAAIC,MAAM,CAAG,CACZC,MAAM,CAAEC,GAAG,CAACC,aAAa,EAAE,CAC3BC,MAAM,CAAEF,GAAG,CAACG,mBAAmB,EAAE,CACjCC,YAAY,CAAEZ,MAAM,CAACI,CAAC,CAACS,aAAa,CAAC,CAACR,GAAG,EAC1C,CAAC,CACD;AAEA;AADAL,MAAM,CAAC,eAAe,CAAC,CAACK,GAAG,CAAC,EAAE,CAAC,CAE/BL,MAAM,CAAC,iBAAiB,CAAC,CAACc,IAAI,CAAC,EAAE,CAAC,CAClCZ,YAAY,CAACa,kBAAkB,CAACT,MAAM,CAAC,CAACU,IAAI,CAAC,UAAgB,CAC5Dd,YAAY,CAACe,gBAAgB,GAC9B,CAAC,EACF,CAAC,EACF,CAAC;AAEH;AACA,KACEC,qBAAqB,CAAE,SAAAA,qBAAA,EAAY,CAClC,IAAIC,kBAAkB,CAAG,IAAI,CAACC,2BAA2B,EAAE,CAC3DD,kBAAkB,CAAChB,EAAE,CAAC,OAAO,CAAE,kBAAkB,CAAE,SAAUC,CAAC,CAAE,CAC/D,IAAIiB,CAAC,CAACjB,CAAC,CAACkB,MAAM,CAAC,CAACC,OAAO,CAAC,KAAK,CAAC,CAACC,QAAQ,CAAC,SAAS,CAAC,EAC9CH,EAAAA,CAAC,CAACjB,CAAC,CAACkB,MAAM,CAAC,CAACG,EAAE,CAAC,QAAQ,CAAC,EAAIJ,CAAC,CAACjB,CAAC,CAACkB,MAAM,CAAC,CAACZ,MAAM,EAAE,CAACe,EAAE,CAAC,QAAQ,CAAC,CAAA,EAAA,CAC7DJ,CAAC,CAACjB,CAAC,CAACkB,MAAM,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC,CAACC,QAAQ,CAAC,WAAW,CAAC,EAC9CH,CAAAA,CAAC,CAACjB,CAAC,CAACkB,MAAM,CAAC,CAACG,EAAE,CAAC,0BAAwB,CAAC,EACxCJ,CAAAA,CAAC,CAACK,QAAQ,CAACL,CAAC,CAACjB,CAAC,CAACS,aAAa,CAAC,CAACc,IAAI,CAAC,eAAe,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC,CAAExB,CAAC,CAACkB,MAAM,CAAC,EAAA,CACrED,CAAC,CAACK,QAAQ,CAACL,CAAC,CAACjB,CAAC,CAACS,aAAa,CAAC,CAACc,IAAI,CAAC,gBAAgB,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC,CAAExB,CAAC,CAACkB,MAAM,CAAC,CAAA,CAC1E,IAAIO,SAAS,CAAGR,CAAC,CAACjB,CAAC,CAACS,aAAa,CAAC,CAACc,IAAI,CAAC,WAAW,CAAC,CAACG,IAAI,CAAC,MAAM,CAAC,CACxC,WAAW,EAAhC,OAAOD,SAAyB,GACnCE,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGJ,SAAS,EAAA,CAElC,CAAC,EACF,CAAC,CACDK,gBAAgB,CAAE,SAAAA,gBAAA,EAAY,CACzB,IAAAC,UAAU,CAAGnC,MAAM,CAAC,aAAa,CAAC,CAACK,GAAG,EAAE,CACxCE,MAAM,CAAGC,GAAG,CAACC,aAAa,EAAE,CAC5BC,MAAM,CAAGF,GAAG,CAACG,mBAAmB,EAAE,CAClCL,MAAM,CAAG,CACZC,MAAM,CAAEA,MAAM,CACdG,MAAM,CAAEA,MAAM,CACd0B,IAAI,CAAED,UAAU,CAChBE,IAAI,CAAE,MAAM,CACZzB,YAAY,CAAEZ,MAAM,CAAC,eAAe,CAAC,CAACK,GAAG,EAC1C,CAAC,CACD,OAAOC,MACR,CAAC,CACDgC,sBAAsB,CAAE,SAAAA,sBAAAA,CAAUC,SAAS,CAAE,CAC5CvC,MAAM,CAAC,YAAY,CAAEuC,SAAS,CAAC,CAACpC,EAAE,CAAC,OAAO,CAAE,UAAY,CACnD,IAAAqC,cAAc,CAAGxC,MAAM,CAAC,+BAA+B,CAAC,CAACK,GAAG,EAAE,CAC9DoC,GAAG,CAAGzC,MAAM,CAAC,IAAI,CAAC,CAAC0C,IAAI,CAAC,KAAK,CAAC,CAC9BF,cAAc,CAACG,MAAM,GACxBF,GAAG,EAAI,iBAAiB,CAAGD,cAAc,CAAA,CAE1CT,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGQ,IACxB,CAAC,EACF,CAAC,CACDG,sBAAsB,CAAE,SAAAA,sBAAAA,CAAUL,SAAS,CAAE,CAC5CvC,MAAM,CAAC,eAAe,CAAEuC,SAAS,CAAC,CAACpC,EAAE,CAAC,OAAO,CAAE,UAAY,CAC1D4B,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGjC,MAAM,CAAC,IAAI,CAAC,CAAC0C,IAAI,CAAC,KAAK,EAC/C,CAAC,EACF,CAAC,CACDG,sBAAsB,CAAE,SAAAA,sBAAUN,CAAAA,SAAS,CAAE,CAC5C,IAAMO,IAAI,CAAG,IAAI,CACbP,SAAS,EAAa,IAAA,GACzBA,SAAS,CAAGO,IAAI,CAAC/C,gBAAgB,EAAE,CAAA,CAEpCwC,SAAS,CAACZ,IAAI,CAAC,iBAAiB,CAAC,CAACxB,EAAE,CAAC,OAAO,CAAE,SAAUC,CAAC,CAAE,CAC1DA,CAAC,CAAC2C,eAAe,EAAE,CACnB3C,CAAC,CAAC4C,cAAc,EAAE,CAClB,IAAIC,QAAQ,CAAG5B,CAAC,CAAC,IAAI,CAAC,CAACE,OAAO,CAAC,IAAI,CAAC,CAACmB,IAAI,CAAC,IAAI,CAAC,CAC/ClC,GAAG,CAAC0C,gBAAgB,CAAC,CACpBC,KAAK,CAAE3C,GAAG,CAAC4C,UAAU,CAAC,wCAAwC,CAAC,CAC/DC,iBAAiB,CAAE,SAAAA,mBAAM,CACxBC,oBAAoB,CAACC,UAAU,CAACN,QAAQ,CAAA,CAAA,CAAO,CAAC,CAACjC,IAAI,CAAC,UAAY,CACjE8B,IAAI,CAACD,sBAAsB,CAACN,SAAS,EACtC,CAAC,EACF,CACD,CAAC,EACF,CAAC,EACF,CAAC;AAEH;AACA,KACExB,kBAAkB,CAAE,SAAAA,kBAAAA,CAAUyC,SAAS,CAAE,CAAA,IACpCtD,YAAY,CAAG,IAAI,CACnBuD,SAAS,CAAGzD,MAAM,CAAC0D,QAAQ,EAAE,CAKjC,OAJI,IAAA,CAACC,MAAM,CAACH,SAAS,CAAC,CAACxC,IAAI,CAAC,SAAU0B,IAAI,CAAE,CAC3CxC,YAAY,CAAC2C,sBAAsB,EAAE,CACrCY,SAAS,CAACG,OAAO,CAAClB,IAAI,EACvB,CAAC,CAAC,CACKe,SAAS,CAACI,OAAO,EACzB,CAAC,CACDC,cAAc,CAAE,SAAAA,gBAAY,CAC3B,IAAI,CAACH,MAAM,EAAE,CACb,IAAIpB,SAAS,CAAG,IAAI,CAACxC,gBAAgB,EAAE,CACvC,IAAI,CAACE,yBAAyB,EAAE,CAChC,IAAI,CAACqC,sBAAsB,CAACC,SAAS,CAAC,CACtC,IAAI,CAACM,sBAAsB,CAACN,SAAS,CAAC,CACtC,IAAI,CAACK,sBAAsB,CAACL,SAAS,EACtC,CACD,CACD,CAAC;;"}