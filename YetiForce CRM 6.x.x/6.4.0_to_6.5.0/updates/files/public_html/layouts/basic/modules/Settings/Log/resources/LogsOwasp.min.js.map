{"version":3,"file":"LogsOwasp.min.js","sources":["LogsOwasp.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Index_Js(\n\t'Settings_Log_LogsOwasp_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Get data from server\n\t\t *\n\t\t * @param {function} callback\n\t\t */\n\t\tgetData(callback) {\n\t\t\tconst progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\turl: 'index.php',\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: 'Log',\n\t\t\t\t\tparent: 'Settings',\n\t\t\t\t\taction: 'LogsOwasp',\n\t\t\t\t\ttype: this.container.find('.nav .active').data('type'),\n\t\t\t\t\trange: this.container.find('.js-date-range-filter').val()\n\t\t\t\t}\n\t\t\t}).done((response) => {\n\t\t\t\tconst columns = [],\n\t\t\t\t\tdata = [];\n\t\t\t\tfor (let key in response.columns) {\n\t\t\t\t\tconst render = key === 'url' || key === 'request' ? (data) => data : $.fn.dataTable.render.text();\n\t\t\t\t\tcolumns.push({\n\t\t\t\t\t\ttitle: response.columns[key],\n\t\t\t\t\t\tname: key,\n\t\t\t\t\t\tdata: key,\n\t\t\t\t\t\trender\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tfor (let key in response.data) {\n\t\t\t\t\tlet row = response.data[key];\n\t\t\t\t\tif (typeof row.url !== 'undefined') {\n\t\t\t\t\t\tconst original = row.url;\n\t\t\t\t\t\tif (row.url.indexOf('?') === -1) {\n\t\t\t\t\t\t\trow.url = 'index.php?' + row.url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\trow.url = `<a href=\"${row.url}\" title=\"${\n\t\t\t\t\t\t\tresponse.columns['url']\n\t\t\t\t\t\t}\" data-content=\"${original}\" class=\"js-popover-tooltip\">${\n\t\t\t\t\t\t\toriginal.length > 50 ? original.substr(0, 50) + '...' : original\n\t\t\t\t\t\t}</a>`;\n\t\t\t\t\t}\n\t\t\t\t\tdata.push(row);\n\t\t\t\t}\n\t\t\t\tcallback(data, columns);\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Initialize data table component\n\t\t *\n\t\t * @param {array} data\n\t\t * @param {array} columns\n\t\t * @returns {jQuery}\n\t\t */\n\t\tinitDataTable(data, columns) {\n\t\t\treturn this.container.find('.js-data-table').dataTable({\n\t\t\t\tsearching: false,\n\t\t\t\tprocessing: false,\n\t\t\t\tscrollX: true,\n\t\t\t\tbAutoWidth: false,\n\t\t\t\tdata,\n\t\t\t\tcolumns,\n\t\t\t\tlanguage: {\n\t\t\t\t\tsLengthMenu: app.vtranslate('JS_S_LENGTH_MENU'),\n\t\t\t\t\tsZeroRecords: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\tsInfo: app.vtranslate('JS_S_INFO'),\n\t\t\t\t\tsInfoEmpty: app.vtranslate('JS_S_INFO_EMPTY'),\n\t\t\t\t\tsSearch: app.vtranslate('JS_SEARCH'),\n\t\t\t\t\tsEmptyTable: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\tsInfoFiltered: app.vtranslate('JS_S_INFO_FILTERED'),\n\t\t\t\t\tsLoadingRecords: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\t\tsProcessing: app.vtranslate('JS_LOADING_OF_RECORDS'),\n\t\t\t\t\toPaginate: {\n\t\t\t\t\t\tsFirst: app.vtranslate('JS_S_FIRST'),\n\t\t\t\t\t\tsPrevious: app.vtranslate('JS_S_PREVIOUS'),\n\t\t\t\t\t\tsNext: app.vtranslate('JS_S_NEXT'),\n\t\t\t\t\t\tsLast: app.vtranslate('JS_S_LAST')\n\t\t\t\t\t},\n\t\t\t\t\toAria: {\n\t\t\t\t\t\tsSortAscending: app.vtranslate('JS_S_SORT_ASCENDING'),\n\t\t\t\t\t\tsSortDescending: app.vtranslate('JS_S_SORT_DESCENDING')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register data table component\n\t\t */\n\t\tregisterDataTable() {\n\t\t\tApp.Fields.Date.registerRange(this.container.find('.js-log-range'));\n\t\t\tlet table, tableApi;\n\t\t\tthis.getData((data, columns) => {\n\t\t\t\ttable = this.initDataTable(data, columns);\n\t\t\t\ttableApi = table.api();\n\t\t\t});\n\t\t\tthis.container.find('.js-date-range-btn').click((e) => {\n\t\t\t\tthis.getData((data, columns) => {\n\t\t\t\t\ttableApi.data().clear();\n\t\t\t\t\ttableApi.rows.add(data);\n\t\t\t\t\ttableApi.draw();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events\n\t\t */\n\t\tregisterEvents() {\n\t\t\tthis._super();\n\t\t\tthis.container = $('.js-log');\n\t\t\tthis.registerDataTable();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Index_Js","getData","callback","progressIndicatorElement","jQuery","progressIndicator","position","blockInfo","enabled","AppConnector","request","url","type","data","module","parent","action","container","find","range","val","done","response","columns","key","render","$","fn","dataTable","text","push","title","name","row","original","indexOf","concat","length","substr","mode","initDataTable","searching","processing","scrollX","bAutoWidth","language","sLengthMenu","app","vtranslate","sZeroRecords","sInfo","sInfoEmpty","sSearch","sEmptyTable","sInfoFiltered","sLoadingRecords","sProcessing","oPaginate","sFirst","sPrevious","sNext","sLast","oAria","sSortAscending","sSortDescending","registerDataTable","_this","App","Fields","Date","registerRange","table","tableApi","api","click","clear","rows","add","draw","registerEvents","_super"],"mappings":"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"}