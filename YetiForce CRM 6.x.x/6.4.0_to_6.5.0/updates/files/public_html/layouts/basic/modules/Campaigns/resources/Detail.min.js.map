{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nVtiger_Detail_Js(\n\t'Campaigns_Detail_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to register email enabled actions\n\t\t */\n\t\tregisterEmailEnabledActions: function () {\n\t\t\tvar moduleName = app.getModuleName();\n\t\t\tvar className = moduleName + '_List_Js';\n\t\t\tvar listInstance = new window[className]();\n\t\t\tlistInstance.registerEvents();\n\t\t\tlistInstance.markSelectedRecords();\n\t\t},\n\t\tregisterEventForRelatedTabClick: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar detailContentsHolder = thisInstance.getContentHolder();\n\t\t\tvar detailContainer = detailContentsHolder.closest('div.detailViewInfo');\n\t\t\tjQuery('.related', detailContainer).on('click', 'li:not(.spaceRelatedList)', function (e, urlAttributes) {\n\t\t\t\tvar tabElement = jQuery(e.currentTarget);\n\t\t\t\tif (!tabElement.hasClass('dropdown')) {\n\t\t\t\t\tvar element = jQuery('<div></div>');\n\t\t\t\t\telement.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\telementToBlock: detailContainer\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar url = tabElement.data('url');\n\t\t\t\t\tif (typeof urlAttributes !== 'undefined') {\n\t\t\t\t\t\tvar callBack = urlAttributes.callback;\n\t\t\t\t\t\tdelete urlAttributes.callback;\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.loadContents(url, urlAttributes)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tthisInstance.deSelectAllrelatedTabs();\n\t\t\t\t\t\t\tthisInstance.markTabAsSelected(tabElement);\n\t\t\t\t\t\t\tVtiger_Helper_Js.showHorizontalTopScrollBar();\n\t\t\t\t\t\t\tapp.registerModal(detailContentsHolder);\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tvar emailEnabledModule = jQuery(data).find('[name=\"emailEnabledModules\"]').val();\n\t\t\t\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\t\t\t\tvar listInstance = new Campaigns_List_Js();\n\t\t\t\t\t\t\t\tlistInstance.registerEvents();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof callBack == 'function') {\n\t\t\t\t\t\t\t\tcallBack(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//Summary tab is clicked\n\t\t\t\t\t\t\tif (tabElement.data('linkKey') == thisInstance.detailViewSummaryTabLabel) {\n\t\t\t\t\t\t\t\tthisInstance.loadWidgets();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.registerBasicEvents();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error) {\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\t//Calling registerevents of campaigns list to handle checkboxs click of related records\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tlistInstance.registerEvents();\n\t\t\tvar thisInstance = this;\n\t\t\tapp.event.on('RelatedList.AfterLoad', function (event, instance) {\n\t\t\t\tvar response = instance.content;\n\t\t\t\tresponse.find('[name=\"selectedIds\"]').data('selectedIds', '');\n\t\t\t\tresponse.find('[name=\"excludedIds\"]').data('excludedIds', '');\n\t\t\t\tvar emailEnabledModule = response.find('[name=\"emailEnabledModules\"]').val();\n\t\t\t\tif (emailEnabledModule) {\n\t\t\t\t\tthisInstance.registerEmailEnabledActions();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","registerEmailEnabledActions","moduleName","app","getModuleName","listInstance","window","registerEvents","markSelectedRecords","registerEventForRelatedTabClick","thisInstance","detailContentsHolder","getContentHolder","detailContainer","closest","jQuery","on","e","urlAttributes","tabElement","currentTarget","hasClass","element","progressIndicator","position","blockInfo","enabled","elementToBlock","url","data","callBack","callback","loadContents","done","deSelectAllrelatedTabs","markTabAsSelected","Vtiger_Helper_Js","showHorizontalTopScrollBar","registerModal","mode","emailEnabledModule","find","val","Campaigns_List_Js","detailViewSummaryTabLabel","loadWidgets","registerBasicEvents","fail","_super","Vtiger_List_Js","getInstance","event","instance","response","content"],"mappings":"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"}