{"version":3,"file":"AdvanceFilter.min.js","sources":["AdvanceFilter.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\n\t'Vtiger_AdvanceFilter_Js',\n\t{\n\t\tgetInstance: function (container) {\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar moduleClassName1 = module + '_AdvanceFilterEx_Js';\n\t\t\tvar moduleClassName2 = module + '_AdvanceFilter_Js';\n\t\t\tvar moduleClassName3 = 'Vtiger_AdvanceFilterEx_Js';\n\t\t\tvar moduleClassName4 = 'Vtiger_AdvanceFilter_Js';\n\t\t\tvar instance;\n\t\t\tif (typeof window[moduleClassName1] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName1](container);\n\t\t\t} else if (typeof window[moduleClassName2] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName2](container);\n\t\t\t} else if (typeof window[moduleClassName3] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName3](container);\n\t\t\t} else {\n\t\t\t\tinstance = new window[moduleClassName4](container);\n\t\t\t}\n\t\t\treturn instance;\n\t\t}\n\t},\n\t{\n\t\tfilterContainer: false,\n\t\t//Hold the conditions for a particular field type\n\t\tfieldTypeConditionMapping: false,\n\t\t//Hold the condition and their label translations\n\t\tconditonOperatorLabelMapping: false,\n\t\tdateConditionInfo: false,\n\t\tfieldModelInstance: false,\n\t\t//Holds fields type and conditions for which it needs validation\n\t\tvalidationSupportedFieldConditionMap: {\n\t\t\temail: ['e', 'n']\n\t\t},\n\t\t//Hols field type for which there is validations always needed\n\t\tallConditionValidationNeededFieldList: ['double', 'integer', 'currency'],\n\t\t//used to eliminate mutiple times validation registrations\n\t\tvalidationForControlsRegistered: false,\n\t\tinit: function (container) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.filterContainer');\n\t\t\t}\n\n\t\t\tif (container.is('.filterContainer')) {\n\t\t\t\tthis.setFilterContainer(container);\n\t\t\t} else {\n\t\t\t\tthis.setFilterContainer(jQuery('.filterContainer', container));\n\t\t\t}\n\t\t\tthis.initialize();\n\t\t},\n\t\tgetModuleName: function () {\n\t\t\treturn 'AdvanceFilter';\n\t\t},\n\t\t/**\n\t\t * Function  to initialize the advance filter\n\t\t */\n\t\tinitialize: function () {\n\t\t\tthis.registerEvents();\n\t\t\tthis.initializeOperationMappingDetails();\n\t\t\tthis.loadFieldSpecificUiForAll();\n\t\t},\n\t\t/**\n\t\t * Function which will save the field condition mapping condition label mapping\n\t\t */\n\t\tinitializeOperationMappingDetails: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tthis.fieldTypeConditionMapping = jQuery('input[name=\"advanceFilterOpsByFieldType\"]', filterContainer).data(\n\t\t\t\t'value'\n\t\t\t);\n\t\t\tthis.conditonOperatorLabelMapping = jQuery('input[name=\"advanceFilterOptions\"]', filterContainer).data('value');\n\t\t\tthis.dateConditionInfo = jQuery('[name=\"date_filters\"]').data('value');\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to get the container which holds all the filter elements\n\t\t * @return jQuery object\n\t\t */\n\t\tgetFilterContainer: function () {\n\t\t\treturn this.filterContainer;\n\t\t},\n\t\t/**\n\t\t * Function to set the filter container\n\t\t * @params : element - which represents the filter container\n\t\t * @return : current instance\n\t\t */\n\t\tsetFilterContainer: function (element) {\n\t\t\tthis.filterContainer = element;\n\t\t\treturn this;\n\t\t},\n\t\tgetDateSpecificConditionInfo: function () {\n\t\t\treturn this.dateConditionInfo;\n\t\t},\n\t\t/**\n\t\t * Function which will return set of condition for the given field type\n\t\t * @return array of conditions\n\t\t */\n\t\tgetConditionListFromType: function (fieldType) {\n\t\t\tvar fieldTypeConditions = this.fieldTypeConditionMapping[fieldType];\n\t\t\tif (fieldType == 'D' || fieldType == 'DT') {\n\t\t\t\tfieldTypeConditions = fieldTypeConditions.concat(this.getDateConditions(fieldType));\n\t\t\t}\n\t\t\treturn fieldTypeConditions;\n\t\t},\n\t\tgetDateConditions: function (fieldType) {\n\t\t\tif (fieldType != 'D' && fieldType != 'DT') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tvar dateFilters = this.getDateSpecificConditionInfo();\n\t\t\treturn Object.keys(dateFilters);\n\t\t},\n\t\t/**\n\t\t * Function to get the condition label\n\t\t * @param : key - condition key\n\t\t * @reurn : label for the condition or key if it doest not contain in the condition label mapping\n\t\t */\n\t\tgetConditionLabel: function (key) {\n\t\t\tif (key in this.conditonOperatorLabelMapping) {\n\t\t\t\treturn this.conditonOperatorLabelMapping[key];\n\t\t\t}\n\t\t\tif (key in this.getDateSpecificConditionInfo()) {\n\t\t\t\treturn this.getDateSpecificConditionInfo()[key]['label'];\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t/**\n\t\t * Function to check if the field selected is empty field\n\t\t * @params : select element which represents the field\n\t\t * @return : boolean true/false\n\t\t */\n\t\tisEmptyFieldSelected: function (fieldSelect) {\n\t\t\tvar selectedOption = fieldSelect.find('option:selected');\n\t\t\t//assumption that empty field will be having value none\n\t\t\tif (selectedOption.val() == 'none') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Function to get the add condition elements\n\t\t * @returns : jQuery object which represents the add conditions elements\n\t\t */\n\t\tgetAddConditionElement: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\treturn jQuery('.addCondition button', filterContainer);\n\t\t},\n\t\t/**\n\t\t * Function to add new condition row\n\t\t * @params : condtionGroupElement - group where condtion need to be added\n\t\t * @return : current instance\n\t\t */\n\t\taddNewCondition: function (conditionGroupElement) {\n\t\t\tlet basicElement = $('.basic', conditionGroupElement);\n\t\t\tlet newRowElement = basicElement.find('.js-conditions-row').clone(true, true);\n\t\t\tlet selectElement = newRowElement.find('select').addClass('select2');\n\t\t\tlet conditionList = $('.conditionList', conditionGroupElement);\n\t\t\tconditionList.append(newRowElement);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement, {\n\t\t\t\tdropdownParent: conditionGroupElement\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function/Handler  which will triggered when user clicks on add condition\n\t\t */\n\t\taddConditionHandler: function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar conditionGroup = element.closest('div.conditionGroup');\n\t\t\tthis.addNewCondition(conditionGroup);\n\t\t},\n\t\tgetFieldSpecificType: function (fieldSelected) {\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\tvar type = fieldInfo.type;\n\t\t\tif (type == 'reference') {\n\t\t\t\treturn 'V';\n\t\t\t}\n\t\t\treturn fieldSelected.data('fieldtype');\n\t\t},\n\t\t/**\n\t\t * Function to load condition list for the selected field\n\t\t * @params : fieldSelect - select element which will represents field list\n\t\t * @return : select element which will represent the condition element\n\t\t */\n\t\tloadConditions: function (fieldSelect) {\n\t\t\tvar row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tvar group = row.find('[name=\"column_condition\"]');\n\t\t\tvar conditionSelected = conditionSelectElement.val();\n\t\t\tvar fieldSelected = fieldSelect.find('option:selected');\n\t\t\tvar fieldSpecificType = this.getFieldSpecificType(fieldSelected);\n\t\t\tvar conditionList = this.getConditionListFromType(fieldSpecificType);\n\t\t\tvar fieldInfo = fieldSelected.data('fieldinfo');\n\t\t\t//for none in field name\n\t\t\tif (typeof conditionList === 'undefined') {\n\t\t\t\tconditionList = {};\n\t\t\t\tconditionList['none'] = 'None';\n\t\t\t}\n\t\t\tvar options = '';\n\t\t\tfor (var key in conditionList) {\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['rangeTime', 'image']) != -1 &&\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['y', 'ny']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, [\n\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t'fileLocationType'\n\t\t\t\t\t]) != -1 &&\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['s', 'ew', 'c', 'k']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tconditionList[key] === 'om' &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['owner', 'sharedOwner', 'userCreator']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['wr', 'nwr']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['owner']) == -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['s', 'ew']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['taxes', 'multipicklist', 'categoryMultipicklist', 'sharedOwner']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tjQuery.inArray(conditionList[key], ['bw', 'm', 'h']) != -1 &&\n\t\t\t\t\tjQuery.inArray(fieldInfo.type, ['time']) != -1\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (conditionList[key] === 'd' && group.val() !== 'and') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t//IE Browser consider the prototype properties also, it should consider has own properties only.\n\t\t\t\tif (conditionList.hasOwnProperty(key)) {\n\t\t\t\t\tvar conditionValue = conditionList[key];\n\t\t\t\t\tvar conditionLabel = this.getConditionLabel(conditionValue);\n\t\t\t\t\toptions += '<option value=\"' + conditionValue + '\"';\n\t\t\t\t\tif (conditionValue == conditionSelected) {\n\t\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t\t}\n\t\t\t\t\toptions += '>' + conditionLabel + '</option>';\n\t\t\t\t}\n\t\t\t}\n\t\t\tconditionSelectElement.empty().html(options).trigger('change');\n\t\t\treturn conditionSelectElement;\n\t\t},\n\t\t/**\n\t\t * Functiont to get the field specific ui for the selected field\n\t\t * @prarms : fieldSelectElement - select element which will represents field list\n\t\t * @return : jquery object which represents the ui for the field\n\t\t */\n\t\tgetFieldSpecificUi: function (fieldSelectElement) {\n\t\t\tlet fieldModel = this.fieldModelInstance,\n\t\t\t\thtml;\n\t\t\tif (fieldModel.get('comparatorElementVal') === 'd') {\n\t\t\t\thtml = '<div class=\"checkbox\"><label><input type=\"checkbox\" name=\"' + fieldModel.getName() + '\" value=\"0\" ';\n\t\t\t\tif (fieldModel.getValue() === 1 || fieldModel.getValue() === '1') {\n\t\t\t\t\thtml += 'checked';\n\t\t\t\t}\n\t\t\t\thtml += ' >' + app.vtranslate('JS_IGNORE_EMPTY_VALUES') + '</label></div>';\n\t\t\t\treturn $(html);\n\t\t\t} else if (\n\t\t\t\tfieldModel.getType().toLowerCase() === 'boolean' ||\n\t\t\t\tfieldSelectElement.find('option:selected').data('fieldtype') === 'C'\n\t\t\t) {\n\t\t\t\tlet selectedValue = fieldSelectElement.closest('.js-conditions-row').find('[data-value=\"value\"]').val();\n\t\t\t\thtml = '<select class=\"select2\" name=\"' + fieldModel.getName() + '\">';\n\t\t\t\thtml += '<option value=\"0\"';\n\t\t\t\tif (selectedValue === '0') {\n\t\t\t\t\thtml += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + app.vtranslate('JS_IS_DISABLED') + '</option>';\n\n\t\t\t\thtml += '<option value=\"1\"';\n\t\t\t\tif (selectedValue === '1') {\n\t\t\t\t\thtml += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + app.vtranslate('JS_IS_ENABLED') + '</option>';\n\t\t\t\thtml += '</select>';\n\t\t\t\treturn $(html);\n\t\t\t} else {\n\t\t\t\treturn $(fieldModel.getUiTypeSpecificHtml());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will load the field specific ui for a selected field\n\t\t * @prarms : fieldSelect - select element which will represents field list\n\t\t * @return : current instance\n\t\t */\n\t\tloadFieldSpecificUi: function (fieldSelect) {\n\t\t\tconst selectedOption = fieldSelect.find('option:selected');\n\t\t\tconst row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tconst fieldUiHolder = row.find('.fieldUiHolder');\n\t\t\tconst conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\tlet fieldInfo = selectedOption.data('fieldinfo');\n\t\t\tconst valueType = fieldUiHolder.find(`[name=\"${fieldInfo.name}\"]`).data('valuetype');\n\t\t\tlet fieldType = 'string';\n\t\t\tif (typeof fieldInfo !== 'undefined') {\n\t\t\t\tfieldType = fieldInfo.type;\n\t\t\t} else {\n\t\t\t\tfieldInfo = {};\n\t\t\t}\n\n\t\t\tvar comparatorElementVal = (fieldInfo.comparatorElementVal = conditionSelectElement.val());\n\t\t\tif (fieldType == 'date' || fieldType == 'datetime') {\n\t\t\t\tfieldInfo.dateSpecificConditions = this.getDateSpecificConditionInfo();\n\t\t\t}\n\t\t\tvar moduleName = this.getModuleName();\n\t\t\tvar fieldModel = Vtiger_Field_Js.getInstance(fieldInfo, moduleName);\n\t\t\tthis.fieldModelInstance = fieldModel;\n\t\t\tvar fieldSpecificUi = this.getFieldSpecificUi(fieldSelect);\n\n\t\t\t//remove validation since we dont need validations for all eleements\n\t\t\t// Both filter and find is used since we dont know whether the element is enclosed in some conainer like currency\n\t\t\tvar fieldName = fieldModel.getName();\n\n\t\t\tif (\n\t\t\t\t$.inArray(fieldModel.getType(), [\n\t\t\t\t\t'multipicklist',\n\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t'taxes',\n\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t]) > -1\n\t\t\t) {\n\t\t\t\tfieldName = fieldName + '[]';\n\t\t\t} else if (\n\t\t\t\t$.inArray(fieldModel.getType(), [\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'picklist',\n\t\t\t\t\t'owner',\n\t\t\t\t\t'languages',\n\t\t\t\t\t'modules',\n\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t'currencyList',\n\t\t\t\t\t'fileLocationType'\n\t\t\t\t]) > -1 &&\n\t\t\t\tfieldSpecificUi.is('select') &&\n\t\t\t\t(comparatorElementVal == 'e' || comparatorElementVal == 'n')\n\t\t\t) {\n\t\t\t\tfieldName = fieldName + '[]';\n\t\t\t}\n\t\t\tfieldSpecificUi.filter('[name=\"' + fieldName + '\"]').addClass('form-control');\n\t\t\tfieldSpecificUi\n\t\t\t\t.filter('[name=\"' + fieldName + '\"]')\n\t\t\t\t.attr('data-value', 'value')\n\t\t\t\t.removeAttr('data-validation-engine');\n\t\t\tfieldSpecificUi\n\t\t\t\t.find('[name=\"' + fieldName + '\"]')\n\t\t\t\t.attr('data-value', 'value')\n\t\t\t\t.removeAttr('data-validation-engine');\n\n\t\t\tif (fieldModel.getType() == 'currency') {\n\t\t\t\tfieldSpecificUi\n\t\t\t\t\t.filter('[name=\"' + fieldName + '\"]')\n\t\t\t\t\t.attr('data-decimal-separator', fieldInfo.decimal_separator)\n\t\t\t\t\t.attr('data-group-separator', fieldInfo.group_separator);\n\t\t\t\tfieldSpecificUi\n\t\t\t\t\t.find('[name=\"' + fieldName + '\"]')\n\t\t\t\t\t.attr('data-decimal-separator', fieldInfo.decimal_separator)\n\t\t\t\t\t.attr('data-group-separator', fieldInfo.group_separator);\n\t\t\t}\n\t\t\tif (valueType) {\n\t\t\t\tthis.fieldModelInstance.data.workflow_valuetype = valueType;\n\t\t\t}\n\t\t\tfieldUiHolder.html(fieldSpecificUi);\n\n\t\t\tif (fieldSpecificUi.is('select')) {\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(fieldSpecificUi, { dropdownParent: row });\n\t\t\t} else if (fieldSpecificUi.has('input.dateField').length > 0) {\n\t\t\t\tApp.Fields.Date.register(fieldSpecificUi);\n\t\t\t} else if (fieldSpecificUi.has('input.dateRangeField').length > 0) {\n\t\t\t\tApp.Fields.Date.registerRange(fieldSpecificUi, { ranges: false });\n\t\t\t} else if (fieldSpecificUi.has('input.clockPicker').length > 0) {\n\t\t\t\tapp.registerEventForClockPicker(fieldSpecificUi);\n\t\t\t}\n\t\t\tthis.addValidationToFieldIfNeeded(fieldSelect);\n\n\t\t\t// Is Empty, today, tomorrow, yesterday conditions does not need any field input value - hide the UI\n\t\t\t// re-enable if condition element is chosen.\n\t\t\tvar specialConditions = [\n\t\t\t\t'y',\n\t\t\t\t'today',\n\t\t\t\t'tomorrow',\n\t\t\t\t'yesterday',\n\t\t\t\t'smallerthannow',\n\t\t\t\t'greaterthannow',\n\t\t\t\t'ny',\n\t\t\t\t'om',\n\t\t\t\t'nom',\n\t\t\t\t'wr',\n\t\t\t\t'nwr'\n\t\t\t];\n\t\t\tif (specialConditions.indexOf(conditionSelectElement.val()) != -1) {\n\t\t\t\tfieldUiHolder.hide();\n\t\t\t} else {\n\t\t\t\tfieldUiHolder.show();\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to load field specific ui for all the select elements - this is used on load\n\t\t * to show field specific ui for all the fields\n\t\t */\n\t\tloadFieldSpecificUiForAll: function () {\n\t\t\tvar conditionsContainer = jQuery('.conditionList');\n\t\t\tvar fieldSelectElement = jQuery('select[name=\"columnname\"]', conditionsContainer);\n\t\t\tjQuery.each(fieldSelectElement, function (i, elem) {\n\t\t\t\tvar currentElement = jQuery(elem);\n\t\t\t\tif (currentElement.val() != 'none') {\n\t\t\t\t\tcurrentElement.trigger('change', { _intialize: true });\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function to add the validation if required\n\t\t * @prarms : selectFieldElement - select element which will represents field list\n\t\t */\n\t\taddValidationToFieldIfNeeded: function (selectFieldElement) {\n\t\t\tvar selectedOption = selectFieldElement.find('option:selected');\n\t\t\tvar row = selectFieldElement.closest('div.js-conditions-row');\n\t\t\tvar fieldSpecificElement = row.find('[data-value=\"value\"]');\n\t\t\tvar validator = selectedOption.attr('data-validator');\n\n\t\t\tif (this.isFieldSupportsValidation(selectFieldElement)) {\n\t\t\t\t//data attribute will not be present while attaching validation engine events . so we are\n\t\t\t\t//depending on the fallback option which is class\n\t\t\t\tfieldSpecificElement\n\t\t\t\t\t.addClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.attr('data-validation-engine', 'validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.attr('data-fieldinfo', JSON.stringify(selectedOption.data('fieldinfo')));\n\t\t\t\tif (typeof validator !== 'undefined') {\n\t\t\t\t\tfieldSpecificElement.attr('data-validator', validator);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfieldSpecificElement\n\t\t\t\t\t.removeClass('validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]')\n\t\t\t\t\t.removeAttr('data-validation-engine');\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Check if field supports validation\n\t\t * @prarms : selectFieldElement - select element which will represents field list\n\t\t * @return - boolen true/false\n\t\t */\n\t\tisFieldSupportsValidation: function (fieldSelect) {\n\t\t\tvar fieldModel = this.fieldModelInstance;\n\t\t\tvar type = fieldModel.getType();\n\n\t\t\tif (jQuery.inArray(type, this.allConditionValidationNeededFieldList) >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar row = fieldSelect.closest('div.js-conditions-row');\n\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\n\t\t\tvar conditionValue = conditionSelectElement.val();\n\n\t\t\tif (type in this.validationSupportedFieldConditionMap) {\n\t\t\t\tif (jQuery.inArray(conditionValue, this.validationSupportedFieldConditionMap[type]) >= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t/**\n\t\t * Function to retrieve the values of the filter\n\t\t * @return : object\n\t\t */\n\t\tgetValues: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tlet fieldList = ['columnname', 'comparator', 'value', 'column_condition'],\n\t\t\t\tfilterContainer = this.getFilterContainer(),\n\t\t\t\tconditionGroups = $('.conditionGroup', filterContainer),\n\t\t\t\tvalues = {},\n\t\t\t\tcolumnIndex = 0;\n\t\t\t$('.conditionGroup', filterContainer).each(function (index, domElement) {\n\t\t\t\tlet groupElement = $(domElement);\n\t\t\t\tvalues[index + 1] = {};\n\t\t\t\tvalues[index + 1]['columns'] = {};\n\t\t\t\t$('.conditionList .js-conditions-row', groupElement).each(function (i, conditionDomElement) {\n\t\t\t\t\tlet rowElement = $(conditionDomElement),\n\t\t\t\t\t\tfieldSelectElement = $('[name=\"columnname\"]', rowElement),\n\t\t\t\t\t\tvalueSelectElement = $('[data-value=\"value\"]', rowElement);\n\t\t\t\t\t//To not send empty fields to server\n\t\t\t\t\tif (thisInstance.isEmptyFieldSelected(fieldSelectElement)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet fieldDataInfo = fieldSelectElement.find('option:selected').data('fieldinfo'),\n\t\t\t\t\t\tfieldType = fieldDataInfo.type,\n\t\t\t\t\t\trowValues = {},\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tfield;\n\t\t\t\t\tif (fieldType === 'owner' || fieldType === 'userCreator') {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.is('select')) {\n\t\t\t\t\t\t\t\tlet newValuesArr = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (!newValuesArr) {\n\t\t\t\t\t\t\t\t\trowValues[field] = '';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\trowValues[field] =\n\t\t\t\t\t\t\t\t\tvalueSelectElement.attr('type') === 'checkbox' && valueSelectElement.prop('checked')\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t$.inArray(fieldType, [\n\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t\t\t]) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value' && valueSelectElement.attr('type') === 'checkbox') {\n\t\t\t\t\t\t\t\trowValues[field] = valueSelectElement.prop('checked') ? 1 : valueSelectElement.val();\n\t\t\t\t\t\t\t} else if (field === 'value' && valueSelectElement.is('input')) {\n\t\t\t\t\t\t\t\tlet pickListValues = valueSelectElement.data('picklistvalues'),\n\t\t\t\t\t\t\t\t\tvaluesArr = valueSelectElement.val().split(','),\n\t\t\t\t\t\t\t\t\tnewValuesArr = [];\n\t\t\t\t\t\t\t\tfor (i = 0; i < valuesArr.length; i++) {\n\t\t\t\t\t\t\t\t\tif (typeof pickListValues[valuesArr[i]] !== 'undefined') {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(pickListValues[valuesArr[i]]);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewValuesArr.push(valuesArr[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\trowValues[field] = newValuesArr.join(',');\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tfield === 'value' &&\n\t\t\t\t\t\t\t\tvalueSelectElement.is('select') &&\n\t\t\t\t\t\t\t\t$.inArray(fieldType, [\n\t\t\t\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t\t\t\t\t'languages',\n\t\t\t\t\t\t\t\t\t'currencyList',\n\t\t\t\t\t\t\t\t\t'taxes',\n\t\t\t\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t\t\t\t\t]) > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tlet value = valueSelectElement.val();\n\t\t\t\t\t\t\t\tif (value == null) {\n\t\t\t\t\t\t\t\t\trowValues[field] = value;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trowValues[field] = value.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (key in fieldList) {\n\t\t\t\t\t\t\tfield = fieldList[key];\n\t\t\t\t\t\t\tif (field === 'value') {\n\t\t\t\t\t\t\t\trowValues[field] =\n\t\t\t\t\t\t\t\t\tvalueSelectElement.attr('type') === 'checkbox' && valueSelectElement.prop('checked')\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: valueSelectElement.val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\trowValues[field] = $('[name=\"' + field + '\"]', rowElement).val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rowElement.is(':last-child')) {\n\t\t\t\t\t\trowValues['column_condition'] = '';\n\t\t\t\t\t}\n\t\t\t\t\tvalues[index + 1]['columns'][columnIndex] = rowValues;\n\t\t\t\t\tcolumnIndex++;\n\t\t\t\t});\n\t\t\t\tif (groupElement.find('div.groupCondition').length > 0) {\n\t\t\t\t\tvalues[index + 1]['condition'] = conditionGroups.find('div.groupCondition [name=\"condition\"]').val();\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn values;\n\t\t},\n\t\t/**\n\t\t * Event handle which will be triggred on deletion of a condition row\n\t\t */\n\t\tdeleteConditionHandler: function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar row = element.closest('.js-conditions-row');\n\t\t\trow.remove();\n\t\t},\n\t\t/**\n\t\t * Event handler which is invoked on add condition\n\t\t */\n\t\tregisterAddCondition: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getAddConditionElement().on('click', function (e) {\n\t\t\t\tthisInstance.addConditionHandler(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register field change event\n\t\t */\n\t\tregisterFieldChange: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tvar thisInstance = this;\n\t\t\tfilterContainer.on('change', 'select[name=\"columnname\"]', function (e, data) {\n\t\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\t\tif (typeof data === 'undefined' || data._intialize != true) {\n\t\t\t\t\tvar row = currentElement.closest('div.js-conditions-row');\n\t\t\t\t\tvar conditionSelectElement = row.find('select[name=\"comparator\"]');\n\t\t\t\t\tconditionSelectElement.empty();\n\t\t\t\t}\n\t\t\t\tthisInstance.loadConditions(currentElement);\n\t\t\t\tthisInstance.loadFieldSpecificUi(currentElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register condition change\n\t\t */\n\t\tregisterConditionChange: function () {\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tvar thisInstance = this;\n\t\t\tfilterContainer.on('change', 'select[name=\"comparator\"]', function (e) {\n\t\t\t\tvar comparatorSelectElement = jQuery(e.currentTarget);\n\t\t\t\tvar row = comparatorSelectElement.closest('div.js-conditions-row');\n\t\t\t\tvar fieldSelectElement = row.find('select[name=\"columnname\"]');\n\t\t\t\t//To handle the validation depending on condtion\n\t\t\t\tthisInstance.loadFieldSpecificUi(fieldSelectElement);\n\t\t\t\tthisInstance.addValidationToFieldIfNeeded(fieldSelectElement);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regisgter delete condition event\n\t\t */\n\t\tregisterDeleteCondition: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar filterContainer = this.getFilterContainer();\n\t\t\tfilterContainer.on('click', '.js-condition-delete', function (e) {\n\t\t\t\tthisInstance.deleteConditionHandler(e);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will regiter all events for this page\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerAddCondition();\n\t\t\tthis.registerFieldChange();\n\t\t\tthis.registerDeleteCondition();\n\t\t\tthis.registerConditionChange();\n\t\t}\n\t}\n);\n\nVtiger_Field_Js(\n\t'AdvanceFilter_Field_Js',\n\t{},\n\t{\n\t\tgetUiTypeSpecificHtml: function () {\n\t\t\tvar uiTypeModel = this.getUiTypeModel();\n\t\t\treturn uiTypeModel.getUi();\n\t\t},\n\t\tgetModuleName: function () {\n\t\t\tvar currentModule = app.getModuleName();\n\n\t\t\tvar type = this.getType();\n\t\t\tif (\n\t\t\t\t$.inArray(type, [\n\t\t\t\t\t'picklist',\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'multipicklist',\n\t\t\t\t\t'owner',\n\t\t\t\t\t'userCreator',\n\t\t\t\t\t'modules',\n\t\t\t\t\t'date',\n\t\t\t\t\t'datetime',\n\t\t\t\t\t'sharedOwner',\n\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t'inventoryLimit',\n\t\t\t\t\t'languages',\n\t\t\t\t\t'currencyList',\n\t\t\t\t\t'taxes',\n\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t'categoryMultipicklist'\n\t\t\t\t]) > -1\n\t\t\t) {\n\t\t\t\tcurrentModule = 'AdvanceFilter';\n\t\t\t}\n\t\t\treturn currentModule;\n\t\t}\n\t}\n);\n\nVtiger_Picklist_Field_Js(\n\t'AdvanceFilter_Picklist_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function () {\n\t\t\tvar html = '<select class=\"select2\" multiple name=\"' + this.getName() + '[]\">';\n\t\t\tvar pickListValues = this.getPickListValues();\n\t\t\tvar selectedOption = app.htmlDecode(this.getValue());\n\t\t\tvar selectedOptionsArray = selectedOption.split(',');\n\t\t\tfor (var option in pickListValues) {\n\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\tif (jQuery.inArray(option, selectedOptionsArray) != -1) {\n\t\t\t\t\thtml += ' selected ';\n\t\t\t\t}\n\t\t\t\thtml += '>' + pickListValues[option] + '</option>';\n\t\t\t}\n\t\t\thtml += '</select>';\n\t\t\tvar selectContainer = jQuery(html);\n\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\treturn selectContainer;\n\t\t}\n\t}\n);\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Modules_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Inventorylimit_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Filelocationtype_Field_Js', {}, {});\n\nVtiger_Multipicklist_Field_Js('AdvanceFilter_Multipicklist_Field_Js', {}, {});\n\nVtiger_Categorymultipicklist_Field_Js(\n\t'AdvanceFilter_Categorymultipicklist_Field_Js',\n\t{},\n\t{\n\t\tgetReadOnly: function () {\n\t\t\tlet result = '';\n\t\t\tif (this.getValue()) {\n\t\t\t\tresult = ' readonly=\"true\" ';\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Function to get the user date format\n\t\t */\n\t\tgetTreeTemplate: function () {\n\t\t\treturn this.get('treetemplate');\n\t\t},\n\t\t/**\n\t\t * Function to get the user date format\n\t\t */\n\t\tgetModuleName: function () {\n\t\t\treturn this.get('modulename');\n\t\t},\n\t\tgetUi: function () {\n\t\t\tlet pickListValues = this.getPickListValues();\n\t\t\tlet value = this.getValue() || '';\n\t\t\tlet values = value.split(',').map((v) => pickListValues[v] || '');\n\t\t\tlet displayValue = values.join(', ', values);\n\n\t\t\tlet multiple = 1;\n\t\t\tif (this.getType() === 'tree') {\n\t\t\t\tmultiple = 0;\n\t\t\t}\n\n\t\t\tconst treeContainer = document.createElement('div');\n\t\t\ttreeContainer.setAttribute('class', 'js-tree-container fieldValue');\n\t\t\tconst sourceInput = document.createElement('input');\n\t\t\tsourceInput.setAttribute('name', this.getName());\n\t\t\tsourceInput.setAttribute('type', 'hidden');\n\t\t\tsourceInput.setAttribute('value', this.getValue());\n\t\t\tsourceInput.setAttribute('class', 'sourceField');\n\t\t\tsourceInput.setAttribute('fieldinfo', JSON.stringify(this.getData()));\n\t\t\tsourceInput.setAttribute('data-multiple', multiple);\n\t\t\tsourceInput.setAttribute('data-value', 'value');\n\t\t\tsourceInput.setAttribute('data-treetemplate', this.getTreeTemplate());\n\t\t\tsourceInput.setAttribute('data-module-name', this.getModuleName());\n\t\t\tconst inputGroup = document.createElement('div');\n\t\t\tinputGroup.setAttribute('class', 'input-group');\n\n\t\t\tconst clearBtn = document.createElement('span');\n\t\t\tclearBtn.setAttribute('class', 'input-group-prepend clearTreeSelection u-cursor-pointer');\n\t\t\tconst clearBtnText = document.createElement('span');\n\t\t\tclearBtnText.setAttribute('class', 'input-group-text');\n\t\t\tconst clearBtnTextIcon = document.createElement('span');\n\t\t\tclearBtnTextIcon.setAttribute('class', 'fas fa-times-circle');\n\t\t\tclearBtnText.appendChild(clearBtnTextIcon);\n\t\t\tclearBtn.appendChild(clearBtnText);\n\n\t\t\tconst sourceDisplay = document.createElement('input');\n\t\t\tsourceDisplay.setAttribute('name', this.getName() + '_display');\n\t\t\tsourceDisplay.setAttribute('id', this.getName() + '_display');\n\t\t\tsourceDisplay.setAttribute('type', 'text');\n\t\t\tsourceDisplay.setAttribute('class', 'ml-0 treeAutoComplete form-control');\n\t\t\tsourceDisplay.setAttribute('value', displayValue);\n\t\t\tsourceInput.setAttribute('fieldinfo', JSON.stringify(this.getData()));\n\t\t\tif (this.getReadOnly()) {\n\t\t\t\tsourceDisplay.setAttribute('readonly', 'readonly');\n\t\t\t}\n\n\t\t\tconst searchBtn = document.createElement('span');\n\t\t\tsearchBtn.setAttribute('class', 'input-group-append js-tree-modal u-cursor-pointer');\n\t\t\tconst searchBtnText = document.createElement('span');\n\t\t\tsearchBtnText.setAttribute('class', 'input-group-text');\n\t\t\tconst searchBtnTextIcon = document.createElement('span');\n\t\t\tsearchBtnTextIcon.setAttribute('class', 'fas fa-search');\n\t\t\tsearchBtnText.appendChild(searchBtnTextIcon);\n\t\t\tsearchBtn.appendChild(searchBtnText);\n\n\t\t\tinputGroup.appendChild(clearBtn);\n\t\t\tinputGroup.appendChild(sourceDisplay);\n\t\t\tinputGroup.appendChild(searchBtn);\n\n\t\t\ttreeContainer.appendChild(sourceInput);\n\t\t\ttreeContainer.appendChild(inputGroup);\n\n\t\t\tlet selectContainer = $(treeContainer);\n\t\t\tApp.Fields.Tree.register(selectContainer);\n\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\treturn selectContainer;\n\t\t}\n\t}\n);\n\nAdvanceFilter_Categorymultipicklist_Field_Js('Vtiger_Tree_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Languages_Field_Js', {}, {});\n\nAdvanceFilter_Picklist_Field_Js('AdvanceFilter_Currencylist_Field_Js', {}, {});\n\nAdvanceFilter_Multipicklist_Field_Js('AdvanceFilter_Taxes_Field_Js', {}, {});\n\nVtiger_Owner_Field_Js(\n\t'AdvanceFilter_Owner_Field_Js',\n\t{},\n\t{\n\t\tgetUi: function () {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\thtml = '',\n\t\t\t\tselectContainer;\n\t\t\tif (\n\t\t\t\tcomparatorSelectedOptionVal === 'e' ||\n\t\t\t\tcomparatorSelectedOptionVal === 'n' ||\n\t\t\t\t(this.getName() === 'shownerid' && $.inArray(comparatorSelectedOptionVal, ['c', 'k']) != -1)\n\t\t\t) {\n\t\t\t\thtml = '<select class=\"select2\" multiple name=\"' + this.getName() + '[]\">';\n\t\t\t\tlet pickListValues = this.getPickListValues(),\n\t\t\t\t\tselectedOption = app.htmlDecode(this.getValue()),\n\t\t\t\t\toptGroup;\n\t\t\t\tfor (optGroup in pickListValues) {\n\t\t\t\t\thtml += '<optgroup label=\"' + optGroup + '\">';\n\t\t\t\t\tlet optionGroupValues = pickListValues[optGroup],\n\t\t\t\t\t\toption;\n\t\t\t\t\tfor (option in optionGroupValues) {\n\t\t\t\t\t\thtml += '<option value=\"' + option + '\" ';\n\t\t\t\t\t\tif ($.inArray(option, selectedOption.split(',')) != -1) {\n\t\t\t\t\t\t\thtml += ' selected ';\n\t\t\t\t\t\t}\n\t\t\t\t\t\thtml += '>' + optionGroupValues[option] + '</option>';\n\t\t\t\t\t}\n\t\t\t\t\thtml += '</optgroup>';\n\t\t\t\t}\n\t\t\t\thtml += '</select>';\n\t\t\t\tselectContainer = $(html);\n\t\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\t\treturn selectContainer;\n\t\t\t} else {\n\t\t\t\tlet tagsArray = [];\n\t\t\t\t$.each(this.getPickListValues(), function (groups, blocks) {\n\t\t\t\t\t$.each(blocks, function (i, e) {\n\t\t\t\t\t\ttagsArray.push($.trim(e));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\thtml = '<input data-tags=\"' + tagsArray + '\" type=\"hidden\" class=\"row select2\" name=\"' + this.getName() + '\">';\n\t\t\t\tselectContainer = $(html).val(this.getValue());\n\t\t\t\tselectContainer.data('tags', tagsArray);\n\t\t\t\tthis.addValidationToElement(selectContainer);\n\t\t\t\treturn selectContainer;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Multireferencevalue_Field_Js('AdvanceFilter_Multireferencevalue_Field_Js', {}, {});\n\nAdvanceFilter_Owner_Field_Js('AdvanceFilter_Sharedowner_Field_Js', {}, {});\n\nAdvanceFilter_Owner_Field_Js('AdvanceFilter_Usercreator_Field_Js', {}, {});\nVtiger_Date_Field_Js(\n\t'AdvanceFilter_Date_Field_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to get the ui\n\t\t * @return - input text field\n\t\t */\n\t\tgetUi: function () {\n\t\t\tlet comparatorSelectedOptionVal = this.get('comparatorElementVal'),\n\t\t\t\tdateSpecificConditions = this.get('dateSpecificConditions'),\n\t\t\t\thtml = '';\n\t\t\tif (comparatorSelectedOptionVal === 'bw' || comparatorSelectedOptionVal === 'custom') {\n\t\t\t\thtml =\n\t\t\t\t\t'<div class=\"date\"><input class=\"dateRangeField form-control\" data-calendar-type=\"range\" name=\"' +\n\t\t\t\t\tthis.getName() +\n\t\t\t\t\t'\" data-date-format=\"' +\n\t\t\t\t\tthis.getDateFormat() +\n\t\t\t\t\t'\" type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\tthis.getValue() +\n\t\t\t\t\t'\"></div>';\n\t\t\t\tlet element = $(html),\n\t\t\t\t\tdateFieldUi = element.find('.dateRangeField');\n\t\t\t\tif (dateFieldUi.val().indexOf(',') !== -1) {\n\t\t\t\t\tlet valueArray = this.getValue().split(','),\n\t\t\t\t\t\tstartDateTime = valueArray[0],\n\t\t\t\t\t\tendDateTime = valueArray[1];\n\t\t\t\t\tif (startDateTime.indexOf(' ') !== -1) {\n\t\t\t\t\t\tlet dateTime = startDateTime.split(' ');\n\t\t\t\t\t\tstartDateTime = dateTime[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (endDateTime.indexOf(' ') !== -1) {\n\t\t\t\t\t\tlet dateTimeValue = endDateTime.split(' ');\n\t\t\t\t\t\tendDateTime = dateTimeValue[0];\n\t\t\t\t\t}\n\t\t\t\t\tdateFieldUi.val(startDateTime + ',' + endDateTime);\n\t\t\t\t} else {\n\t\t\t\t\t// while changing to between/custom from equal/notequal/... we'll only have one value\n\t\t\t\t\tlet value = this.getValue().split(' '),\n\t\t\t\t\t\tstartDate = value[0],\n\t\t\t\t\t\tendDate = value[0];\n\t\t\t\t\tif (startDate !== '' && endDate !== '') {\n\t\t\t\t\t\tdateFieldUi.val(startDate + ',' + endDate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.addValidationToElement(element);\n\t\t\t} else if (comparatorSelectedOptionVal in dateSpecificConditions) {\n\t\t\t\tlet startValue = dateSpecificConditions[comparatorSelectedOptionVal]['startdate'],\n\t\t\t\t\tendValue = dateSpecificConditions[comparatorSelectedOptionVal]['enddate'];\n\t\t\t\tif (\n\t\t\t\t\tcomparatorSelectedOptionVal === 'today' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'tomorrow' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'yesterday'\n\t\t\t\t) {\n\t\t\t\t\thtml = '<input name=\"' + this.getName() + '\" type=\"text\" ReadOnly=\"true\" value=\"' + startValue + '\">';\n\t\t\t\t} else {\n\t\t\t\t\thtml =\n\t\t\t\t\t\t'<input name=\"' +\n\t\t\t\t\t\tthis.getName() +\n\t\t\t\t\t\t'\" type=\"text\" ReadOnly=\"true\" value=\"' +\n\t\t\t\t\t\tstartValue +\n\t\t\t\t\t\t',' +\n\t\t\t\t\t\tendValue +\n\t\t\t\t\t\t'\">';\n\t\t\t\t}\n\t\t\t\treturn $(html);\n\t\t\t} else {\n\t\t\t\tlet fieldUi = this._super(),\n\t\t\t\t\tdateTimeFieldValue = fieldUi.find('.dateField').val(),\n\t\t\t\t\tdateValue = dateTimeFieldValue.split(' ');\n\t\t\t\tif (dateValue[1] === '00:00:00') {\n\t\t\t\t\tdateTimeFieldValue = dateValue[0];\n\t\t\t\t} else if (\n\t\t\t\t\tcomparatorSelectedOptionVal === 'e' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'n' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'b' ||\n\t\t\t\t\tcomparatorSelectedOptionVal === 'a'\n\t\t\t\t) {\n\t\t\t\t\tlet dateTimeArray = dateTimeFieldValue.split(' ');\n\t\t\t\t\tdateTimeFieldValue = dateTimeArray[0];\n\t\t\t\t}\n\t\t\t\tfieldUi.find('.dateField').val(dateTimeFieldValue);\n\t\t\t\treturn fieldUi;\n\t\t\t}\n\t\t}\n\t}\n);\n\nAdvanceFilter_Date_Field_Js('AdvanceFilter_Datetime_Field_Js', {}, {});\n"],"names":["jQuery","Class","getInstance","container","instance","module","app","getModuleName","moduleClassName1","moduleClassName2","moduleClassName3","window","filterContainer","fieldTypeConditionMapping","conditonOperatorLabelMapping","dateConditionInfo","fieldModelInstance","validationSupportedFieldConditionMap","email","allConditionValidationNeededFieldList","validationForControlsRegistered","init","is","setFilterContainer","initialize","registerEvents","initializeOperationMappingDetails","loadFieldSpecificUiForAll","getFilterContainer","data","element","getDateSpecificConditionInfo","getConditionListFromType","fieldType","fieldTypeConditions","concat","getDateConditions","dateFilters","Object","keys","getConditionLabel","key","label","isEmptyFieldSelected","fieldSelect","selectedOption","find","val","getAddConditionElement","addNewCondition","conditionGroupElement","basicElement","$","newRowElement","clone","selectElement","addClass","conditionList","append","App","Fields","Picklist","showSelect2ElementView","dropdownParent","addConditionHandler","e","currentTarget","conditionGroup","closest","getFieldSpecificType","fieldSelected","fieldInfo","type","loadConditions","row","conditionSelectElement","group","conditionSelected","fieldSpecificType","none","options","inArray","hasOwnProperty","conditionValue","conditionLabel","empty","html","trigger","getFieldSpecificUi","fieldSelectElement","fieldModel","get","getName","getValue","vtranslate","getType","toLowerCase","selectedValue","getUiTypeSpecificHtml","loadFieldSpecificUi","fieldUiHolder","valueType","name","comparatorElementVal","dateSpecificConditions","moduleName","Vtiger_Field_Js","fieldSpecificUi","fieldName","filter","attr","removeAttr","decimal_separator","group_separator","workflow_valuetype","has","length","Date","register","registerRange","ranges","registerEventForClockPicker","addValidationToFieldIfNeeded","indexOf","show","hide","conditionsContainer","each","i","elem","currentElement","_intialize","selectFieldElement","fieldSpecificElement","validator","isFieldSupportsValidation","JSON","stringify","removeClass","getValues","thisInstance","fieldList","conditionGroups","values","columnIndex","index","domElement","groupElement","columns","conditionDomElement","rowElement","valueSelectElement","field","fieldDataInfo","rowValues","newValuesArr","join","prop","pickListValues","valuesArr","split","push","value","column_condition","condition","deleteConditionHandler","remove","registerAddCondition","on","registerFieldChange","registerConditionChange","comparatorSelectElement","registerDeleteCondition","uiTypeModel","getUiTypeModel","getUi","currentModule","Vtiger_Picklist_Field_Js","getPickListValues","htmlDecode","selectedOptionsArray","option","selectContainer","addValidationToElement","AdvanceFilter_Picklist_Field_Js","Vtiger_Multipicklist_Field_Js","Vtiger_Categorymultipicklist_Field_Js","getReadOnly","result","getTreeTemplate","map","v","displayValue","multiple","treeContainer","document","createElement","setAttribute","sourceInput","getData","inputGroup","clearBtn","clearBtnText","clearBtnTextIcon","appendChild","sourceDisplay","searchBtn","searchBtnText","searchBtnTextIcon","Tree","AdvanceFilter_Categorymultipicklist_Field_Js","AdvanceFilter_Multipicklist_Field_Js","Vtiger_Owner_Field_Js","comparatorSelectedOptionVal","optGroup","optionGroupValues","tagsArray","groups","blocks","trim","Vtiger_Multireferencevalue_Field_Js","AdvanceFilter_Owner_Field_Js","Vtiger_Date_Field_Js","getDateFormat","dateFieldUi","valueArray","startDateTime","endDateTime","dateTime","dateTimeValue","startDate","endDate","startValue","startdate","endValue","enddate","fieldUi","_super","dateTimeFieldValue","dateValue","dateTimeArray","AdvanceFilter_Date_Field_Js"],"mappings":"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"}