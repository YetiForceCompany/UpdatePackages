{"version":3,"file":"TwoFactorAuthenticationModal.min.js","sources":["TwoFactorAuthenticationModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_TwoFactorAuthenticationModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to handle sending the AJAX form\n\t\t * @param data\n\t\t */\n\t\tregisterSubmitFrom(data) {\n\t\t\tdata.find('button[name=saveButton]').prop('disabled', true);\n\t\t\tdata.find('input[name=user_code]').on('keyup', (e) => {\n\t\t\t\tif (e.keyCode !== 13) {\n\t\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', $(e.currentTarget).val().length === 0);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.find('input[name=user_code]').on('change', (e) => {\n\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', $(e.currentTarget).val().length === 0);\n\t\t\t});\n\t\t\tdata.find('input[name=turn_off_2fa]').on('change', (e) => {\n\t\t\t\tif ($(e.currentTarget).prop('checked')) {\n\t\t\t\t\tdata.find('.js-qr-code,.js-user-code').addClass('hide');\n\t\t\t\t\tdata.find('input[name=mode]').val('off');\n\t\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', false);\n\t\t\t\t} else {\n\t\t\t\t\tdata.find('.js-qr-code,.js-user-code').removeClass('hide');\n\t\t\t\t\tdata.find('input[name=mode]').val('secret');\n\t\t\t\t\tdata.find('button[name=saveButton]').prop('disabled', true);\n\t\t\t\t\tdata.find('input[name=user_code]').val('');\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet form = data.find('form');\n\t\t\tform.on('submit', (e) => {\n\t\t\t\tlet progress = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\tAppConnector.request(form.serializeFormData()).done((response) => {\n\t\t\t\t\tif (response.result.success) {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: response.result.message,\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\tanimation: 'show'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (app.getModuleName() === 'Users') {\n\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet wrongCode = form.find('.js-wrong-code');\n\t\t\t\t\t\tif (wrongCode.hasClass('hide')) {\n\t\t\t\t\t\t\twrongCode.removeClass('hide');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register base events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents(modalContainer) {\n\t\t\tthis.registerSubmitFrom(modalContainer);\n\t\t\tApp.Fields.Text.registerCopyClipboard(modalContainer, '.js-clipboard');\n\t\t}\n\t}\n);\n"],"names":["$","Class","registerSubmitFrom","data","find","prop","on","e","keyCode","currentTarget","val","length","addClass","removeClass","form","progress","progressIndicator","blockInfo","enabled","AppConnector","request","serializeFormData","done","response","result","success","app","hideModalWindow","showNotify","text","message","type","animation","getModuleName","location","reload","wrongCode","hasClass","mode","preventDefault","registerEvents","modalContainer","App","Fields","Text","registerCopyClipboard"],"mappings":"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"}