{"version":3,"file":"EmailVerificationModal.min.js","sources":["EmailVerificationModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Settings_Companies_EmailVerificationModal_Js',\n\t{},\n\t{\n\t\t/** Modal container */\n\t\tcontainer: false,\n\t\t/** Modal ID */\n\t\tmodalId: false,\n\t\t/** Source field */\n\t\tsourceField: false,\n\n\t\t/** Toggle elements */\n\t\ttoggleForms: function () {\n\t\t\tthis.container.find('.js-send-verification-email,.js-check-verification-code').toggle(250);\n\t\t},\n\n\t\t/** Request sending an email with a verification code */\n\t\tregisterSendVerificationEmail: function () {\n\t\t\tthis.container.on('click', '.js-email-verification-request-modal__save', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tconst progressIndicator = $.progressIndicator({\n\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('request', [], formData).done((data) => {\n\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (data.result && data.result.success) {\n\t\t\t\t\t\tthis.toggleForms();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data?.result?.message,\n\t\t\t\t\t\t\ttype: data?.result?.type,\n\t\t\t\t\t\t\thide: true,\n\t\t\t\t\t\t\tdelay: 8000,\n\t\t\t\t\t\t\ttextTrusted: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/** Register an email address */\n\t\tregisterCheckVerificationCode: function () {\n\t\t\tthis.container.find('button.js-email-verification-modal__back').on('click', () => {\n\t\t\t\tthis.container.find('input:visible').val('');\n\t\t\t\tthis.toggleForms();\n\t\t\t});\n\n\t\t\tthis.container.on('click', '.js-email-verification-confirm-modal__save', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tconst progressIndicator = $.progressIndicator({\n\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('confirm', [], formData).done((data) => {\n\t\t\t\t\tprogressIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\ttype: data.result.type,\n\t\t\t\t\t\t\thide: true,\n\t\t\t\t\t\t\tdelay: 8000,\n\t\t\t\t\t\t\ttextTrusted: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\tthis.getSourceField().val(formData['email']);\n\t\t\t\t\t\t\tapp.hideModalWindow(null, this.container.parent().attr('id'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Gets basic field\n\t\t */\n\t\tgetSourceField: function () {\n\t\t\tif (this.sourceField === false) {\n\t\t\t\tthis.sourceField = $('[data-modalid=' + this.modalId + ']')\n\t\t\t\t\t.closest('.js-field-block-column')\n\t\t\t\t\t.find('input[name=\"email\"]');\n\t\t\t}\n\n\t\t\treturn this.sourceField;\n\t\t},\n\n\t\t/** @inheritdoc */\n\t\tregisterEvents: function (modal) {\n\t\t\tthis.container = modal;\n\t\t\tthis.modalId = modal.closest('.js-modal-container').attr('id');\n\t\t\tthis.registerSendVerificationEmail();\n\t\t\tthis.registerCheckVerificationCode();\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","modalId","sourceField","toggleForms","find","toggle","registerSendVerificationEmail","_this","on","e","preventDefault","form","validationEngine","formData","serializeFormData","progressIndicator","blockInfo","enabled","app","saveAjax","done","data","mode","result","success","_data$result","_data$result2","showNotify","text","message","type","hide","delay","textTrusted","registerCheckVerificationCode","_this2","val","getSourceField","email","hideModalWindow","parent","attr","closest","registerEvents","modal"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,CAAC,CAACC,KAAK,CACN,8CAA8C,CAC9C,EAAE,CACF,uBAECC,SAAS,CAAA,CAAA,CAAO,gBAEhBC,OAAO,CAAA,CAAA,CAAO,oBAEdC,WAAW,CAAO,CAAA,CAAA,uBAGlBC,WAAW,CAAE,SAAAA,WAAAA,EAAY,CACxB,IAAI,CAACH,SAAS,CAACI,IAAI,CAAC,yDAAyD,CAAC,CAACC,MAAM,CAAC,GAAG,EAC1F,CAAC,yDAGDC,6BAA6B,CAAE,SAAAA,6BAAAA,EAAY,CAAA,IAAAC,KAAA,CAAA,IAAA,CAC1C,IAAI,CAACP,SAAS,CAACQ,EAAE,CAAC,OAAO,CAAE,4CAA4C,CAAE,SAACC,CAAC,CAAK,CAC/EA,CAAC,CAACC,cAAc,EAAE,CAClB,IAAIC,IAAI,CAAGJ,KAAI,CAACP,SAAS,CAACI,IAAI,CAAC,MAAM,CAAC,CACtC,GAAKO,IAAI,CAACC,gBAAgB,CAAC,UAAU,CAAC,CAAA,CAAA,IAGlCC,QAAQ,CAAGF,IAAI,CAACG,iBAAiB,EAAE,CACjCC,iBAAiB,CAAGjB,CAAC,CAACiB,iBAAiB,CAAC,CAC7CC,SAAS,CAAE,CAAEC,OAAO,CAAO,CAAA,CAAA,CAC5B,CAAC,CAAC,CACFC,GAAG,CAACC,QAAQ,CAAC,SAAS,CAAE,EAAE,CAAEN,QAAQ,CAAC,CAACO,IAAI,CAAC,SAACC,IAAI,CAAK,CAEpD,GADAN,iBAAiB,CAACA,iBAAiB,CAAC,CAAEO,IAAI,CAAE,MAAO,CAAC,CAAC,CACjDD,IAAI,CAACE,MAAM,EAAIF,IAAI,CAACE,MAAM,CAACC,OAAO,CACrCjB,KAAI,CAACJ,WAAW,EAAE,CACZ,KAAA,CAAA,IAAAsB,YAAA,CAAAC,aAAA,CACNR,GAAG,CAACS,UAAU,CAAC,CACdC,IAAI,CAAA,IAAA,GAAEP,IAAI,EAAJA,KAAAA,CAAAA,GAAAA,IAAI,EAAAI,IAAAA,IAAAA,YAAA,CAAJJ,IAAI,CAAEE,MAAM,CAAA,EAAA,KAAA,CAAA,GAAAE,YAAA,CAAA,KAAA,CAAA,CAAZA,YAAA,CAAcI,OAAO,CAC3BC,IAAI,CAAA,IAAA,GAAET,IAAI,EAAA,KAAA,CAAA,GAAJA,IAAI,EAAA,IAAA,IAAAK,aAAA,CAAJL,IAAI,CAAEE,MAAM,CAAAG,EAAAA,KAAAA,CAAAA,GAAAA,aAAA,QAAZA,aAAA,CAAcI,IAAI,CACxBC,IAAI,CAAA,CAAA,CAAM,CACVC,KAAK,CAAE,GAAI,CACXC,WAAW,CAAA,CAAA,CACZ,CAAC,EACF,CACD,CAAC,EAAC,CACH,CAAC,EACF,CAAC,iCAGDC,6BAA6B,CAAE,SAAAA,6BAAAA,EAAY,CAAAC,IAAAA,MAAA,CAC1C,IAAA,CAAA,IAAI,CAACnC,SAAS,CAACI,IAAI,CAAC,0CAA0C,CAAC,CAACI,EAAE,CAAC,OAAO,CAAE,UAAM,CACjF2B,MAAI,CAACnC,SAAS,CAACI,IAAI,CAAC,eAAe,CAAC,CAACgC,GAAG,CAAC,EAAE,CAAC,CAC5CD,MAAI,CAAChC,WAAW,GACjB,CAAC,CAAC,CAEF,IAAI,CAACH,SAAS,CAACQ,EAAE,CAAC,OAAO,CAAE,4CAA4C,CAAE,SAACC,CAAC,CAAK,CAC/EA,CAAC,CAACC,cAAc,EAAE,CAClB,IAAIC,IAAI,CAAGwB,MAAI,CAACnC,SAAS,CAACI,IAAI,CAAC,MAAM,CAAC,CACtC,GAAI,CAACO,IAAI,CAACC,gBAAgB,CAAC,UAAU,CAAC,CACrC,OACA,CAAA,CAAA,CAAA,IAEGC,QAAQ,CAAGF,IAAI,CAACG,iBAAiB,EAAE,CACjCC,iBAAiB,CAAGjB,CAAC,CAACiB,iBAAiB,CAAC,CAC7CC,SAAS,CAAE,CAAEC,OAAO,CAAO,CAAA,CAAA,CAC5B,CAAC,CAAC,CACFC,GAAG,CAACC,QAAQ,CAAC,SAAS,CAAE,EAAE,CAAEN,QAAQ,CAAC,CAACO,IAAI,CAAC,SAACC,IAAI,CAAK,CACpDN,iBAAiB,CAACA,iBAAiB,CAAC,CAAEO,IAAI,CAAE,MAAO,CAAC,CAAC,CACjDD,IAAI,CAACG,OAAO,EAAIH,IAAI,CAACE,MAAM,GAC9BL,GAAG,CAACS,UAAU,CAAC,CACdC,IAAI,CAAEP,IAAI,CAACE,MAAM,CAACM,OAAO,CACzBC,IAAI,CAAET,IAAI,CAACE,MAAM,CAACO,IAAI,CACtBC,IAAI,CAAM,CAAA,CAAA,CACVC,KAAK,CAAE,GAAI,CACXC,WAAW,CACZ,CAAA,CAAA,CAAC,CAAC,CAEEZ,IAAI,CAACE,MAAM,CAACC,OAAO,GACtBW,MAAI,CAACE,cAAc,EAAE,CAACD,GAAG,CAACvB,QAAQ,CAAAyB,KAAS,CAAC,CAC5CpB,GAAG,CAACqB,eAAe,CAAC,IAAI,CAAEJ,MAAI,CAACnC,SAAS,CAACwC,MAAM,EAAE,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC,CAGhE,EAAA,CAAC,EACF,CAAC,EACF,CAAC;AAGH;AACA,KACEJ,cAAc,CAAE,SAAAA,gBAAY,CAO3B,OANI,CAAI,CAAA,GAAA,IAAA,CAACnC,WAAqB,GAC7B,IAAI,CAACA,WAAW,CAAGJ,CAAC,CAAC,gBAAgB,CAAG,IAAI,CAACG,OAAO,CAAG,GAAG,CAAC,CACzDyC,OAAO,CAAC,wBAAwB,CAAC,CACjCtC,IAAI,CAAC,uBAAqB,CAAC,CAAA,CAGvB,IAAI,CAACF,WACb,CAAC,mBAGDyC,cAAc,CAAE,SAAAA,cAAUC,CAAAA,KAAK,CAAE,CAChC,IAAI,CAAC5C,SAAS,CAAG4C,KAAK,CACtB,IAAI,CAAC3C,OAAO,CAAG2C,KAAK,CAACF,OAAO,CAAC,qBAAqB,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC,CAC9D,IAAI,CAACnC,6BAA6B,EAAE,CACpC,IAAI,CAAC4B,6BAA6B,GACnC,CACD,CACD,CAAC;;"}