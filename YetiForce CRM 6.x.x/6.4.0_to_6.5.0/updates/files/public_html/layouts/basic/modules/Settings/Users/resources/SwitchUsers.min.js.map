{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Users_SwitchUsers_Js',\n\t{},\n\t{\n\t\tregisterAdd: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('.addItem').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.sufrom').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tvar id = parseInt(content.find('#suCount').val()) + 1;\n\t\t\t\tvar cloneItem = content.find('.cloneItem tbody').clone(true, true);\n\t\t\t\tvar suFrom = cloneItem.find('.sufrom option');\n\t\t\t\tsuFrom.each(function (index, option) {\n\t\t\t\t\t$.each(data, function (key, selectedUser) {\n\t\t\t\t\t\tif ($(option).val() == selectedUser.user) {\n\t\t\t\t\t\t\tcloneItem.find(option).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tcloneItem\n\t\t\t\t\t.find('tr')\n\t\t\t\t\t.attr('data-id', id)\n\t\t\t\t\t.addClass('row' + id);\n\t\t\t\tcontent.find('.switchUsersTable tbody').append(cloneItem.html());\n\t\t\t\tcontent.find('#suCount').val(id);\n\t\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t\t});\n\t\t},\n\t\tregisterDelete: function (content) {\n\t\t\tcontent.find('.delate').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\ttarget.closest('tr').remove();\n\t\t\t});\n\t\t},\n\t\tregisterSave: function (content) {\n\t\t\tcontent.find('.saveItems').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tif ($(this).find('.suto :selected').length > 0) {\n\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t\t\t\taccess: $(this).find('.suto').val()\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSwitchUsers', data).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('.contentsDiv');\n\t\t\tthis.registerAdd(content);\n\t\t\tthis.registerDelete(content);\n\t\t\tthis.registerSave(content);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerAdd","content","thisInstance","find","on","data","each","push","user","$","val","id","parseInt","cloneItem","clone","suFrom","index","option","key","selectedUser","remove","attr","addClass","append","html","registerDelete","App","Fields","Picklist","showSelect2ElementView","e","target","currentTarget","closest","registerSave","length","access","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":"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"}