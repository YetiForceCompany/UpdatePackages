{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_CronTasks_List_Js',\n\t{\n\t\ttriggerEditEvent: function (editUrl) {\n\t\t\tAppConnector.request(editUrl).done(function (data) {\n\t\t\t\tapp.showModalWindow(data);\n\t\t\t\tjQuery('#cronJobSaveAjax').validationEngine(app.validationEngineOptions);\n\t\t\t\tvar listViewInstance = Settings_CronTasks_List_Js.getInstance();\n\t\t\t\tlistViewInstance.registerSaveEvent();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tgetListViewRecords: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'List'\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tjQuery('#listViewContents').html(data);\n\t\t\t\tthisInstance.registerSortableEvent();\n\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterSaveEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#cronJobSaveAjax').on('submit', function (e) {\n\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\tvar validationResult = form.validationEngine('validate');\n\t\t\t\tif (validationResult == true) {\n\t\t\t\t\tvar timeFormat = jQuery('#time_format').val();\n\t\t\t\t\tvar frequencyElement = jQuery('#frequencyValue');\n\t\t\t\t\tif (timeFormat == 'hours') {\n\t\t\t\t\t\tvar frequencyValue = frequencyElement.val() * 60 * 60;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrequencyValue = frequencyElement.val() * 60;\n\t\t\t\t\t}\n\t\t\t\t\tvar message = app.vtranslate('JS_VALUE_SHOULD_NOT_BE_LESS_THAN');\n\t\t\t\t\tvar minimumFrequency = jQuery('#minimumFrequency').val();\n\t\t\t\t\tvar minutes = app.vtranslate('JS_MINUTES');\n\t\t\t\t\tif (frequencyValue < minimumFrequency) {\n\t\t\t\t\t\tfrequencyElement.validationEngine(\n\t\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\t\tmessage + ' ' + minimumFrequency / 60 + ' ' + minutes,\n\t\t\t\t\t\t\t'error'\n\t\t\t\t\t\t);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery('#frequency').val(frequencyValue);\n\t\t\t\t\t}\n\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tif (typeof data.result !== 'undefined' && data.result[0] == true) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\n\t\tregisterSortableEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar sequenceList = {};\n\t\t\tvar tbody = jQuery('tbody', jQuery('.listViewEntriesTable'));\n\t\t\ttbody.sortable({\n\t\t\t\thelper: function (e, ui) {\n\t\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t\t//look like distrubed\n\t\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\t\telement = jQuery(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tcontainment: tbody,\n\t\t\t\trevert: true,\n\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\tjQuery('tbody tr').each(function (i) {\n\t\t\t\t\t\tsequenceList[++i] = jQuery(this).data('id');\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'UpdateSequence'\n\t\t\t\t\t};\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events\n\t\t * @returns {undefined}\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerSortableEvent();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","triggerEditEvent","editUrl","AppConnector","request","done","data","app","showModalWindow","jQuery","validationEngine","validationEngineOptions","listViewInstance","Settings_CronTasks_List_Js","getInstance","registerSaveEvent","getListViewRecords","thisInstance","params","module","getModuleName","parent","getParentModuleName","view","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","html","registerSortableEvent","mode","on","e","form","currentTarget","validationResult","timeFormat","val","frequencyElement","frequencyValue","message","vtranslate","minimumFrequency","minutes","preventDefault","serializeFormData","result","hideModalWindow","sequenceList","tbody","sortable","helper","ui","children","each","index","element","width","containment","revert","update","i","sequencesList","JSON","stringify","action","registerEvents"],"mappings":"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"}