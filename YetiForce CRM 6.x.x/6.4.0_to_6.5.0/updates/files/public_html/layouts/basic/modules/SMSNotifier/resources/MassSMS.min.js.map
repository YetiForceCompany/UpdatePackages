{"version":3,"file":"MassSMS.min.js","sources":["MassSMS.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'SMSNotifier_MassSMS_Js',\n\t{},\n\t{\n\t\t/** Modal container */\n\t\tcontainer: false,\n\t\t/** Message field */\n\t\tmessageField: false,\n\n\t\t/**\n\t\t * Register save\n\t\t */\n\t\tregisterSave: function () {\n\t\t\tthis.container.find('.js-modal__save').on('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(form.serializeFormData())\n\t\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttextTrusted: false,\n\t\t\t\t\t\t\t\ttext: response.result.message + ` (${response.result.count})`,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(() => {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.always(() => {\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register templates\n\t\t */\n\t\tregisterTemplate: function () {\n\t\t\tlet templateField = this.container.find('select#template');\n\t\t\ttemplateField.on('change', (e) => {\n\t\t\t\tif (e.target.value) {\n\t\t\t\t\tthis.messageField.val(e.target.value);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.messageField = this.container.find('[name=\"message\"]');\n\t\t\tthis.registerTemplate();\n\t\t\tthis.registerSave();\n\t\t\tnew App.Fields.Text.Completions(this.messageField, {\n\t\t\t\tcompletionsCollection: { emojis: true },\n\t\t\t\tautolink: false\n\t\t\t});\n\t\t\tApp.Fields.MultiImage.register(this.container);\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","messageField","registerSave","_this","find","on","e","preventDefault","form","validationEngine","progress","progressIndicator","message","app","vtranslate","blockInfo","enabled","AppConnector","request","serializeFormData","done","response","showNotify","textTrusted","text","result","concat","count","type","hideModalWindow","fail","title","always","mode","registerTemplate","_this2","templateField","target","value","val","registerEvents","modalContainer","App","Fields","Text","Completions","completionsCollection","emojis","autolink","MultiImage","register"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,CAAC,CAACC,KAAK,CACN,wBAAwB,CACxB,EAAE,CACF,uBAECC,SAAS,CAAA,CAAA,CAAO,qBAEhBC,YAAY,GAAO;AAGrB;AACA,KACEC,YAAY,CAAE,SAAAA,cAAY,CAAA,IAAAC,KAAA,CACzB,IAAA,CAAA,IAAI,CAACH,SAAS,CAACI,IAAI,CAAC,iBAAiB,CAAC,CAACC,EAAE,CAAC,OAAO,CAAE,SAACC,CAAC,CAAK,CACzDA,CAAC,CAACC,cAAc,EAAE,CAClB,IAAIC,IAAI,CAAGL,KAAI,CAACH,SAAS,CAACI,IAAI,CAAC,MAAM,CAAC,CACtC,GAAII,IAAI,CAACC,gBAAgB,CAAC,UAAU,CAAC,CAAE,CACtC,IAAIC,QAAQ,CAAGZ,CAAC,CAACa,iBAAiB,CAAC,CAClCC,OAAO,CAAEC,GAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,CAC9CC,SAAS,CAAE,CAAEC,OAAO,CAAA,CAAA,CAAO,CAC5B,CAAC,CAAC,CACFC,YAAY,CAACC,OAAO,CAACV,IAAI,CAACW,iBAAiB,EAAE,CAAC,CAC5CC,IAAI,CAAC,SAACC,QAAQ,CAAK,CACnBR,GAAG,CAACS,UAAU,CAAC,CACdC,WAAW,CAAO,CAAA,CAAA,CAClBC,IAAI,CAAEH,QAAQ,CAACI,MAAM,CAACb,OAAO,CAAAc,IAAAA,CAAAA,MAAA,CAAQL,QAAQ,CAACI,MAAM,CAACE,KAAK,CAAG,GAAA,CAAA,CAC7DC,IAAI,CAAE,MACP,CAAC,CAAC,CACFf,GAAG,CAACgB,eAAe,GACpB,CAAC,CAAC,CACDC,IAAI,CAAC,UAAM,CACXjB,GAAG,CAACS,UAAU,CAAC,CACdS,KAAK,CAAElB,GAAG,CAACC,UAAU,CAAC,UAAU,CAAC,CACjCc,IAAI,CAAE,OACP,CAAC,EACF,CAAC,CAAC,CACDI,MAAM,CAAC,UAAM,CACbtB,QAAQ,CAACC,iBAAiB,CAAC,CAAEsB,IAAI,CAAE,MAAO,CAAC,EAC5C,CAAC,EACH,CACD,CAAC,EACF,CAAC;AAEH;AACA,KACEC,gBAAgB,CAAE,SAAAA,gBAAAA,EAAY,CAAAC,IAAAA,MAAA,CACzBC,IAAAA,CAAAA,aAAa,CAAG,IAAI,CAACpC,SAAS,CAACI,IAAI,CAAC,iBAAiB,CAAC,CAC1DgC,aAAa,CAAC/B,EAAE,CAAC,QAAQ,CAAE,SAACC,CAAC,CAAK,CAC7BA,CAAC,CAAC+B,MAAM,CAACC,KAAK,EACjBH,MAAI,CAAClC,YAAY,CAACsC,GAAG,CAACjC,CAAC,CAAC+B,MAAM,CAACC,KAAK,EAEtC,CAAC,EACF,CAAC;AAGH;AACA;AACA,KACEE,cAAc,CAAE,SAAAA,cAAUC,CAAAA,cAAc,CAAE,CACzC,IAAI,CAACzC,SAAS,CAAGyC,cAAc,CAC/B,IAAI,CAACxC,YAAY,CAAG,IAAI,CAACD,SAAS,CAACI,IAAI,CAAC,oBAAkB,CAAC,CAC3D,IAAI,CAAC8B,gBAAgB,EAAE,CACvB,IAAI,CAAChC,YAAY,EAAE,CACnB,IAAIwC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACC,WAAW,CAAC,IAAI,CAAC5C,YAAY,CAAE,CAClD6C,qBAAqB,CAAE,CAAEC,MAAM,GAAO,CAAC,CACvCC,QAAQ,CAAA,CAAA,CACT,CAAC,CAAC,CACFN,GAAG,CAACC,MAAM,CAACM,UAAU,CAACC,QAAQ,CAAC,IAAI,CAAClD,SAAS,EAC9C,CACD,CACD,CAAC;;"}