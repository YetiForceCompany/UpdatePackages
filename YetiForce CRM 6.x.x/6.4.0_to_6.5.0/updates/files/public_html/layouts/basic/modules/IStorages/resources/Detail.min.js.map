{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'IStorages_Detail_Js',\n\t{},\n\t{\n\t\t//It stores the IStorages Hierarchy response data\n\t\thierarchyResponseCache: {},\n\t\t/*\n\t\t * function to get the IStoragesHierarchy response data\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\t//Check in the cache\n\t\t\tif (!jQuery.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t//store it in the cache, so that we dont do multiple request\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the IStorages Hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function (data) {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modalContainer) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll', modalContainer));\n\t\t\t\tif (typeof callbackFunction == 'function' && jQuery('#hierarchyScroll', modalContainer).height() > 300) {\n\t\t\t\t\tcallbackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.detailViewTitle .hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\t\tvar url = 'index.php?module=IStorages&view=Hierarchy&record=' + app.getRecordId();\n\t\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\t\tthisInstance.getHierarchyResponseData(url).done(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","thisInstance","aDeferred","jQuery","Deferred","isEmptyObject","AppConnector","request","done","data","resolve","promise","displayHierarchyResponseData","callbackFunction","app","showScrollBar","$","height","railVisible","size","showModalWindow","modalContainer","App","Components","Scrollbar","xy","registerHierarchyRecordCount","hierarchyButton","length","module","getModuleName","action","record","getRecordId","mode","response","success","html","result","registerShowHierarchy","url","on","registerEvents","_super"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,gBAAgB,CACf,qBAAqB,CACrB,EAAE,CACF;AAECC,sBAAsB,CAAE,EAAE;AAE5B;AACA,KACEC,wBAAwB,CAAE,SAAAA,yBAAUC,MAAM,CAAE,KACvCC,YAAY,CAAG,IAAI,CACnBC,SAAS,CAAGC,MAAM,CAACC,QAAQ,EAAE,CAEjC;AAUA,OATKD,MAAM,CAACE,aAAa,CAACJ,YAAY,CAACH,sBAAsB,CAAC,CAG7DQ,YAAY,CAACC,OAAO,CAACP,MAAM,CAAC,CAACQ,IAAI,CAAC,SAAUC,IAAI,CAAE,CAEjDR,YAAY,CAACH,sBAAsB,CAAGW,IAAI,CAC1CP,SAAS,CAACQ,OAAO,CAACT,YAAY,CAACH,sBAAsB,EACtD,CAAC,CAAC,CANFI,SAAS,CAACQ,OAAO,CAACT,YAAY,CAACH,sBAAsB,CAAC,CAQhDI,SAAS,CAACS,OAAO,EACzB,CAAC;AAEH;AACA,KACEC,4BAA4B,CAAE,SAAAA,4BAAAA,CAAUH,IAAI,CAAE,CAC7C,IAAII,gBAAgB,CAAG,UAAgB,CACtCC,GAAG,CAACC,aAAa,CAACC,CAAC,CAAC,kBAAkB,CAAC,CAAE,CACxCC,MAAM,CAAE,OAAO,CACfC,WAAW,CAAA,CAAA,CAAM,CACjBC,IAAI,CAAE,KACP,CAAC,EACF,CAAC,CACDL,GAAG,CAACM,eAAe,CAACX,IAAI,CAAE,SAAUY,cAAc,CAAE,CACnDC,GAAG,CAACC,UAAU,CAACC,SAAS,CAACC,EAAE,CAACT,CAAC,CAAC,kBAAkB,CAAEK,cAAc,CAAC,CAAC,CACnC,UAAU,EAArC,OAAOR,gBAA8B,EAA0D,GAAG,CAAzDV,MAAM,CAAC,kBAAkB,CAAEkB,cAAc,CAAC,CAACJ,MAAM,EAAQ,EACrGJ,gBAAgB,CAACJ,IAAI,EAEvB,CAAC,EACF,CAAC,CACDiB,4BAA4B,CAAE,SAAAA,8BAAY,CACzC,IAAIC,eAAe,CAAGX,CAAC,CAAC,6BAA6B,CAAC,CACtD,GAAIW,eAAe,CAACC,MAAM,CAAE,CAC3B,IAAI5B,MAAM,CAAG,CACZ6B,MAAM,CAAEf,GAAG,CAACgB,aAAa,EAAE,CAC3BC,MAAM,CAAE,cAAc,CACtBC,MAAM,CAAElB,GAAG,CAACmB,WAAW,EAAE,CACzBC,IAAI,CAAE,mBACP,CAAC,CACD5B,YAAY,CAACC,OAAO,CAACP,MAAM,CAAC,CAACQ,IAAI,CAAC,SAAU2B,QAAQ,CAAE,CACjDA,QAAQ,CAACC,OAAO,EACnBpB,CAAC,CAAC,oCAAoC,CAAC,CAACqB,IAAI,CAACF,QAAQ,CAACG,MAAM,EAE9D,CAAC,EACF,CACD,CAAC,CACDC,qBAAqB,CAAE,SAAAA,uBAAY,CAAA,IAC9BtC,YAAY,CAAG,IAAI,CACnB0B,eAAe,CAAGX,CAAC,CAAC,kBAAkB,CAAC,CACvCwB,GAAG,CAAG,mDAAmD,CAAG1B,GAAG,CAACmB,WAAW,EAAE,CACjFN,eAAe,CAACc,EAAE,CAAC,OAAO,CAAE,kBAAkB,CAAE,UAAa,CAC5DxC,YAAY,CAACF,wBAAwB,CAACyC,GAAG,CAAC,CAAChC,IAAI,CAAC,SAAUC,IAAI,CAAE,CAC/DR,YAAY,CAACW,4BAA4B,CAACH,IAAI,EAC/C,CAAC,EACF,CAAC,EACF,CAAC,CACDiC,cAAc,CAAE,SAAAA,cAAA,EAAY,CAC3B,IAAI,CAACC,MAAM,EAAE,CACb,IAAI,CAACjB,4BAA4B,EAAE,CACnC,IAAI,CAACa,qBAAqB,GAC3B,CACD,CACD,CAAC;;"}