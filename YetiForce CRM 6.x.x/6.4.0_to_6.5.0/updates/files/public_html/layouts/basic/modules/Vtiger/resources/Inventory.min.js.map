{"version":3,"file":"Inventory.min.js","sources":["Inventory.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Vtiger_Inventory_Js',\n\t{\n\t\tinventoryInstance: false,\n\n\t\t/**\n\t\t * Get inventory instance\n\t\t * @param {jQuery} container\n\t\t * @returns {Vtiger_Inventory_Js}\n\t\t */\n\t\tgetInventoryInstance: function (container) {\n\t\t\tif (this.inventoryInstance === false) {\n\t\t\t\tlet moduleClassName = container.find('[name=\"module\"]').val() + '_Inventory_Js';\n\t\t\t\tif (typeof window[moduleClassName] === 'undefined') {\n\t\t\t\t\tmoduleClassName = 'Vtiger_Inventory_Js';\n\t\t\t\t}\n\t\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\t\tthis.inventoryInstance = new window[moduleClassName]();\n\t\t\t\t\tthis.inventoryInstance.registerEvents(container);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.inventoryInstance;\n\t\t}\n\t},\n\t{\n\t\tform: false,\n\t\tdiscount: false,\n\t\ttax: false,\n\t\tinventoryContainer: false,\n\t\tinventoryHeadContainer: false,\n\t\tsummaryTaxesContainer: false,\n\t\tsummaryDiscountContainer: false,\n\t\tsummaryCurrenciesContainer: false,\n\t\trowClass: 'tr.inventoryRow',\n\t\tdiscountModalFields: [\n\t\t\t'aggregationType',\n\t\t\t'globalDiscount',\n\t\t\t'groupCheckbox',\n\t\t\t'groupDiscount',\n\t\t\t'individualDiscount',\n\t\t\t'individualDiscountType',\n\t\t\t'additionalDiscount'\n\t\t],\n\t\ttaxModalFields: ['aggregationType', 'globalTax', 'groupCheckbox', 'groupTax', 'individualTax', 'regionalTax'],\n\t\t/**\n\t\t * Get current form element\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetForm() {\n\t\t\treturn this.form;\n\t\t},\n\t\t/**\n\t\t * Get current form element\n\t\t * @returns {jQuery}\n\t\t */\n\t\tloadConfig() {\n\t\t\tthis.discount = JSON.parse(this.form.find('.js-discount-config').val());\n\t\t\tthis.tax = JSON.parse(this.form.find('.js-tax-config').val());\n\t\t},\n\t\t/**\n\t\t * Function that is used to get the line item container\n\t\t * @return : jQuery object\n\t\t */\n\t\tgetInventoryItemsContainer: function () {\n\t\t\tif (this.inventoryContainer === false) {\n\t\t\t\tthis.inventoryContainer = $('.inventoryItems');\n\t\t\t}\n\t\t\treturn this.inventoryContainer;\n\t\t},\n\t\tgetInventoryHeadContainer: function () {\n\t\t\tif (this.inventoryHeadContainer === false) {\n\t\t\t\tthis.inventoryHeadContainer = $('.inventoryHeader');\n\t\t\t}\n\t\t\treturn this.inventoryHeadContainer;\n\t\t},\n\t\tgetInventorySummaryDiscountContainer: function () {\n\t\t\tif (this.summaryDiscountContainer === false) {\n\t\t\t\tthis.summaryDiscountContainer = $('.inventorySummaryDiscounts');\n\t\t\t}\n\t\t\treturn this.summaryDiscountContainer;\n\t\t},\n\t\tgetInventorySummaryTaxesContainer: function () {\n\t\t\tif (this.summaryTaxesContainer === false) {\n\t\t\t\tthis.summaryTaxesContainer = $('.inventorySummaryTaxes');\n\t\t\t}\n\t\t\treturn this.summaryTaxesContainer;\n\t\t},\n\t\tgetInventorySummaryCurrenciesContainer: function () {\n\t\t\tif (this.summaryCurrenciesContainer === false) {\n\t\t\t\tthis.summaryCurrenciesContainer = $('.inventorySummaryCurrencies');\n\t\t\t}\n\t\t\treturn this.summaryCurrenciesContainer;\n\t\t},\n\t\tgetNextLineItemRowNumber: function () {\n\t\t\tlet $inventoryItemsNo = $('#inventoryItemsNo');\n\t\t\tlet rowNumber = parseInt($inventoryItemsNo.val()) + 1;\n\t\t\t$inventoryItemsNo.val(rowNumber);\n\t\t\treturn rowNumber;\n\t\t},\n\t\tgetAccountId: function () {\n\t\t\tlet accountReferenceField = $('#accountReferenceField').val();\n\t\t\tif (accountReferenceField != '') {\n\t\t\t\treturn $('[name=\"' + accountReferenceField + '\"]').val();\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\t\tcheckDeleteIcon: function () {\n\t\t\tif (this.getInventoryItemsContainer().find(this.rowClass).length > 1) {\n\t\t\t\tthis.showLineItemsDeleteIcon();\n\t\t\t} else if (app.getMainParams('isRequiredInventory')) {\n\t\t\t\tthis.hideLineItemsDeleteIcon();\n\t\t\t}\n\t\t},\n\t\tshowLineItemsDeleteIcon: function () {\n\t\t\tthis.getInventoryItemsContainer().find('.deleteRow').removeClass('d-none');\n\t\t},\n\t\thideLineItemsDeleteIcon: function () {\n\t\t\tthis.getInventoryItemsContainer().find('.deleteRow').addClass('d-none');\n\t\t},\n\t\tgetClosestRow: function (element) {\n\t\t\treturn element.closest(this.rowClass);\n\t\t},\n\t\t/**\n\t\t * Function which will return the basic row which can be used to add new rows\n\t\t * @return jQuery object which you can use to\n\t\t */\n\t\tgetBasicRow: function () {\n\t\t\treturn this.getForm().find('.js-inventory-base-item').eq(0).clone(true, true);\n\t\t},\n\t\tisRecordSelected: function (element) {\n\t\t\tlet parentRow = element.closest('tr');\n\t\t\tlet productField = parentRow.find('.recordLabel');\n\t\t\treturn productField.validationEngine('validate');\n\t\t},\n\t\tgetTaxModeSelectElement: function (row) {\n\t\t\tlet items = this.getInventoryHeadContainer();\n\t\t\tif (items.find('thead .js-taxmode').length > 0) {\n\t\t\t\treturn $('.js-taxmode');\n\t\t\t}\n\t\t\tif (row) {\n\t\t\t\treturn row.find('.js-taxmode');\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tisIndividualTaxMode: function (row) {\n\t\t\tlet selectedOption = this.getTaxModeSelectElement(row).find('option:selected');\n\t\t\tif (selectedOption.length !== 0) {\n\t\t\t\treturn selectedOption.val() == 1;\n\t\t\t}\n\t\t\treturn this.tax.default_mode == 1;\n\t\t},\n\t\tisGroupTaxMode: function () {\n\t\t\tlet selectedOption = this.getTaxModeSelectElement();\n\t\t\tif (selectedOption && (selectedOption = selectedOption.find('option:selected')) && selectedOption.length !== 0) {\n\t\t\t\treturn selectedOption.val() == 0;\n\t\t\t}\n\t\t\treturn this.tax.default_mode == 0;\n\t\t},\n\t\tshowIndividualTax: function (row) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet groupTax = thisInstance.getInventorySummaryTaxesContainer().find('.groupTax');\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\tlet newRow = $('#blackIthemTable').find('tbody');\n\t\t\tif (thisInstance.isIndividualTaxMode()) {\n\t\t\t\tgroupTax.addClass('d-none');\n\t\t\t\titems.find('.changeTax').removeClass('d-none');\n\t\t\t\tnewRow.find('.changeTax').removeClass('d-none');\n\t\t\t\tlet parentRow = thisInstance.getInventoryItemsContainer();\n\t\t\t\tlet taxParam = { aggregationType: 'global' };\n\n\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\tlet thisItem = $(this);\n\t\t\t\t\ttaxParam['globalTax'] = parseFloat(thisItem.find('.js-tax').attr('data-default-tax'));\n\t\t\t\t\tthisInstance.setTaxParam(thisItem, taxParam);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthisInstance.setTax(items, 0);\n\t\t\t\tthisInstance.setTaxPercent(items, 0);\n\t\t\t\tthisInstance.setTaxParam(items, []);\n\t\t\t\tthisInstance.setDefaultGlobalTax(row);\n\t\t\t\tgroupTax.removeClass('d-none');\n\t\t\t\titems.find('.changeTax').addClass('d-none');\n\t\t\t\tnewRow.find('.changeTax').addClass('d-none');\n\t\t\t}\n\t\t\tthisInstance.rowsCalculations();\n\t\t},\n\t\tsetDefaultGlobalTax: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet parentRow = thisInstance.getInventoryItemsContainer();\n\t\t\tlet taxDefaultValue = thisInstance\n\t\t\t\t.getInventorySummaryTaxesContainer()\n\t\t\t\t.find('.js-default-tax')\n\t\t\t\t.data('tax-default-value');\n\t\t\tlet isGroupTax = thisInstance.isGroupTaxMode();\n\t\t\tlet summaryContainer = $('#blackIthemTable');\n\t\t\tif (isGroupTax) {\n\t\t\t\tlet taxParam = thisInstance.getTaxParams(summaryContainer);\n\t\t\t\tif (taxParam === false && taxDefaultValue) {\n\t\t\t\t\ttaxParam = { aggregationType: 'global' };\n\t\t\t\t\ttaxParam['globalTax'] = taxDefaultValue;\n\t\t\t\t\ttaxParam['individualTax'] = '';\n\t\t\t\t}\n\t\t\t\tif (taxParam) {\n\t\t\t\t\tthisInstance.setTaxParam(summaryContainer, taxParam);\n\t\t\t\t\tthisInstance.setTaxParam(parentRow, taxParam);\n\t\t\t\t\tparentRow.closest('.inventoryItems').data('taxParam', JSON.stringify(taxParam));\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthisInstance.setTaxParam(summaryContainer, []);\n\t\t\t\tparentRow.closest('.inventoryItems').data('taxParam', '[]');\n\t\t\t}\n\t\t},\n\t\tgetDiscountModeSelectElement: function (row) {\n\t\t\tlet items = this.getInventoryHeadContainer();\n\t\t\tif (items.find('thead .js-discountmode').length > 0) {\n\t\t\t\treturn $('.js-discountmode');\n\t\t\t}\n\t\t\treturn row.find('.js-discountmode');\n\t\t},\n\t\tisIndividualDiscountMode: function (row) {\n\t\t\tlet selectedOption = this.getDiscountModeSelectElement(row).find('option:selected');\n\t\t\tif (selectedOption.length === 0) {\n\t\t\t\treturn this.discount.default_mode == 1;\n\t\t\t}\n\t\t\treturn selectedOption.val() == 1;\n\t\t},\n\t\tshowIndividualDiscount: function (row) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet groupDiscount = thisInstance.getInventorySummaryDiscountContainer().find('.groupDiscount');\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\tlet newRow = $('#blackIthemTable').find('tbody');\n\t\t\tif (thisInstance.isIndividualDiscountMode(row)) {\n\t\t\t\tgroupDiscount.addClass('d-none');\n\t\t\t\titems.find('.js-change-discount').removeClass('d-none');\n\t\t\t\tnewRow.find('.js-change-discount').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tgroupDiscount.removeClass('d-none');\n\t\t\t\titems.find('.js-change-discount').addClass('d-none');\n\t\t\t\tnewRow.find('.js-change-discount').addClass('d-none');\n\t\t\t}\n\t\t\tthisInstance.setDiscount(items, 0);\n\t\t\tthisInstance.setDiscountParam(items, []);\n\t\t\tthisInstance.rowsCalculations();\n\t\t},\n\t\tgetCurrency: function () {\n\t\t\treturn $('.js-currency', this.getInventoryHeadContainer()).find('option:selected').val();\n\t\t},\n\t\t/**\n\t\t * Get discount aggregation\n\t\t *@returns {int}\n\t\t */\n\t\tgetDiscountAggregation: function () {\n\t\t\tconst element = $('.js-discount_aggreg', this.getInventoryHeadContainer()).find('option:selected');\n\t\t\tif (element.length) {\n\t\t\t\treturn parseInt(element.val());\n\t\t\t}\n\t\t\treturn parseInt(this.discount.aggregation);\n\t\t},\n\t\tgetTax: function (row) {\n\t\t\tconst self = this;\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return 0;\n\t\t\ttaxParams = JSON.parse(taxParams);\n\t\t\tlet valuePrices = this.getNetPrice(row);\n\t\t\tlet taxRate = 0;\n\t\t\tlet types = taxParams.aggregationType;\n\t\t\tif (typeof types == 'string') {\n\t\t\t\ttypes = [types];\n\t\t\t}\n\t\t\tif (types) {\n\t\t\t\ttypes.forEach(function (entry) {\n\t\t\t\t\tlet taxValue = 0;\n\t\t\t\t\tswitch (entry) {\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\ttaxValue = taxParams.individualTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\t\ttaxValue = taxParams.globalTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\ttaxValue = taxParams.groupTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'regional':\n\t\t\t\t\t\t\ttaxValue = taxParams.regionalTax;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttaxRate += valuePrices * (taxValue / 100);\n\t\t\t\t\tif (self.tax.aggregation == 2) {\n\t\t\t\t\t\tvaluePrices = valuePrices + taxRate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn taxRate;\n\t\t},\n\t\tgetTaxPercent: function (row) {\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return 0;\n\t\t\ttaxParams = JSON.parse(taxParams);\n\t\t\tlet taxPercent = 0;\n\t\t\tlet types =\n\t\t\t\ttypeof taxParams.aggregationType === 'string' ? [taxParams.aggregationType] : taxParams.aggregationType;\n\t\t\ttypes.forEach(function (aggregationType) {\n\t\t\t\ttaxPercent += taxParams[aggregationType + 'Tax'] || 0;\n\t\t\t});\n\t\t\treturn taxPercent;\n\t\t},\n\t\tgetTaxParams: function (row) {\n\t\t\tlet taxParams = row.find('.taxParam').val();\n\t\t\tif (taxParams == '' || taxParams == '[]' || taxParams == undefined) return false;\n\t\t\treturn JSON.parse(taxParams);\n\t\t},\n\t\tgetQuantityValue: function (row) {\n\t\t\treturn $('.qty', row).getNumberFromValue();\n\t\t},\n\t\tgetUnitPriceValue: function (row) {\n\t\t\treturn $('.unitPrice', row).getNumberFromValue();\n\t\t},\n\t\tgetDiscount: function (row) {\n\t\t\tlet discountParams = row.find('.discountParam').val();\n\t\t\tif (discountParams == '' || discountParams == 'null' || discountParams == '[]' || discountParams == undefined) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tconst aggregation = this.getDiscountAggregation();\n\t\t\tdiscountParams = JSON.parse(discountParams);\n\t\t\tlet valuePrices = this.getTotalPrice(row),\n\t\t\t\tdiscountRate = 0,\n\t\t\t\ttypes = discountParams.aggregationType;\n\t\t\tif (typeof types == 'string') {\n\t\t\t\ttypes = [types];\n\t\t\t}\n\t\t\tif (types) {\n\t\t\t\ttypes.forEach((entry) => {\n\t\t\t\t\tswitch (entry) {\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\tif (discountParams.individualDiscountType === 'percentage') {\n\t\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.individualDiscount / 100);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdiscountRate += discountParams.individualDiscount;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.globalDiscount / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * ((discountParams.groupDiscount ? discountParams.groupDiscount : 0) / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'additional':\n\t\t\t\t\t\t\tdiscountRate += valuePrices * (discountParams.additionalDiscount / 100);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (aggregation === 2) {\n\t\t\t\t\t\tvaluePrices = valuePrices - discountRate;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn discountRate;\n\t\t},\n\t\tgetNetPrice: function (row) {\n\t\t\treturn this.getTotalPrice(row) - this.getDiscount(row);\n\t\t},\n\t\tgetTotalPrice: function (row) {\n\t\t\treturn this.getQuantityValue(row) * this.getUnitPriceValue(row);\n\t\t},\n\t\tgetGrossPrice: function (row) {\n\t\t\treturn $('.grossPrice', row).getNumberFromValue();\n\t\t},\n\t\tgetPurchase: function (row) {\n\t\t\tlet qty = this.getQuantityValue(row);\n\t\t\tlet element = $('.purchase', row);\n\t\t\tlet purchase = 0;\n\t\t\tif (element.length > 0) {\n\t\t\t\tpurchase = App.Fields.Double.formatToDb(element.val());\n\t\t\t}\n\t\t\treturn purchase * qty;\n\t\t},\n\t\tgetSummaryGrossPrice: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet price = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tprice += thisInstance.getGrossPrice($(this));\n\t\t\t\t});\n\t\t\treturn App.Fields.Double.formatToDb(price);\n\t\t},\n\t\t/**\n\t\t * Set currency\n\t\t * @param {int} val\n\t\t */\n\t\tsetCurrency(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-currency').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set currency param\n\t\t * @param {string} val json string\n\t\t */\n\t\tsetCurrencyParam(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-currencyparam').val(val);\n\t\t},\n\t\t/**\n\t\t * Set discount mode\n\t\t * @param {int} val\n\t\t */\n\t\tsetDiscountMode(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-discountmode').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set tax mode\n\t\t * @param {int} val\n\t\t */\n\t\tsetTaxMode(val) {\n\t\t\tthis.getInventoryHeadContainer().find('.js-taxmode').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set inventory id\n\t\t * @param {jQuery} row\n\t\t * @param {int} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetName(row, val, display) {\n\t\t\trow.find('.js-name').val(val).trigger('change');\n\t\t\trow.find('.js-name_display').val(display).attr('readonly', 'true').trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set inventory row quantity\n\t\t * @param {jQuery} row\n\t\t * @param {int} val\n\t\t */\n\t\tsetQuantity(row, val) {\n\t\t\trow.find('.qty').val(val).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set unit original (db) value\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetUnit(row, val, display) {\n\t\t\trow.find('.unit').val(val).trigger('change');\n\t\t\trow.find('.unitText').text(display).trigger('change');\n\t\t},\n\t\t/**\n\t\t * Set subUnit original (db) value\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t * @param {string} display\n\t\t */\n\t\tsetSubUnit(row, val, display) {\n\t\t\trow.find('.subunit').val(val);\n\t\t\trow.find('.subunitText').val(display);\n\t\t},\n\t\t/**\n\t\t * Set inventory row comment\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetComment(row, val) {\n\t\t\trow\n\t\t\t\t.parent()\n\t\t\t\t.find('[numrowex=' + row.attr('numrow') + '] .comment')\n\t\t\t\t.val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row unit price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetUnitPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\trow.find('.unitPrice').val(val).attr('title', val);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Set inventory row purchase\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetPurchase: function (row, val) {\n\t\t\trow.find('.purchase').val(App.Fields.Double.formatToDisplay(val));\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Set inventory row net price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetNetPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.netPriceText', row).text(val);\n\t\t\t$('.netPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row gross price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetGrossPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.grossPriceText', row).text(val);\n\t\t\t$('.grossPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row total price\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTotalPrice: function (row, val) {\n\t\t\tval = App.Fields.Double.formatToDisplay(val);\n\t\t\t$('.totalPriceText', row).text(val);\n\t\t\t$('.totalPrice', row).val(val);\n\t\t},\n\t\t/**\n\t\t * Set inventory row margin\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetMargin: function (row, val) {\n\t\t\t$('.margin', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row margin percent\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetMarginP: function (row, val) {\n\t\t\t$('.marginp', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row discount\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetDiscount: function (row, val) {\n\t\t\t$('.discount', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row discount param\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetDiscountParam: function (row, val) {\n\t\t\t$('.discountParam', row).val(JSON.stringify(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTax: function (row, val) {\n\t\t\t$('.tax', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax percent\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTaxPercent: function (row, val) {\n\t\t\t$('.js-tax-percent', row).val(App.Fields.Double.formatToDisplay(val));\n\t\t},\n\t\t/**\n\t\t * Set inventory row tax param\n\t\t * @param {jQuery} row\n\t\t * @param {string} val\n\t\t */\n\t\tsetTaxParam: function (row, val) {\n\t\t\t$('.taxParam', row).val(JSON.stringify(val));\n\t\t},\n\t\tquantityChangeActions: function (row) {\n\t\t\tthis.rowCalculations(row);\n\t\t\tthis.summaryCalculations();\n\t\t},\n\t\trowCalculations: function (row) {\n\t\t\tthis.calculateTotalPrice(row);\n\t\t\tthis.calculateDiscounts(row);\n\t\t\tthis.calculateNetPrice(row);\n\t\t\tthis.calculateTaxes(row);\n\t\t\tthis.calculateGrossPrice(row);\n\t\t\tthis.calculateMargin(row);\n\t\t\tapp.event.trigger('Inventory.RowCalculations', this, row);\n\t\t},\n\t\trowsCalculations: function () {\n\t\t\tconst self = this;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(self.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tself.syncHeaderData(row);\n\t\t\t\t\tself.quantityChangeActions(row);\n\t\t\t\t});\n\t\t\tself.calculateItemNumbers();\n\t\t},\n\t\tcalculateDiscounts: function (row) {\n\t\t\tthis.setDiscount(row, this.getDiscount(row));\n\t\t},\n\t\tcalculateTaxes: function (row) {\n\t\t\tthis.setTax(row, this.getTax(row));\n\t\t\tthis.setTaxPercent(row, this.getTaxPercent(row));\n\t\t},\n\t\tsummaryCalculations: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthisInstance\n\t\t\t\t.getInventoryItemsContainer()\n\t\t\t\t.find('tfoot .wisableTd')\n\t\t\t\t.each(function () {\n\t\t\t\t\tthisInstance.calculateSummary($(this), $(this).data('sumfield'));\n\t\t\t\t});\n\t\t\tthisInstance.calculateDiscountSummary();\n\t\t\tthisInstance.calculateTaxSummary();\n\t\t\tthisInstance.calculateCurrenciesSummary();\n\t\t\tthisInstance.calculateMarginPSummary();\n\t\t},\n\t\tcalculateSummary: function (element, field) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet sum = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet e = $(this).find('.' + field);\n\t\t\t\t\tif (e.length > 0) {\n\t\t\t\t\t\tsum += App.Fields.Double.formatToDb(e.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\telement.text(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tcalculateMarginPSummary: function () {\n\t\t\tlet sumRow = this.getInventoryItemsContainer().find('tfoot'),\n\t\t\t\ttotalPriceField =\n\t\t\t\t\tsumRow.find('[data-sumfield=\"netPrice\"]').length > 0\n\t\t\t\t\t\t? sumRow.find('[data-sumfield=\"netPrice\"]')\n\t\t\t\t\t\t: sumRow.find('[data-sumfield=\"totalPrice\"]'),\n\t\t\t\tsumPrice = totalPriceField.getNumberFromText(),\n\t\t\t\tpurchase = 0,\n\t\t\t\tmarginp = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(this.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet qty = $(this).find('.qty').getNumberFromValue(),\n\t\t\t\t\t\tpurchasePrice = $(this).find('.purchase').getNumberFromValue();\n\t\t\t\t\tif (qty > 0 && purchasePrice > 0) {\n\t\t\t\t\t\tpurchase += qty * purchasePrice;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tlet subtraction = sumPrice - purchase;\n\t\t\tif (purchase !== 0 && sumPrice !== 0) {\n\t\t\t\tmarginp = (subtraction * 100) / purchase;\n\t\t\t}\n\t\t\tsumRow.find('[data-sumfield=\"marginP\"]').text(App.Fields.Double.formatToDisplay(marginp) + '%');\n\t\t},\n\t\tcalculateDiscountSummary: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet discount = thisInstance.getAllDiscount();\n\t\t\tlet container = thisInstance.getInventorySummaryDiscountContainer();\n\t\t\tcontainer.find('input').val(App.Fields.Double.formatToDisplay(discount));\n\t\t},\n\t\tgetAllDiscount: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet discount = 0;\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function (index) {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tdiscount += thisInstance.getDiscount(row);\n\t\t\t\t});\n\t\t\treturn discount;\n\t\t},\n\t\tcalculateCurrenciesSummary: function () {\n\t\t\tlet container = this.getInventorySummaryCurrenciesContainer(),\n\t\t\t\tselected = $('.js-currency option:selected', this.getInventoryHeadContainer()),\n\t\t\t\tbase = $('.js-currency option[data-base-currency=\"1\"]', this.getInventoryHeadContainer()),\n\t\t\t\tconversionRate = selected.data('conversionRate'),\n\t\t\t\tbaseConversionRate = base.data('conversionRate');\n\t\t\tif (conversionRate == baseConversionRate) {\n\t\t\t\tcontainer.addClass('d-none');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconversionRate = parseFloat(baseConversionRate) / parseFloat(conversionRate);\n\t\t\tcontainer.removeClass('d-none');\n\t\t\tlet taxes = this.getAllTaxes();\n\t\t\tlet sum = 0;\n\t\t\tcontainer.find('.js-panel__body').html('');\n\t\t\t$.each(taxes, function (index, value) {\n\t\t\t\tif (value != undefined) {\n\t\t\t\t\tvalue = value * conversionRate;\n\t\t\t\t\tlet row = container.find('.d-none .form-group').clone();\n\t\t\t\t\trow.find('.percent').text(index + '%');\n\t\t\t\t\trow.find('input').val(App.Fields.Double.formatToDisplay(value));\n\t\t\t\t\trow.appendTo(container.find('.js-panel__body'));\n\t\t\t\t\tsum += value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('.js-panel__footer input').val(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tcalculateTaxSummary: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet taxes = thisInstance.getAllTaxes();\n\t\t\tlet container = thisInstance.getInventorySummaryTaxesContainer();\n\t\t\tcontainer.find('.js-panel__body').html('');\n\t\t\tlet sum = 0;\n\t\t\tfor (let index in taxes) {\n\t\t\t\tlet row = container.find('.d-none .form-group').clone();\n\t\t\t\trow.find('.percent').text(App.Fields.Double.formatToDisplay(index) + '%');\n\t\t\t\trow.find('input').val(App.Fields.Double.formatToDisplay(taxes[index]));\n\t\t\t\trow.appendTo(container.find('.js-panel__body'));\n\t\t\t\tsum += taxes[index];\n\t\t\t}\n\t\t\tcontainer.find('.js-panel__footer input').val(App.Fields.Double.formatToDisplay(sum));\n\t\t},\n\t\tgetAllTaxes: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet tax = [];\n\t\t\tlet typeSummary = $('.aggregationTypeTax').val();\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(thisInstance.rowClass)\n\t\t\t\t.each(function () {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tlet netPrice = thisInstance.getNetPrice(row);\n\t\t\t\t\tlet params = row.find('.taxParam').val();\n\t\t\t\t\tif (params != '' && params != '[]' && params != undefined) {\n\t\t\t\t\t\tlet param = JSON.parse(params);\n\t\t\t\t\t\tif (typeof param.aggregationType == 'string') {\n\t\t\t\t\t\t\tparam.aggregationType = [param.aggregationType];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (param.aggregationType)\n\t\t\t\t\t\t\t$.each(param.aggregationType, function (_, name) {\n\t\t\t\t\t\t\t\tname = name + 'Tax';\n\t\t\t\t\t\t\t\tif (param[name] == undefined) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet percent = parseFloat(param[name]);\n\t\t\t\t\t\t\t\tlet old = 0;\n\t\t\t\t\t\t\t\tif (tax[percent] != undefined) {\n\t\t\t\t\t\t\t\t\told = parseFloat(tax[percent]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet taxRate = netPrice * (percent / 100);\n\t\t\t\t\t\t\t\ttax[percent] = old + taxRate;\n\t\t\t\t\t\t\t\tif (typeSummary == '2') {\n\t\t\t\t\t\t\t\t\tnetPrice += taxRate;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\treturn tax;\n\t\t},\n\t\tcalculateNetPrice: function (row) {\n\t\t\tthis.setNetPrice(row, this.getNetPrice(row));\n\t\t},\n\t\tcalculateGrossPrice: function (row) {\n\t\t\tlet netPrice = this.getNetPrice(row);\n\t\t\tif (this.isIndividualTaxMode(row) || this.isGroupTaxMode(row)) {\n\t\t\t\tnetPrice += this.getTax(row);\n\t\t\t}\n\t\t\tthis.setGrossPrice(row, netPrice);\n\t\t},\n\t\tcalculateTotalPrice: function (row) {\n\t\t\tthis.setTotalPrice(row, this.getTotalPrice(row));\n\t\t},\n\t\tcalculateMargin: function (row) {\n\t\t\tlet netPrice;\n\t\t\tif ($('.netPrice', row).length) {\n\t\t\t\tnetPrice = this.getNetPrice(row);\n\t\t\t} else {\n\t\t\t\tnetPrice = this.getTotalPrice(row) - this.getDiscount(row);\n\t\t\t}\n\t\t\tlet purchase = this.getPurchase(row);\n\t\t\tlet margin = netPrice - purchase;\n\t\t\tthis.setMargin(row, margin);\n\t\t\tlet marginp = '0';\n\t\t\tif (purchase !== 0) {\n\t\t\t\tmarginp = (margin / purchase) * 100;\n\t\t\t}\n\t\t\tthis.setMarginP(row, marginp);\n\t\t},\n\t\tcalculateDiscount: function (_row, modal) {\n\t\t\tconst netPriceBeforeDiscount = App.Fields.Double.formatToDb(modal.find('.valueTotalPrice').text()),\n\t\t\t\tdiscountsType = modal.find('.discountsType').val();\n\t\t\tlet valuePrices = netPriceBeforeDiscount,\n\t\t\t\tglobalDiscount = 0,\n\t\t\t\tgroupDiscount = 0,\n\t\t\t\tindividualDiscount = 0,\n\t\t\t\tadditionalDiscount = 0;\n\t\t\tif (discountsType == 0 || discountsType == 1) {\n\t\t\t\tif (modal.find('.js-active .globalDiscount').length > 0) {\n\t\t\t\t\tglobalDiscount = App.Fields.Double.formatToDb(modal.find('.js-active .globalDiscount').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .additionalDiscountValue').length > 0) {\n\t\t\t\t\tadditionalDiscount = App.Fields.Double.formatToDb(modal.find('.js-active .additionalDiscountValue').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .individualDiscountType').length > 0) {\n\t\t\t\t\tlet value = App.Fields.Double.formatToDb(modal.find('.js-active .individualDiscountValue').val());\n\t\t\t\t\tif (modal.find('.js-active .individualDiscountType:checked').val() == 'percentage') {\n\t\t\t\t\t\tindividualDiscount = netPriceBeforeDiscount * (value / 100);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindividualDiscount = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tmodal.find('.js-active .groupCheckbox').length > 0 &&\n\t\t\t\t\tmodal.find('.js-active .groupCheckbox').prop('checked') == true\n\t\t\t\t) {\n\t\t\t\t\tgroupDiscount = App.Fields.Double.formatToDb(modal.find('.groupValue').val());\n\t\t\t\t\tgroupDiscount = netPriceBeforeDiscount * (groupDiscount / 100);\n\t\t\t\t}\n\t\t\t\tvaluePrices = valuePrices * ((100 - globalDiscount) / 100);\n\t\t\t\tvaluePrices = valuePrices * ((100 - additionalDiscount) / 100);\n\t\t\t\tvaluePrices = valuePrices - individualDiscount;\n\t\t\t\tvaluePrices = valuePrices - groupDiscount;\n\t\t\t} else if (discountsType == 2) {\n\t\t\t\tmodal.find('.js-active').each(function () {\n\t\t\t\t\tlet panel = $(this);\n\t\t\t\t\tif (panel.find('.globalDiscount').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\tvaluePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.globalDiscount').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.groupCheckbox').length > 0 && panel.find('.groupCheckbox').prop('checked') == true) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.groupValue').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.individualDiscountType').length > 0) {\n\t\t\t\t\t\tlet value = App.Fields.Double.formatToDb(panel.find('.individualDiscountValue').val());\n\t\t\t\t\t\tif (panel.find('.individualDiscountType[name=\"individualDiscountType\"]:checked').val() === 'percentage') {\n\t\t\t\t\t\t\tvaluePrices = valuePrices * ((100 - value) / 100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvaluePrices = valuePrices - value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (panel.find('.additionalDiscountValue').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\tvaluePrices * ((100 - App.Fields.Double.formatToDb(panel.find('.additionalDiscountValue').val())) / 100);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tmodal.find('.valuePrices').text(App.Fields.Double.formatToDisplay(valuePrices));\n\t\t\tmodal.find('.valueDiscount').text(App.Fields.Double.formatToDisplay(netPriceBeforeDiscount - valuePrices));\n\t\t},\n\t\tcalculateTax: function (_row, modal) {\n\t\t\tlet netPriceWithoutTax = App.Fields.Double.formatToDb(modal.find('.valueNetPrice').text()),\n\t\t\t\tvaluePrices = netPriceWithoutTax,\n\t\t\t\tglobalTax = 0,\n\t\t\t\tgroupTax = 0,\n\t\t\t\tregionalTax = 0,\n\t\t\t\tindividualTax = 0;\n\n\t\t\tlet taxType = modal.find('.taxsType').val();\n\t\t\tif (taxType == '0' || taxType == '1') {\n\t\t\t\tif (modal.find('.js-active .globalTax').length > 0) {\n\t\t\t\t\tglobalTax = App.Fields.Double.formatToDb(modal.find('.js-active .globalTax').val());\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .individualTaxValue').length > 0) {\n\t\t\t\t\tlet value = App.Fields.Double.formatToDb(modal.find('.js-active .individualTaxValue').val());\n\t\t\t\t\tindividualTax = (value / 100) * valuePrices;\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .groupTax').length > 0) {\n\t\t\t\t\tgroupTax = App.Fields.Double.formatToDb(modal.find('.groupTax').val());\n\t\t\t\t\tgroupTax = netPriceWithoutTax * (groupTax / 100);\n\t\t\t\t}\n\t\t\t\tif (modal.find('.js-active .regionalTax').length > 0) {\n\t\t\t\t\tregionalTax = App.Fields.Double.formatToDb(modal.find('.regionalTax').val());\n\t\t\t\t\tregionalTax = netPriceWithoutTax * (regionalTax / 100);\n\t\t\t\t}\n\n\t\t\t\tvaluePrices = valuePrices * ((100 + globalTax) / 100);\n\t\t\t\tvaluePrices = valuePrices + individualTax;\n\t\t\t\tvaluePrices = valuePrices + groupTax;\n\t\t\t\tvaluePrices = valuePrices + regionalTax;\n\t\t\t} else if (taxType == '2') {\n\t\t\t\tmodal.find('.js-active').each(function () {\n\t\t\t\t\tlet panel = $(this);\n\t\t\t\t\tif (panel.find('.globalTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.globalTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.groupTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.groupTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.regionalTax').length > 0) {\n\t\t\t\t\t\tvaluePrices = valuePrices * ((100 + App.Fields.Double.formatToDb(panel.find('.regionalTax').val())) / 100);\n\t\t\t\t\t} else if (panel.find('.individualTaxValue').length > 0) {\n\t\t\t\t\t\tvaluePrices =\n\t\t\t\t\t\t\t((App.Fields.Double.formatToDb(panel.find('.individualTaxValue').val()) + 100) / 100) * valuePrices;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (netPriceWithoutTax) {\n\t\t\t\tlet taxValue = ((valuePrices - netPriceWithoutTax) / netPriceWithoutTax) * 100;\n\t\t\t\tmodal.find('.js-tax-value').text(App.Fields.Double.formatToDisplay(taxValue));\n\t\t\t}\n\t\t\tmodal.find('.valuePrices').text(App.Fields.Double.formatToDisplay(valuePrices));\n\t\t\tmodal.find('.valueTax').text(App.Fields.Double.formatToDisplay(valuePrices - netPriceWithoutTax));\n\t\t},\n\t\tupdateRowSequence: function () {\n\t\t\tlet items = this.getInventoryItemsContainer();\n\t\t\titems.find(this.rowClass).each(function (index) {\n\t\t\t\t$(this)\n\t\t\t\t\t.find('.sequence')\n\t\t\t\t\t.val(index + 1);\n\t\t\t});\n\t\t},\n\t\tregisterInventorySaveData: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on(Vtiger_Edit_Js.recordPreSave, function () {\n\t\t\t\tthisInstance.syncHeaderData();\n\t\t\t\tif (!thisInstance.checkLimits(thisInstance.form)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsyncHeaderData(container) {\n\t\t\tlet header = this.getInventoryHeadContainer();\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = this.getInventoryItemsContainer();\n\t\t\t}\n\t\t\tcontainer.find('.js-sync').each(function () {\n\t\t\t\tlet element = $(this);\n\t\t\t\telement.val(header.find('.js-' + element.data('syncId')).val());\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will be used to handle price book popup\n\t\t * @params :  element - popup image element\n\t\t */\n\t\tpricebooksModalHandler: function (element) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet lineItemRow = element.closest(this.rowClass);\n\t\t\tlet rowName = lineItemRow.find('.rowName');\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'PriceBooks',\n\t\t\t\t\tsrc_module: $('[name=\"popupReferenceModule\"]', rowName).val(),\n\t\t\t\t\tsrc_record: $('.sourceField', rowName).val(),\n\t\t\t\t\tsrc_field: $('[name=\"popupReferenceModule\"]', rowName).data('field'),\n\t\t\t\t\tcurrency_id: thisInstance.getCurrency() || CONFIG.defaultCurrencyId\n\t\t\t\t},\n\t\t\t\t(modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\tmodule: 'PriceBooks',\n\t\t\t\t\t\t\taction: 'ProductListPrice',\n\t\t\t\t\t\t\trecord: responseData.id,\n\t\t\t\t\t\t\tsrc_record: $('.sourceField', rowName).val()\n\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\t\tthisInstance.setUnitPrice(lineItemRow, data.result);\n\t\t\t\t\t\t\t\tthisInstance.quantityChangeActions(lineItemRow);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.errorLog('Incorrect data', responseData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tsubProductsCashe: [],\n\t\tloadSubProducts: function (parentRow, indicator) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet progressInstace;\n\t\t\tlet recordId = $('input.sourceField', parentRow).val();\n\t\t\tlet recordModule = parentRow.find('.rowName input[name=\"popupReferenceModule\"]').val();\n\t\t\tthisInstance.removeSubProducts(parentRow);\n\t\t\tif (recordId == '0' || recordId == '' || $.inArray(recordModule, ['Products', 'Services']) < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (thisInstance.subProductsCashe[recordId]) {\n\t\t\t\tthisInstance.addSubProducts(parentRow, thisInstance.subProductsCashe[recordId]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet subProrductParams = {\n\t\t\t\tmodule: 'Products',\n\t\t\t\taction: 'SubProducts',\n\t\t\t\trecord: recordId\n\t\t\t};\n\t\t\tif (indicator) {\n\t\t\t\tprogressInstace = $.progressIndicator();\n\t\t\t}\n\t\t\tAppConnector.request(subProrductParams)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet responseData = data.result;\n\t\t\t\t\tthisInstance.subProductsCashe[recordId] = responseData;\n\t\t\t\t\tthisInstance.addSubProducts(parentRow, responseData);\n\t\t\t\t\tif (progressInstace) {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tif (progressInstace) {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tremoveSubProducts: function (parentRow) {\n\t\t\tlet subProductsContainer = $('.subProductsContainer ul', parentRow);\n\t\t\tsubProductsContainer.find('li').remove();\n\t\t},\n\t\taddSubProducts: function (parentRow, responseData) {\n\t\t\tlet subProductsContainer = $('.subProductsContainer ul', parentRow);\n\t\t\tfor (let id in responseData) {\n\t\t\t\tsubProductsContainer.append($('<li>').text(responseData[id]));\n\t\t\t}\n\t\t},\n\t\tmapResultsToFields: function (referenceModule, parentRow, responseData) {\n\t\t\tlet unit,\n\t\t\t\ttaxParam = [];\n\t\t\tlet thisInstance = this;\n\t\t\tlet isGroupTax = thisInstance.isGroupTaxMode();\n\t\t\tfor (let id in responseData) {\n\t\t\t\tlet recordData = responseData[id];\n\t\t\t\tlet description = recordData.description;\n\t\t\t\tlet unitPriceValues = recordData.unitPriceValues;\n\t\t\t\tlet unitPriceValuesJson = JSON.stringify(unitPriceValues);\n\t\t\t\t// Load taxes detail\n\t\t\t\tif (isGroupTax) {\n\t\t\t\t\tlet parameters = parentRow.closest('.inventoryItems').data('taxParam');\n\t\t\t\t\tif (parameters) {\n\t\t\t\t\t\ttaxParam = JSON.parse(parameters);\n\t\t\t\t\t}\n\t\t\t\t} else if (recordData['taxes']) {\n\t\t\t\t\ttaxParam = { aggregationType: recordData.taxes.type };\n\t\t\t\t\ttaxParam[recordData.taxes.type + 'Tax'] = recordData.taxes.value;\n\t\t\t\t}\n\t\t\t\tif (recordData['taxes']) {\n\t\t\t\t\tparentRow.find('.js-tax').attr('data-default-tax', recordData.taxes.value);\n\t\t\t\t}\n\t\t\t\tthisInstance.setPurchase(parentRow, recordData.purchase);\n\t\t\t\tthisInstance.setTaxParam(parentRow, taxParam);\n\t\t\t\tthisInstance.setTax(parentRow, 0);\n\t\t\t\tthisInstance.setTaxPercent(parentRow, 0);\n\n\t\t\t\tfor (let field in recordData['autoFields']) {\n\t\t\t\t\tlet inputField = parentRow.find('input.' + field);\n\t\t\t\t\tif (inputField.attr('type') === 'checkbox') {\n\t\t\t\t\t\tinputField.prop('checked', recordData['autoFields'][field]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinputField.val(recordData['autoFields'][field]);\n\t\t\t\t\t}\n\t\t\t\t\tif (recordData['autoFields'][field + 'Text']) {\n\t\t\t\t\t\tparentRow.find('.' + field + 'Text').text(recordData['autoFields'][field + 'Text']);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (recordData.price !== undefined) {\n\t\t\t\t\tthisInstance.setUnitPrice(parentRow, recordData.price);\n\t\t\t\t}\n\t\t\t\tif (unitPriceValuesJson !== undefined) {\n\t\t\t\t\t$('input.unitPrice', parentRow).attr('list-info', unitPriceValuesJson);\n\t\t\t\t}\n\t\t\t\tlet commentElement = $('textarea.js-inventory-item-comment', parentRow.next());\n\t\t\t\tlet editorInstance = CKEDITOR.instances[commentElement.attr('id')];\n\t\t\t\tif (editorInstance) {\n\t\t\t\t\teditorInstance.setData(description);\n\t\t\t\t} else {\n\t\t\t\t\tcommentElement.val(description);\n\t\t\t\t}\n\t\t\t\tif (typeof recordData['autoFields']['unit'] !== 'undefined') {\n\t\t\t\t\tunit = recordData['autoFields']['unit'];\n\t\t\t\t}\n\t\t\t\tapp.event.trigger('Inventory.SelectionItem', thisInstance, parentRow, recordData, referenceModule);\n\t\t\t\tthis.triggerQtyParam(unit, recordData.qtyPerUnit, parentRow);\n\t\t\t}\n\t\t\tif (referenceModule === 'Products') {\n\t\t\t\tthisInstance.loadSubProducts(parentRow, true);\n\t\t\t}\n\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t},\n\t\t/**\n\t\t * Update qtyparam\n\t\t * @param {null|string} unit\n\t\t * @param int perUnit\n\t\t * @param {jQuery} parentRow\n\t\t */\n\t\ttriggerQtyParam(unit, perUnit, parentRow) {\n\t\t\tlet validationEngine;\n\t\t\tswitch (unit) {\n\t\t\t\tdefault:\n\t\t\t\t\t$('.qtyParamInfo', parentRow).addClass('d-none');\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_NumberUserFormat_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pack':\n\t\t\t\t\t$('.qtyParamInfo', parentRow).removeClass('d-none').removeClass('active');\n\t\t\t\t\t$('.qtyParamInfo', parentRow).attr('data-content', perUnit);\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_WholeNumber_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pcs':\n\t\t\t\t\t$('.qtyParamInfo', parentRow).addClass('d-none');\n\t\t\t\t\tvalidationEngine = 'validate[required,funcCall[Vtiger_WholeNumber_Validator_Js.invokeValidation]]';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$('input.qty', parentRow).attr('data-validation-engine', validationEngine);\n\t\t},\n\t\tsaveDiscountsParameters: function (parentRow, modal) {\n\t\t\tconst typeName = 'aggregationType',\n\t\t\t\tpanels = modal.find('[name=\"' + typeName + '\"]:checked');\n\t\t\tlet info = {};\n\t\t\tinfo[typeName] = [];\n\t\t\tpanels.each(function () {\n\t\t\t\tlet type = $(this).val(),\n\t\t\t\t\tcontainer = $(this).closest('.js-panel');\n\t\t\t\tif (panels.length > 1) {\n\t\t\t\t\tinfo[typeName].push(type);\n\t\t\t\t} else {\n\t\t\t\t\tinfo[typeName] = type;\n\t\t\t\t}\n\t\t\t\tcontainer.find('[name=\"' + type + 'Discount\"]').each(function () {\n\t\t\t\t\tlet param = type + 'Discount';\n\t\t\t\t\tlet element = $(this);\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 'group':\n\t\t\t\t\t\t\tif (element.closest('.input-group').find('.groupCheckbox').prop('checked')) {\n\t\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'individual':\n\t\t\t\t\t\t\tlet name = 'individualDiscountType';\n\t\t\t\t\t\t\tinfo[name] = container.find('[name=\"' + name + '\"]:checked').val();\n\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'global':\n\t\t\t\t\t\tcase 'additional':\n\t\t\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(element.val());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.setDiscountParam($('#blackIthemTable'), info);\n\t\t\tthis.setDiscountParam(parentRow, info);\n\t\t},\n\t\tsaveTaxsParameters: function (parentRow, modal) {\n\t\t\tlet info = {};\n\t\t\tconst extend = ['aggregationType', 'groupCheckbox', 'individualTaxType'];\n\t\t\t$.each(this.taxModalFields, function (_, param) {\n\t\t\t\tif ($.inArray(param, extend) >= 0) {\n\t\t\t\t\tif (modal.find('[name=\"' + param + '\"]:checked').length > 1) {\n\t\t\t\t\t\tinfo[param] = [];\n\t\t\t\t\t\tmodal.find('[name=\"' + param + '\"]:checked').each(function () {\n\t\t\t\t\t\t\tinfo[param].push($(this).val());\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinfo[param] = modal.find('[name=\"' + param + '\"]:checked').val();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinfo[param] = App.Fields.Double.formatToDb(modal.find('[name=\"' + param + '\"]').val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tparentRow.data('taxParam', JSON.stringify(info));\n\t\t\tthis.setTaxParam(parentRow, info);\n\t\t\tthis.setTaxParam($('#blackIthemTable'), info);\n\t\t},\n\t\tshowExpandedRow: function (row) {\n\t\t\tconst inventoryRowExpanded = this.getInventoryItemsContainer().find('[numrowex=\"' + row.attr('numrow') + '\"]');\n\t\t\tconst element = row.find('.toggleVisibility');\n\t\t\telement.data('status', '1');\n\t\t\tinventoryRowExpanded.removeClass('d-none');\n\t\t},\n\t\thideExpandedRow: function (row) {\n\t\t\tconst inventoryRowExpanded = this.getInventoryItemsContainer().find('[numrowex=\"' + row.attr('numrow') + '\"]');\n\t\t\tconst element = row.find('.toggleVisibility');\n\t\t\telement.data('status', '0');\n\t\t\tinventoryRowExpanded.addClass('d-none');\n\t\t},\n\t\tinitDiscountsParameters: function (parentRow, modal) {\n\t\t\tlet parameters = parentRow.find('.discountParam').val();\n\t\t\tif (parameters == '' || parameters == undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparameters = JSON.parse(parameters);\n\t\t\t$.each(this.discountModalFields, function (_, param) {\n\t\t\t\tlet parameter = parameters[param];\n\t\t\t\tlet field = modal.find('[name=\"' + param + '\"]');\n\t\t\t\tif (field.attr('type') == 'checkbox' || field.attr('type') == 'radio') {\n\t\t\t\t\tif ('groupCheckbox' === param && parameters['groupDiscount'] !== undefined) {\n\t\t\t\t\t\tfield.prop('checked', true);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tlet array = parameter;\n\t\t\t\t\tif (!$.isArray(array)) {\n\t\t\t\t\t\tarray = [array];\n\t\t\t\t\t}\n\t\t\t\t\t$.each(array, function (_, arrayValue) {\n\t\t\t\t\t\tlet value = field.filter('[value=\"' + arrayValue + '\"]').prop('checked', true);\n\t\t\t\t\t\tif (param == 'aggregationType') {\n\t\t\t\t\t\t\tvalue.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\t\t\tvalue.closest('.js-panel').addClass('js-active');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (field.prop('tagName') == 'SELECT') {\n\t\t\t\t\tfield\n\t\t\t\t\t\t.find('option[value=\"' + parameter + '\"]')\n\t\t\t\t\t\t.prop('selected', 'selected')\n\t\t\t\t\t\t.change();\n\t\t\t\t} else if (!field.prop('readonly')) {\n\t\t\t\t\tfield.val(parameter);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.calculateDiscount(parentRow, modal);\n\t\t},\n\t\tinitTaxParameters: function (parentRow, modal) {\n\t\t\tlet parameters;\n\t\t\tif (parentRow.data('taxParam')) {\n\t\t\t\tparameters = parentRow.data('taxParam');\n\t\t\t} else {\n\t\t\t\tparameters = parentRow.find('.taxParam').val();\n\t\t\t}\n\t\t\tif (!parameters) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tparameters = JSON.parse(parameters.toString());\n\t\t\t$.each(this.taxModalFields, function (_, param) {\n\t\t\t\tlet parameter = parameters[param],\n\t\t\t\t\tfield = modal.find('[name=\"' + param + '\"]');\n\n\t\t\t\tif (field.attr('type') === 'checkbox' || field.attr('type') === 'radio') {\n\t\t\t\t\tlet array = parameter,\n\t\t\t\t\t\tvalue;\n\t\t\t\t\tif (!$.isArray(array)) {\n\t\t\t\t\t\tarray = [array];\n\t\t\t\t\t}\n\t\t\t\t\t$.each(array, function (_, arrayValue) {\n\t\t\t\t\t\tvalue = field.filter('[value=\"' + arrayValue + '\"]').prop('checked', true);\n\t\t\t\t\t\tif (param === 'aggregationType') {\n\t\t\t\t\t\t\tvalue.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\t\t\tvalue.closest('.js-panel').addClass('js-active');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (field.prop('tagName') === 'SELECT') {\n\t\t\t\t\tfield\n\t\t\t\t\t\t.find('option[value=\"' + parameter + '\"]')\n\t\t\t\t\t\t.prop('selected', 'selected')\n\t\t\t\t\t\t.change();\n\t\t\t\t} else {\n\t\t\t\t\tlet input = modal.find('[name=\"' + param + '\"]');\n\t\t\t\t\tinput.val(App.Fields.Double.formatToDisplay(parameter));\n\t\t\t\t\tif (param === 'individualTax') {\n\t\t\t\t\t\tinput.formatNumber();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.calculateTax(parentRow, modal);\n\t\t},\n\t\tlimitEnableSave: false,\n\t\tcheckLimits: function () {\n\t\t\tconst account = this.getAccountId(),\n\t\t\t\tlimit = parseInt(app.getMainParams('inventoryLimit'));\n\t\t\tlet response = true;\n\t\t\tif (account == '' || this.limitEnableSave || !limit) {\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tasync: false,\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Inventory',\n\t\t\t\t\tmode: 'checkLimits',\n\t\t\t\t\trecord: account,\n\t\t\t\t\tcurrency: this.getCurrency(),\n\t\t\t\t\tprice: thisInthisstance.getSummaryGrossPrice()\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\tif (data.result.status == false) {\n\t\t\t\t\t\tapp.showModalWindow(data.result.html, function () {});\n\t\t\t\t\t\tresponse = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function () {\n\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t});\n\t\t\treturn response;\n\t\t},\n\t\tcurrencyChangeActions: function (select, option) {\n\t\t\tif (option.data('baseCurrency') !== select.val()) {\n\t\t\t\tthis.showCurrencyChangeModal(select, option);\n\t\t\t} else {\n\t\t\t\tthis.currencyConvertValues(select, option);\n\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t}\n\t\t},\n\t\tshowCurrencyChangeModal: function (select, option) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (thisInstance.lockCurrencyChange == true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthisInstance.lockCurrencyChange = true;\n\t\t\tlet block = select.closest('th');\n\t\t\tlet modal = block.find('.modelContainer').clone();\n\t\t\tapp.showModalWindow(modal, function (data) {\n\t\t\t\tlet modal = $(data);\n\t\t\t\tlet currencyParam = JSON.parse(block.find('.js-currencyparam').val());\n\n\t\t\t\tif (currencyParam != false) {\n\t\t\t\t\tif (typeof currencyParam[option.val()] === 'undefined') {\n\t\t\t\t\t\tlet defaultCurrencyParams = {\n\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\tdate: ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcurrencyParam[option.val()] = defaultCurrencyParams;\n\t\t\t\t\t}\n\t\t\t\t\tmodal.find('.currencyName').text(option.text());\n\t\t\t\t\tmodal.find('.currencyRate').val(currencyParam[option.val()]['value']);\n\t\t\t\t\tmodal.find('.currencyDate').text(currencyParam[option.val()]['date']);\n\t\t\t\t}\n\t\t\t\tmodal\n\t\t\t\t\t.on('click', 'button[type=\"submit\"]', function () {\n\t\t\t\t\t\tlet rate = modal.find('.currencyRate').val();\n\t\t\t\t\t\tlet value = App.Fields.Double.formatToDb(rate);\n\t\t\t\t\t\tlet conversionRate = 1 / App.Fields.Double.formatToDb(rate);\n\n\t\t\t\t\t\toption.data('conversionRate', conversionRate);\n\t\t\t\t\t\tcurrencyParam[option.val()] = {\n\t\t\t\t\t\t\tdate: option.data('conversionDate'),\n\t\t\t\t\t\t\tvalue: value.toString(),\n\t\t\t\t\t\t\tconversion: conversionRate.toString()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tblock.find('.js-currencyparam').val(JSON.stringify(currencyParam));\n\n\t\t\t\t\t\tthisInstance.currencyConvertValues(select, option);\n\t\t\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthisInstance.lockCurrencyChange = false;\n\t\t\t\t\t})\n\t\t\t\t\t.one('hidden.bs.modal', function () {\n\t\t\t\t\t\tselect.val(select.data('oldValue')).change();\n\t\t\t\t\t\tthisInstance.lockCurrencyChange = false;\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tcurrencyConvertValues: function (select, selected) {\n\t\t\tconst self = this;\n\t\t\tlet previous = select.find('option[value=\"' + select.data('oldValue') + '\"]');\n\t\t\tlet conversionRate = selected.data('conversionRate');\n\t\t\tlet prevConversionRate = previous.data('conversionRate');\n\t\t\tconversionRate = parseFloat(conversionRate) / parseFloat(prevConversionRate);\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find(self.rowClass)\n\t\t\t\t.each(function (_) {\n\t\t\t\t\tlet row = $(this);\n\t\t\t\t\tself.syncHeaderData(row);\n\t\t\t\t\tself.setUnitPrice(row, self.getUnitPriceValue(row) * conversionRate);\n\t\t\t\t\tself.setDiscount(row, self.getDiscount(row) * conversionRate);\n\t\t\t\t\tself.setTax(row, self.getTax(row) * conversionRate);\n\t\t\t\t\tself.setPurchase(row, self.getPurchase(row) * conversionRate);\n\t\t\t\t\tself.quantityChangeActions(row);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Set up all row data that comes from request\n\t\t * @param {jQuery} row\n\t\t * @param {object} rowData\n\t\t */\n\t\tsetRowData(row, rowData) {\n\t\t\tthis.setName(row, rowData.name, rowData.info.name);\n\t\t\tthis.setQuantity(row, App.Fields.Double.formatToDisplay(rowData.qty));\n\t\t\tthis.setUnit(row, rowData.info.autoFields.unit, rowData.info.autoFields.unitText);\n\t\t\tif (typeof rowData.info.autoFields !== 'undefined' && typeof rowData.info.autoFields.subunit !== 'undefined') {\n\t\t\t\tthis.setSubUnit(row, rowData.info.autoFields.subunit, rowData.info.autoFields.subunitText);\n\t\t\t}\n\t\t\tthis.setComment(row, rowData.comment1);\n\t\t\tthis.setUnitPrice(row, App.Fields.Double.formatToDisplay(rowData.price));\n\t\t\tthis.setNetPrice(row, App.Fields.Double.formatToDisplay(rowData.net));\n\t\t\tthis.setGrossPrice(row, App.Fields.Double.formatToDisplay(rowData.gross));\n\t\t\tthis.setTotalPrice(row, App.Fields.Double.formatToDisplay(rowData.total));\n\t\t\tlet discountParam = rowData.discountparam || null;\n\t\t\tthis.setDiscountParam(row, JSON.parse(discountParam));\n\t\t\tthis.setDiscount(row, App.Fields.Double.formatToDisplay(rowData.discount));\n\t\t\tthis.setTaxParam(row, JSON.parse(rowData.taxparam));\n\t\t\tthis.setTax(row, App.Fields.Double.formatToDisplay(rowData.tax));\n\t\t\tthis.setTaxPercent(row, App.Fields.Double.formatToDisplay(rowData.tax_percent));\n\t\t},\n\t\t/**\n\t\t * Add new row to inventory list\n\t\t * @param {string} module\n\t\t * @param {string} baseTableId\n\t\t * @param {object} rowData [optional]\n\t\t */\n\t\taddItem(module, baseTableId, rowData = false) {\n\t\t\tconst items = this.getInventoryItemsContainer();\n\t\t\tlet newRow = this.getBasicRow();\n\t\t\tconst sequenceNumber = this.getNextLineItemRowNumber();\n\t\t\tconst replaced = newRow.html().replace(/\\_NUM_/g, sequenceNumber);\n\t\t\tconst moduleLabels = newRow.data('moduleLbls');\n\t\t\tnewRow.html(replaced);\n\t\t\tnewRow = newRow.children().appendTo(items.find('.js-inventory-items-body'));\n\t\t\tnewRow.find('.rowName input[name=\"popupReferenceModule\"]').val(module).data('field', baseTableId);\n\t\t\tnewRow.find('.js-module-icon').removeClass().addClass(`yfm-${module}`);\n\t\t\tnewRow.find('.rowName span.input-group-text').attr('data-content', moduleLabels[module]);\n\t\t\tnewRow.find('.colPicklistField select').each(function (_, select) {\n\t\t\t\tselect = $(select);\n\t\t\t\tselect.find('option').each(function (_, option) {\n\t\t\t\t\toption = $(option);\n\t\t\t\t\tif (option.data('module') !== module) {\n\t\t\t\t\t\toption.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.initItem(newRow);\n\t\t\tVtiger_Edit_Js.getInstance().registerAutoCompleteFields(newRow);\n\t\t\tif (rowData) {\n\t\t\t\tthis.setRowData(newRow, rowData);\n\t\t\t\tthis.quantityChangeActions(newRow);\n\t\t\t}\n\t\t\treturn newRow;\n\t\t},\n\n\t\t/**\n\t\t * Register add item button click\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterAddItem() {\n\t\t\tconst thisInstance = this;\n\t\t\tconst itemsHeader = thisInstance.getInventoryHeadContainer();\n\t\t\titemsHeader.find('.js-inv-add-item').on('click', function () {\n\t\t\t\tconst btn = $(this);\n\t\t\t\tthisInstance.addItem(btn.data('module'), btn.data('field'));\n\t\t\t});\n\t\t},\n\t\tregisterSortableItems: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet items = thisInstance.getInventoryItemsContainer();\n\t\t\titems.sortable({\n\t\t\t\thandle: '.dragHandle',\n\t\t\t\titems: thisInstance.rowClass,\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tplaceholder: 'ui-state-highlight',\n\t\t\t\thelper: function (e, ui) {\n\t\t\t\t\tui.children().each(function (_, element) {\n\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tstart: function (_, ui) {\n\t\t\t\t\titems.find(thisInstance.rowClass).each(function (_, element) {\n\t\t\t\t\t\tlet row = $(element);\n\t\t\t\t\t\tthisInstance.hideExpandedRow(row);\n\t\t\t\t\t});\n\t\t\t\t\tlet num = $(ui.item).attr('numrow');\n\t\t\t\t\titems.find('[numrowex=\"' + num + '\"] .js-inventory-item-comment').each(function () {\n\t\t\t\t\t\tApp.Fields.Text.destroyEditor($(this));\n\t\t\t\t\t});\n\t\t\t\t\tui.item.startPos = ui.item.index();\n\t\t\t\t},\n\t\t\t\tstop: function (_, ui) {\n\t\t\t\t\tlet numrow = $(ui.item).attr('numrow');\n\t\t\t\t\tlet child = items.find('.numRow' + numrow);\n\t\t\t\t\titems.find('[numrow=\"' + numrow + '\"]').after(child);\n\t\t\t\t\tApp.Fields.Text.Editor.register(child);\n\t\t\t\t\tthisInstance.updateRowSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterShowHideExpanded: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on('click', '.toggleVisibility', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet row = thisInstance.getClosestRow(element);\n\t\t\t\tif (element.data('status') == 0) {\n\t\t\t\t\tthisInstance.showExpandedRow(row);\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.hideExpandedRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterPriceBookModal: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tcontainer.find('.js-price-book-modal').on('click', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet response = thisInstance.isRecordSelected(element);\n\t\t\t\tif (response == true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.pricebooksModalHandler(element);\n\t\t\t});\n\t\t},\n\t\tregisterRowChangeEvent: function (container) {\n\t\t\tcontainer.on('focusout', '.qty', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tcontainer.on('focusout', '.unitPrice', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tcontainer.on('focusout', '.purchase', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\telement.formatNumber();\n\t\t\t\tthis.quantityChangeActions(this.getClosestRow(element));\n\t\t\t});\n\t\t\tlet headContainer = this.getInventoryHeadContainer();\n\t\t\theadContainer.on('change', '.js-taxmode', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthis.showIndividualTax(this.getClosestRow(element));\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t\theadContainer.on('change', '.js-discountmode', (e) => {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tthis.showIndividualDiscount(this.getClosestRow(element));\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tregisterSubProducts: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.find('.inventoryItems ' + thisInstance.rowClass).each(function () {\n\t\t\t\tthisInstance.loadSubProducts($(this), false);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register clear reference selection\n\t\t */\n\t\tregisterClearReferenceSelection() {\n\t\t\tthis.form.on('click', '.clearReferenceSelection', (e) => {\n\t\t\t\tconst referenceGroup = $(e.currentTarget).closest('div.referenceGroup');\n\t\t\t\tif (referenceGroup.length) {\n\t\t\t\t\treferenceGroup.find('input[id$=\"_display\"]').val('').removeAttr('readonly');\n\t\t\t\t} else {\n\t\t\t\t\tconst row = this.getClosestRow($(e.currentTarget));\n\t\t\t\t\tthis.removeSubProducts(row);\n\t\t\t\t\trow\n\t\t\t\t\t\t.find('.unitPrice,.tax,.discount,.margin,.purchase,.js-tax-percent')\n\t\t\t\t\t\t.val(App.Fields.Double.formatToDisplay(0));\n\t\t\t\t\trow.find('.qty').val(1);\n\t\t\t\t\trow.find('textarea,.valueVal').val('');\n\t\t\t\t\trow.find('.valueText').text('');\n\t\t\t\t\trow.find('.qtyParamInfo').addClass('d-none');\n\t\t\t\t\trow.find('.recordLabel').val('').removeAttr('readonly');\n\t\t\t\t\tif (!this.isGroupTaxMode()) {\n\t\t\t\t\t\tthis.setTaxParam(row, []);\n\t\t\t\t\t}\n\t\t\t\t\tthis.quantityChangeActions(row);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterDeleteLineItemEvent: function (container) {\n\t\t\tcontainer.on('click', '.deleteRow', (e) => {\n\t\t\t\tlet num = this.getClosestRow($(e.currentTarget)).attr('numrow');\n\t\t\t\tthis.deleteLineItem(num);\n\t\t\t});\n\t\t},\n\t\tdeleteLineItem: function (num) {\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('[numrowex=\"' + num + '\"] .js-inventory-item-comment')\n\t\t\t\t.each(function () {\n\t\t\t\t\tApp.Fields.Text.destroyEditor($(this));\n\t\t\t\t});\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('[numrow=\"' + num + '\"], [numrowex=\"' + num + '\"]')\n\t\t\t\t.remove();\n\t\t\tthis.checkDeleteIcon();\n\t\t\tthis.rowsCalculations();\n\t\t\tif (this.getInventoryItemsContainer().find('.inventoryRow').length === 0) {\n\t\t\t\t$('#inventoryItemsNo').val(0);\n\t\t\t}\n\t\t\tthis.updateRowSequence();\n\t\t},\n\t\tregisterChangeDiscount: function () {\n\t\t\tthis.form.on('click', '.js-change-discount', (e) => {\n\t\t\t\tlet parentRow;\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Inventory',\n\t\t\t\t\tmode: 'showDiscounts',\n\t\t\t\t\tcurrency: this.getCurrency(),\n\t\t\t\t\tdiscountAggregation: this.getDiscountAggregation(),\n\t\t\t\t\trelatedRecord: this.getAccountId()\n\t\t\t\t};\n\t\t\t\tif (element.hasClass('groupDiscount')) {\n\t\t\t\t\tparentRow = this.getInventoryItemsContainer();\n\t\t\t\t\tif (parentRow.find('tfoot .colTotalPrice').length != 0) {\n\t\t\t\t\t\tparams.totalPrice = App.Fields.Double.formatToDb(parentRow.find('tfoot .colTotalPrice').text());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams.totalPrice = 0;\n\t\t\t\t\t}\n\t\t\t\t\tparams.discountType = 1;\n\t\t\t\t} else {\n\t\t\t\t\tparentRow = element.closest(this.rowClass);\n\t\t\t\t\tparams.totalPrice = this.getTotalPrice(parentRow);\n\t\t\t\t\tparams.discountType = 0;\n\t\t\t\t}\n\t\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tapp.showModalWindow(data, (data) => {\n\t\t\t\t\t\t\tthis.initDiscountsParameters(parentRow, $(data));\n\t\t\t\t\t\t\tthis.registerChangeDiscountModal(data, parentRow, params);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChangeDiscountModal: function (modal, parentRow, params) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet form = modal.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tmodal.on('change', '.individualDiscountType', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tmodal.find('.individualDiscountContainer .input-group-text').text(element.data('symbol'));\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox[name=\"aggregationType\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\n\t\t\t\tif (element.attr('type') == 'checkbox' && this.checked) {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else if (element.attr('type') == 'radio') {\n\t\t\t\t\tmodal.find('.js-panel').removeClass('js-active');\n\t\t\t\t\tmodal.find('.js-panel .js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').removeClass('js-active');\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodal.on(\n\t\t\t\t'change',\n\t\t\t\t'.activeCheckbox, .globalDiscount,.individualDiscountValue,.individualDiscountType,.groupCheckbox,.additionalDiscountValue',\n\t\t\t\tfunction () {\n\t\t\t\t\tthisInstance.calculateDiscount(parentRow, modal);\n\t\t\t\t}\n\t\t\t);\n\t\t\tmodal.on('click', '.js-save-discount', function () {\n\t\t\t\tif (form.validationEngine('validate') === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.saveDiscountsParameters(parentRow, modal);\n\t\t\t\tif (params.discountType == 0) {\n\t\t\t\t\tthisInstance.setDiscount(parentRow, App.Fields.Double.formatToDb(modal.find('.valueDiscount').text()));\n\t\t\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t\t\t} else {\n\t\t\t\t\tlet rate =\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueDiscount').text()) /\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueTotalPrice').text());\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tthisInstance.setDiscount($(this), thisInstance.getTotalPrice($(this)) * rate);\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tregisterChangeTax: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthisInstance.form.on('click', '.changeTax', function (e) {\n\t\t\t\tlet parentRow;\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Inventory',\n\t\t\t\t\tmode: 'showTaxes',\n\t\t\t\t\tcurrency: thisInstance.getCurrency(),\n\t\t\t\t\trelatedRecord: thisInstance.getAccountId()\n\t\t\t\t};\n\t\t\t\tif (element.hasClass('groupTax')) {\n\t\t\t\t\tparentRow = thisInstance.getInventoryItemsContainer();\n\t\t\t\t\tlet totalPrice = 0;\n\t\t\t\t\tif (parentRow.find('tfoot .colNetPrice').length > 0) {\n\t\t\t\t\t\ttotalPrice = parentRow.find('tfoot .colNetPrice').text();\n\t\t\t\t\t} else if (parentRow.find('tfoot .colTotalPrice ').length > 0) {\n\t\t\t\t\t\ttotalPrice = parentRow.find('tfoot .colTotalPrice ').text();\n\t\t\t\t\t}\n\t\t\t\t\tparams.totalPrice = App.Fields.Double.formatToDb(totalPrice);\n\t\t\t\t\tparams.taxType = 1;\n\t\t\t\t} else {\n\t\t\t\t\tparentRow = element.closest(thisInstance.rowClass);\n\t\t\t\t\tlet sourceRecord = parentRow.find('.rowName .sourceField').val();\n\t\t\t\t\tparams.totalPrice = thisInstance.getNetPrice(parentRow);\n\t\t\t\t\tparams.taxType = 0;\n\t\t\t\t\tif (sourceRecord) {\n\t\t\t\t\t\tparams.record = sourceRecord;\n\t\t\t\t\t}\n\t\t\t\t\tparams.recordModule = parentRow.find('.rowName [name=\"popupReferenceModule\"]').val();\n\t\t\t\t}\n\t\t\t\tlet progressInstace = $.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, function (data) {\n\t\t\t\t\t\t\tthisInstance.initTaxParameters(parentRow, $(data));\n\t\t\t\t\t\t\tthisInstance.registerChangeTaxModal(data, parentRow, params);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogressInstace.hide();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCurrencyChange: false,\n\t\tregisterChangeCurrency() {\n\t\t\tthis.getInventoryHeadContainer().on('change', '.js-currency', (e) => {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tsymbol = element.find('option:selected').data('conversionSymbol');\n\t\t\t\tthis.currencyChangeActions(element, element.find('option:selected'));\n\t\t\t\tthis.form.find('.currencySymbol').text(symbol);\n\t\t\t});\n\t\t},\n\t\tregisterChangeDiscountAggregation() {\n\t\t\tthis.getInventoryHeadContainer().on('change', '.js-discount_aggreg', (e) => {\n\t\t\t\tthis.rowsCalculations();\n\t\t\t});\n\t\t},\n\t\tregisterChangeTaxModal: function (modal, parentRow, params) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet form = modal.find('form');\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tmodal.on('change', '.individualTaxType', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tmodal.find('.individualTaxContainer .input-group-text').text(element.data('symbol'));\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox[name=\"aggregationType\"]', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tif (element.attr('type') == 'checkbox' && this.checked) {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else if (element.attr('type') == 'radio') {\n\t\t\t\t\tmodal.find('.js-panel').removeClass('js-active');\n\t\t\t\t\tmodal.find('.js-panel .js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').removeClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').addClass('js-active');\n\t\t\t\t} else {\n\t\t\t\t\telement.closest('.js-panel').find('.js-panel__body').addClass('d-none');\n\t\t\t\t\telement.closest('.js-panel').removeClass('js-active');\n\t\t\t\t}\n\t\t\t});\n\t\t\tmodal.on('change', '.activeCheckbox, .globalTax, .individualTaxValue, .groupTax, .regionalTax', function () {\n\t\t\t\tthisInstance.calculateTax(parentRow, modal);\n\t\t\t});\n\t\t\tmodal.on('click', '.js-save-taxs', function () {\n\t\t\t\tif (form.validationEngine('validate') === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance.saveTaxsParameters(parentRow, modal);\n\t\t\t\tif (params.taxType == '0') {\n\t\t\t\t\tthisInstance.setTax(parentRow, App.Fields.Double.formatToDb(modal.find('.valueTax').text()));\n\t\t\t\t\tthisInstance.setTaxPercent(parentRow, App.Fields.Double.formatToDb(modal.find('.js-tax-value').text()));\n\t\t\t\t\tthisInstance.quantityChangeActions(parentRow);\n\t\t\t\t} else {\n\t\t\t\t\tlet rate =\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueTax').text()) /\n\t\t\t\t\t\tApp.Fields.Double.formatToDb(modal.find('.valueNetPrice').text());\n\t\t\t\t\tparentRow.find(thisInstance.rowClass).each(function () {\n\t\t\t\t\t\tlet totalPrice;\n\t\t\t\t\t\tif ($('.netPrice', $(this)).length > 0) {\n\t\t\t\t\t\t\ttotalPrice = thisInstance.getNetPrice($(this));\n\t\t\t\t\t\t} else if ($('.totalPrice', $(this)).length > 0) {\n\t\t\t\t\t\t\ttotalPrice = thisInstance.getTotalPrice($(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthisInstance.setTax($(this), totalPrice * rate);\n\t\t\t\t\t\tthisInstance.setTaxPercent($(this), App.Fields.Double.formatToDb(modal.find('.js-tax-value').text()));\n\t\t\t\t\t\tthisInstance.quantityChangeActions($(this));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tregisterRowAutoComplete: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet sourceFieldElement = container.find('.sourceField.js-name');\n\t\t\tsourceFieldElement.on(Vtiger_Edit_Js.referenceSelectionEvent, function (e, params) {\n\t\t\t\tlet record = params.record;\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet parentRow = element.closest(thisInstance.rowClass);\n\t\t\t\tlet selectedModule = parentRow.find('.rowName [name=\"popupReferenceModule\"]').val();\n\t\t\t\tlet dataUrl =\n\t\t\t\t\t'index.php?module=' +\n\t\t\t\t\tapp.getModuleName() +\n\t\t\t\t\t'&action=Inventory&mode=getDetails&record=' +\n\t\t\t\t\trecord +\n\t\t\t\t\t'&fieldname=' +\n\t\t\t\t\telement.data('columnname');\n\t\t\t\tif (thisInstance.getCurrency()) {\n\t\t\t\t\tdataUrl += '&currency_id=' + thisInstance.getCurrency();\n\t\t\t\t}\n\t\t\t\tAppConnector.request(dataUrl).done(function (data) {\n\t\t\t\t\tfor (let id in data) {\n\t\t\t\t\t\tif (typeof data[id] == 'object') {\n\t\t\t\t\t\t\tlet recordData = data[id];\n\t\t\t\t\t\t\tthisInstance.mapResultsToFields(selectedModule, parentRow, recordData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Mass add entries.\n\t\t */\n\t\tregisterMassAddItem: function () {\n\t\t\tthis.getForm().on('click', '.js-mass-add', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet moduleName = currentTarget.data('module');\n\t\t\t\tlet url = currentTarget.data('url');\n\t\t\t\tapp.showRecordsList(url, (_, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((data) => {\n\t\t\t\t\t\tfor (let i in data) {\n\t\t\t\t\t\t\tlet parentElem = this.addItem(moduleName);\n\t\t\t\t\t\t\tVtiger_Edit_Js.getInstance().setReferenceFieldValue(parentElem, {\n\t\t\t\t\t\t\t\tname: data[i],\n\t\t\t\t\t\t\t\tid: i\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tcalculateItemNumbers: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet items = this.getInventoryItemsContainer();\n\t\t\tlet i = 1;\n\t\t\titems.find(thisInstance.rowClass).each(function () {\n\t\t\t\t$(this).find('.itemNumberText').text(i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\t\tinitItem: function (container) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = thisInstance.getInventoryItemsContainer();\n\t\t\t}\n\t\t\tthisInstance.registerDeleteLineItemEvent(container);\n\t\t\tthisInstance.registerPriceBookModal(container);\n\t\t\tthisInstance.registerRowChangeEvent(container);\n\t\t\tthisInstance.registerRowAutoComplete(container);\n\t\t\tthisInstance.checkDeleteIcon();\n\t\t\tthisInstance.rowsCalculations();\n\t\t\tthisInstance.updateRowSequence();\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.selectInv'));\n\t\t\tApp.Fields.Date.register(container, true, {}, 'dateFieldInv');\n\t\t\tcontainer.validationEngine('detach');\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tApp.Fields.Text.Editor.register(container);\n\t\t},\n\t\t/**\n\t\t * Load inventory data for specified record\n\t\t * @param {int} recordId\n\t\t * @param {string} sourceModule\n\t\t * @param {function|bool} success callback\n\t\t * @param {function|bool} fail callback\n\t\t * @returns Promise\n\t\t */\n\t\tloadInventoryData(recordId, sourceModule, success = false, fail = false) {\n\t\t\tconst progressLoader = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tsrc_module: sourceModule,\n\t\t\t\t\tsrc_record: recordId,\n\t\t\t\t\taction: 'Inventory',\n\t\t\t\t\tmode: 'getTableData',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t})\n\t\t\t\t\t.done((response) => {\n\t\t\t\t\t\tlet activeModules = [];\n\t\t\t\t\t\tthis.getInventoryHeadContainer()\n\t\t\t\t\t\t\t.find('.js-inv-add-item')\n\t\t\t\t\t\t\t.each((_, addBtn) => {\n\t\t\t\t\t\t\t\tactiveModules.push($(addBtn).data('module'));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tconst oldCurrencyChangeAction = this.currencyChangeActions;\n\t\t\t\t\t\tthis.currencyChangeActions = function changeCurrencyActions(select, option) {\n\t\t\t\t\t\t\tthis.currencyConvertValues(select, option);\n\t\t\t\t\t\t\tselect.data('oldValue', select.val());\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst first = response.result[Object.keys(response.result)[0]];\n\t\t\t\t\t\tthis.setCurrencyParam(first.currencyparam);\n\t\t\t\t\t\tthis.setCurrency(first.currency);\n\t\t\t\t\t\tthis.setDiscountMode(first.discountmode);\n\t\t\t\t\t\tthis.setTaxMode(first.taxmode);\n\t\t\t\t\t\tthis.currencyChangeActions = oldCurrencyChangeAction;\n\t\t\t\t\t\tthis.clearInventory();\n\t\t\t\t\t\t$.each(response.result, (_, row) => {\n\t\t\t\t\t\t\tif (activeModules.indexOf(row.moduleName) !== -1) {\n\t\t\t\t\t\t\t\tthis.addItem(row.moduleName, row.basetableid, row);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\ttext: app\n\t\t\t\t\t\t\t\t\t\t.vtranslate('JS_INVENTORY_ITEM_MODULE_NOT_FOUND')\n\t\t\t\t\t\t\t\t\t\t.replace('${sourceModule}', row.moduleName)\n\t\t\t\t\t\t\t\t\t\t.replace('${position}', row.info.name)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.summaryCalculations();\n\t\t\t\t\t\tresolve(response.result);\n\t\t\t\t\t\tif (typeof success === 'function') {\n\t\t\t\t\t\t\tsuccess(response.result);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail((error, err) => {\n\t\t\t\t\t\tprogressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\treject(error, err);\n\t\t\t\t\t\tif (typeof fail === 'function') {\n\t\t\t\t\t\t\tfail(error, err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Clear inventory data\n\t\t */\n\t\tclearInventory: function () {\n\t\t\tthis.getInventoryItemsContainer()\n\t\t\t\t.find('.inventoryRow')\n\t\t\t\t.each((_, e) => {\n\t\t\t\t\tlet num = $(e).attr('numrow');\n\t\t\t\t\tthis.deleteLineItem(num);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register all the events\n\t\t */\n\t\tregisterEvents: function (container) {\n\t\t\tthis.form = container;\n\t\t\tthis.loadConfig();\n\t\t\tthis.registerInventorySaveData();\n\t\t\tthis.registerAddItem();\n\t\t\tthis.registerMassAddItem();\n\t\t\tthis.initItem();\n\t\t\tthis.registerSortableItems();\n\t\t\tthis.registerSubProducts();\n\t\t\tthis.registerChangeDiscount();\n\t\t\tthis.registerChangeTax();\n\t\t\tthis.registerClearReferenceSelection();\n\t\t\tthis.registerShowHideExpanded();\n\t\t\tthis.registerChangeCurrency();\n\t\t\tthis.registerChangeDiscountAggregation();\n\t\t\tthis.setDefaultGlobalTax(container);\n\t\t}\n\t}\n);\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","$","Class","inventoryInstance","getInventoryInstance","container","moduleClassName","find","val","window","registerEvents","form","discount","tax","inventoryContainer","inventoryHeadContainer","summaryTaxesContainer","summaryDiscountContainer","summaryCurrenciesContainer","rowClass","discountModalFields","taxModalFields","getForm","loadConfig","JSON","parse","getInventoryItemsContainer","getInventoryHeadContainer","getInventorySummaryDiscountContainer","getInventorySummaryTaxesContainer","getInventorySummaryCurrenciesContainer","getNextLineItemRowNumber","$inventoryItemsNo","rowNumber","parseInt","getAccountId","accountReferenceField","checkDeleteIcon","length","showLineItemsDeleteIcon","app","getMainParams","hideLineItemsDeleteIcon","removeClass","addClass","getClosestRow","element","closest","getBasicRow","eq","clone","isRecordSelected","parentRow","productField","validationEngine","getTaxModeSelectElement","row","items","isIndividualTaxMode","selectedOption","default_mode","isGroupTaxMode","showIndividualTax","thisInstance","groupTax","newRow","taxParam","aggregationType","each","thisItem","globalTax","parseFloat","attr","setTaxParam","setTax","setTaxPercent","setDefaultGlobalTax","rowsCalculations","taxDefaultValue","data","isGroupTax","summaryContainer","getTaxParams","individualTax","stringify","quantityChangeActions","getDiscountModeSelectElement","isIndividualDiscountMode","showIndividualDiscount","groupDiscount","setDiscount","setDiscountParam","getCurrency","getDiscountAggregation","aggregation","getTax","self","taxParams","valuePrices","getNetPrice","taxRate","types","forEach","entry","taxValue","regionalTax","getTaxPercent","taxPercent","getQuantityValue","getNumberFromValue","getUnitPriceValue","getDiscount","discountParams","getTotalPrice","discountRate","individualDiscountType","individualDiscount","globalDiscount","additionalDiscount","getGrossPrice","getPurchase","qty","purchase","App","Fields","Double","formatToDb","getSummaryGrossPrice","price","setCurrency","trigger","setCurrencyParam","setDiscountMode","setTaxMode","setName","display","setQuantity","setUnit","text","setSubUnit","setComment","parent","setUnitPrice","formatToDisplay","setPurchase","setNetPrice","setGrossPrice","setTotalPrice","setMargin","setMarginP","rowCalculations","summaryCalculations","calculateTotalPrice","calculateDiscounts","calculateNetPrice","calculateTaxes","calculateGrossPrice","calculateMargin","event","syncHeaderData","calculateItemNumbers","calculateSummary","calculateDiscountSummary","calculateTaxSummary","calculateCurrenciesSummary","calculateMarginPSummary","field","sum","e","sumRow","totalPriceField","sumPrice","getNumberFromText","marginp","purchasePrice","subtraction","getAllDiscount","selected","base","conversionRate","baseConversionRate","taxes","getAllTaxes","html","index","value","appendTo","typeSummary","netPrice","params","param","_","name","percent","old","margin","calculateDiscount","_row","modal","netPriceBeforeDiscount","discountsType","prop","panel","calculateTax","netPriceWithoutTax","taxType","updateRowSequence","registerInventorySaveData","on","Vtiger_Edit_Js","recordPreSave","checkLimits","header","pricebooksModalHandler","lineItemRow","rowName","showRecordsList","module","src_module","src_record","src_field","currency_id","CONFIG","defaultCurrencyId","instance","setSelectEvent","responseData","AppConnector","request","action","record","id","done","result","errorLog","subProductsCashe","loadSubProducts","indicator","progressInstace","recordId","recordModule","removeSubProducts","inArray","addSubProducts","progressIndicator","hide","fail","subProductsContainer","remove","append","mapResultsToFields","referenceModule","unit","recordData","description","unitPriceValues","unitPriceValuesJson","parameters","type","autoFields","inputField","commentElement","next","editorInstance","CKEDITOR","instances","setData","triggerQtyParam","qtyPerUnit","perUnit","saveDiscountsParameters","panels","info","push","saveTaxsParameters","extend","showExpandedRow","inventoryRowExpanded","hideExpandedRow","initDiscountsParameters","parameter","array","isArray","arrayValue","filter","change","initTaxParameters","toString","input","formatNumber","limitEnableSave","account","limit","response","async","dataType","getModuleName","mode","currency","thisInthisstance","status","showModalWindow","currencyChangeActions","select","option","currencyConvertValues","showCurrencyChangeModal","lockCurrencyChange","block","currencyParam","date","rate","conversion","hideModalWindow","one","previous","prevConversionRate","setRowData","rowData","unitText","subunit","subunitText","comment1","net","gross","total","discountParam","discountparam","taxparam","tax_percent","addItem","baseTableId","arguments","sequenceNumber","replaced","replace","moduleLabels","children","concat","initItem","getInstance","registerAutoCompleteFields","registerAddItem","itemsHeader","btn","registerSortableItems","sortable","handle","revert","tolerance","placeholder","helper","ui","width","start","num","item","Text","destroyEditor","startPos","stop","numrow","child","after","Editor","register","registerShowHideExpanded","currentTarget","registerPriceBookModal","registerRowChangeEvent","_this","headContainer","registerSubProducts","registerClearReferenceSelection","_this2","referenceGroup","removeAttr","registerDeleteLineItemEvent","_this3","deleteLineItem","registerChangeDiscount","_this4","view","discountAggregation","relatedRecord","hasClass","totalPrice","discountType","registerChangeDiscountModal","validationEngineOptions","checked","registerChangeTax","sourceRecord","registerChangeTaxModal","registerChangeCurrency","_this5","symbol","registerChangeDiscountAggregation","_this6","registerRowAutoComplete","sourceFieldElement","referenceSelectionEvent","selectedModule","dataUrl","registerMassAddItem","_this7","moduleName","url","i","parentElem","setReferenceFieldValue","Picklist","showSelect2ElementView","Date","loadInventoryData","sourceModule","_this8","success","progressLoader","blockInfo","enabled","Promise","resolve","reject","getRecordId","activeModules","addBtn","oldCurrencyChangeAction","first","Object","keys","currencyparam","discountmode","taxmode","clearInventory","indexOf","Vtiger_Helper_Js","showMessage","vtranslate","basetableid","error","err","_this9"],"mappings":"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"}