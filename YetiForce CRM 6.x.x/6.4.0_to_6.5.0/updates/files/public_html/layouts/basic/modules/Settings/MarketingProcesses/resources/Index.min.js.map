{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_MarketingProcesses_Index_Js',\n\t{},\n\t{\n\t\tregisterChangeVal: function (content) {\n\t\t\tcontent.find('.configField').on('change', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\tvar val;\n\t\t\t\tif (target.attr('type') === 'checkbox') {\n\t\t\t\t\tval = this.checked;\n\t\t\t\t} else {\n\t\t\t\t\tval = target.val() != null ? target.val() : '';\n\t\t\t\t}\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updateConfig',\n\t\t\t\t\ttype: target.data('type'),\n\t\t\t\t\tparam: target.attr('name'),\n\t\t\t\t\tvalue: val\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterSaveMapping: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('button.saveMapping').on('click', function () {\n\t\t\t\tvar mapping = [];\n\t\t\t\tjQuery('#convertLeadMapping tr.listViewEntries:not(.d-none)').each(function () {\n\t\t\t\t\tvar leadName = jQuery(this).find('select.leadsFields').val();\n\t\t\t\t\tvar accountName = jQuery(this).find('select.accountsFields').val();\n\t\t\t\t\tvar relations = [];\n\t\t\t\t\trelations[leadName] = accountName;\n\t\t\t\t\trelations = jQuery.extend({}, relations);\n\t\t\t\t\tif (thisInstance.uniqueReduce(mapping, relations)) {\n\t\t\t\t\t\tmapping.push(relations);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (mapping.length) {\n\t\t\t\t\tjQuery('[name=\"mapping\"]').val(JSON.stringify(mapping)).change();\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\ttext: app.vtranslate('JS_NO_CONDITIONS')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tuniqueReduce: function (mapping, relations) {\n\t\t\tfor (var key in mapping) {\n\t\t\t\tif (JSON.stringify(mapping[key]) === JSON.stringify(relations)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tregisterEventToDeleteMapping: function (content) {\n\t\t\tcontent.find('.deleteMapping').on('click', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar trContainer = element.closest('tr');\n\t\t\t\ttrContainer.remove();\n\t\t\t});\n\t\t},\n\t\tregisterMapping: function (content) {\n\t\t\tcontent.find('[name=\"create_always\"]').on('change', function (e) {\n\t\t\t\tvar mappingTable = jQuery('.mappingTable');\n\t\t\t\tif (this.checked) {\n\t\t\t\t\tmappingTable.removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tmappingTable.addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('#supportProcessesContainer');\n\t\t\tthis.registerChangeVal(content);\n\t\t\tthis.registerSaveMapping(content);\n\t\t\tthis.registerMapping(content);\n\t\t\tthis.registerEventToDeleteMapping(content);\n\t\t\tvar instance = new Settings_LeadMapping_Js();\n\t\t\tinstance.registerEventForAddingNewMapping();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerChangeVal","content","find","on","e","val","target","$","currentTarget","attr","checked","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","type","data","param","value","done","Settings_Vtiger_Index_Js","showMessage","text","result","message","registerSaveMapping","thisInstance","mapping","each","leadName","accountName","relations","extend","uniqueReduce","push","length","JSON","stringify","change","vtranslate","key","registerEventToDeleteMapping","element","trContainer","closest","remove","registerMapping","mappingTable","removeClass","addClass","registerEvents","instance","Settings_LeadMapping_Js","registerEventForAddingNewMapping"],"mappings":"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"}