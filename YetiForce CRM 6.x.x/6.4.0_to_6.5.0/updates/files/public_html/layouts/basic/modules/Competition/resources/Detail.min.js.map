{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\nVtiger_Detail_Js(\n\t'Competition_Detail_Js',\n\t{},\n\t{\n\t\thierarchyResponseCache: {},\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = jQuery.Deferred();\n\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modalContainer) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll', modalContainer));\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll', modalContainer).height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possoble\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","thisInstance","aDeferred","jQuery","Deferred","$","isEmptyObject","AppConnector","request","then","data","resolve","promise","displayHierarchyResponseData","callbackFunction","app","showScrollBar","height","railVisible","size","showModalWindow","modalContainer","App","Components","Scrollbar","xy","registerHierarchyRecordCount","hierarchyButton","module","getModuleName","action","record","getRecordId","mode","length","response","success","html","result","registerShowHierarchy","view","on","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","registerEvents","_super"],"mappings":"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"}