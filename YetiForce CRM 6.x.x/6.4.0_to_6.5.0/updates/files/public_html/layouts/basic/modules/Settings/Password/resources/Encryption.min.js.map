{"version":3,"file":"Encryption.min.js","sources":["Encryption.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Password_Encryption_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Container\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Set container\n\t\t * @param {Object} element\n\t\t */\n\t\tsetContainer: function (element) {\n\t\t\tthis.container = element;\n\t\t},\n\t\t/**\n\t\t * Get Container\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer: function () {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Get nav tab\n\t\t * @returns {Object}\n\t\t */\n\t\tgetActiveTabNav: function () {\n\t\t\treturn this.getContainer().find('.js-nav-container a.active');\n\t\t},\n\t\t/**\n\t\t * Get tab (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetTabForm: function () {\n\t\t\treturn this.getContainer().find('.tab-pane.active form');\n\t\t},\n\t\t/**\n\t\t * Register change tab\n\t\t */\n\t\tregisterChangeTab: function () {\n\t\t\tlet container = this.getContainer();\n\t\t\tthis.passwordAlert(container);\n\t\t\tcontainer.find('.js-nav-container a').on('click', (e) => {\n\t\t\t\tthis.loadTab(e.currentTarget.dataset.url);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Load content from URL\n\t\t * @param {string} url\n\t\t */\n\t\tloadTab: function (url) {\n\t\t\tlet tabContainer = this.getContainer().find('.js-tab-container');\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tblockInfo: {\n\t\t\t\t\telementToBlock: tabContainer,\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(url)\n\t\t\t\t.done((data) => {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\ttabContainer.html(data);\n\t\t\t\t\tthis.registerBasicEvents(tabContainer);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(tabContainer.find('select'));\n\t\t\t\t})\n\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeMethodName: function () {\n\t\t\tlet container = this.getTabForm();\n\t\t\tif (container.length) {\n\t\t\t\tthis.passwordAlert(container);\n\t\t\t}\n\t\t\tcontainer.find('[name=\"methods\"]').on('change', (e) => {\n\t\t\t\tthis.passwordAlert($(e.currentTarget).closest('form'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeModule: function () {\n\t\t\tthis.getTabForm()\n\t\t\t\t.find('[name=\"target\"]')\n\t\t\t\t.on('change', (e) => {\n\t\t\t\t\tlet url = this.getActiveTabNav().data('url') + '&target=' + e.currentTarget.value;\n\t\t\t\t\tthis.loadTab(url);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Password alerts\n\t\t * @param {jQuery} container\n\t\t */\n\t\tpasswordAlert: function (container) {\n\t\t\tlet methodElement = container.find('[name=\"methods\"]');\n\t\t\tlet mapLengthVector = JSON.parse($('[name=\"lengthVectors\"]').val());\n\t\t\tlet length = mapLengthVector[methodElement.val()];\n\t\t\tlet validator = '';\n\t\t\tlet passwordElement = container.find('#password');\n\t\t\tlet vectorElement = container.find('#vector');\n\t\t\tlet passwordInfoAlert = container.find('.js-password-alert');\n\t\t\tif (length == undefined) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t\tpasswordElement.attr('disabled', 'disabled');\n\t\t\t} else if (length === 0) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.val('');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tpasswordInfoAlert.removeClass('d-none');\n\t\t\t\tpasswordInfoAlert.find('.js-password-length').text(length);\n\t\t\t\tvectorElement.removeAttr('disabled');\n\t\t\t\tpasswordElement.removeAttr('disabled');\n\t\t\t\tvalidator = 'validate[required,maxSize[' + length + '],minSize[' + length + ']]';\n\t\t\t}\n\t\t\tvectorElement.attr('data-validation-engine', validator);\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm: function () {\n\t\t\tlet form = this.getTabForm();\n\t\t\tform.on('submit', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet save = () => {\n\t\t\t\t\t\tlet progressElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\t\tAppConnector.request(form.serializeFormData()).done((response) => {\n\t\t\t\t\t\t\tprogressElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\thide: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.getActiveTabNav().trigger('click');\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({ blockInfo: { enabled: true } });\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tformData.mode = 'checkEncryptionStatus';\n\t\t\t\t\tAppConnector.request(formData).done((response) => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (response.result.message) {\n\t\t\t\t\t\t\tapp.showConfirmModal({\n\t\t\t\t\t\t\t\ttext: response.result.message + `<div>${app.vtranslate('JS_CHANGE_CONFIRMATION')}</div>`,\n\t\t\t\t\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (response.result.result) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events to preview password\n\t\t */\n\t\tregisterPreviewPassword: function () {\n\t\t\tvar container = this.getTabForm();\n\t\t\tvar button = container.find('.previewPassword');\n\t\t\tbutton.on('mousedown', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'text');\n\t\t\t});\n\t\t\tbutton.on('mouseup', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t\tbutton.on('mouseout', function () {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register basic events in view\n\t\t */\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.registerForm();\n\t\t\tthis.registerChangeMethodName();\n\t\t\tthis.registerChangeModule();\n\t\t\tthis.registerPreviewPassword();\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.setContainer($('.contentsDiv'));\n\t\t\tthis.registerChangeTab();\n\t\t\tthis.registerBasicEvents();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","setContainer","element","getContainer","getActiveTabNav","find","getTabForm","registerChangeTab","_this","passwordAlert","on","e","loadTab","currentTarget","dataset","url","_this2","tabContainer","progressIndicatorElement","$","progressIndicator","blockInfo","elementToBlock","enabled","AppConnector","request","done","data","mode","html","registerBasicEvents","App","Fields","Picklist","showSelect2ElementView","fail","textStatus","errorThrown","app","errorLog","registerChangeMethodName","_this3","length","closest","registerChangeModule","_this4","value","methodElement","mapLengthVector","JSON","parse","val","validator","passwordElement","vectorElement","passwordInfoAlert","addClass","attr","removeClass","text","removeAttr","registerForm","_this5","form","event","preventDefault","validationEngine","validationEngineOptions","save","progressElement","serializeFormData","response","showNotify","result","type","hide","trigger","formData","message","showConfirmModal","concat","vtranslate","confirmedCallback","registerPreviewPassword","button","registerEvents"],"mappings":"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"}