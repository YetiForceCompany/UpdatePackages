{"version":3,"file":"RelatedList.min.js","sources":["RelatedList.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_RelatedList_Js(\n\t'Products_RelatedList_Js',\n\t{},\n\t{\n\t\tregisterEditListPrice: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet element = this.content.find('.js-edit-listprice');\n\t\t\telement.validationEngine(app.validationEngineOptions);\n\t\t\telement.on('change', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(this);\n\t\t\t\telement.formatNumber();\n\t\t\t\tif (!element.validationEngine('validate')) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\t\t\trecord: element.closest('.js-list__row').data('id'),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\tmode: 'addListPrice',\n\t\t\t\t\t\tsrc_record: thisInstance.parentRecordId,\n\t\t\t\t\t\trelated_module: thisInstance.moduleName,\n\t\t\t\t\t\tprice: element.val()\n\t\t\t\t\t}).done(function (responseData) {\n\t\t\t\t\t\tif (responseData.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEditQtyProducts: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet element = this.content.find('.js-edit-qtyinstock');\n\t\t\telement.validationEngine(app.validationEngineOptions);\n\t\t\telement.on('change', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(this);\n\t\t\t\telement.formatNumber();\n\t\t\t\tif (!element.validationEngine('validate')) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\t\t\trecord: element.closest('.js-list__row').data('id'),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\tmode: 'setQtyProducts',\n\t\t\t\t\t\tsrc_record: thisInstance.parentRecordId,\n\t\t\t\t\t\trelated_module: thisInstance.moduleName,\n\t\t\t\t\t\tqty: element.val()\n\t\t\t\t\t}).done(function (responseData) {\n\t\t\t\t\t\tif (responseData.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterPostLoadEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerEditListPrice();\n\t\t\tthis.registerEditQtyProducts();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_RelatedList_Js","registerEditListPrice","thisInstance","element","content","find","validationEngine","app","validationEngineOptions","on","e","stopPropagation","$","formatNumber","AppConnector","request","module","parentModuleName","record","closest","data","action","mode","src_record","parentRecordId","related_module","moduleName","price","val","done","responseData","result","showNotify","text","vtranslate","type","registerEditQtyProducts","qty","registerPostLoadEvents","_super"],"mappings":";;AAAA,kKACA,YAAY,CAEZA,qBAAqB,CACpB,yBAAyB,CACzB,EAAE,CACF,CACCC,qBAAqB,CAAE,SAAAA,qBAAAA,EAAY,CAC9B,IAAAC,YAAY,CAAG,IAAI,CACnBC,OAAO,CAAG,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,oBAAoB,CAAC,CACrDF,OAAO,CAACG,gBAAgB,CAACC,GAAG,CAACC,uBAAuB,CAAC,CACrDL,OAAO,CAACM,EAAE,CAAC,QAAQ,CAAE,SAAUC,CAAC,CAAE,CACjCA,CAAC,CAACC,eAAe,EAAE,CACnB,IAAIR,OAAO,CAAGS,CAAC,CAAC,IAAI,CAAC,CACrBT,OAAO,CAACU,YAAY,EAAE,CACjBV,OAAO,CAACG,gBAAgB,CAAC,UAAU,CAAC,EACxCQ,YAAY,CAACC,OAAO,CAAC,CACpBC,MAAM,CAAEd,YAAY,CAACe,gBAAgB,CACrCC,MAAM,CAAEf,OAAO,CAACgB,OAAO,CAAC,eAAe,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CACnDC,MAAM,CAAE,cAAc,CACtBC,IAAI,CAAE,cAAc,CACpBC,UAAU,CAAErB,YAAY,CAACsB,cAAc,CACvCC,cAAc,CAAEvB,YAAY,CAACwB,UAAU,CACvCC,KAAK,CAAExB,OAAO,CAACyB,GAAG,EACnB,CAAC,CAAC,CAACC,IAAI,CAAC,SAAUC,YAAY,CAAE,CAC3BA,YAAY,CAACC,MAAM,EACtBxB,GAAG,CAACyB,UAAU,CAAC,CACdC,IAAI,CAAE1B,GAAG,CAAC2B,UAAU,CAAC,mBAAmB,CAAC,CACzCC,IAAI,CAAE,SACP,CAAC,EAEH,CAAC,EAEH,CAAC,EACF,CAAC,CACDC,uBAAuB,CAAE,SAAAA,uBAAAA,EAAY,CAChC,IAAAlC,YAAY,CAAG,IAAI,CACnBC,OAAO,CAAG,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,qBAAqB,CAAC,CACtDF,OAAO,CAACG,gBAAgB,CAACC,GAAG,CAACC,uBAAuB,CAAC,CACrDL,OAAO,CAACM,EAAE,CAAC,QAAQ,CAAE,SAAUC,CAAC,CAAE,CACjCA,CAAC,CAACC,eAAe,EAAE,CACnB,IAAIR,OAAO,CAAGS,CAAC,CAAC,IAAI,CAAC,CACrBT,OAAO,CAACU,YAAY,EAAE,CACjBV,OAAO,CAACG,gBAAgB,CAAC,UAAU,CAAC,EACxCQ,YAAY,CAACC,OAAO,CAAC,CACpBC,MAAM,CAAEd,YAAY,CAACe,gBAAgB,CACrCC,MAAM,CAAEf,OAAO,CAACgB,OAAO,CAAC,eAAe,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CACnDC,MAAM,CAAE,cAAc,CACtBC,IAAI,CAAE,gBAAgB,CACtBC,UAAU,CAAErB,YAAY,CAACsB,cAAc,CACvCC,cAAc,CAAEvB,YAAY,CAACwB,UAAU,CACvCW,GAAG,CAAElC,OAAO,CAACyB,GAAG,EACjB,CAAC,CAAC,CAACC,IAAI,CAAC,SAAUC,YAAY,CAAE,CAC3BA,YAAY,CAACC,MAAM,EACtBxB,GAAG,CAACyB,UAAU,CAAC,CACdC,IAAI,CAAE1B,GAAG,CAAC2B,UAAU,CAAC,mBAAmB,CAAC,CACzCC,IAAI,CAAE,SACP,CAAC,EAEH,CAAC,EAEH,CAAC,EACF,CAAC,CACDG,sBAAsB,CAAE,SAAAA,sBAAAA,EAAY,CACnC,IAAI,CAACC,MAAM,EAAE,CACb,IAAI,CAACtC,qBAAqB,EAAE,CAC5B,IAAI,CAACmC,uBAAuB,GAC7B,CACD,CACD,CAAC;;"}