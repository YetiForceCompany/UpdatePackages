{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 6.5 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'HelpDesk_Detail_Js',\n\t{\n\t\tsetAccountsReference: function () {\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'Accounts',\n\t\t\t\t\tsrc_module: 'HelpDesk',\n\t\t\t\t\tsrc_record: app.getRecordId()\n\t\t\t\t},\n\t\t\t\t(_modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tVtiger_Detail_Js.getInstance()\n\t\t\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\t\t\tfield: 'parent_id',\n\t\t\t\t\t\t\t\tvalue: responseData.id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function () {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tregisterSetServiceContracts: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectServiceContracts').on('click', 'ul li', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tsetRelatedFields: true,\n\t\t\t\t\t\tfield: 'servicecontractsid',\n\t\t\t\t\t\tvalue: element.data('id')\n\t\t\t\t\t})\n\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to get response from hierarchy\n\t\t * @param {array} params\n\t\t * @returns {Promise}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = $.Deferred();\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to display the hierarchy response data\n\t\t * @param {array} data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modal) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll'));\n\t\t\t\tthisInstance.registerChangeStatusInHierarchy(modal);\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possible\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Shows hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events on update hierarchy button\n\t\t *\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterChangeStatusInHierarchy: function (container) {\n\t\t\tcontainer.find('.js-update-hierarchy').on('click', function () {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'ChangeStatus',\n\t\t\t\t\trecordsType: container.find('.js-selected-records').val(),\n\t\t\t\t\tstatus: container.find('.js-status').val(),\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tapp.showNotify({ text: data.result.data, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation: function (element, picklistName) {\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tapp.showConfirmModal({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\ttext: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION'),\n\t\t\t\tconfirmedCallback: () => {\n\t\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\t\tthis.saveFieldValues({\n\t\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\t\tfield: picklistName\n\t\t\t\t\t})\n\t\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function save field values\n\t\t * @param {array} fieldDetailList\n\t\t * @returns {Promise}\n\t\t */\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tconst self = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tconst recordId = app.getRecordId();\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tconst saveData = (reload = true) => {\n\t\t\t\tdata['record'] = recordId;\n\t\t\t\tdata['module'] = app.getModuleName();\n\t\t\t\tdata['action'] = 'SaveAjax';\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = data;\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (reponseData) {\n\t\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (\n\t\t\t\tfieldDetailList.field === 'ticketstatus' &&\n\t\t\t\t(CONFIG.checkIfRecordHasTimeControl || CONFIG.checkIfRelatedTicketsAreClosed)\n\t\t\t) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'CheckValidateToClose',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: fieldDetailList.value\n\t\t\t\t}).done((response) => {\n\t\t\t\t\tif (response.result.hasTimeControl.result && response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\tsaveData(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet addTimeControlCb = saveData;\n\t\t\t\t\t\tif (!response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.relatedTicketsClosed.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taddTimeControlCb = () => {\n\t\t\t\t\t\t\t\tthis.saveFieldValues(fieldDetailList);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!response.result.hasTimeControl.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.hasTimeControl.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.addTimeControl(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trecordId: recordId,\n\t\t\t\t\t\t\t\t\turl: `index.php?module=OSSTimeControl&view=Edit&sourceModule=HelpDesk&sourceRecord=${recordId}&relationOperation=true&subprocess=${recordId}&subprocess=${recordId}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taddTimeControlCb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t} else {\n\t\t\t\tsaveData(false);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add time control when closed ticket\n\t\t * @param {array} params\n\t\t * @returns {Promise}\n\t\t */\n\t\taddTimeControl(params, callback = () => {}) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet referenceModuleName = 'OSSTimeControl';\n\t\t\tlet parentId = params.recordId;\n\t\t\tlet parentModule = 'HelpDesk';\n\t\t\tlet quickCreateParams = {};\n\t\t\tlet relatedParams = {};\n\t\t\tlet relatedField = 'subprocess';\n\t\t\tlet fullFormUrl = params.url;\n\t\t\trelatedParams[relatedField] = parentId;\n\t\t\tlet eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\t\tlet preQuickCreateSave = function (data) {\n\t\t\t\tlet index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tlet field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\tlet queryParameters = queryString.split('&');\n\t\t\t\tfor (let index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParam = queryParameters[index];\n\t\t\t\t\tlet queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = callback;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSetServiceContracts();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","setAccountsReference","app","showRecordsList","module","src_module","src_record","getRecordId","_modal","instance","setSelectEvent","responseData","getInstance","saveFieldValues","field","value","id","done","location","reload","registerSetServiceContracts","thisInstance","$","on","e","element","jQuery","currentTarget","setRelatedFields","data","getHierarchyResponseData","params","aDeferred","Deferred","isEmptyObject","hierarchyResponseCache","AppConnector","request","then","resolve","promise","displayHierarchyResponseData","callbackFunction","showScrollBar","height","railVisible","size","showModalWindow","modal","App","Components","Scrollbar","xy","registerChangeStatusInHierarchy","registerHierarchyRecordCount","hierarchyButton","getModuleName","action","record","mode","length","response","success","html","result","registerShowHierarchy","view","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","container","find","recordsType","val","status","showNotify","text","type","hideModalWindow","showProgressConfirmation","picklistName","_this","picklistValue","showConfirmModal","title","vtranslate","confirmedCallback","window","fail","error","err","errorLog","fieldDetailList","_this2","self","recordId","saveData","arguments","async","dataType","reponseData","CONFIG","checkIfRecordHasTimeControl","checkIfRelatedTicketsAreClosed","hasTimeControl","relatedTicketsClosed","addTimeControlCb","message","addTimeControl","url","concat","callback","parentId","quickCreateParams","relatedParams","relatedField","fullFormUrl","eliminatedKeys","Array","preQuickCreateSave","index","queryParam","queryParamComponents","queryParameters","indexOf","urlSplit","split","queryString","trigger","appendTo","inArray","callbackPostShown","noCache","QuickCreate","createRecord","registerEvents","_super"],"mappings":"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"}