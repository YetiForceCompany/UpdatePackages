{"version":3,"file":"CustomView.min.js","sources":["CustomView.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce S.A.\n *************************************************************************************/\n'use strict';\n\nclass CustomView {\n\tconstructor(url) {\n\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tapp.showModalWindow(null, url, () => {\n\t\t\tthis.modalContainer = $('.js-filter-modal__container');\n\t\t\tthis.advanceFilterInstance = new Vtiger_ConditionBuilder_Js(\n\t\t\t\tthis.modalContainer.find('.js-condition-builder-view .js-condition-builder'),\n\t\t\t\tthis.modalContainer.find('#sourceModule').val()\n\t\t\t);\n\t\t\tthis.advanceFilterInstance.registerEvents();\n\t\t\tCustomView.registerAdvancedConditionsEvents(this.modalContainer);\n\n\t\t\t//This will store the columns selection container\n\t\t\tthis.columnSelectElement = false;\n\t\t\tthis.registerEvents();\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t}\n\n\t/** @type {Vtiger_ConditionBuilder_Js} Condition builder object */\n\tstatic advancedConditionsBuilder;\n\n\tloadDateFilterValues() {\n\t\tlet selectedDateFilter = $('#standardDateFilter option:selected');\n\t\tlet currentDate = selectedDateFilter.data('currentdate');\n\t\tlet endDate = selectedDateFilter.data('enddate');\n\t\t$('#standardFilterCurrentDate').val(currentDate);\n\t\t$('#standardFilterEndDate').val(endDate);\n\t}\n\n\t/**\n\t * Function to get the contents container\n\t * @return : jQuery object of contents container\n\t */\n\tgetContentsContainer() {\n\t\tif (!this.modalContainer) {\n\t\t\tthis.modalContainer = $('.js-filter-modal__container');\n\t\t}\n\t\treturn this.modalContainer;\n\t}\n\n\t/**\n\t * Function to get the view columns selection element\n\t * @return : jQuery object of view columns selection element\n\t */\n\tgetColumnSelectElement() {\n\t\tif (!this.columnSelectElement) {\n\t\t\tthis.columnSelectElement = $('#viewColumnsSelect');\n\t\t}\n\t\treturn this.columnSelectElement;\n\t}\n\n\t/**\n\t * Function which will get the selected columns\n\t * @return : array of selected values\n\t */\n\tgetSelectedColumns() {\n\t\tlet columnListSelectElement = this.getColumnSelectElement();\n\t\treturn columnListSelectElement.val();\n\t}\n\t/**\n\t * Get custom labels\n\t * @returns array\n\t */\n\tgetCustomLabels() {\n\t\tlet customFieldNames = {};\n\t\tthis.getContentsContainer()\n\t\t\t.find('.js-short-label')\n\t\t\t.each(function () {\n\t\t\t\tcustomFieldNames[$(this).attr('data-field-value')] = $(this).val();\n\t\t\t});\n\t\treturn customFieldNames;\n\t}\n\n\tsaveFilter() {\n\t\tlet aDeferred = $.Deferred();\n\t\tlet formData = $('#CustomView').serializeFormData();\n\t\tAppConnector.request(formData, true)\n\t\t\t.done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t\t.fail(function (error) {\n\t\t\t\taDeferred.reject(error);\n\t\t\t});\n\t\treturn aDeferred.promise();\n\t}\n\n\tsaveAndViewFilter() {\n\t\tthis.saveFilter()\n\t\t\t.done(function (data) {\n\t\t\t\tlet response = data.result;\n\t\t\t\tif (response && response.success) {\n\t\t\t\t\tlet url;\n\t\t\t\t\tif (app.getParentModuleName() == 'Settings') {\n\t\t\t\t\t\turl = 'index.php?module=CustomView&parent=Settings&view=Index&sourceModule=' + $('#sourceModule').val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\turl = response.listviewurl;\n\t\t\t\t\t}\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t} else {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_DUPLICATE_RECORD'),\n\t\t\t\t\t\ttext: response.message,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.fail(function (error) {\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttitle: error,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tregisterIconEvents() {\n\t\tthis.getContentsContainer()\n\t\t\t.find('.js-filter-preferences')\n\t\t\t.on('change', '.js-filter-preference', (e) => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet iconElement = currentTarget.next();\n\t\t\t\tif (currentTarget.prop('checked')) {\n\t\t\t\t\ticonElement.removeClass(iconElement.data('unchecked')).addClass(iconElement.data('check'));\n\t\t\t\t} else {\n\t\t\t\t\ticonElement.removeClass(iconElement.data('check')).addClass(iconElement.data('unchecked'));\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tregisterColorEvent() {\n\t\tconst container = this.getContentsContainer();\n\t\tlet picker = container.find('.js-color-picker');\n\t\tlet pickerField = picker.find('.js-color-picker__field');\n\t\tlet showPicker = () => {\n\t\t\tApp.Fields.Colors.showPicker({\n\t\t\t\tcolor: pickerField.val(),\n\t\t\t\tbgToUpdate: picker.find('.js-color-picker__color'),\n\t\t\t\tfieldToUpdate: pickerField\n\t\t\t});\n\t\t};\n\t\tpicker.on('click', showPicker);\n\t}\n\n\t/**\n\t * Get list of fields to duplicates\n\t * @returns {Array}\n\t */\n\tgetDuplicateFields() {\n\t\tlet fields = [];\n\t\tconst container = this.getContentsContainer();\n\t\tcontainer.find('.js-duplicates-container .js-duplicates-row').each(function () {\n\t\t\tfields.push({\n\t\t\t\tfieldid: $(this).find('.js-duplicates-field').val(),\n\t\t\t\tignore: $(this).find('.js-duplicates-ignore').is(':checked')\n\t\t\t});\n\t\t});\n\t\treturn fields;\n\t}\n\t/**\n\t * Register events for block \"Find duplicates\"\n\t */\n\tregisterDuplicatesEvents() {\n\t\tconst container = this.getContentsContainer();\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.js-duplicates-container .js-duplicates-field'));\n\t\tcontainer.on('click', '.js-duplicates-remove', function () {\n\t\t\t$(this).closest('.js-duplicates-row').remove();\n\t\t});\n\t\tcontainer.find('.js-duplicate-add-field').on('click', function () {\n\t\t\tlet template = container.find('.js-duplicates-field-template').clone();\n\t\t\ttemplate.removeClass('d-none');\n\t\t\ttemplate.removeClass('js-duplicates-field-template');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(template.find('.js-duplicates-field'));\n\t\t\tcontainer.find('.js-duplicates-container').append(template);\n\t\t});\n\t}\n\tregisterSubmitEvent(select2Element) {\n\t\t$('#CustomView').on('submit', (e) => {\n\t\t\tconst form = $(e.currentTarget);\n\t\t\tlet selectElement = this.getColumnSelectElement();\n\t\t\tif ($('#viewname').val().length > 100) {\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\ttext: app.vtranslate('JS_VIEWNAME_ALERT'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//Mandatory Fields selection validation\n\t\t\t//Any one Mandatory Field should select while creating custom view.\n\t\t\tlet mandatoryFieldsList = JSON.parse($('#mandatoryFieldsList').val());\n\t\t\tlet selectedOptions = selectElement.val();\n\t\t\tlet mandatoryFieldsMissing = true;\n\t\t\tif (selectedOptions) {\n\t\t\t\tmandatoryFieldsMissing = selectedOptions.filter((value) => mandatoryFieldsList.includes(value)).length <= 0;\n\t\t\t}\n\t\t\tif (mandatoryFieldsMissing) {\n\t\t\t\tselectElement.validationEngine(\n\t\t\t\t\t'showPrompt',\n\t\t\t\t\tapp.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_MANDATORY_FIELD'),\n\t\t\t\t\t'error',\n\t\t\t\t\t'topLeft',\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tselect2Element.validationEngine('hide');\n\t\t\t}\n\t\t\t//Mandatory Fields validation ends\n\t\t\tlet result = form.validationEngine('validate');\n\t\t\tif (result) {\n\t\t\t\t//handled standard filters saved values.\n\t\t\t\tlet stdfilterlist = {};\n\n\t\t\t\tif (\n\t\t\t\t\t$('#standardFilterCurrentDate').val() != '' &&\n\t\t\t\t\t$('#standardFilterEndDate').val() != '' &&\n\t\t\t\t\t$('select.standardFilterColumn option:selected').val() != 'none'\n\t\t\t\t) {\n\t\t\t\t\tstdfilterlist['columnname'] = $('select.standardFilterColumn option:selected').val();\n\t\t\t\t\tstdfilterlist['stdfilter'] = $('select#standardDateFilter option:selected').val();\n\t\t\t\t\tstdfilterlist['startdate'] = $('#standardFilterCurrentDate').val();\n\t\t\t\t\tstdfilterlist['enddate'] = $('#standardFilterEndDate').val();\n\t\t\t\t\t$('#stdfilterlist').val(JSON.stringify(stdfilterlist));\n\t\t\t\t}\n\t\t\t\t//handled advanced filters saved values.\n\t\t\t\tlet contentContainer = this.getContentsContainer();\n\t\t\t\t$('#advfilterlist').val(JSON.stringify(this.advanceFilterInstance.getConditions()));\n\t\t\t\tform.find('#advancedConditions').val(JSON.stringify(CustomView.getAdvancedConditions(form)));\n\t\t\t\t$('[name=\"duplicatefields\"]').val(JSON.stringify(this.getDuplicateFields()));\n\t\t\t\t$('input[name=\"columnslist\"]', contentContainer).val(JSON.stringify(this.getSelectedColumns()));\n\t\t\t\tcontentContainer.find('.js-custom-field-names').val(JSON.stringify(this.getCustomLabels()));\n\n\t\t\t\tthis.saveAndViewFilter();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tapp.formAlignmentAfterValidation($(e.currentTarget));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Block submit on press enter key\n\t */\n\tregisterDisableSubmitOnEnter() {\n\t\tthis.getContentsContainer()\n\t\t\t.find('#viewname, [name=\"color\"]')\n\t\t\t.on('keydown', (e) => {\n\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Function to register the advanced conditions events for customview\n\t * @param {jQuery} listViewContainer\n\t */\n\tstatic registerCustomViewAdvCondEvents(listViewContainer) {\n\t\tlistViewContainer.on('click', '.js-custom-view-adv-cond-modal', () => {\n\t\t\tconst customViewAdvCond = listViewContainer.find('.js-custom-view-adv-cond');\n\t\t\tlet advancedConditions = customViewAdvCond.val();\n\t\t\tif (advancedConditions) {\n\t\t\t\tadvancedConditions = JSON.parse(advancedConditions);\n\t\t\t}\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: 'CustomViewAdvCondModal',\n\t\t\t\tadvancedConditions: advancedConditions\n\t\t\t})\n\t\t\t\t.done((data) => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, (modalContainer) => {\n\t\t\t\t\t\t\tApp.Tools.Form.registerBlockToggle(modalContainer);\n\t\t\t\t\t\t\tthis.registerAdvancedConditionsEvents(modalContainer);\n\t\t\t\t\t\t\tmodalContainer.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\t\t\t\t\tcustomViewAdvCond.val(JSON.stringify(this.getAdvancedConditions(modalContainer)));\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tif (typeof app.pageController.getListViewRecords !== 'undefined') {\n\t\t\t\t\t\t\t\t\tapp.pageController.getListViewRecords();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail((_textStatus, errorThrown) => {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttextTrusted: false,\n\t\t\t\t\t\ttitle: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\ttext: errorThrown,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t});\n\t}\n\t/**\n\t * Function to register the advanced conditions events for custom view\n\t * @param {jQuery} container\n\t */\n\tstatic registerAdvancedConditionsEvents(container) {\n\t\tconst self = this;\n\t\tconst builder = container.find('.js-adv-condition-builder-view');\n\t\tconst relationSelect = container.find('.js-relation-select');\n\t\tif (relationSelect.val() != 0) {\n\t\t\tthis.advancedConditionsBuilder = new Vtiger_ConditionBuilder_Js(\n\t\t\t\tbuilder.find('.js-condition-builder'),\n\t\t\t\trelationSelect.find('option:selected').data('module')\n\t\t\t);\n\t\t\tthis.advancedConditionsBuilder.registerEvents();\n\t\t}\n\t\trelationSelect.on('change', function () {\n\t\t\tconst moduleName = $(this).find('option:selected').data('module');\n\t\t\tbuilder.html('');\n\t\t\tdelete self.advancedConditionsBuilder;\n\t\t\tif (moduleName) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'ConditionBuilder',\n\t\t\t\t\tmode: 'builder',\n\t\t\t\t\tsourceModuleName: moduleName\n\t\t\t\t}).done((data) => {\n\t\t\t\t\tbuilder.html(data);\n\t\t\t\t\tself.advancedConditionsBuilder = new Vtiger_ConditionBuilder_Js(\n\t\t\t\t\t\tbuilder.find('.js-condition-builder'),\n\t\t\t\t\t\tmoduleName\n\t\t\t\t\t);\n\t\t\t\t\tself.advancedConditionsBuilder.registerEvents();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t/**\n\t * Function to register the advanced conditions events for custom view\n\t * @param {jQuery} container\n\t * @return {object}\n\t */\n\tstatic getAdvancedConditions(container) {\n\t\tconst advancedConditions = {\n\t\t\trelationId: container.find('.js-relation-select').val()\n\t\t};\n\t\tcontainer.find('.js-relation-checkbox:checked').each(function () {\n\t\t\tif (typeof advancedConditions.relationColumns === 'undefined') {\n\t\t\t\tadvancedConditions.relationColumns = [];\n\t\t\t}\n\t\t\tadvancedConditions.relationColumns.push($(this).val());\n\t\t});\n\t\tif (this.advancedConditionsBuilder) {\n\t\t\tadvancedConditions.relationConditions = this.advancedConditionsBuilder.getConditions();\n\t\t}\n\t\treturn advancedConditions;\n\t}\n\t/**\n\t * Register change selected columns\n\t */\n\tregisterChangeSelectedColumns() {\n\t\tthis.container.find('.js-view-columns-select').on('change', () => {\n\t\t\tthis.registerAppendCustomLabels();\n\t\t});\n\t}\n\t/**\n\t *\tRegister append custom labels\n\t */\n\tregisterAppendCustomLabels() {\n\t\tlet shorterNamesContainer = this.container.find('.js-custom-name-fields');\n\t\tlet selectedColumns = this.container\n\t\t\t.find('.js-view-columns-select option:selected')\n\t\t\t.toArray()\n\t\t\t.map((item) => ({\n\t\t\t\ttext: item.getAttribute('data-field-label'),\n\t\t\t\tvalue: item.value,\n\t\t\t\tcustomLabel: item.getAttribute('data-custom-label') || ''\n\t\t\t}));\n\t\tshorterNamesContainer.empty();\n\t\tlet newCustomLabelElement = '';\n\t\tlet customLabelElement = '';\n\t\tlet customLabelValue = '';\n\t\tlet inputContainerElement = '';\n\t\tlet inputElement = '';\n\t\t$.each(selectedColumns, function (_index, element) {\n\t\t\tnewCustomLabelElement = document.createElement('div');\n\t\t\tnewCustomLabelElement.setAttribute('class', 'd-flex mb-1');\n\n\t\t\tcustomLabelElement = document.createElement('div');\n\t\t\tcustomLabelElement.setAttribute('class', 'col-form-label col-md-2 pl-0');\n\t\t\tcustomLabelValue = document.createTextNode(element.text);\n\t\t\tcustomLabelElement.appendChild(customLabelValue);\n\t\t\tnewCustomLabelElement.appendChild(customLabelElement);\n\n\t\t\tinputContainerElement = document.createElement('div');\n\t\t\tinputContainerElement.setAttribute('class', 'col-md-4');\n\n\t\t\tinputElement = document.createElement('input');\n\t\t\tinputElement.setAttribute('type', 'text');\n\t\t\tinputElement.setAttribute('class', 'form-control js-short-label');\n\t\t\tinputElement.setAttribute('data-field-value', element.value);\n\t\t\tinputElement.setAttribute(\n\t\t\t\t'data-validation-engine',\n\t\t\t\t'validate[maxSize[50], funcCall[Vtiger_Base_Validator_Js.invokeValidation]]'\n\t\t\t);\n\t\t\tinputElement.setAttribute('data-validator', '[{\"name\":\"FieldLabel\"}]');\n\t\t\tinputElement.setAttribute('value', element.customLabel);\n\n\t\t\tinputContainerElement.appendChild(inputElement);\n\t\t\tnewCustomLabelElement.appendChild(inputContainerElement);\n\t\t\tshorterNamesContainer.append(newCustomLabelElement);\n\t\t});\n\t}\n\t/**\n\t * Register events\n\t */\n\tregisterEvents() {\n\t\tthis.container = this.getContentsContainer();\n\t\tthis.registerIconEvents();\n\t\tApp.Fields.Tree.register(this.getContentsContainer());\n\t\tApp.Tools.Form.registerBlockToggle(this.getContentsContainer());\n\t\tthis.registerColorEvent();\n\t\tthis.registerDuplicatesEvents();\n\t\tconst select2Element = App.Fields.Picklist.showSelect2ElementView(this.getColumnSelectElement());\n\t\tthis.registerSubmitEvent(select2Element);\n\t\t$('.stndrdFilterDateSelect').datepicker();\n\t\t$('#standardDateFilter').on('change', () => {\n\t\t\tthis.loadDateFilterValues();\n\t\t});\n\t\t$('#CustomView').validationEngine(app.validationEngineOptions);\n\t\tthis.registerDisableSubmitOnEnter();\n\t\tthis.registerChangeSelectedColumns();\n\t\tthis.registerAppendCustomLabels();\n\t}\n}\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/** @inheritdoc */\n\t\tinvokeValidation: function (field, _rules, _i, _options) {\n\t\t\tlet instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tlet response = instance.validate();\n\t\t\tif (response !== true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/** @inheritdoc */\n\t\tvalidate: function () {\n\t\t\treturn this.validateValue(this.getFieldValue());\n\t\t},\n\t\t/** @inheritdoc */\n\t\tvalidateValue: function (fieldValue) {\n\t\t\tlet specialChars = /[&\\<\\>\\:\\'\\\"\\,]/;\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tlet errorInfo = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' & < > \\' \" : , ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\tthis.setError(errorInfo);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","i","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","_defineProperty","obj","value","arg","_toPrimitive","String","input","hint","prim","toPrimitive","res","call","Number","CustomView","url","_this","progressIndicatorElement","$","progressIndicator","position","blockInfo","enabled","app","showModalWindow","modalContainer","advanceFilterInstance","Vtiger_ConditionBuilder_Js","find","val","registerEvents","registerAdvancedConditionsEvents","columnSelectElement","mode","loadDateFilterValues","selectedDateFilter","currentDate","data","endDate","getContentsContainer","getColumnSelectElement","getSelectedColumns","columnListSelectElement","getCustomLabels","customFieldNames","each","attr","saveFilter","aDeferred","Deferred","formData","serializeFormData","AppConnector","request","done","resolve","fail","error","reject","promise","saveAndViewFilter","response","result","success","getParentModuleName","listviewurl","window","location","href","unblockUI","showNotify","title","vtranslate","text","message","type","registerIconEvents","on","e","currentTarget","iconElement","next","prop","removeClass","addClass","registerColorEvent","container","picker","pickerField","showPicker","App","Fields","Colors","color","bgToUpdate","fieldToUpdate","getDuplicateFields","fields","push","fieldid","ignore","is","registerDuplicatesEvents","Picklist","showSelect2ElementView","closest","remove","template","clone","append","registerSubmitEvent","select2Element","_this2","form","selectElement","preventDefault","mandatoryFieldsList","JSON","parse","selectedOptions","mandatoryFieldsMissing","filter","includes","validationEngine","stdfilterlist","columnname","stdfilter","startdate","enddate","stringify","contentContainer","getConditions","getAdvancedConditions","formAlignmentAfterValidation","registerDisableSubmitOnEnter","registerChangeSelectedColumns","_this3","registerAppendCustomLabels","shorterNamesContainer","selectedColumns","toArray","map","item","getAttribute","customLabel","empty","newCustomLabelElement","customLabelElement","customLabelValue","inputContainerElement","inputElement","_index","element","document","createElement","setAttribute","createTextNode","appendChild","_this4","Tree","register","Tools","Form","registerBlockToggle","datepicker","validationEngineOptions","registerCustomViewAdvCondEvents","listViewContainer","_this5","customViewAdvCond","advancedConditions","module","getModuleName","view","hideModalWindow","pageController","getListViewRecords","_textStatus","errorThrown","textTrusted","self","builder","relationSelect","advancedConditionsBuilder","moduleName","html","parent","sourceModuleName","relationId","relationColumns","relationConditions","Vtiger_Base_Validator_Js","invokeValidation","field","Vtiger_FieldLabel_Validator_Js","setElement","validate","getError","validateValue","getFieldValue","fieldValue","test","errorInfo","setError"],"mappings":"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"}