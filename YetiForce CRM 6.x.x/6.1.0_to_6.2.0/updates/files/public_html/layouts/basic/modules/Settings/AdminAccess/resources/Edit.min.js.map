{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Settings_AdminAccess_Edit_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Modal container\n\t\t */\n\t\tcontainer: false,\n\n\t\t/**\n\t\t * Register buttons\n\t\t */\n\t\tregisterButtons: function () {\n\t\t\tthis.container.find('.js-modules-select-all, .js-modules-deselect-all').on('click', (e) => {\n\t\t\t\tlet name = e.currentTarget.dataset.name;\n\t\t\t\tlet element = this.container.find(`[name=\"${name}\"],[name=\"${name}[]\"]`);\n\t\t\t\telement\n\t\t\t\t\t.find('option')\n\t\t\t\t\t.prop('selected', $(e.currentTarget).hasClass('js-modules-select-all'))\n\t\t\t\t\t.parent()\n\t\t\t\t\t.trigger('change');\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register save\n\t\t */\n\t\tregisterSave: function () {\n\t\t\tthis.container.find('.js-modal__save').on('click', (e) => {\n\t\t\t\tlet form = this.container.find('form');\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tblockInfo: { enabled: true }\n\t\t\t\t\t});\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tapp.saveAjax('', [], formData).done(function (data) {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\t$('.js-data-table').DataTable().ajax.reload();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tthis.container = modalContainer;\n\t\t\tthis.registerButtons();\n\t\t\tthis.registerSave();\n\t\t}\n\t}\n);\n"],"names":["$","Class","container","registerButtons","find","on","e","currentTarget","dataset","name","element","prop","hasClass","parent","trigger","registerSave","form","validationEngine","progressIndicator","message","app","vtranslate","blockInfo","enabled","formData","serializeFormData","saveAjax","done","data","result","Settings_Vtiger_Index_Js","showMessage","text","DataTable","ajax","reload","showNotify","type","hideModalWindow","progress","mode","registerEvents","modalContainer"],"mappings":";;AAGAA,EAAEC,KAAF,CACC,8BADD,CAEC,EAFD,CAGC;;KAICC,YAJD;;KASCC,gBAAiB,0BAAY,gBAC5B,KAAKD,SAAL,CAAeE,IAAf,CAAoB,kDAApB,EAAwEC,EAAxE,CAA2E,OAA3E,CAAoF,SAACC,CAAD,CAAO,UAC/EA,EAAEC,aAAF,CAAgBC,OAAhB,CAAwBC,IADuD,CAEtFC,QAAU,MAAKR,SAAL,CAAeE,IAAf,WAA8BK,IAA9B,cAA+CA,IAA/C,QAF4E,CAG1FC,QACEN,IADF,CACO,QADP,EAEEO,IAFF,CAEO,UAFP,CAEmBX,EAAEM,EAAEC,aAAJ,EAAmBK,QAAnB,CAA4B,uBAA5B,CAFnB,EAGEC,MAHF,GAIEC,OAJF,CAIU,QAJV,EAKA,CARD,EASA,CAnBF;;KAwBCC,aAAc,uBAAY,iBACzB,KAAKb,SAAL,CAAeE,IAAf,CAAoB,iBAApB,EAAuCC,EAAvC,CAA0C,OAA1C,CAAmD,UAAO,CACzD,SAAW,OAAKH,SAAL,CAAeE,IAAf,CAAoB,MAApB,CAAX,CACA,GAAIY,KAAKC,gBAAL,CAAsB,UAAtB,CAAJ,CAAuC,cACvBjB,EAAEkB,iBAAF,CAAoB,CAClCC,QAASC,IAAIC,UAAJ,CAAe,qBAAf,CADyB,CAElCC,UAAW,CAAEC,UAAF,CAFuB,CAApB,CADuB,CAKlCC,SAAWR,KAAKS,iBAAL,EALuB,CAMtCL,IAAIM,QAAJ,CAAa,EAAb,CAAiB,EAAjB,CAAqBF,QAArB,EAA+BG,IAA/B,CAAoC,SAAUC,IAAV,CAAgB,CAC/CA,KAAKC,MAD0C,EAElDC,yBAAyBC,WAAzB,CAAqC,CAAEC,KAAMZ,IAAIC,UAAJ,CAAe,iBAAf,CAAR,CAArC,CAFkD,CAGlDrB,EAAE,gBAAF,EAAoBiC,SAApB,GAAgCC,IAAhC,CAAqCC,MAArC,EAHkD,EAKlDf,IAAIgB,UAAJ,CAAe,CACdJ,KAAMZ,IAAIC,UAAJ,CAAe,UAAf,CADQ,CAEdgB,KAAM,OAFQ,CAAf,CALkD,CAUnDjB,IAAIkB,eAAJ,EAVmD,CAWnDC,SAASrB,iBAAT,CAA2B,CAAEsB,KAAM,MAAR,CAA3B,EACA,CAZD,EAaA,CACD,CAtBD,EAuBA,CAhDF;;;KAsDCC,eAAgB,wBAAUC,cAAV,CAA0B,CACzC,KAAKxC,SAAL,CAAiBwC,cADwB,CAEzC,KAAKvC,eAAL,EAFyC,CAGzC,KAAKY,YAAL,GACA,CA1DF,CAHD"}