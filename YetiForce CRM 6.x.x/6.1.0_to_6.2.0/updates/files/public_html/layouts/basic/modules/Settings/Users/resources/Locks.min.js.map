{"version":3,"file":"Locks.min.js","sources":["Locks.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Users_Locks_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Add item\n\t\t * @param {jQuery} content\n\t\t */\n\t\tregisterAdd: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('.js-add-item').on('click', function (e) {\n\t\t\t\tvar id = parseInt(content.find('#js-lock-count').val()) + 1;\n\t\t\t\tvar cloneItem = content.find('.js-clone-item tbody').clone(true, true);\n\t\t\t\tcloneItem\n\t\t\t\t\t.find('tr')\n\t\t\t\t\t.attr('data-id', id)\n\t\t\t\t\t.addClass('row' + id);\n\t\t\t\tcontent.find('.js-locks-table tbody').append(cloneItem.html());\n\t\t\t\tcontent.find('#js-lock-count').val(id);\n\t\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for delete item\n\t\t * @param {jQuery} content\n\t\t */\n\t\tregisterDelete: function (content) {\n\t\t\tcontent.find('.js-delete-item').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\ttarget.closest('tr').remove();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events for save\n\t\t * @param {jQuery} content\n\t\t */\n\t\tregisterSave: function (content) {\n\t\t\tcontent.find('.js-save-items').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.js-locks-table tbody tr').each(function (index) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.js-users').val(),\n\t\t\t\t\t\tlocks: $(this).find('.js-locks').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveLocks', data).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Main function\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('.contentsDiv');\n\t\t\tthis.registerAdd(content);\n\t\t\tthis.registerDelete(content);\n\t\t\tthis.registerSave(content);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerAdd","content","find","on","parseInt","val","cloneItem","clone","attr","id","addClass","append","html","thisInstance","registerDelete","App","Fields","Picklist","showSelect2ElementView","e","$","currentTarget","target","closest","remove","registerSave","each","data","push","user","locks","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":";;AAGAA,OAAOC,KAAP,CACC,yBADD,CAEC,EAFD,CAGC;;;KAKCC,YAAa,qBAAUC,OAAV,CAAmB,CAC/B,iBAAmB,IAAnB,CACAA,QAAQC,IAAR,CAAa,cAAb,EAA6BC,EAA7B,CAAgC,OAAhC,CAAyC,UAAa,QAC5CC,SAASH,QAAQC,IAAR,CAAa,gBAAb,EAA+BG,GAA/B,EAAT,EAAiD,CADL,CAEjDC,UAAYL,QAAQC,IAAR,CAAa,sBAAb,EAAqCK,KAArC,OAFqC,CAGrDD,UACEJ,IADF,CACO,IADP,EAEEM,IAFF,CAEO,SAFP,CAEkBC,EAFlB,EAGEC,QAHF,CAGW,MAAQD,EAHnB,CAHqD,CAOrDR,QAAQC,IAAR,CAAa,uBAAb,EAAsCS,MAAtC,CAA6CL,UAAUM,IAAV,EAA7C,CAPqD,CAQrDX,QAAQC,IAAR,CAAa,gBAAb,EAA+BG,GAA/B,CAAmCI,EAAnC,CARqD,CASrDI,aAAaC,cAAb,CAA4Bb,QAAQC,IAAR,CAAa,SAAWO,EAAxB,CAA5B,CATqD,CAUrDM,IAAIC,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CjB,QAAQC,IAAR,CAAa,SAAWO,EAAxB,EAA4BP,IAA5B,CAAiC,QAAjC,CAA3C,EACA,CAXD,EAYA,CAnBF;;;KAwBCY,eAAgB,wBAAUb,OAAV,CAAmB,CAClCA,QAAQC,IAAR,CAAa,iBAAb,EAAgCC,EAAhC,CAAmC,OAAnC,CAA4C,SAAUgB,CAAV,CAAa,CACxD,WAAaC,EAAED,EAAEE,aAAJ,CAAb,CACAC,OAAOC,OAAP,CAAe,IAAf,EAAqBC,MAArB,GACA,CAHD,EAIA,CA7BF;;;KAkCCC,aAAc,sBAAUxB,OAAV,CAAmB,CAChCA,QAAQC,IAAR,CAAa,gBAAb,EAA+BC,EAA/B,CAAkC,OAAlC,CAA2C,UAAa,CACvD,SAAW,EAAX,CACAF,QAAQC,IAAR,CAAa,0BAAb,EAAyCwB,IAAzC,CAA8C,UAAiB,CAC9DC,KAAKC,IAAL,CAAU,CACTC,KAAMT,EAAE,IAAF,EAAQlB,IAAR,CAAa,WAAb,EAA0BG,GAA1B,EADG,CAETyB,MAAOV,EAAE,IAAF,EAAQlB,IAAR,CAAa,WAAb,EAA0BG,GAA1B,EAFE,CAAV,EAIA,CALD,CAFuD,CAQvD0B,IAAIC,QAAJ,CAAa,WAAb,CAA0BL,IAA1B,EAAgCM,IAAhC,CAAqC,SAAUN,IAAV,CAAgB,CACpDO,yBAAyBC,WAAzB,CAAqC,CAAEC,KAAM,SAAR,CAAmBC,KAAMV,KAAKW,MAAL,CAAYC,OAArC,CAArC,EACA,CAFD,EAGA,CAXD,EAYA,CA/CF;;KAmDCC,eAAgB,yBAAY,CAC3B,YAAcpB,EAAE,cAAF,CAAd,CACA,KAAKpB,WAAL,CAAiBC,OAAjB,CAF2B,CAG3B,KAAKa,cAAL,CAAoBb,OAApB,CAH2B,CAI3B,KAAKwB,YAAL,CAAkBxB,OAAlB,EACA,CAxDF,CAHD"}