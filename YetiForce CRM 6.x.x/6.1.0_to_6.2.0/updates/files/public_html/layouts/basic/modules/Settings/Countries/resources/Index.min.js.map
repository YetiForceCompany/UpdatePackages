{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Settings_Countries_Index_Js',\n\t{},\n\t{\n\t\tregisterSortableEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar tbody = $('tbody', $('.listViewEntriesTable'));\n\t\t\ttbody.sortable({\n\t\t\t\thelper: function (e, ui) {\n\t\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t\t//look like distrubed\n\t\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tcontainment: tbody,\n\t\t\t\trevert: true,\n\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterStatus: function (content) {\n\t\t\tcontent.find('button.status').on('click', function () {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar id = element.closest('tr').data('id');\n\t\t\t\tvar status = element.data('status') ? 0 : 1;\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updateStatus',\n\t\t\t\t\tid: id,\n\t\t\t\t\tstatus: status\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\telement.data('status', status);\n\t\t\t\t\t\telement.toggleClass('btn-success').toggleClass('btn-danger');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterPhone: function (content) {\n\t\t\tcontent.find('button.phone').on('click', function () {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar id = element.closest('tr').data('id');\n\t\t\t\tvar phone = element.data('phone') ? 0 : 1;\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updatePhone',\n\t\t\t\t\tid: id,\n\t\t\t\t\tphone: phone\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\telement.data('phone', phone);\n\t\t\t\t\t\telement.toggleClass('btn-success').toggleClass('btn-danger');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterUitype: function (content) {\n\t\t\tcontent.find('button.uitype').on('click', function () {\n\t\t\t\tvar element = $(this);\n\t\t\t\tvar id = element.closest('tr').data('id');\n\t\t\t\tvar uitype = element.data('uitype') ? 0 : 1;\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updateUitype',\n\t\t\t\t\tid: id,\n\t\t\t\t\tuitype: uitype\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\telement.data('uitype', uitype);\n\t\t\t\t\t\telement.toggleClass('btn-success').toggleClass('btn-danger');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tallStatuses: 1,\n\t\tregisterAllStatuses: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('button.all-statuses').on('click', function () {\n\t\t\t\tvar status = thisInstance.allStatuses ? 0 : 1;\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updateAllStatuses',\n\t\t\t\t\tstatus: status\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\t\tvar elements = content.find('.status');\n\t\t\t\t\t\tif (status) {\n\t\t\t\t\t\t\telements.removeClass('btn-success').addClass('btn-danger');\n\t\t\t\t\t\t\telements.data('status', 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telements.removeClass('btn-danger').addClass('btn-success');\n\t\t\t\t\t\t\telements.data('status', 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tthisInstance.allStatuses = status;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterRowToTop: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('button.to-top').on('click', function () {\n\t\t\t\tvar row = $(this).closest('tr');\n\t\t\t\t$(this).closest('table.listViewEntriesTable tbody').prepend(row);\n\t\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t\t});\n\t\t},\n\t\tregisterRowToBottom: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('button.to-bottom').on('click', function () {\n\t\t\t\tvar row = $(this).closest('tr');\n\t\t\t\t$(this).closest('table.listViewEntriesTable tbody').append(row);\n\t\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t\t});\n\t\t},\n\t\tregisterSequenceListOnServer: function () {\n\t\t\tvar sequenceList = {};\n\t\t\t$('tbody tr').each(function (i) {\n\t\t\t\tsequenceList[++i] = $(this).data('id');\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateSequence'\n\t\t\t}).done(function (data) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChangeGettingDefaultCountry: function (container) {\n\t\t\tcontainer.find('.js-update-get-default-phone-country').on('change', function () {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'updateGetDefaultCountry',\n\t\t\t\t\tvalue: $(this).val()\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tlet content = $('.contentsDiv');\n\n\t\t\tthis.registerSortableEvent();\n\t\t\tthis.registerStatus(content);\n\t\t\tthis.registerPhone(content);\n\t\t\tthis.registerUitype(content);\n\t\t\tthis.registerAllStatuses(content);\n\t\t\tthis.registerRowToTop(content);\n\t\t\tthis.registerRowToBottom(content);\n\t\t\tthis.registerChangeGettingDefaultCountry(content);\n\t\t}\n\t}\n);\n"],"names":["$","Class","registerSortableEvent","tbody","sortable","helper","e","ui","children","each","index","element","width","containment","revert","update","thisInstance","registerSequenceListOnServer","registerStatus","content","find","on","id","closest","data","status","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","done","success","result","toggleClass","Vtiger_Helper_Js","showMessage","title","vtranslate","text","type","registerPhone","phone","registerUitype","uitype","allStatuses","registerAllStatuses","elements","removeClass","addClass","registerRowToTop","prepend","row","registerRowToBottom","append","i","sequenceList","sequencesList","JSON","stringify","registerChangeGettingDefaultCountry","container","value","val","registerEvents"],"mappings":"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"}