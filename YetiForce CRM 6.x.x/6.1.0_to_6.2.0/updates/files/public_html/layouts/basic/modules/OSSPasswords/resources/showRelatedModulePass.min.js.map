{"version":3,"file":"showRelatedModulePass.min.js","sources":["showRelatedModulePass.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// show/hide password\n'use strict';\nvar clipBoardInstances = [];\n$('.show_pass').on('click', function (e) {\n\tlet btn = $(this);\n\tlet record = btn.data('id');\n\tlet iconElement = btn.find('span');\n\tlet text = btn.data('title-copy');\n\tlet copyKey = `.copy_pass${record}`;\n\tlet copyBtn = $(`<button type=\"button\" id=\"copybtn_${record}\" data-id=\"pass_${record}\"\n\t\tclass=\"copy_pass${record} btn btn-light btn-sm mr-2 js-popover-tooltip\" data-content=\"${text}\" data-js=\"popover\"><span class=\"fas fa-download\"></span></button>`);\n\tlet element = $('[id=\"pass_' + record + '\"]');\n\tlet passVal = element.html();\n\tlet showPassText = btn.data('titleShow') ? btn.data('titleShow') : app.vtranslate('LBL_ShowPassword');\n\tlet hidePassText = btn.data('titleHide') ? btn.data('titleHide') : app.vtranslate('LBL_HidePassword');\n\n\tif (clipBoardInstances[copyKey] === undefined) {\n\t\tlet clipboard = new ClipboardJS(copyKey, {\n\t\t\ttext: function (trigger) {\n\t\t\t\tapp.showNotify({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success'\n\t\t\t\t});\n\t\t\t\treturn $('#' + trigger.getAttribute('data-id')).text();\n\t\t\t}\n\t\t});\n\t\tclipBoardInstances[copyKey] = clipboard;\n\t}\n\tif (passVal == '**********') {\n\t\tvar params = {\n\t\t\tmodule: 'OSSPasswords',\n\t\t\taction: 'GetPass',\n\t\t\trecord: record\n\t\t};\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tif (response['success']) {\n\t\t\t\telement.text(response['password']);\n\t\t\t\t// change button title to 'Hide Password'\n\t\t\t\tbtn.on('show.bs.popover', function () {\n\t\t\t\t\tthis.dataset.content = hidePassText;\n\t\t\t\t});\n\t\t\t\ticonElement.removeClass('adminIcon-passwords-encryption').addClass('fas fa-lock');\n\t\t\t\t// show copy to clipboard button\n\t\t\t\tcopyBtn.insertBefore(btn);\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t});\n\t} else {\n\t\telement.html('**********');\n\t\t// change button title to 'Show Password'\n\t\tbtn.on('show.bs.popover', function () {\n\t\t\tthis.dataset.content = showPassText;\n\t\t});\n\t\tapp.showPopoverElementView(element);\n\t\ticonElement.removeClass('fas fa-lock').addClass('adminIcon-passwords-encryption');\n\t\t// hide copy to clipboard button\n\t\t$(copyKey).remove();\n\t\tclipBoardInstances[copyKey].destroy();\n\t\tdelete clipBoardInstances[copyKey];\n\t}\n\treturn false;\n});\n"],"names":["$","on","record","btn","data","iconElement","find","text","copyKey","copyBtn","element","passVal","html","showPassText","app","vtranslate","hidePassText","clipBoardInstances","trigger","showNotify","type","getAttribute","clipboard","jQuery","progressIndicator","position","blockInfo","enabled","AppConnector","request","module","action","done","response","dataset","content","removeClass","addClass","insertBefore","progressIndicatorElement","mode","showPopoverElementView","remove","destroy"],"mappings":";;AAAA;AAGA,uBAAyB,EAAzB,CACAA,EAAE,YAAF,EAAgBC,EAAhB,CAAmB,OAAnB,CAA4B,UAAa,SAC9BD,EAAE,IAAF,CAD8B,CAEpCE,OAASC,IAAIC,IAAJ,CAAS,IAAT,CAF2B,CAGpCC,YAAcF,IAAIG,IAAJ,CAAS,MAAT,CAHsB,CAIpCC,KAAOJ,IAAIC,IAAJ,CAAS,YAAT,CAJ6B,CAKpCI,qBAAuBN,MALa,CAMpCO,QAAUT,uCAAuCE,MAAvC,oBAAgEA,MAAhE,2BACKA,MADL,iEAC2EK,IAD3E,sEAN0B,CAQpCG,QAAUV,EAAE,aAAeE,MAAf,CAAwB,IAA1B,CAR0B,CASpCS,QAAUD,QAAQE,IAAR,EAT0B,CAUpCC,aAAeV,IAAIC,IAAJ,CAAS,WAAT,EAAwBD,IAAIC,IAAJ,CAAS,WAAT,CAAxB,CAAgDU,IAAIC,UAAJ,CAAe,kBAAf,CAV3B,CAWpCC,aAAeb,IAAIC,IAAJ,CAAS,WAAT,EAAwBD,IAAIC,IAAJ,CAAS,WAAT,CAAxB,CAAgDU,IAAIC,UAAJ,CAAe,kBAAf,CAX3B,CAaxC,GAAIE,mBAAmBT,OAAnB,UAAJ,CAA+C,CAC9C,cAAgB,eAAA,CAAgBA,OAAhB,CAAyB,CACxCD,KAAM,SAAUW,OAAV,CAAmB,CAKxB,WAJIC,UAAJ,CAAe,CACdZ,KAAMO,IAAIC,UAAJ,CAAe,qBAAf,CADQ,CAEdK,KAAM,SAFQ,CAAf,CAIA,CAAOpB,EAAE,IAAMkB,QAAQG,YAAR,CAAqB,SAArB,CAAR,EAAyCd,IAAzC,EACP,CAPuC,CAAzB,CAAhB,CASAU,mBAAmBT,OAAnB,EAA8Bc,UAC9B,CACD,GAAe,YAAX,SAAJ,CAA6B,8BAMGC,OAAOC,iBAAP,CAAyB,CACvDC,SAAU,MAD6C,CAEvDC,UAAW,CACVC,UADU,CAF4C,CAAzB,CANH,CAY5BC,aAAaC,OAAb,CAXa,CACZC,OAAQ,cADI,CAEZC,OAAQ,SAFI,CAGZ7B,OAAQA,MAHI,CAWb,EAA6B8B,IAA7B,CAAkC,SAAU5B,IAAV,CAAgB,CACjD,aAAeA,WAAf,CACI6B,gBAF6C,GAGhDvB,QAAQH,IAAR,CAAa0B,iBAAb,CAHgD,CAKhD9B,IAAIF,EAAJ,CAAO,iBAAP,CAA0B,UAAY,CACrC,KAAKiC,OAAL,CAAaC,OAAb,CAAuBnB,aACvB,CAFD,CALgD,CAQhDX,YAAY+B,WAAZ,CAAwB,gCAAxB,EAA0DC,QAA1D,CAAmE,aAAnE,CARgD,CAUhD5B,QAAQ6B,YAAR,CAAqBnC,GAArB,CAVgD,EAYjDoC,yBAAyBf,iBAAzB,CAA2C,CAAEgB,KAAM,MAAR,CAA3C,EACA,CAbD,EAcA,CA1BD;AAkCC;AAPA9B,QAAQE,IAAR,CAAa,YAAb,CA3BD,CA6BCT,IAAIF,EAAJ,CAAO,iBAAP,CAA0B,UAAY,CACrC,KAAKiC,OAAL,CAAaC,OAAb,CAAuBtB,aACvB,CAFD,CA7BD,CAgCCC,IAAI2B,sBAAJ,CAA2B/B,OAA3B,CAhCD,CAiCCL,YAAY+B,WAAZ,CAAwB,aAAxB,EAAuCC,QAAvC,CAAgD,gCAAhD,CAjCD,CAmCCrC,EAAEQ,OAAF,EAAWkC,MAAX,EAnCD,CAoCCzB,mBAAmBT,OAAnB,EAA4BmC,OAA5B,EApCD,CAqCC,0BAA0BnC,OAAnB,CArCR,CAuCA,SACA,CAjED"}