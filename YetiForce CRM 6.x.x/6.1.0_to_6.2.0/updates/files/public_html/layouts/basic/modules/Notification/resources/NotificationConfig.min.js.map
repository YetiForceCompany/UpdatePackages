{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Notification_NotificationConfig_Js',\n\t{},\n\t{\n\t\tregisterEventForModal: function (container) {\n\t\t\tconst self = this;\n\t\t\tlet table = app.registerDataTables(container.find('.js-watching-data-table'));\n\t\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\t\tif (state) {\n\t\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\t\tlet selectedModules = [];\n\t\t\t\tlet sendNoticeModules = [];\n\t\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\t\tlet currentTarget = $(this);\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\t\tlet value = $(this).closest('tr').data('id');\n\t\t\t\t\tsendNoticeModules.push(value);\n\t\t\t\t});\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: 'Notification',\n\t\t\t\t\taction: 'Notification',\n\t\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\t\tselctedModules: selectedModules,\n\t\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t\t};\n\t\t\t\tlet progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t\t});\n\t\t\tcontainer.find('.sentNoticeAll').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tlet val = !element.hasClass('sandNoticeOn');\n\t\t\t\tself.changeSendNoticeState(element, val);\n\t\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\t\tself.changeSendNoticeState($(this), val);\n\t\t\t\t});\n\t\t\t});\n\t\t\ttable.$('.sentNotice').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(e.currentTarget).find('.fas');\n\t\t\t\tself.changeSendNoticeState(element);\n\t\t\t});\n\t\t},\n\t\tchangeSendNoticeState: function (element, val) {\n\t\t\tif (val !== undefined) {\n\t\t\t\tif (val === true) {\n\t\t\t\t\telement.addClass('fa-bell').removeClass('fa-bell-slash');\n\t\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t\t} else {\n\t\t\t\t\telement.addClass('fa-bell-slash').removeClass('fa-bell');\n\t\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.toggleClass('fa-bell fa-bell-slash');\n\t\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tlet container = $('.modalNotificationNotificationConfig');\n\t\t\tthis.registerEventForModal(container);\n\t\t}\n\t}\n);\njQuery(document).ready(function () {\n\tlet instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","registerEventForModal","container","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","sendNoticeModules","$","each","currentTarget","is","selectedModules","push","val","closest","data","value","module","action","mode","selctedModules","sendNotifications","frequency","progress","progressIndicator","AppConnector","request","params","done","hideModalWindow","fail","stopPropagation","prop","element","hasClass","self","changeSendNoticeState","toggleClass","registerEvents","document","ready","instance"],"mappings":"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"}