{"version":3,"file":"SwitchUsers.min.js","sources":["SwitchUsers.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Users_SwitchUsers_Js',\n\t{},\n\t{\n\t\tregisterAdd: function (content) {\n\t\t\tvar thisInstance = this;\n\t\t\tcontent.find('.addItem').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tuser: $(this).find('.sufrom').val()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tvar id = parseInt(content.find('#suCount').val()) + 1;\n\t\t\t\tvar cloneItem = content.find('.cloneItem tbody').clone(true, true);\n\t\t\t\tvar suFrom = cloneItem.find('.sufrom option');\n\t\t\t\tsuFrom.each(function (index, option) {\n\t\t\t\t\t$.each(data, function (key, selectedUser) {\n\t\t\t\t\t\tif ($(option).val() == selectedUser.user) {\n\t\t\t\t\t\t\tcloneItem.find(option).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tcloneItem\n\t\t\t\t\t.find('tr')\n\t\t\t\t\t.attr('data-id', id)\n\t\t\t\t\t.addClass('row' + id);\n\t\t\t\tcontent.find('.switchUsersTable tbody').append(cloneItem.html());\n\t\t\t\tcontent.find('#suCount').val(id);\n\t\t\t\tthisInstance.registerDelete(content.find('tr.row' + id));\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(content.find('tr.row' + id).find('select'));\n\t\t\t});\n\t\t},\n\t\tregisterDelete: function (content) {\n\t\t\tcontent.find('.delate').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\ttarget.closest('tr').remove();\n\t\t\t});\n\t\t},\n\t\tregisterSave: function (content) {\n\t\t\tcontent.find('.saveItems').on('click', function (e) {\n\t\t\t\tvar data = [];\n\t\t\t\tcontent.find('.switchUsersTable tbody tr').each(function (index) {\n\t\t\t\t\tif ($(this).find('.suto :selected').length > 0) {\n\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\tuser: $(this).find('.sufrom').val(),\n\t\t\t\t\t\t\taccess: $(this).find('.suto').val()\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSwitchUsers', data).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar content = $('.contentsDiv');\n\t\t\tthis.registerAdd(content);\n\t\t\tthis.registerDelete(content);\n\t\t\tthis.registerSave(content);\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","registerAdd","content","find","on","each","data","push","user","$","val","parseInt","cloneItem","clone","suFrom","index","option","key","selectedUser","remove","attr","id","addClass","append","html","thisInstance","registerDelete","App","Fields","Picklist","showSelect2ElementView","e","currentTarget","target","closest","registerSave","length","access","app","saveAjax","done","Settings_Vtiger_Index_Js","showMessage","type","text","result","message","registerEvents"],"mappings":"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"}