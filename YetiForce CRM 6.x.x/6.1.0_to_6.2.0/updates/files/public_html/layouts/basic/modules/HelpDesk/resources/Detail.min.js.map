{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\n\t'HelpDesk_Detail_Js',\n\t{\n\t\tsetAccountsReference: function () {\n\t\t\tapp.showRecordsList(\n\t\t\t\t{\n\t\t\t\t\tmodule: 'Accounts',\n\t\t\t\t\tsrc_module: 'HelpDesk',\n\t\t\t\t\tsrc_record: app.getRecordId()\n\t\t\t\t},\n\t\t\t\t(modal, instance) => {\n\t\t\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\t\t\tVtiger_Detail_Js.getInstance()\n\t\t\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\t\t\tfield: 'parent_id',\n\t\t\t\t\t\t\t\tvalue: responseData.id\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tregisterSetServiceContracts: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectServiceContracts').on('click', 'ul li', function (e) {\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tthisInstance\n\t\t\t\t\t.saveFieldValues({\n\t\t\t\t\t\tsetRelatedFields: true,\n\t\t\t\t\t\tfield: 'servicecontractsid',\n\t\t\t\t\t\tvalue: element.data('id')\n\t\t\t\t\t})\n\t\t\t\t\t.done(function (response) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to get response from hierarchy\n\t\t * @param {array} params\n\t\t * @returns {jQuery}\n\t\t */\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = $.Deferred();\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to display the hierarchy response data\n\t\t * @param {array} data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar($('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function (modal) {\n\t\t\t\tApp.Components.Scrollbar.xy($('#hierarchyScroll'));\n\t\t\t\tthisInstance.registerChangeStatusInHierarchy(modal);\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Registers read count of hierarchy if it is possible\n\t\t */\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t$('.hierarchy .badge').html(response.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Shows hierarchy\n\t\t */\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events on update hierarchy button\n\t\t *\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterChangeStatusInHierarchy: function (container) {\n\t\t\tcontainer.find('.js-update-hierarchy').on('click', function () {\n\t\t\t\tlet params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'ChangeStatus',\n\t\t\t\t\trecordsType: container.find('.js-selected-records').val(),\n\t\t\t\t\tstatus: container.find('.js-status').val(),\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tapp.showNotify({ text: data.result.data, type: 'success' });\n\t\t\t\t\t}\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Show confirmation on event click\n\t\t * @param {jQuery} element\n\t\t * @param {string} picklistName\n\t\t */\n\t\tshowProgressConfirmation: function (element, picklistName) {\n\t\t\tlet picklistValue = $(element).data('picklistValue');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\ttitle: $(element).data('picklistLabel'),\n\t\t\t\tmessage: app.vtranslate('JS_CHANGE_VALUE_CONFIRMATION')\n\t\t\t}).done(() => {\n\t\t\t\tconst progressIndicatorElement = $.progressIndicator();\n\t\t\t\tthis.saveFieldValues({\n\t\t\t\t\tvalue: picklistValue,\n\t\t\t\t\tfield: picklistName\n\t\t\t\t})\n\t\t\t\t\t.done((data) => {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function save field values\n\t\t * @param {array} fieldDetailList\n\t\t */\n\t\tsaveFieldValues: function (fieldDetailList) {\n\t\t\tconst self = this;\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tconst recordId = app.getRecordId();\n\t\t\tvar data = {};\n\t\t\tif (typeof fieldDetailList !== 'undefined') {\n\t\t\t\tdata = fieldDetailList;\n\t\t\t}\n\t\t\tconst saveData = (reload = true) => {\n\t\t\t\tdata['record'] = recordId;\n\t\t\t\tdata['module'] = app.getModuleName();\n\t\t\t\tdata['action'] = 'SaveAjax';\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = data;\n\t\t\t\tparams.async = false;\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (reponseData) {\n\t\t\t\t\taDeferred.resolve(reponseData);\n\t\t\t\t\tif (reload) {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (\n\t\t\t\tfieldDetailList.field === 'ticketstatus' &&\n\t\t\t\t(CONFIG.checkIfRecordHasTimeControl || CONFIG.checkIfRelatedTicketsAreClosed)\n\t\t\t) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\taction: 'CheckValidateToClose',\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: fieldDetailList.value\n\t\t\t\t}).done((response) => {\n\t\t\t\t\tif (response.result.hasTimeControl.result && response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\tsaveData(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet addTimeControlCb = saveData;\n\t\t\t\t\t\tif (!response.result.relatedTicketsClosed.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.relatedTicketsClosed.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\taddTimeControlCb = () => {\n\t\t\t\t\t\t\t\tthis.saveFieldValues(fieldDetailList);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!response.result.hasTimeControl.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: response.result.hasTimeControl.message,\n\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.addTimeControl(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trecordId: recordId,\n\t\t\t\t\t\t\t\t\turl: `index.php?module=OSSTimeControl&view=Edit&sourceModule=HelpDesk&sourceRecord=${recordId}&relationOperation=true&subprocess=${recordId}&subprocess=${recordId}`\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\taddTimeControlCb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.resolve({ success: false });\n\t\t\t\t});\n\t\t\t\treturn aDeferred.promise();\n\t\t\t} else {\n\t\t\t\tsaveData(false);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Add time control when closed ticket\n\t\t * @param {array} params\n\t\t */\n\t\taddTimeControl(params, callback = () => {}) {\n\t\t\tlet aDeferred = jQuery.Deferred();\n\t\t\tlet referenceModuleName = 'OSSTimeControl';\n\t\t\tlet parentId = params.recordId;\n\t\t\tlet parentModule = 'HelpDesk';\n\t\t\tlet quickCreateParams = {};\n\t\t\tlet relatedParams = {};\n\t\t\tlet relatedField = 'subprocess';\n\t\t\tlet fullFormUrl = params.url;\n\t\t\trelatedParams[relatedField] = parentId;\n\t\t\tlet eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\t\tlet preQuickCreateSave = function (data) {\n\t\t\t\tlet index, queryParam, queryParamComponents;\n\t\t\t\tlet queryParameters = [];\n\n\t\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\t\tqueryParameters = queryString.split('&');\n\t\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\t\tif (typeof relatedField !== 'undefined') {\n\t\t\t\t\tlet field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t\tif (field.length == 0) {\n\t\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (\n\t\t\t\t\t\tjQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' &&\n\t\t\t\t\t\tdata.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />'\n\t\t\t\t\t\t).appendTo(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (typeof fullFormUrl !== 'undefined' && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tlet urlSplit = fullFormUrl.split('?');\n\t\t\t\tlet queryString = urlSplit[1];\n\t\t\t\tlet queryParameters = queryString.split('&');\n\t\t\t\tfor (let index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tlet queryParam = queryParameters[index];\n\t\t\t\t\tlet queryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickCreateParams['data'] = relatedParams;\n\t\t\tquickCreateParams['callbackFunction'] = callback;\n\t\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\t\tquickCreateParams['noCache'] = true;\n\t\t\tApp.Components.QuickCreate.createRecord(referenceModuleName, quickCreateParams);\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSetServiceContracts();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","setAccountsReference","app","showRecordsList","module","src_module","src_record","getRecordId","modal","instance","setSelectEvent","responseData","getInstance","saveFieldValues","field","value","id","done","location","reload","registerSetServiceContracts","$","on","e","jQuery","currentTarget","thisInstance","setRelatedFields","element","data","getHierarchyResponseData","params","aDeferred","Deferred","isEmptyObject","hierarchyResponseCache","AppConnector","request","then","resolve","promise","displayHierarchyResponseData","callbackFunction","showScrollBar","height","railVisible","size","showModalWindow","App","Components","Scrollbar","xy","registerChangeStatusInHierarchy","registerHierarchyRecordCount","getModuleName","action","record","mode","hierarchyButton","length","response","success","html","result","registerShowHierarchy","view","progressIndicator","position","blockInfo","enabled","progressIndicatorElement","container","find","recordsType","val","status","showNotify","text","type","hideModalWindow","showProgressConfirmation","picklistName","picklistValue","Vtiger_Helper_Js","showConfirmationBox","title","message","vtranslate","window","fail","error","err","errorLog","fieldDetailList","self","recordId","async","dataType","reponseData","CONFIG","checkIfRecordHasTimeControl","checkIfRelatedTicketsAreClosed","hasTimeControl","relatedTicketsClosed","saveData","addTimeControlCb","addTimeControl","url","parentId","quickCreateParams","relatedParams","fullFormUrl","preQuickCreateSave","queryParam","queryParamComponents","queryParameters","indexOf","split","queryString","urlSplit","index","trigger","appendTo","inArray","eliminatedKeys","callback","QuickCreate","createRecord","registerEvents","_super"],"mappings":"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"}