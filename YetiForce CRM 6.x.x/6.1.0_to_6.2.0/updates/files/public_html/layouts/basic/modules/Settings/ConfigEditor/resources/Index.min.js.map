{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n\n'use strict';\n\njQuery.Class(\n\t'Settings_ConfigEditor_Index_Js',\n\t{},\n\t{\n\t\t/*\n\t\t * Function to save the Configuration Editor content\n\t\t */\n\t\tsaveConfigEditor: function (form) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tlet params = form.serializeFormData();\n\t\t\tparams.module = app.getModuleName();\n\t\t\tparams.parent = app.getParentModuleName();\n\t\t\tparams.action = 'SaveAjax';\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * Function to load the contents from the url through pjax\n\t\t */\n\t\tloadContents: function (url) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tAppConnector.requestPjax(url)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\n\t\t/*\n\t\t * function to register the events in editView\n\t\t */\n\t\tregisterEditViewEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#ConfigEditorForm');\n\t\t\tvar detailUrl = form.data('detailUrl');\n\n\t\t\t//register all select2 Elements\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('select.select2'), {\n\t\t\t\tdropdownCss: { 'z-index': 0 }\n\t\t\t});\n\n\t\t\t//register validation engine\n\t\t\tvar params = app.validationEngineOptions;\n\t\t\tparams.onValidationComplete = function (form, valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.saveConfigEditor(form)\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CONFIGURATION_DETAILS_SAVED');\n\t\t\t\t\t\t\t\tthisInstance.loadContents(detailUrl).done(function (data) {\n\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\tjQuery('.contentsDiv').html(data);\n\t\t\t\t\t\t\t\t\tthisInstance.registerDetailViewEvents();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t\treturn valid;\n\t\t\t\t}\n\t\t\t};\n\t\t\tform.validationEngine(params);\n\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t\t//Register click event for cancel link\n\t\t\tvar cancelLink = form.find('.cancelLink');\n\t\t\tcancelLink.on('click', function () {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.loadContents(detailUrl).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tjQuery('.contentsDiv').html(data);\n\t\t\t\t\tthisInstance.registerDetailViewEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * function to register the events in DetailView\n\t\t */\n\t\tregisterDetailViewEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = jQuery('#ConfigEditorDetails');\n\t\t\tvar editButton = container.find('.editButton');\n\n\t\t\t//Register click event for edit button\n\t\t\teditButton.on('click', function () {\n\t\t\t\tvar url = editButton.data('url');\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance\n\t\t\t\t\t.loadContents(url)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tjQuery('.contentsDiv').html(data);\n\t\t\t\t\t\tthisInstance.registerEditViewEvents();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tif (jQuery('#ConfigEditorDetails').length > 0) {\n\t\t\t\tthis.registerDetailViewEvents();\n\t\t\t} else {\n\t\t\t\tthis.registerEditViewEvents();\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_NumberRange100_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function (field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_NumberRange100_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the percentage field data\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function () {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue < 1 || fieldValue > 100) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO100');\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","saveConfigEditor","form","Deferred","params","serializeFormData","module","app","getModuleName","parent","getParentModuleName","action","AppConnector","request","done","data","aDeferred","resolve","fail","error","err","reject","promise","loadContents","url","requestPjax","registerEditViewEvents","detailUrl","App","Fields","Picklist","showSelect2ElementView","find","dropdownCss","validationEngineOptions","onValidationComplete","valid","progressIndicator","position","blockInfo","enabled","vtranslate","thisInstance","progressIndicatorElement","mode","html","registerDetailViewEvents","Settings_Vtiger_Index_Js","showMessage","validationEngine","on","e","preventDefault","cancelLink","container","editButton","registerEvents","length","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","field","rangeInstance","setElement","validate","getError","_super","getFieldValue","setError","errorInfo"],"mappings":"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"}