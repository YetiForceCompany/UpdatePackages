'use strict';

jQuery.Class('Settings_YetiForce_RegistrationOnlineModal_Js',{/**
		 * Register events for form checkbox element
		 */registerNewsletter:function registerNewsletter(){var form=$('[data-view="RegistrationOnlineModal"]').find('form');form.find('[id$="newsletter"]').on('click',function(e){var inputsContainer=$(e.target).closest('.js-card-body');$(e.target).prop('checked')?(inputsContainer.find('[id$="firstname]"]').attr('data-validation-engine','validate[required]'),inputsContainer.find('[id$="lastname]"]').attr('data-validation-engine','validate[required]'),inputsContainer.find('[id$="email]"]').attr('data-validation-engine','validate[required,custom[email]]'),inputsContainer.find('.js-newsletter-content').removeClass('d-none')):(inputsContainer.find('[id$="firstname]"]').removeAttr('data-validation-engine').val(''),inputsContainer.find('[id$="lastname]"]').removeAttr('data-validation-engine').val(''),inputsContainer.find('[id$="email]"]').removeAttr('data-validation-engine').val(''),inputsContainer.find('.js-newsletter-content').addClass('d-none'));});},getCompanies:function getCompanies(form){var companies=[];return form.each(function(){companies.push($(this).serializeFormData());}),companies},registerEvents:function registerEvents(){var self=this,container=$('[data-view=\'RegistrationOnlineModal\']'),form=container.find('form');form.validationEngine(app.validationEngineOptions),form.on('submit',function(e){e.preventDefault(),container.find('[name="saveButton"]').click();}),container.find('[name="saveButton"]').on('click',function(e){if(!form.validationEngine('validate'))return e.preventDefault(),app.showNotify({text:app.vtranslate('JS_ENTER_ALL_REGISTRATION_DATA'),type:'error'}),!1;container.find('button[name=saveButton]').prop('disabled',!0);var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'YetiForce',parent:'Settings',action:'Register',mode:'online',companies:self.getCompanies(form)}).done(function(data){if(app.showNotify({text:data.result.message,type:data.result.type}),progress.progressIndicator({mode:'hide'}),'success'===data.result.type){var href=location.href.replace('displayModal=online','');location.replace(href);}return container.find('button[name=saveButton]').prop('disabled',!1),data.result}).fail(function(error,title){progress.progressIndicator({mode:'hide'}),app.showNotify({title:title,text:error,type:'error'});});}),this.registerNewsletter();}},{}),Settings_YetiForce_RegistrationOnlineModal_Js.registerEvents();
//# sourceMappingURL=RegistrationOnlineModal.min.js.map
