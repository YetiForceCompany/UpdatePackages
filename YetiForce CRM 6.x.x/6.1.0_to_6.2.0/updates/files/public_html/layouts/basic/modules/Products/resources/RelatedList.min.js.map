{"version":3,"file":"RelatedList.min.js","sources":["RelatedList.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_RelatedList_Js(\n\t'Products_RelatedList_Js',\n\t{},\n\t{\n\t\tregisterEditListPrice: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet element = this.content.find('.js-edit-listprice');\n\t\t\telement.validationEngine(app.validationEngineOptions);\n\t\t\telement.on('change', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(this);\n\t\t\t\telement.formatNumber();\n\t\t\t\tif (!element.validationEngine('validate')) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\t\t\trecord: element.closest('.js-list__row').data('id'),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\tmode: 'addListPrice',\n\t\t\t\t\t\tsrc_record: thisInstance.parentRecordId,\n\t\t\t\t\t\trelated_module: thisInstance.moduleName,\n\t\t\t\t\t\tprice: element.val()\n\t\t\t\t\t}).done(function (responseData) {\n\t\t\t\t\t\tif (responseData.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEditQtyProducts: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet element = this.content.find('.js-edit-qtyinstock');\n\t\t\telement.validationEngine(app.validationEngineOptions);\n\t\t\telement.on('change', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tlet element = $(this);\n\t\t\t\telement.formatNumber();\n\t\t\t\tif (!element.validationEngine('validate')) {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\t\t\trecord: element.closest('.js-list__row').data('id'),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\tmode: 'setQtyProducts',\n\t\t\t\t\t\tsrc_record: thisInstance.parentRecordId,\n\t\t\t\t\t\trelated_module: thisInstance.moduleName,\n\t\t\t\t\t\tqty: element.val()\n\t\t\t\t\t}).done(function (responseData) {\n\t\t\t\t\t\tif (responseData.result) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterPostLoadEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerEditListPrice();\n\t\t\tthis.registerEditQtyProducts();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_RelatedList_Js","registerEditListPrice","element","content","find","validationEngine","app","validationEngineOptions","on","e","stopPropagation","$","formatNumber","AppConnector","request","module","thisInstance","parentModuleName","record","closest","data","action","mode","src_record","parentRecordId","related_module","moduleName","price","val","done","responseData","result","showNotify","text","vtranslate","type","registerEditQtyProducts","qty","registerPostLoadEvents","_super"],"mappings":";;AAGAA,sBACC,yBADD,CAEC,EAFD,CAGC,CACCC,sBAAuB,gCAAY,kBACf,IADe,CAE9BC,QAAU,KAAKC,OAAL,CAAaC,IAAb,CAAkB,oBAAlB,CAFoB,CAGlCF,QAAQG,gBAAR,CAAyBC,IAAIC,uBAA7B,CAHkC,CAIlCL,QAAQM,EAAR,CAAW,QAAX,CAAqB,SAAUC,CAAV,CAAa,CACjCA,EAAEC,eAAF,EADiC,CAEjC,YAAcC,EAAE,IAAF,CAAd,CACAT,QAAQU,YAAR,EAHiC,CAI5BV,QAAQG,gBAAR,CAAyB,UAAzB,CAJ4B,EAKhCQ,aAAaC,OAAb,CAAqB,CACpBC,OAAQC,aAAaC,gBADD,CAEpBC,OAAQhB,QAAQiB,OAAR,CAAgB,eAAhB,EAAiCC,IAAjC,CAAsC,IAAtC,CAFY,CAGpBC,OAAQ,cAHY,CAIpBC,KAAM,cAJc,CAKpBC,WAAYP,aAAaQ,cALL,CAMpBC,eAAgBT,aAAaU,UANT,CAOpBC,MAAOzB,QAAQ0B,GAAR,EAPa,CAArB,EAQGC,IARH,CAQQ,SAAUC,YAAV,CAAwB,CAC3BA,aAAaC,MADc,EAE9BzB,IAAI0B,UAAJ,CAAe,CACdC,KAAM3B,IAAI4B,UAAJ,CAAe,mBAAf,CADQ,CAEdC,KAAM,SAFQ,CAAf,EAKD,CAfD,EAiBD,CAtBD,EAuBA,CA5BF,CA6BCC,wBAAyB,kCAAY,kBACjB,IADiB,CAEhClC,QAAU,KAAKC,OAAL,CAAaC,IAAb,CAAkB,qBAAlB,CAFsB,CAGpCF,QAAQG,gBAAR,CAAyBC,IAAIC,uBAA7B,CAHoC,CAIpCL,QAAQM,EAAR,CAAW,QAAX,CAAqB,SAAUC,CAAV,CAAa,CACjCA,EAAEC,eAAF,EADiC,CAEjC,YAAcC,EAAE,IAAF,CAAd,CACAT,QAAQU,YAAR,EAHiC,CAI5BV,QAAQG,gBAAR,CAAyB,UAAzB,CAJ4B,EAKhCQ,aAAaC,OAAb,CAAqB,CACpBC,OAAQC,aAAaC,gBADD,CAEpBC,OAAQhB,QAAQiB,OAAR,CAAgB,eAAhB,EAAiCC,IAAjC,CAAsC,IAAtC,CAFY,CAGpBC,OAAQ,cAHY,CAIpBC,KAAM,gBAJc,CAKpBC,WAAYP,aAAaQ,cALL,CAMpBC,eAAgBT,aAAaU,UANT,CAOpBW,IAAKnC,QAAQ0B,GAAR,EAPe,CAArB,EAQGC,IARH,CAQQ,SAAUC,YAAV,CAAwB,CAC3BA,aAAaC,MADc,EAE9BzB,IAAI0B,UAAJ,CAAe,CACdC,KAAM3B,IAAI4B,UAAJ,CAAe,mBAAf,CADQ,CAEdC,KAAM,SAFQ,CAAf,EAKD,CAfD,EAiBD,CAtBD,EAuBA,CAxDF,CAyDCG,uBAAwB,iCAAY,CACnC,KAAKC,MAAL,EADmC,CAEnC,KAAKtC,qBAAL,EAFmC,CAGnC,KAAKmC,uBAAL,GACA,CA7DF,CAHD"}