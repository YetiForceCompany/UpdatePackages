{"version":3,"file":"InterestsConflictModal.min.js","sources":["InterestsConflictModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\n\t'Base_InterestsConflictModal_JS',\n\t{},\n\t{\n\t\t/**\n\t\t * Register modal events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterEvents: function (modalContainer) {\n\t\t\tswitch (modalContainer.data('mode')) {\n\t\t\t\tcase 'users':\n\t\t\t\t\tthis.registerUsersEvents(modalContainer);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'unlock':\n\t\t\t\t\tthis.registerUnlockEvents(modalContainer);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'confirmation':\n\t\t\t\t\tthis.registerConfirmationEvents(modalContainer);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Register users events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterUsersEvents: function (modalContainer) {\n\t\t\tmodalContainer.find('.js-ic-canceled-btn').click(function (e) {\n\t\t\t\tlet btn = $(e.currentTarget);\n\t\t\t\tlet tr = btn.closest('tr');\n\t\t\t\tlet icon = tr.find('.js-change-icon');\n\t\t\t\tbootbox.prompt({\n\t\t\t\t\ttitle: app.vtranslate('JS_ENTER_A_REASON'),\n\t\t\t\t\trequired: true,\n\t\t\t\t\tcallback: function (result) {\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\tAppConnector.request(\n\t\t\t\t\t\t\t\t$.extend(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\taction: 'InterestsConflict',\n\t\t\t\t\t\t\t\t\t\tmode: 'usersCancel',\n\t\t\t\t\t\t\t\t\t\tid: tr.data('id'),\n\t\t\t\t\t\t\t\t\t\tcomment: result\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tmodalContainer.find('.js-modal-form').serializeFormData()\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\t\t\tbtn.hide();\n\t\t\t\t\t\t\t\t\tif (icon.length) {\n\t\t\t\t\t\t\t\t\t\ticon.removeClass('fa-times text-danger').addClass('fa-slash text-dark');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\t\t\ttype: data.result.type\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register unlock events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterUnlockEvents: function (modalContainer) {\n\t\t\tlet form = modalContainer.find('.js-modal-form');\n\t\t\tmodalContainer.find('.js-ic-send-btn').click(function (e) {\n\t\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\taction: 'InterestsConflict',\n\t\t\t\t\t\t\tmode: 'unlock'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tform.serializeFormData()\n\t\t\t\t\t)\n\t\t\t\t).done(function (data) {\n\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\ttype: data.result.type\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (data.result.type === 'success') {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register confirmation events\n\t\t * @param {jQuery} modalContainer\n\t\t */\n\t\tregisterConfirmationEvents: function (modalContainer) {\n\t\t\tmodalContainer.find('.js-ic-confirmation').click(function (e) {\n\t\t\t\tlet value = $(e.currentTarget).data('value');\n\t\t\t\tAppConnector.request(\n\t\t\t\t\t$.extend(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\taction: 'InterestsConflict',\n\t\t\t\t\t\t\tmode: 'confirmation',\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmodalContainer.find('.js-modal-form').serializeFormData()\n\t\t\t\t\t)\n\t\t\t\t).done(function (data) {\n\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\ttype: data.result.type\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["$","Class","registerEvents","modalContainer","data","registerUsersEvents","registerUnlockEvents","registerConfirmationEvents","find","click","e","currentTarget","tr","btn","closest","icon","bootbox","prompt","title","app","vtranslate","required","callback","result","AppConnector","request","extend","module","getModuleName","action","mode","id","comment","serializeFormData","done","hide","length","removeClass","addClass","showNotify","text","message","type","form","validationEngine","hideModalWindow","value","window","location","reload"],"mappings":"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"}