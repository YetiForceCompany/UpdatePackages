{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\n\t'Settings_WebserviceUsers_Edit_Js',\n\t{},\n\t{\n\t\tgetForm: function () {\n\t\t\tif (this.formElement == false) {\n\t\t\t\tthis.setForm(jQuery('#modalEdit'));\n\t\t\t}\n\t\t\treturn this.formElement;\n\t\t},\n\t\t/**\n\t\t * Show hide fields\n\t\t * @param {Object} typeElement\n\t\t * @param {Object} params\n\t\t */\n\t\tshowHideFields: function (typeElement, params) {\n\t\t\tlet elementContainer = this.getForm()\n\t\t\t\t.find('[name=\"' + params.fieldHide + '\"]')\n\t\t\t\t.closest('.form-group');\n\t\t\tif (typeElement.val() === params.value) {\n\t\t\t\tlet clearReference = elementContainer.find('.clearReferenceSelection');\n\t\t\t\tif (clearReference.length > 0) {\n\t\t\t\t\tclearReference.trigger('click');\n\t\t\t\t}\n\t\t\t\telementContainer.addClass('d-none');\n\t\t\t} else {\n\t\t\t\telementContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tconst self = this,\n\t\t\t\tcontainer = this.getForm();\n\t\t\tthis.registerBasicEvents(container);\n\t\t\tlet form = container.find('form');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_SUCCESS') });\n\t\t\t\t\t\t\tlet listInstance = Settings_WebserviceUsers_List_Js.getInstance();\n\t\t\t\t\t\t\tlistInstance.reloadTab();\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: data.result.message,\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_ERROR'),\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet typeElement = form.find('[name=\"type\"]');\n\t\t\tlet typeParams = { fieldHide: 'crmid', value: '1' };\n\t\t\tself.showHideFields(typeElement, typeParams);\n\t\t\ttypeElement.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), typeParams);\n\t\t\t});\n\n\t\t\tlet loginMethod = form.find('[name=\"login_method\"]');\n\t\t\tlet loginMethodParams = { fieldHide: 'authy_methods', value: 'PLL_PASSWORD' };\n\t\t\tself.showHideFields(loginMethod, loginMethodParams);\n\t\t\tloginMethod.on('change', function (e) {\n\t\t\t\tself.showHideFields(jQuery(e.currentTarget), loginMethodParams);\n\t\t\t});\n\t\t}\n\t}\n);\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_WebserviceUsers_Edit_Js();\n\tinstance.registerEvents();\n});\n"],"names":["Vtiger_Edit_Js","getForm","formElement","setForm","jQuery","showHideFields","typeElement","params","find","fieldHide","closest","val","value","elementContainer","length","clearReference","trigger","addClass","removeClass","registerEvents","container","registerBasicEvents","form","on","e","preventDefault","validationEngine","serializeFormData","AppConnector","request","formData","done","data","result","success","Settings_Vtiger_Index_Js","showMessage","text","app","vtranslate","Settings_WebserviceUsers_List_Js","getInstance","listInstance","reloadTab","hideModalWindow","message","showNotify","type","typeParams","self","currentTarget","loginMethodParams","loginMethod","document","ready","instance"],"mappings":";;AAGAA,eACC,kCADD,CAEC,EAFD,CAGC,CACCC,QAAS,kBAAY,CAIpB,OAHI,SAAKC,WAGT,EAFC,KAAKC,OAAL,CAAaC,OAAO,YAAP,CAAb,CAED,CAAO,KAAKF,WACZ,CANF;;;;KAYCG,eAAgB,wBAAUC,WAAV,CAAuBC,MAAvB,CAA+B,CAC9C,qBAAuB,KAAKN,OAAL,GACrBO,IADqB,CAChB,UAAYD,OAAOE,SAAnB,CAA+B,IADf,EAErBC,OAFqB,CAEb,aAFa,CAAvB,CAGA,GAAIJ,YAAYK,GAAZ,KAAsBJ,OAAOK,KAAjC,CAAwC,CACvC,mBAAqBC,iBAAiBL,IAAjB,CAAsB,0BAAtB,CAArB,CAC4B,CAAxB,gBAAeM,MAFoB,EAGtCC,eAAeC,OAAf,CAAuB,OAAvB,CAHsC,CAKvCH,iBAAiBI,QAAjB,CAA0B,QAA1B,EACA,CAND,sBAOkBC,WAAjB,CAA6B,QAA7B,EAED,CAzBF,CA0BCC,eAAgB,yBAAY,CAC3B,SAAa,IAAb,CACCC,UAAY,KAAKnB,OAAL,EADb,CAEA,KAAKoB,mBAAL,CAAyBD,SAAzB,CAH2B,CAI3B,SAAWA,UAAUZ,IAAV,CAAe,MAAf,CAAX,CACAc,KAAKC,EAAL,CAAQ,QAAR,CAAkB,SAAUC,CAAV,CAAa,CAE9B,GADAA,EAAEC,cAAF,EACA,CAAIH,KAAKI,gBAAL,CAAsB,UAAtB,CAAJ,CAAuC,CACtC,aAAeJ,KAAKK,iBAAL,EAAf,CACAC,aAAaC,OAAb,CAAqBC,QAArB,EAA+BC,IAA/B,CAAoC,SAAUC,IAAV,CAAgB,CACnD,GAAIA,KAAKC,MAAL,CAAYC,OAAhB,CAAyB,CACxBC,yBAAyBC,WAAzB,CAAqC,CAAEC,KAAMC,IAAIC,UAAJ,CAAe,iBAAf,CAAR,CAArC,CADwB,CAExB,iBAAmBC,iCAAiCC,WAAjC,EAAnB,CACAC,aAAaC,SAAb,EAHwB,CAIxBL,IAAIM,eAAJ,GACA,CALD,UAMUX,MAAL,CAAYY,OANjB,CAOEP,IAAIQ,UAAJ,CAAe,CACdT,KAAML,KAAKC,MAAL,CAAYY,OADJ,CAEdE,KAAM,OAFQ,CAAf,CAPF,CAYET,IAAIQ,UAAJ,CAAe,CACdT,KAAMC,IAAIC,UAAJ,CAAe,UAAf,CADQ,CAEdQ,KAAM,OAFQ,CAAf,EAMF,CAnBD,EAoBA,CACD,CAzBD,CAL2B,iBA+BTzB,KAAKd,IAAL,CAAU,eAAV,CA/BS,CAgCvBwC,WAAa,CAAEvC,UAAW,OAAb,CAAsBG,MAAO,GAA7B,CAhCU,CAiC3BqC,KAAK5C,cAAL,CAAoBC,WAApB,CAAiC0C,UAAjC,CAjC2B,CAkC3B1C,YAAYiB,EAAZ,CAAe,QAAf,CAAyB,SAAUC,CAAV,CAAa,CACrCyB,KAAK5C,cAAL,CAAoBD,OAAOoB,EAAE0B,aAAT,CAApB,CAA6CF,UAA7C,EACA,CAFD,CAlC2B,iBAsCT1B,KAAKd,IAAL,CAAU,uBAAV,CAtCS,CAuCvB2C,kBAAoB,CAAE1C,UAAW,eAAb,CAA8BG,MAAO,cAArC,CAvCG,CAwC3BqC,KAAK5C,cAAL,CAAoB+C,WAApB,CAAiCD,iBAAjC,CAxC2B,CAyC3BC,YAAY7B,EAAZ,CAAe,QAAf,CAAyB,SAAUC,CAAV,CAAa,CACrCyB,KAAK5C,cAAL,CAAoBD,OAAOoB,EAAE0B,aAAT,CAApB,CAA6CC,iBAA7C,EACA,CAFD,EAGA,CAtEF,CAHD,EA4EA/C,OAAOiD,QAAP,EAAiBC,KAAjB,CAAuB,UAAa,CACnC,aAAe,oCAAf,CACAC,SAASpC,cAAT,GACA,CAHD"}