'use strict';

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};

var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};

window.Occurrences_Calendar_Js=function(_Vtiger_Calendar_Js){function Occurrences_Calendar_Js(){return classCallCheck(this,Occurrences_Calendar_Js),possibleConstructorReturn(this,(Occurrences_Calendar_Js.__proto__||Object.getPrototypeOf(Occurrences_Calendar_Js)).apply(this,arguments))}return inherits(Occurrences_Calendar_Js,_Vtiger_Calendar_Js),createClass(Occurrences_Calendar_Js,[{key:'registerDayClickEvent',/**
	 * Register day click event.
	 * @param {string} date
	 */value:function registerDayClickEvent(date){var self=this;self.getCalendarCreateView().done(function(data){if(!(0>=data.length)){var dateElement=data.find('[name="date_start"]'),dateFormat=dateElement.data('dateFormat').toUpperCase(),timeFormat=dateElement.data('hour-format'),defaultTimeFormat='hh:mm A';24==timeFormat&&(defaultTimeFormat='HH:mm');var startDateInstance=Date.parse(date),startDateString=moment(date).format(dateFormat),startTimeString=moment(date).format(defaultTimeFormat),endDateInstance=Date.parse(date),endDateString=moment(date).format(dateFormat),view=self.getCalendarView().fullCalendar('getView'),endTimeString=void 0;if('month'==view.name){var diffDays=parseInt((endDateInstance-startDateInstance)/86400000);if(1<diffDays){var defaultFirstHour=app.getMainParams('startHour'),explodedTime=defaultFirstHour.split(':');startTimeString=explodedTime[0];var defaultLastHour=app.getMainParams('endHour');explodedTime=defaultLastHour.split(':'),endTimeString=explodedTime[0];}else {var now=new Date;startTimeString=moment(now).format(defaultTimeFormat),endTimeString=moment(now).add(15,'minutes').format(defaultTimeFormat);}}else endTimeString=moment(endDateInstance).add(30,'minutes').format(defaultTimeFormat);data.find('[name="date_start"]').val(startDateString+' '+startTimeString),data.find('[name="date_end"]').val(endDateString+' '+endTimeString),App.Components.QuickCreate.showModal(data,{callbackFunction:function callbackFunction(){self.loadCalendarData();}});}});}}]),Occurrences_Calendar_Js}(Vtiger_Calendar_Js);
//# sourceMappingURL=CalendarView.min.js.map
