{"version":3,"file":"Widgets.min.js","sources":["Widgets.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Widgets_Index_Js',\n\t{},\n\t{\n\t\tgetTabId: function () {\n\t\t\treturn $(\".WidgetsManage [name='tabid']\").val();\n\t\t},\n\t\tgetType: function () {\n\t\t\treturn $(\".form-modalAddWidget [name='type']\").val();\n\t\t},\n\t\tcreateStep2: function (type) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar tabId = thisInstance.getTabId();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({ position: 'html' });\n\t\t\tapp.showModalWindow(\n\t\t\t\tnull,\n\t\t\t\t'index.php?parent=Settings&module=Widgets&view=Widget&mode=createStep2&type=' + type + '&tabId=' + tabId,\n\t\t\t\tfunction (wizardContainer) {\n\t\t\t\t\tapp.showPopoverElementView(wizardContainer.find('.js-help-info'));\n\t\t\t\t\tif (type === 'RelatedModule' || type === 'RelatedModuleChart' || type === 'Documents') {\n\t\t\t\t\t\tthisInstance.loadFilters(wizardContainer);\n\t\t\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\t\t\twizardContainer.find(\"select[name='relation_id']\").on('change', function () {\n\t\t\t\t\t\t\tthisInstance.changeRelatedModule(wizardContainer);\n\t\t\t\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.registerSort(wizardContainer);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar form = jQuery('form', wizardContainer);\n\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\t\t\tvar save = true;\n\t\t\t\t\t\t\tif (form && form.hasClass('validateForm') && form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\t\t\t\tif\t(typeof formData.relatedfields === 'string') {\n\t\t\t\t\t\t\t\t\tformData.relatedfields = [formData.relatedfields];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t\t.registerSaveEvent('saveWidget', {\n\t\t\t\t\t\t\t\t\t\tdata: formData,\n\t\t\t\t\t\t\t\t\t\ttabid: tabId\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.done((_) => {\n\t\t\t\t\t\t\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tloadWidgets: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar blocks = jQuery('.blocksSortable');\n\t\t\tblocks.sortable({\n\t\t\t\trevert: true,\n\t\t\t\tconnectWith: '.blocksSortable',\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tplaceholder: 'state-highlight',\n\t\t\t\tstop: function (event, ui) {\n\t\t\t\t\tthisInstance.updateSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupdateSequence: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\t$('.blockSortable').each(function (index) {\n\t\t\t\tparams[$(this).data('id')] = {\n\t\t\t\t\tindex: index,\n\t\t\t\t\tcolumn: $(this).closest('.blocksSortable').data('column')\n\t\t\t\t};\n\t\t\t});\n\t\t\tvar progress = $.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('Saving changes'),\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tthisInstance.registerSaveEvent('updateSequence', {\n\t\t\t\tdata: params,\n\t\t\t\ttabid: $(\"input[name='tabid']\").val()\n\t\t\t});\n\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t},\n\t\treloadWidgets: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar Indicator = jQuery.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('Loading data'),\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = 'Widgets';\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['parent'] = 'Settings';\n\t\t\tparams['source'] = $(\"input[name='tabid']\").val();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tvar container = jQuery('div.contentsDiv').html(data);\n\t\t\t\tthisInstance.registerEvents(container);\n\t\t\t\tIndicator.progressIndicator({ mode: 'hide' });\n\t\t\t});\n\t\t},\n\t\tregisterSaveEvent(mode, data) {\n\t\t\tlet aDeferred = $.Deferred();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: mode,\n\t\t\t\tparams: data,\n\t\t\t\tasync: mode !== 'saveWidget',\n\t\t\t\tdataType: 'json'\n\t\t\t})\n\t\t\t\t.done((data) => {\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail((textStatus, errorThrown) => {\n\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tloadFilters: function (contener) {\n\t\t\tlet types = ['filter', 'checkbox', 'switchHeader'];\n\t\t\tlet selected = contener.find(\"select[name='relation_id'] option:selected\");\n\t\t\tlet relatedModuleInput = contener.find(\"input[name='relatedmodule']\");\n\t\t\tlet relatedModule = relatedModuleInput.val();\n\t\t\tif (selected.length) {\n\t\t\t\trelatedModule = selected.data('relatedmodule');\n\t\t\t\trelatedModuleInput.val(selected.data('relatedmodule')).data('module-name', selected.data('module-name'));\n\t\t\t}\n\t\t\tfor (let i in types) {\n\t\t\t\tlet filters = app.getMainParams(types[i] + 'All', true);\n\t\t\t\tlet filterField = contener.find(\"select[name='\" + types[i] + \"']\");\n\t\t\t\tlet filterSelected = contener.find('input#' + types[i] + '_selected').val();\n\t\t\t\tfilterField.empty();\n\t\t\t\tfilterField.append($('<option/>', { value: '-', text: app.vtranslate('None') }));\n\t\t\t\tif (filters[relatedModule] !== undefined) {\n\t\t\t\t\tfilterField.closest('.form-group').removeClass('d-none');\n\t\t\t\t\t$.each(filters[relatedModule], function (index, value) {\n\t\t\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\t\t\tvalue = value.label;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet option = { value: index, text: value };\n\t\t\t\t\t\tif (filterSelected == index) {\n\t\t\t\t\t\t\toption.selected = 'selected';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfilterField.append($('<option/>', option));\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filterField);\n\t\t\t\t} else {\n\t\t\t\t\tfilterField.closest('.form-group').addClass('d-none');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\trelatedModuleFields: function (container) {\n\t\t\tconst relatedModule = parseInt(container.find(\"input[name='relatedmodule']\").val());\n\t\t\tconst relatedfields = container.find(\"select[name='relatedfields'],select[name='groupField']\");\n\t\t\trelatedfields.find('optgroup').each(function (index, optgroup) {\n\t\t\t\toptgroup = $(optgroup);\n\t\t\t\tif (relatedModule !== optgroup.data('module')) {\n\t\t\t\t\toptgroup.addClass('d-none');\n\t\t\t\t\toptgroup.prop('disabled', 'disabled');\n\t\t\t\t} else {\n\t\t\t\t\toptgroup.removeClass('d-none');\n\t\t\t\t\toptgroup.prop('disabled', false);\n\t\t\t\t}\n\t\t\t\toptgroup.find('option').each(function (index, option) {\n\t\t\t\t\toption = $(option);\n\t\t\t\t\tif (relatedModule !== option.data('module')) {\n\t\t\t\t\t\toption.addClass('d-none').removeAttr('selected');\n\t\t\t\t\t\toption.prop('disabled', 'disabled');\n\t\t\t\t\t} else {\n\t\t\t\t\t\toption.removeClass('d-none');\n\t\t\t\t\t\toption.prop('disabled', false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\trelatedfields.trigger('change:select2');\n\t\t},\n\n\t\tchangeRelatedModule(wizardContainer) {\n\t\t\tthis.loadFilters(wizardContainer.find('.form-modalAddWidget'));\n\t\t},\n\n\t\tmodalFormEdit(wizardContainer) {\n\t\t\tconst thisInstance = this;\n\t\t\t$('#massEditHeader.modal-title').text(app.vtranslate('JS_EDIT_WIDGET'));\n\t\t\tapp.showPopoverElementView(wizardContainer.find('.js-help-info'));\n\t\t\tlet type = thisInstance.getType();\n\t\t\tif (type == 'RelatedModule' || type === 'RelatedModuleChart' || type === 'Documents') {\n\t\t\t\tthisInstance.loadFilters(wizardContainer);\n\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\twizardContainer.find(\"select[name='relation_id']\").on('change', function () {\n\t\t\t\t\tthisInstance.changeRelatedModule(wizardContainer);\n\t\t\t\t\tthisInstance.relatedModuleFields(wizardContainer);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.registerSort(wizardContainer);\n\t\t\tconst form = $('form', wizardContainer);\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (form.validationEngine('validate')) {\n\t\t\t\t\tconst progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('Loading data'),\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance\n\t\t\t\t\t\t.registerSaveEvent('saveWidget', {\n\t\t\t\t\t\t\tdata: form.serializeFormData(),\n\t\t\t\t\t\t\ttabid: $(\"input[name='tabid']\").val()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.done(() => {\n\t\t\t\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tregisterSort: function (container) {\n\t\t\tcontainer.find(\"select[name='relation_id']\").on('change', (e) => {\n\t\t\t\tcontainer.find('#orderBy').val('[]');\n\t\t\t});\n\t\t\tcontainer.find('.js-sort-modal').on('click', (e) => {\n\t\t\t\tlet relatedModule = container.find(\"input[name='relatedmodule']\").data('module-name');\n\t\t\t\tlet url = e.currentTarget.dataset.url;\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\turl + '&module=' + relatedModule,\n\t\t\t\t\tfunction (wizardContainer) {\n\t\t\t\t\t\twizardContainer.find('.js-modal__save').on('click', (el) => {\n\t\t\t\t\t\t\tel.preventDefault();\n\t\t\t\t\t\t\tlet sortData = {};\n\t\t\t\t\t\t\twizardContainer.find('.js-sort-container_element:not(.js-base-element)').each(function () {\n\t\t\t\t\t\t\t\tlet orderBy = $(this).find('.js-orderBy').val();\n\t\t\t\t\t\t\t\tif (orderBy) {\n\t\t\t\t\t\t\t\t\tsortData[orderBy] = $(this).find('.js-sort-order').val();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tcontainer.find('#orderBy').val(JSON.stringify(sortData));\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t{ modalId: e.currentTarget.dataset.modalid }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\n\t\tregisterEvents: function (container) {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.loadWidgets();\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.WidgetsManage');\n\t\t\t}\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('.select2'));\n\t\t\tcontainer.find('select.js-module__list').on('change', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\t$(\"input[name='tabid']\").val(target.val());\n\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t});\n\t\t\tcontainer.find('.js-widget__add').on('click', function (e) {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({ position: 'html' });\n\t\t\t\tvar module = $('.WidgetsManage select.js-module__list').val();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?parent=Settings&module=Widgets&view=Widget&mod=' + module,\n\t\t\t\t\tfunction (wizardContainer) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tvar form = jQuery('form', wizardContainer);\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar type = form.find('[name=\"type\"]').val();\n\t\t\t\t\t\t\tthisInstance.createStep2(type);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t\tcontainer.find('.js-widget__edit').on('click', (e) => {\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=Widgets&view=Widget&mode=edit&id=' +\n\t\t\t\t\t\t$(e.currentTarget).closest('.blockSortable').data('id'),\n\t\t\t\t\tcb: (wizardContainer) => {\n\t\t\t\t\t\tthis.modalFormEdit(wizardContainer);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.js-widget__remove').on('click', function (e) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\tvar blockSortable = target.closest('.blockSortable');\n\t\t\t\tthisInstance.registerSaveEvent('removeWidget', {\n\t\t\t\t\twid: blockSortable.data('id')\n\t\t\t\t});\n\t\t\t\tthisInstance.reloadWidgets();\n\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","getTabId","val","getType","createStep2","type","tabId","thisInstance","progressIndicatorElement","progressIndicator","position","app","showModalWindow","wizardContainer","showPopoverElementView","find","loadFilters","relatedModuleFields","on","changeRelatedModule","registerSort","mode","form","validationEngine","validationEngineOptions","e","preventDefault","hasClass","data","InvalidFields","length","formAlignmentAfterValidation","save","serializeFormData","relatedfields","formData","registerSaveEvent","tabid","done","reloadWidgets","hideModalWindow","loadWidgets","blocks","sortable","revert","connectWith","tolerance","cursor","placeholder","stop","updateSequence","params","$","each","index","column","closest","message","vtranslate","blockInfo","enabled","progress","Indicator","AppConnector","request","html","registerEvents","container","Deferred","module","getModuleName","parent","getParentModuleName","action","async","dataType","aDeferred","resolve","showNotify","text","fail","textStatus","errorThrown","reject","promise","contener","selected","relatedModuleInput","relatedModule","i","getMainParams","types","filterField","filterSelected","empty","append","value","filters","addClass","removeClass","label","option","App","Fields","Picklist","showSelect2ElementView","parseInt","optgroup","prop","removeAttr","trigger","modalFormEdit","url","currentTarget","dataset","el","orderBy","sortData","JSON","stringify","modalId","modalid","target","cb","blockSortable","wid"],"mappings":"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"}