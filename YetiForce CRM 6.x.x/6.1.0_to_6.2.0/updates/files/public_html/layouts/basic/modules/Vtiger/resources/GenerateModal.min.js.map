{"version":3,"file":"GenerateModal.min.js","sources":["GenerateModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Vtiger_GenerateModal_Js',\n\t{},\n\t{\n\t\tregisterGenetateButton: function (container) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('button.js-genetate-button').on('click', function (e) {\n\t\t\t\tdocument.progressLoader = $.progressIndicator({\n\t\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet currentTarget = container.find('.js-generate-mapping option:selected'),\n\t\t\t\t\tactionUrl = currentTarget.data('url'),\n\t\t\t\t\tmethod = container.find('[name=\"method\"]:checked');\n\t\t\t\tif (method.length <= 0) {\n\t\t\t\t\twindow.location.href = actionUrl;\n\t\t\t\t} else {\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\taction: 'GenerateRecords',\n\t\t\t\t\t\t\trecords: container.find('[name=\"all_records\"]').val(),\n\t\t\t\t\t\t\ttemplate: currentTarget.data('id'),\n\t\t\t\t\t\t\ttarget: currentTarget.data('name'),\n\t\t\t\t\t\t\tmethod: method.val()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdataType: 'json'\n\t\t\t\t\t})\n\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\tlet response = data['result'];\n\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\tlet records = response.ok;\n\t\t\t\t\t\t\t\tthisInstance.summary(container, response);\n\t\t\t\t\t\t\t\tdocument.progressLoader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\tif ('1' === method.val()) {\n\t\t\t\t\t\t\t\t\tfor (let i in records) {\n\t\t\t\t\t\t\t\t\t\twindow.open(actionUrl + records[i], '_blank');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsummary: function (container, data) {\n\t\t\tcontainer.find('.modal-title').text(app.vtranslate('JS_SUMMARY'));\n\t\t\tcontainer\n\t\t\t\t.find('.modal-body')\n\t\t\t\t.html(\n\t\t\t\t\t'<div>' +\n\t\t\t\t\t\tapp.vtranslate('JS_SELECTED_RECORDS') +\n\t\t\t\t\t\t': <strong>' +\n\t\t\t\t\t\tdata.all +\n\t\t\t\t\t\t'</strong></div><div>' +\n\t\t\t\t\t\tapp.vtranslate('JS_SUCCESSFULLY_PERFORMED_ACTION_FOR') +\n\t\t\t\t\t\t': <strong>' +\n\t\t\t\t\t\tdata.ok.length +\n\t\t\t\t\t\t'</strong></div><div>' +\n\t\t\t\t\t\tapp.vtranslate('JS_ACTION_FAILED_FOR') +\n\t\t\t\t\t\t': <strong>' +\n\t\t\t\t\t\tdata.fail.length +\n\t\t\t\t\t\t'</strong></div>'\n\t\t\t\t);\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar container = jQuery('.generateMappingModal');\n\t\t\tthis.registerGenetateButton(container);\n\t\t}\n\t}\n);\n\njQuery(document).ready(function (e) {\n\tvar instance = new Vtiger_GenerateModal_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","registerGenetateButton","container","find","on","document","progressLoader","$","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","actionUrl","currentTarget","data","method","length","window","location","href","AppConnector","request","module","getModuleName","action","records","val","template","target","dataType","done","response","ok","thisInstance","summary","mode","open","i","fail","err","errorLog","text","html","all","registerEvents","ready","instance"],"mappings":";;AAGAA,OAAOC,KAAP,CACC,yBADD,CAEC,EAFD,CAGC,CACCC,uBAAwB,gCAAUC,SAAV,CAAqB,CAC5C,iBAAqB,IAArB,CACAA,UAAUC,IAAV,CAAe,2BAAf,EAA4CC,EAA5C,CAA+C,OAA/C,CAAwD,UAAa,CACpEC,SAASC,cAAT,CAA0BC,EAAEC,iBAAF,CAAoB,CAC7CC,QAASC,IAAIC,UAAJ,CAAe,wBAAf,CADoC,CAE7CC,SAAU,MAFmC,CAG7CC,UAAW,CACVC,UADU,CAHkC,CAApB,CAD0C,CAQpE,kBAAoBZ,UAAUC,IAAV,CAAe,sCAAf,CAApB,CACCY,UAAYC,cAAcC,IAAd,CAAmB,KAAnB,CADb,CAECC,OAAShB,UAAUC,IAAV,CAAe,yBAAf,CAFV,CAGqB,CAAjB,SAAOgB,MAXyD,CAYnEC,OAAOC,QAAP,CAAgBC,IAAhB,CAAuBP,SAZ4C,CAcnEQ,aAAaC,OAAb,CAAqB,CACpBP,KAAM,CACLQ,OAAQf,IAAIgB,aAAJ,EADH,CAELC,OAAQ,iBAFH,CAGLC,QAAS1B,UAAUC,IAAV,CAAe,sBAAf,EAAuC0B,GAAvC,EAHJ,CAILC,SAAUd,cAAcC,IAAd,CAAmB,IAAnB,CAJL,CAKLc,OAAQf,cAAcC,IAAd,CAAmB,MAAnB,CALH,CAMLC,OAAQA,OAAOW,GAAP,EANH,CADc,CASpBG,SAAU,MATU,CAArB,EAWEC,IAXF,CAWO,SAAUhB,IAAV,CAAgB,CACrB,aAAeA,WAAf,CACA,GAAIA,YAAJ,CAAqB,CACpB,YAAciB,SAASC,EAAvB,CAGA,GAFAC,aAAaC,OAAb,CAAqBnC,SAArB,CAAgCgC,QAAhC,CAEA,CADA7B,SAASC,cAAT,CAAwBE,iBAAxB,CAA0C,CAAE8B,KAAM,MAAR,CAA1C,CACA,CAAI,MAAQpB,OAAOW,GAAP,EAAZ,CACC,IAAK,KAAL,WAAA,CACCT,OAAOmB,IAAP,CAAYxB,UAAYa,QAAQY,CAAR,CAAxB,CAAoC,QAApC,EAGF,CACD,CAvBF,EAwBEC,IAxBF,CAwBO,SAAUxB,IAAV,CAAgByB,GAAhB,CAAqB,CAC1BhC,IAAIiC,QAAJ,CAAa1B,IAAb,CAAmByB,GAAnB,EACA,CA1BF,EA4BD,CA1CD,EA2CA,CA9CF,CA+CCL,QAAS,iBAAUnC,SAAV,CAAqBe,IAArB,CAA2B,CACnCf,UAAUC,IAAV,CAAe,cAAf,EAA+ByC,IAA/B,CAAoClC,IAAIC,UAAJ,CAAe,YAAf,CAApC,CADmC,CAEnCT,UACEC,IADF,CACO,aADP,EAEE0C,IAFF,CAGE,QACCnC,IAAIC,UAAJ,CAAe,qBAAf,CADD,CAEC,YAFD,CAGCM,KAAK6B,GAHN,CAIC,sBAJD,CAKCpC,IAAIC,UAAJ,CAAe,sCAAf,CALD,CAMC,YAND,CAOCM,KAAKkB,EAAL,CAAQhB,MAPT,CAQC,sBARD,CASCT,IAAIC,UAAJ,CAAe,sBAAf,CATD,CAUC,YAVD,CAWCM,KAAKwB,IAAL,CAAUtB,MAXX,CAYC,iBAfH,EAiBA,CAlEF,CAmEC4B,eAAgB,yBAAY,CAC3B,cAAgBhD,OAAO,uBAAP,CAAhB,CACA,KAAKE,sBAAL,CAA4BC,SAA5B,EACA,CAtEF,CAHD,EA6EAH,OAAOM,QAAP,EAAiB2C,KAAjB,CAAuB,UAAa,CACnC,aAAe,2BAAf,CACAC,SAASF,cAAT,GACA,CAHD"}