'use strict';

Vtiger_Edit_Js('OSSTimeControl_Edit_Js',{},{registerGenerateTCFieldTimeAndCost:function registerGenerateTCFieldTimeAndCost(){var thisInstance=this;$('input[name="sum_time"]').attr('readonly','readonly').css('width','80px');var form=thisInstance.getForm(),sumeTime=thisInstance.differenceDays(form),hours=(Math.ceil(100*(sumeTime/36e5))/100).toFixed(2);jQuery('input[name="sum_time"]').val(hours),jQuery('.dateField').on('change',function(){return sumeTime=thisInstance.differenceDays(form),'Error'!=sumeTime&&void(hours=(Math.ceil(100*(sumeTime/36e5))/100).toFixed(2),jQuery('input[name="sum_time"]').val(hours))}),jQuery('.clockPicker').on('change',function(){return sumeTime=thisInstance.differenceDays(form),'Error'!=sumeTime&&void(hours=(Math.round(100*(sumeTime/36e5))/100).toFixed(2),jQuery('input[name="sum_time"]').val(hours))});},differenceDays:function differenceDays(container){var firstDate=container.find('input[name="date_start"]'),firstDateFormat=firstDate.data('date-format'),firstDateValue=firstDate.val(),secondDate=container.find('input[name="due_date"]'),secondDateFormat=secondDate.data('date-format'),secondDateValue=secondDate.val(),firstTime=container.find('input[name="time_start"]'),secondTime=container.find('input[name="time_end"]');firstTime.length&&(firstDateValue=firstDateValue+' '+firstTime.val()),secondTime.length&&(secondDateValue=secondDateValue+' '+secondTime.val());try{var firstDateInstance=Vtiger_Helper_Js.getDateInstance(firstDateValue,firstDateFormat),secondDateInstance=Vtiger_Helper_Js.getDateInstance(secondDateValue,secondDateFormat),timeBetweenDates=secondDateInstance-firstDateInstance;if(0<=timeBetweenDates)return timeBetweenDates}catch(err){return 'Error'}return 'Error'},/**
		 * Function to register recordpresave event
		 */registerRecordPreSaveEvent:function registerRecordPreSaveEvent(){var thisInstance=this,form=$('form.js-form');0==form.length&&(form=this.getForm()),form.on(Vtiger_Edit_Js.recordPreSave,function(){var sumeTime2=thisInstance.differenceDays(form);if('Error'==sumeTime2){var parametres={text:app.vtranslate('JS_DATE_SHOULD_BE_GREATER_THAN'),type:'error'};return app.showNotify(parametres),!1}});},escapeRegExp:function escapeRegExp(string){return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,'\\$1')},replaceAll:function replaceAll(string,find,replace){var thisInstance=this;return string=string.replace(new RegExp(thisInstance.escapeRegExp('&Oacute;'),'g'),'\xD3'),string.replace(new RegExp(thisInstance.escapeRegExp(find),'g'),replace)},registerBasicEvents:function registerBasicEvents(container){this._super(container),this.registerRecordPreSaveEvent(container);},registerEvents:function registerEvents(){this._super(),this.registerGenerateTCFieldTimeAndCost();}});
//# sourceMappingURL=Edit.min.js.map
