{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 4.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_AutomaticAssignment_List_Js',\n\t{\n\t\tchangeRecordState: function (recordId, state) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tvar message = app.vtranslate('JS_STATE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t.done(function (e) {\n\t\t\t\t\tapp.saveAjax('save', { active: state }, { record: recordId }).done(function (respons) {\n\t\t\t\t\t\tvar listInstance = Settings_AutomaticAssignment_List_Js.getInstance();\n\t\t\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\tapp.errorLog(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.container == false) {\n\t\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tregisterModalEvents: function (data, url) {\n\t\t\tvar form = data.find('form');\n\t\t\tvar submitButton = data.find('.submitButton');\n\t\t\tdata.find('[name=\"tabid\"]').on('change', function (e) {\n\t\t\t\tvar progress = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar getFieldsUrl = url + '&tabid=' + element.val();\n\t\t\t\tAppConnector.request(getFieldsUrl)\n\t\t\t\t\t.done(function (fields) {\n\t\t\t\t\t\tdata.find('.fieldList').html(fields);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.fieldList select'));\n\t\t\t\t\t\tsubmitButton.removeClass('d-none');\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tform.on('submit', function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\tapp.saveAjax('save', params).done(function (response) {\n\t\t\t\t\tvar id = response.result;\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\tvar url = form.attr('action');\n\t\t\t\t\t\turl = url + '&record=' + id;\n\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthis._super();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.addRecord')\n\t\t\t\t.on('click', function (e) {\n\t\t\t\t\tvar button = jQuery(e.currentTarget);\n\t\t\t\t\tvar url = button.data('url');\n\t\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\t\tthisInstance.registerModalEvents(data, url);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","changeRecordState","recordId","state","jQuery","Deferred","message","app","vtranslate","showConfirmationBox","done","saveAjax","active","record","Settings_AutomaticAssignment_List_Js","getInstance","listInstance","getListViewRecords","fail","error","err","errorLog","aDeferred","promise","container","registerFilterChangeEvent","on","e","val","module","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","thisInstance","params","updatePagination","getContainer","registerModalEvents","data","url","find","submitButton","progressIndicator","position","blockInfo","enabled","element","getFieldsUrl","AppConnector","request","fields","html","App","Fields","Picklist","showSelect2ElementView","removeClass","progress","mode","textStatus","errorThrown","form","preventDefault","serializeFormData","response","result","id","attr","window","location","href","registerEvents","_super","button","showModalWindow"],"mappings":"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"}