{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_Workflows_List_Js',\n\t{\n\t\ttriggerCreate: function (url) {\n\t\t\tvar selectedModule = jQuery('#moduleFilter').val();\n\t\t\tif (selectedModule.length > 0) {\n\t\t\t\turl += '&source_module=' + selectedModule;\n\t\t\t}\n\t\t\twindow.location.href = url;\n\t\t},\n\n\t\tsetChangeStatusTasks: function (e, recordId, status) {\n\t\t\tvar changeButtonType = jQuery(e);\n\t\t\tvar container = jQuery(e).closest('tr');\n\t\t\tvar message = app.vtranslate('LBL_STATUS_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function (e) {\n\t\t\t\tvar module = app.getModuleName();\n\t\t\t\tvar postData = {\n\t\t\t\t\tmodule: module,\n\t\t\t\t\taction: 'TaskAjax',\n\t\t\t\t\tmode: 'changeStatusAllTasks',\n\t\t\t\t\trecord: recordId,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\tparent: app.getParentModuleName()\n\t\t\t\t};\n\t\t\t\tvar deleteMessage = app.vtranslate('JS_TASKS_STATUS_GETTING_CHANGED');\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tmessage: deleteMessage,\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request(postData).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\tmode: 'hide'\n\t\t\t\t\t});\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tvar count = data.result.count;\n\t\t\t\t\t\tvar element = container.find('[data-name=\"active_tasks\"]');\n\t\t\t\t\t\tchangeButtonType.hide();\n\t\t\t\t\t\tif (status) {\n\t\t\t\t\t\t\telement.html('&nbsp;' + count);\n\t\t\t\t\t\t\tchangeButtonType.closest('td').find('.deactiveTasks').show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telement.html('&nbsp;0');\n\t\t\t\t\t\t\tchangeButtonType.closest('td').find('.activeTasks').show();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION')\n\t\t\t\t\t\t};\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tregisterFilterChangeEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\t\tjQuery('#pageNumber').val('1');\n\t\t\t\tjQuery('#pageToJump').val('1');\n\t\t\t\tjQuery('#orderBy').val('');\n\t\t\t\tjQuery('#sortOrder').val('');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t\t};\n\t\t\t\t//Make the select all count as empty\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\t//Make total number of pages as empty\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to register the list view row click event\n\t\t */\n\t\tregisterRowClickEvent: function () {\n\t\t\tthis.getListViewContentContainer().on('click', '.listViewEntries', (e) => {\n\t\t\t\tlet editUrl = $(e.currentTarget).find('.js-edit').attr('href');\n\t\t\t\tif (editUrl) {\n\t\t\t\t\twindow.location.href = editUrl;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tgetDefaultParams: function () {\n\t\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar parent = app.getParentModuleName();\n\t\t\tvar params = {\n\t\t\t\tmodule: module,\n\t\t\t\tparent: parent,\n\t\t\t\tpage: pageNumber,\n\t\t\t\tview: 'List',\n\t\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t\t};\n\t\t\treturn params;\n\t\t},\n\t\tregisterImportTemplate: function () {\n\t\t\tjQuery('#importButton').on('click', function () {\n\t\t\t\twindow.location.href = jQuery(this).data('url');\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerFilterChangeEvent();\n\t\t\tthis.registerImportTemplate();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","triggerCreate","url","jQuery","val","length","selectedModule","window","location","href","setChangeStatusTasks","e","recordId","status","container","closest","message","app","vtranslate","Vtiger_Helper_Js","showConfirmationBox","done","getModuleName","postData","module","action","mode","record","parent","getParentModuleName","deleteMessage","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","AppConnector","request","data","success","result","count","element","find","changeButtonType","hide","html","show","text","error","title","showPnotify","params","registerFilterChangeEvent","on","sourceModule","currentTarget","thisInstance","getListViewRecords","updatePagination","registerRowClickEvent","getListViewContentContainer","$","attr","editUrl","getDefaultParams","page","pageNumber","view","registerImportTemplate","registerEvents","_super"],"mappings":"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"}