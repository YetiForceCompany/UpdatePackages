{"version":3,"file":"Encryption.min.js","sources":["Encryption.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'Settings_Password_Encryption_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Container (Form)\n\t\t */\n\t\tcontainer: null,\n\t\t/**\n\t\t * Set container (Form)\n\t\t * @param {Object} element\n\t\t */\n\t\tsetContainer: function(element) {\n\t\t\tthis.container = element;\n\t\t},\n\t\t/**\n\t\t * Get Container (Form)\n\t\t * @returns {Object}\n\t\t */\n\t\tgetContainer: function() {\n\t\t\treturn this.container;\n\t\t},\n\t\t/**\n\t\t * Register events for change method encryption\n\t\t */\n\t\tregisterChangeMethodName: function() {\n\t\t\tconst self = this;\n\t\t\tlet container = this.getContainer();\n\t\t\tthis.passwordAlert(container);\n\t\t\tcontainer.find('[name=\"methods\"]').on('change', function() {\n\t\t\t\tself.passwordAlert(container);\n\t\t\t});\n\t\t},\n\t\tpasswordAlert: function(container) {\n\t\t\tlet methodElement = container.find('[name=\"methods\"]');\n\t\t\tlet mapLengthVector = JSON.parse($('[name=\"lengthVectors\"]').val());\n\t\t\tlet length = mapLengthVector[methodElement.val()];\n\t\t\tlet validator = '';\n\t\t\tlet passwordElement = container.find('#password');\n\t\t\tlet vectorElement = container.find('#vector');\n\t\t\tlet passwordInfoAlert = container.find('.js-password-alert');\n\t\t\tif (length == undefined) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t\tpasswordElement.attr('disabled', 'disabled');\n\t\t\t} else if (length === 0) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tvectorElement.val('');\n\t\t\t\tvectorElement.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tpasswordInfoAlert.removeClass('d-none');\n\t\t\t\tpasswordInfoAlert.find('.js-password-length').text(length);\n\t\t\t\tvectorElement.removeAttr('disabled');\n\t\t\t\tpasswordElement.removeAttr('disabled');\n\t\t\t\tvalidator = 'validate[required,maxSize[' + length + '],minSize[' + length + ']]';\n\t\t\t}\n\t\t\tvectorElement.attr('data-validation-engine', validator);\n\t\t},\n\t\t/**\n\t\t * Register events for form\n\t\t */\n\t\tregisterForm: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getContainer();\n\t\t\tcontainer.on('submit', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\t\tif (container.validationEngine('validate')) {\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(container.serializeFormData()).done(function(response) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\thide: false\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register events to preview password\n\t\t */\n\t\tregisterPreviewPassword: function() {\n\t\t\tvar container = this.getContainer();\n\t\t\tvar button = container.find('.previewPassword');\n\t\t\tbutton.on('mousedown', function() {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'text');\n\t\t\t});\n\t\t\tbutton.on('mouseup', function() {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t\tbutton.on('mouseout', function() {\n\t\t\t\t$('#' + $(this).data('id')).attr('type', 'password');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register all events in view\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tthis.setContainer($('.formEncryption'));\n\t\t\tthis.registerForm();\n\t\t\tthis.registerChangeMethodName();\n\t\t\tthis.registerPreviewPassword();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","container","setContainer","element","getContainer","registerChangeMethodName","passwordAlert","find","on","self","mapLengthVector","JSON","parse","$","val","length","methodElement","validator","passwordElement","vectorElement","passwordInfoAlert","addClass","attr","removeClass","text","removeAttr","registerForm","thisInstance","event","preventDefault","validationEngine","app","validationEngineOptions","progressIndicator","position","blockInfo","enabled","AppConnector","request","serializeFormData","done","response","progressIndicatorElement","mode","Vtiger_Helper_Js","showPnotify","result","type","hide","registerPreviewPassword","button","data","registerEvents"],"mappings":"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"}