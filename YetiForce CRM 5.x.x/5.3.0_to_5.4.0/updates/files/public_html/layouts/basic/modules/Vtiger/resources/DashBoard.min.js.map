{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n ************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Vtiger_DashBoard_Js',\n\t{\n\t\tgrid: false,\n\t\t//static property which will store the instance of dashboard\n\t\tcurrentInstance: false,\n\t\tscrollContainer: false,\n\t\trestrictContentDrag: function (container) {\n\t\t\tcontainer.on('mousedown.draggable', function (e) {\n\t\t\t\tvar element = $(e.target);\n\t\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\t\tif (isHeaderElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tcontainer: false,\n\t\tnoCache: false,\n\t\tinstancesCache: {},\n\t\tinit: function () {\n\t\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t\t},\n\t\tgetContainer: function () {\n\t\t\tif (this.noCache == true || this.container == false) {\n\t\t\t\tthis.container = $('.grid-stack');\n\t\t\t}\n\t\t\treturn this.container;\n\t\t},\n\t\tgetCurrentDashboard: function () {\n\t\t\tlet dashboardId = $('.selectDashboard li a.active').closest('li').data('id');\n\t\t\tif (!dashboardId) {\n\t\t\t\tdashboardId = 1;\n\t\t\t}\n\t\t\treturn dashboardId;\n\t\t},\n\t\tgetWidgetInstance: function (widgetContainer) {\n\t\t\tvar id = widgetContainer.attr('id');\n\t\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\t\tvar widgetName = widgetContainer.data('name');\n\t\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t\t}\n\t\t\treturn this.instancesCache[id];\n\t\t},\n\t\tregisterGrid: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tVtiger_DashBoard_Js.grid = GridStack.init(\n\t\t\t\t{\n\t\t\t\t\tverticalMargin: '0.5rem',\n\t\t\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\t\t\tnavigator.userAgent\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t'.grid-stack'\n\t\t\t);\n\t\t\tVtiger_DashBoard_Js.grid.on('change', function (event, ui) {\n\t\t\t\tthisInstance.savePositions($('.grid-stack-item'));\n\t\t\t});\n\t\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\t\tthis.loadWidgets();\n\t\t\t// recalculate positions with scrollbars\n\t\t\tif (this.getContainer().width() !== this.getContainer().parent().width()) {\n\t\t\t\tconst parentWidth = thisInstance.getContainer().parent().width();\n\t\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t\t}\n\t\t},\n\t\tsavePositions: function (widgets) {\n\t\t\tvar widgetRowColPositions = {},\n\t\t\t\twidgetSizes = {};\n\t\t\tfor (var index = 0, len = widgets.length; index < len; ++index) {\n\t\t\t\tvar widget = $(widgets[index]);\n\t\t\t\twidgetRowColPositions[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\trow: widget.attr('data-gs-y'),\n\t\t\t\t\tcol: widget.attr('data-gs-x')\n\t\t\t\t});\n\t\t\t\twidgetSizes[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\t\twidth: widget.attr('data-gs-width'),\n\t\t\t\t\theight: widget.attr('data-gs-height')\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.updateLazyWidget();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'SaveWidgetPositions',\n\t\t\t\tposition: widgetRowColPositions,\n\t\t\t\tsize: widgetSizes\n\t\t\t});\n\t\t},\n\t\tupdateLazyWidget() {\n\t\t\tconst scrollTop = this.scrollContainer.scrollTop();\n\t\t\tthis.scrollContainer.scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t\t},\n\t\tloadWidgets: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.scrollContainer = App.Components.Scrollbar.page.element;\n\t\t\tif (!Quasar.plugins.Platform.is.desktop) {\n\t\t\t\tthis.scrollContainer = $('.bodyContent');\n\t\t\t\tapp.showNewScrollbar(this.scrollContainer);\n\t\t\t}\n\t\t\tthisInstance\n\t\t\t\t.getContainer()\n\t\t\t\t.find('.dashboardWidget')\n\t\t\t\t.Lazy({\n\t\t\t\t\tthreshold: 0,\n\t\t\t\t\tappendScroll: this.scrollContainer,\n\t\t\t\t\twidgetLoader(element) {\n\t\t\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.updateLazyWidget(this.scrollContainer);\n\t\t},\n\t\tloadWidget: function (widgetContainer) {\n\t\t\tconst self = this;\n\t\t\tlet urlParams = widgetContainer.data('url');\n\t\t\tlet mode = widgetContainer.data('mode');\n\t\t\tlet moduleName = app.getModuleName();\n\t\t\tlet sourceModule = $('a.active', 'ul.selectDashboradView').parent().data('module');\n\t\t\twidgetContainer.progressIndicator();\n\t\t\tif (mode === 'open') {\n\t\t\t\tlet name = widgetContainer.data('name');\n\t\t\t\tlet cache = widgetContainer.data('cache');\n\t\t\t\tlet userId = CONFIG.userId;\n\t\t\t\tif (cache === 1) {\n\t\t\t\t\tlet cecheUrl = app.cacheGet(name + userId, false);\n\t\t\t\t\turlParams = cecheUrl ? cecheUrl : urlParams;\n\t\t\t\t}\n\t\t\t\tAppConnector.request(urlParams).done((data) => {\n\t\t\t\t\twidgetContainer.html(data);\n\t\t\t\t\twidgetContainer.closest('.grid-stack').on('gsresizestop', (event, elem) => {\n\t\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\t\tApp.Fields.Tree.register(widgetContainer);\n\t\t\t\t\tself.getWidgetInstance(widgetContainer);\n\t\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\t\tself.adjustHeightWidget(widgetContainer);\n\t\t\t\t\tif (sourceModule && moduleName != sourceModule) {\n\t\t\t\t\t\t$('a.js-widget-remove', widgetContainer).remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Adjust the height of the widget.\n\t\t * @param {jQuery} widgetContainer\n\t\t */\n\t\tadjustHeightWidget(widgetContainer) {\n\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t}\n\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\tapp.showNewScrollbar(widgetContent, { wheelPropagation: true });\n\t\t},\n\t\tregisterRefreshWidget: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.getContainer().on('click', 'a[name=\"drefresh\"]', function (e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar widgetInstnace = thisInstance.getWidgetInstance(parent);\n\t\t\t\twidgetInstnace.refreshWidget();\n\t\t\t\treturn;\n\t\t\t});\n\t\t},\n\t\tremoveWidget: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tthis.getContainer().on('click', '.js-widget-remove', function (e) {\n\t\t\t\tlet element = $(e.currentTarget),\n\t\t\t\t\tlistItem = $(element).parents('.grid-stack-item'),\n\t\t\t\t\twidth = listItem.attr('data-gs-width'),\n\t\t\t\t\theight = listItem.attr('data-gs-height'),\n\t\t\t\t\turl = element.data('url'),\n\t\t\t\t\tparent = element.closest('.dashboardWidgetHeader').parent(),\n\t\t\t\t\twidgetName = parent.data('name'),\n\t\t\t\t\twidgetTitle = parent.find('.dashboardTitle').attr('title'),\n\t\t\t\t\tmessage =\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET') +\n\t\t\t\t\t\t' [' +\n\t\t\t\t\t\twidgetTitle +\n\t\t\t\t\t\t']. ' +\n\t\t\t\t\t\tapp.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function (e) {\n\t\t\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t\tlet nonReversableWidgets = [];\n\t\t\t\t\t\t\t\tparent.fadeOut('slow', function () {\n\t\t\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif ($.inArray(widgetName, nonReversableWidgets) == -1) {\n\t\t\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(element.closest('.grid-stack-item'));\n\t\t\t\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').removeClass('d-none');\n\t\t\t\t\t\t\t\t\tlet data = `<a class=\"js-widget-list__item dropdown-item d-flex\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tdata-widget-url=\"${response.result.url}\"\n\t\t\t\t\t\t\t\t\t\tdata-linkid=\"${response.result.linkid}\"\n\t\t\t\t\t\t\t\t\t\tdata-name=\"${response.result.name}\"\n\t\t\t\t\t\t\t\t\t\tdata-width=\"${width}\"\n\t\t\t\t\t\t\t\t\t\tdata-height=\"${height}\" data-js=\"remove | click\">${response.result.title}`;\n\t\t\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\t\t\tdata += `<span class=\"text-danger pl-5 ml-auto\">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"fas fa-trash-alt removeWidgetFromList u-hover-opacity\" data-widget-id=\"${response.result.id}\" data-js=\"click\"></span>\n\t\t\t\t\t\t\t\t\t\t</span>`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata += `</a>`;\n\t\t\t\t\t\t\t\t\tlet divider = $('.js-widget-list .dropdown-divider');\n\t\t\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t$('.js-widget-list').append(data);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.showAndHideAlert(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (error, err) {});\n\t\t\t});\n\t\t},\n\t\tregisterSelectDashboard: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboard li').on('click', function (e) {\n\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar dashboardId = currentTarget.data('id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tdashboardId: dashboardId\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterDatePickerHideInitiater: function () {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', 'input.dateRange', function (e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\t\tvar dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\t\tvar callbackFunction = function () {\n\t\t\t\t\tvar date = $('.dateRange');\n\t\t\t\t\tdate.DatePickerHide();\n\t\t\t\t\tdate.blur();\n\t\t\t\t};\n\t\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\t\tVtiger_Helper_Js.addClickOutSideEvent(\n\t\t\t\t\tdashboardWidgetHeader.find('.dateRange'),\n\t\t\t\t\tcallbackFunction\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\t\tregisterShowMailBody: function () {\n\t\t\tvar container = this.getContainer();\n\t\t\tcontainer.on('click', '.showMailBody', function (e) {\n\t\t\t\tvar widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\t\tvar mailBody = widgetContainer.find('.mailBody');\n\t\t\t\tvar bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\t\tif (mailBody.css('display') == 'none') {\n\t\t\t\t\tmailBody.show();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-down').addClass('fa-chevron-up');\n\t\t\t\t} else {\n\t\t\t\t\tmailBody.hide();\n\t\t\t\t\tbodyIcon.removeClass('fa-chevron-up').addClass('fa-chevron-down');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterChangeMailUser: function () {\n\t\t\tvar container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#mailUserList', function (e) {\n\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\t\tvar optionSelected = $('option:selected', this);\n\t\t\t\tvar url = parent.data('url') + '&user=' + optionSelected.val();\n\n\t\t\t\tvar params = {};\n\t\t\t\tparams.url = url;\n\t\t\t\tparams.data = {};\n\t\t\t\tcontentContainer.progressIndicator({});\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tparent.html(data).trigger(Vtiger_Widget_Js.widgetPostRefereshEvent);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function () {\n\t\t\t\t\t\tcontentContainer.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterChartFilterWidget: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addChartFilter')\n\t\t\t\t.on('click', '.addChartFilter', function (e) {\n\t\t\t\t\tvar element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(null, 'index.php?module=Home&view=ChartFilter&step=step1', function (\n\t\t\t\t\t\twizardContainer\n\t\t\t\t\t) {\n\t\t\t\t\t\tvar form = $('form', wizardContainer);\n\t\t\t\t\t\tform.on('keypress', function (event) {\n\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar sectorContainer = form.find('.sectorContainer');\n\t\t\t\t\t\tvar chartType = $('select[name=\"chartType\"]', wizardContainer);\n\t\t\t\t\t\tvar moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(sectorContainer.find('.select2'));\n\t\t\t\t\t\tvar moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(\n\t\t\t\t\t\t\tmoduleNameSelectDOM,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvar step1 = $('.step1', wizardContainer);\n\t\t\t\t\t\tvar step2 = $('.step2', wizardContainer);\n\t\t\t\t\t\tvar step3 = $('.step3', wizardContainer);\n\t\t\t\t\t\tvar footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\tstep2.remove();\n\t\t\t\t\t\tstep3.remove();\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tchartType.on('change', function (e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tvar value = currentTarget.val();\n\t\t\t\t\t\t\tif (value == 'Barchat' || value == 'Horizontal') {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').removeClass('d-none');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tform.find('.isColorContainer').addClass('d-none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (wizardContainer.find('#widgetStep').val() == 4) {\n\t\t\t\t\t\t\t\twizardContainer.find('.step3 .groupField').trigger('change');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) return;\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\twizardContainer.find('.step2').remove();\n\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t}).done(function (step2Response) {\n\t\t\t\t\t\t\t\tstep1.after(step2Response);\n\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(2);\n\t\t\t\t\t\t\t\tconst step2 = wizardContainer.find('.step2');\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\tconst filtersIdElement = step2.find('.filtersId');\n\t\t\t\t\t\t\t\tconst valueTypeElement = step2.find('.valueType');\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filtersIdElement);\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(valueTypeElement);\n\t\t\t\t\t\t\t\tstep2.find('.filtersId, .valueType').on('change', function () {\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\tvalueType: valueTypeElement.val()\n\t\t\t\t\t\t\t\t\t}).done(function (step3Response) {\n\t\t\t\t\t\t\t\t\t\tstep2.last().after(step3Response);\n\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(3);\n\t\t\t\t\t\t\t\t\t\tvar step3 = wizardContainer.find('.step3');\n\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step3.find('select'));\n\t\t\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\t\t\tstep3.find('.groupField').on('change', function () {\n\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\t\t\tvar groupField = $(this);\n\t\t\t\t\t\t\t\t\t\t\tif (!groupField.val()) return;\n\t\t\t\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\t\t\tstep: 'step4',\n\t\t\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tgroupField: groupField.val(),\n\t\t\t\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t\t\t\t}).done(function (step4Response) {\n\t\t\t\t\t\t\t\t\t\t\t\tstep3.last().after(step4Response);\n\t\t\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(4);\n\t\t\t\t\t\t\t\t\t\t\t\tvar step4 = wizardContainer.find('.step4');\n\t\t\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step4.find('select'));\n\t\t\t\t\t\t\t\t\t\t\t\tapp.registerModalEvents(wizardContainer);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tlet save = true;\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\t\t\tsave = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\t\tconst selectedModule = moduleNameSelect2.val();\n\t\t\t\t\t\t\t\tconst selectedModuleLabel = moduleNameSelect2.find(':selected').text();\n\t\t\t\t\t\t\t\tlet selectedFiltersId = form.find('.filtersId').val();\n\t\t\t\t\t\t\t\tif (Array.isArray(selectedFiltersId)) {\n\t\t\t\t\t\t\t\t\tselectedFiltersId = selectedFiltersId.join(',');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst selectedFieldLabel = form.find('.groupField').find(':selected').text();\n\t\t\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\t\t\tmodule: selectedModule,\n\t\t\t\t\t\t\t\t\tgroupField: form.find('.groupField').val(),\n\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tform.find('.saveParam').each(function (index, element) {\n\t\t\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\t\telement.is('input') &&\n\t\t\t\t\t\t\t\t\t\t\telement.prop('type') === 'checkbox' &&\n\t\t\t\t\t\t\t\t\t\t\t!element.prop('checked')\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tdata[element.attr('name')] = element.val();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthisInstance.saveChartFilterWidget(\n\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\tselectedModuleLabel,\n\t\t\t\t\t\t\t\t\tselectedFiltersId,\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\tselectedFieldLabel,\n\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsaveChartFilterWidget: function (\n\t\t\tdata,\n\t\t\telement,\n\t\t\tmoduleNameLabel,\n\t\t\tfiltersId,\n\t\t\tfilterLabel,\n\t\t\tgroupFieldName,\n\t\t\tform\n\t\t) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet label = moduleNameLabel;\n\t\t\tif (typeof filterLabel !== 'undefined' && filterLabel !== null && filterLabel !== '') {\n\t\t\t\tlabel += ' - ' + filterLabel;\n\t\t\t}\n\t\t\tif (\n\t\t\t\ttypeof groupFieldName !== 'undefined' &&\n\t\t\t\tgroupFieldName !== null &&\n\t\t\t\tgroupFieldName !== ''\n\t\t\t) {\n\t\t\t\tlabel += ' - ' + groupFieldName;\n\t\t\t}\n\t\t\tconst paramsForm = {\n\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\tlabel: label,\n\t\t\t\tname: 'ChartFilter',\n\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\tfilterid: filtersId,\n\t\t\t\tisdefault: 0,\n\t\t\t\theight: 4,\n\t\t\t\twidth: 4,\n\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\tdefault_owner: 'mine',\n\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t};\n\t\t\tconst sourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance\n\t\t\t\t.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet result = data['result'],\n\t\t\t\t\t\tparams = {};\n\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\t\tlinkElement.data('name', 'ChartFilter');\n\t\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=ChartFilter&linkid=' +\n\t\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\t\terrorField;\n\t\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t\t}\n\t\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tregisterMiniListWidget: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading')\n\t\t\t\t.off('click', '.addFilter')\n\t\t\t\t.on('click', '.addFilter', function (e) {\n\t\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t'index.php?module=Home&view=MiniListWizard&step=step1',\n\t\t\t\t\t\tfunction (wizardContainer) {\n\t\t\t\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\t\t\t\tform.on('keypress', function (event) {\n\t\t\t\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\t\t\t\tconst fieldHrefDOM = $('select[name=\"field_href\"]', wizardContainer);\n\t\t\t\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\t\t\t\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(\n\t\t\t\t\t\t\t\tmoduleNameSelectDOM,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(\n\t\t\t\t\t\t\t\tfilteridSelectDOM,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst fieldHrefSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldHrefDOM, {\n\t\t\t\t\t\t\t\tallowClear: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(\n\t\t\t\t\t\t\t\tfilterFieldsSelectDOM,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\t\t\t\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\tfieldHrefDOM.closest('tr').hide();\n\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\t\t\t\tfieldsSelectDOM.empty().html(fieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\t\tfieldsSelect2\n\t\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(filterFieldsHTML).trigger('change');\n\t\t\t\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\t\tfilterFieldsSelect2\n\t\t\t\t\t\t\t\t\t\t.data('select2')\n\t\t\t\t\t\t\t\t\t\t.$selection.find('.select2-search__field')\n\t\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t\t.css('width', '100%');\n\t\t\t\t\t\t\t\t\tfieldHrefSelect2.closest('tr').show();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\t\t\t\tfieldHrefDOM.find('option:not([value=\"\"]').remove();\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.find('option:checked')\n\t\t\t\t\t\t\t\t\t.each(function (index, element) {\n\t\t\t\t\t\t\t\t\t\tlet option = $(element);\n\t\t\t\t\t\t\t\t\t\tlet newOption = new Option(option.text(), option.val(), true, true);\n\t\t\t\t\t\t\t\t\t\tfieldHrefSelect2.append(newOption);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tfieldHrefSelect2.val('').trigger('change');\n\t\t\t\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\t\tform.on('submit', (e) => {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tif (form.validationEngine('validate') === true) {\n\t\t\t\t\t\t\t\t\tlet selectedFields = [];\n\t\t\t\t\t\t\t\t\tfieldsSelect2.select2('data').map((obj) => {\n\t\t\t\t\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tthisInstance.saveMiniListWidget(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tmodule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\t\tfields: selectedFields,\n\t\t\t\t\t\t\t\t\t\t\tfilterFields: filterFieldsSelect2.val(),\n\t\t\t\t\t\t\t\t\t\t\tfieldHref: fieldHrefSelect2.val()\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\t\tmoduleNameSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\t\tfilteridSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfilteridSelect2.find(':selected').text(),\n\t\t\t\t\t\t\t\t\t\tform\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t},\n\t\tsaveMiniListWidget: function (data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\t\tconst thisInstance = this,\n\t\t\t\tparamsForm = {\n\t\t\t\t\tdata: JSON.stringify(data),\n\t\t\t\t\tblockid: element.data('block-id'),\n\t\t\t\t\tlinkid: element.data('linkid'),\n\t\t\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\t\t\tname: 'Mini List',\n\t\t\t\t\tfilterid: filterid,\n\t\t\t\t\tisdefault: 0,\n\t\t\t\t\theight: 4,\n\t\t\t\t\twidth: 4,\n\t\t\t\t\towners_all: ['mine', 'all', 'users', 'groups'],\n\t\t\t\t\tdefault_owner: 'mine',\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t},\n\t\t\t\tsourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\t\tthisInstance\n\t\t\t\t.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tlet result = data['result'],\n\t\t\t\t\t\tparams = {};\n\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\t\t\tparams['text'] = result['text'];\n\t\t\t\t\t\tparams['type'] = 'success';\n\t\t\t\t\t\tlet linkElement = element.clone();\n\t\t\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\t\t\tthisInstance.addWidget(\n\t\t\t\t\t\t\tlinkElement,\n\t\t\t\t\t\t\t'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' +\n\t\t\t\t\t\t\t\telement.data('linkid') +\n\t\t\t\t\t\t\t\t'&widgetid=' +\n\t\t\t\t\t\t\t\tresult['wid'] +\n\t\t\t\t\t\t\t\t'&active=0'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet message = data['error']['message'],\n\t\t\t\t\t\t\terrorField;\n\t\t\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\terrorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t\t\t}\n\t\t\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tsaveWidget: function (form, mode, sourceModule, linkid) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (typeof sourceModule === 'undefined') {\n\t\t\t\tsourceModule = app.getModuleName();\n\t\t\t}\n\t\t\tvar params = {\n\t\t\t\tform: form,\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: mode,\n\t\t\t\taddToUser: true,\n\t\t\t\tlinkid: linkid\n\t\t\t};\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function (error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterTabModules: function () {\n\t\t\tvar thisInstance = this;\n\t\t\t$('.selectDashboradView li').on('click', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\t\tcurrentTarget.addClass('active');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\t\tview: app.getViewName(),\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\t\tthisInstance.noCache = true;\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Remove widget from list\n\t\t */\n\t\tremoveWidgetFromList: function () {\n\t\t\tconst thisInstance = this;\n\t\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function (e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar id = currentTarget.data('widget-id');\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'Widget',\n\t\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\t\twidgetid: id\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\tcurrentTarget.closest('.js-widget-list__item').remove();\n\t\t\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates tablet scroll top position\n\t\t */\n\t\tregisterTabletScrollEvent() {\n\t\t\tif (!app.touchDevice || !Quasar.plugins.Platform.is.desktop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet scollbarContainer = $('.js-tablet-scroll');\n\t\t\tscollbarContainer.parent().removeClass('d-none');\n\n\t\t\tlet scollbarContainerH = scollbarContainer.outerHeight(),\n\t\t\t\tscollbarOffsetTop = scollbarContainer.offset().top,\n\t\t\t\tmaxOffset = $('.js-header').outerHeight() + 8;\n\n\t\t\tthis.scrollContainer.on('scroll', () => {\n\t\t\t\tif (this.scrollContainer.scrollTop() + maxOffset >= scollbarOffsetTop) {\n\t\t\t\t\tscollbarContainer.css({ top: maxOffset });\n\t\t\t\t} else {\n\t\t\t\t\tscollbarContainer.css({\n\t\t\t\t\t\ttop: scollbarOffsetTop - this.scrollContainer.scrollTop(),\n\t\t\t\t\t\theight: scollbarContainerH + this.scrollContainer.scrollTop()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Updates list of predefined widgets after changed dashboard\n\t\t */\n\t\tregisterUpdatePredefinedWidgets: function () {\n\t\t\tlet container = $('.js-predefined-widgets');\n\t\t\tcontainer.off('click', '.js-widget-list__item');\n\t\t\tcontainer.on('click', '.js-widget-list__item', (e) => {\n\t\t\t\tif (!$(e.target).hasClass('removeWidgetFromList')) {\n\t\t\t\t\tthis.addWidget($(e.currentTarget), $(e.currentTarget).data('widgetUrl'));\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request({\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'getDashBoardPredefinedWidgets',\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tdashboardId: this.getCurrentDashboard()\n\t\t\t}).done((data) => {\n\t\t\t\tcontainer.html(data);\n\t\t\t});\n\t\t},\n\t\taddWidget(element, url) {\n\t\t\telement = $(element);\n\t\t\tvar linkId = element.data('linkid');\n\t\t\tvar name = element.data('name');\n\t\t\tvar widgetId = element.data('id');\n\t\t\telement.remove();\n\t\t\tif ($('.js-widget-list .js-widget-list__item').length < 1) {\n\t\t\t\t$('.js-widget-list').prev('.js-widget-predefined').addClass('d-none');\n\t\t\t}\n\t\t\tvar widgetContainer = $(\n\t\t\t\t'<div class=\"grid-stack-item js-css-element-queries\" data-js=\"css-element-queries\"><div id=\"' +\n\t\t\t\t\tlinkId +\n\t\t\t\t\t'-' +\n\t\t\t\t\twidgetId +\n\t\t\t\t\t'\" data-name=\"' +\n\t\t\t\t\tname +\n\t\t\t\t\t'\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\"></div></div>'\n\t\t\t);\n\t\t\twidgetContainer.find('.dashboardWidget').data('url', url);\n\t\t\tvar width = element.data('width');\n\t\t\tvar height = element.data('height');\n\t\t\tVtiger_DashBoard_Js.grid.addWidget(widgetContainer, 0, 0, width, height);\n\t\t\tVtiger_DashBoard_Js.currentInstance.loadWidget(\n\t\t\t\twidgetContainer.find('.grid-stack-item-content')\n\t\t\t);\n\t\t\tthis.showAndHideAlert('addWidget');\n\t\t},\n\n\t\t/**\n\t\t * Show or hide the alert for a dashboard.\n\t\t * @param {string} widgetAction\n\t\t */\n\t\tshowAndHideAlert(widgetAction) {\n\t\t\tlet container = this.getContainer();\n\t\t\tlet alertContainer = container.find('.js-dashboards-alert');\n\t\t\tif (widgetAction === 'addWidget') {\n\t\t\t\talertContainer.addClass('d-none');\n\t\t\t} else if (container.find('.js-css-element-queries').length == 0) {\n\t\t\t\talertContainer.removeClass('d-none');\n\t\t\t}\n\t\t},\n\n\t\tregisterEvents: function () {\n\t\t\tthis.registerGrid();\n\t\t\tthis.registerRefreshWidget();\n\t\t\tthis.removeWidget();\n\t\t\tthis.registerDatePickerHideInitiater();\n\t\t\tthis.registerShowMailBody();\n\t\t\tthis.registerChangeMailUser();\n\t\t\tthis.registerMiniListWidget();\n\t\t\tthis.registerChartFilterWidget();\n\t\t\tthis.registerTabModules();\n\t\t\tthis.removeWidgetFromList();\n\t\t\tthis.registerSelectDashboard();\n\t\t\tthis.registerTabletScrollEvent();\n\t\t\tthis.registerUpdatePredefinedWidgets();\n\t\t\tElementQueries.listen();\n\t\t}\n\t}\n);\n"],"names":["$","Class","grid","currentInstance","scrollContainer","restrictContentDrag","container","on","e","target","isHeaderElement","closest","length","stopPropagation","noCache","instancesCache","init","Vtiger_DashBoard_Js","getContainer","getCurrentDashboard","data","dashboardId","getWidgetInstance","widgetContainer","attr","id","Vtiger_Widget_Js","getInstance","widgetName","registerGrid","GridStack","verticalMargin","alwaysShowResizeHandle","test","navigator","userAgent","thisInstance","savePositions","loadWidgets","width","parent","css","parentWidth","widgets","widgetRowColPositions","widgetSizes","index","len","widget","find","JSON","stringify","row","col","height","updateLazyWidget","AppConnector","request","module","app","getModuleName","action","position","size","scrollTop","App","Components","Scrollbar","page","element","Quasar","plugins","Platform","is","desktop","showNewScrollbar","Lazy","threshold","appendScroll","widgetLoader","loadWidget","urlParams","mode","moduleName","sourceModule","progressIndicator","cache","userId","CONFIG","cacheGet","name","cecheUrl","done","html","self","adjustHeightWidget","Fields","Picklist","showSelect2ElementView","Tree","register","trigger","widgetPostLoadEvent","remove","outerHeight","adjustedHeight","headerHeight","widgetContent","wheelPropagation","registerRefreshWidget","currentTarget","widgetInstnace","refreshWidget","removeWidget","listItem","parents","url","widgetTitle","message","vtranslate","Vtiger_Helper_Js","showConfirmationBox","response","success","fadeOut","inArray","prev","removeClass","result","linkid","title","deleteFromList","divider","insertBefore","append","showAndHideAlert","fail","registerSelectDashboard","blockInfo","enabled","params","view","getViewName","progressIndicatorElement","registerEvents","registerDatePickerHideInitiater","dashboardWidgetHeader","addClickOutSideEvent","date","DatePickerHide","blur","registerShowMailBody","mailBody","bodyIcon","show","addClass","hide","registerChangeMailUser","contentContainer","optionSelected","val","widgetPostRefereshEvent","registerChartFilterWidget","off","showModalWindow","wizardContainer","form","event","keyCode","chartType","moduleNameSelectDOM","sectorContainer","placeholder","step1","step2","step3","footer","value","moduleNameSelect2","step","selectedModule","step2Response","after","valueTypeElement","filtersIdElement","filtersId","valueType","step3Response","last","groupField","step4Response","step4","registerModalEvents","preventDefault","InvalidFields","formAlignmentAfterValidation","save","selectedModuleLabel","text","selectedFiltersId","Array","isArray","join","each","prop","saveChartFilterWidget","selectedFieldLabel","moduleNameLabel","filterLabel","groupFieldName","label","blockid","filterid","isdefault","owners_all","default_owner","saveWidget","paramsForm","hideModalWindow","clone","linkElement","addWidget","showMessage","errorField","validationEngine","registerMiniListWidget","filteridSelectDOM","fieldHrefDOM","fieldsSelectDOM","filterFieldsSelectDOM","filteridSelect2","dropdownParent","fieldHrefSelect2","allowClear","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","res","empty","fieldsHTML","responseHTML","filterFieldsHTML","$selection","newOption","option","validationEngineOptions","select2","map","obj","selectedFields","push","saveMiniListWidget","fields","filterFields","fieldHref","Deferred","addToUser","aDeferred","resolve","error","reject","promise","registerTabModules","removeWidgetFromList","widgetid","type","registerTabletScrollEvent","touchDevice","scollbarContainer","scollbarOffsetTop","offset","top","maxOffset","scollbarContainerH","registerUpdatePredefinedWidgets","hasClass","widgetId","linkId","widgetAction","alertContainer","ElementQueries","listen"],"mappings":"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"}