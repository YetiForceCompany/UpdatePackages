{"version":3,"file":"CustomRecordNumbering.min.js","sources":["CustomRecordNumbering.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Settings_CustomRecordNumbering_Js',\n\t{},\n\t{\n\t\tform: false,\n\t\tgetForm: function () {\n\t\t\tif (this.form == false) {\n\t\t\t\tthis.form = jQuery('#EditView');\n\t\t\t}\n\t\t\treturn this.form;\n\t\t},\n\n\t\t/**\n\t\t * Function to register change event for source module field\n\t\t */\n\t\tregisterOnChangeEventOfSourceModule() {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\t\teditViewForm.find('[name=\"sourceModule\"]').on('change', function (e) {\n\t\t\t\t$('.saveButton').removeAttr('disabled');\n\t\t\t\tsequenceBtn.addClass('d-none');\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\t\tmode: 'getModuleCustomNumberingData',\n\t\t\t\t\tsourceModule: $(e.currentTarget).val()\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\teditViewForm.find('[name=\"prefix\"]').val(data.result.prefix);\n\t\t\t\t\t\teditViewForm\n\t\t\t\t\t\t\t.find('[name=\"leading_zeros\"]')\n\t\t\t\t\t\t\t.val(data.result.leading_zeros)\n\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\teditViewForm\n\t\t\t\t\t\t\t.find('[name=\"reset_sequence\"]')\n\t\t\t\t\t\t\t.val(data.result.reset_sequence)\n\t\t\t\t\t\t\t.trigger('change');\n\t\t\t\t\t\teditViewForm.find('[name=\"postfix\"]').val(data.result.postfix);\n\t\t\t\t\t\teditViewForm.find('[name=\"sequenceNumber\"]').val(data.result.cur_id);\n\t\t\t\t\t\teditViewForm\n\t\t\t\t\t\t\t.find('[name=\"sequenceNumber\"]')\n\t\t\t\t\t\t\t.data('oldSequenceNumber', data.result.cur_id);\n\t\t\t\t\t\tlet options = '';\n\t\t\t\t\t\tfor (var index in data.result.picklists) {\n\t\t\t\t\t\t\toptions +=\n\t\t\t\t\t\t\t\t'<option value=\"picklist:' +\n\t\t\t\t\t\t\t\tindex +\n\t\t\t\t\t\t\t\t'\">' +\n\t\t\t\t\t\t\t\tdata.result.picklists[index] +\n\t\t\t\t\t\t\t\t'</option>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\teditViewForm.find('#picklistVariables').html(options);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register event for saving module custom numbering\n\t\t */\n\t\tsaveModuleCustomNumbering() {\n\t\t\tif ($('.saveButton').attr('disabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\tconst prefix = editViewForm.find('[name=\"prefix\"]');\n\t\t\tconst leadingZeros = editViewForm.find('[name=\"leading_zeros\"]').val();\n\t\t\tconst currentPrefix = $.trim(prefix.val());\n\t\t\tconst postfix = editViewForm.find('[name=\"postfix\"]');\n\t\t\tconst currentPostfix = jQuery.trim(postfix.val());\n\t\t\tconst sequenceNumberElement = editViewForm.find('[name=\"sequenceNumber\"]');\n\t\t\tconst sequenceNumber = sequenceNumberElement.val();\n\t\t\tconst oldSequenceNumber = sequenceNumberElement.data('oldSequenceNumber');\n\t\t\tif (\n\t\t\t\tsequenceNumber < oldSequenceNumber &&\n\t\t\t\tcurrentPrefix === prefix.data('oldPrefix') &&\n\t\t\t\tcurrentPostfix === postfix.data('oldPostfix')\n\t\t\t) {\n\t\t\t\tsequenceNumberElement.validationEngine(\n\t\t\t\t\t'showPrompt',\n\t\t\t\t\tapp.vtranslate('JS_SEQUENCE_NUMBER_MESSAGE') + ' ' + oldSequenceNumber,\n\t\t\t\t\t'error',\n\t\t\t\t\t'topLeft',\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\teditViewForm.find('.saveButton').attr('disabled', 'disabled');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\tmode: 'saveModuleCustomNumberingData',\n\t\t\t\tsourceModule: sourceModule,\n\t\t\t\tprefix: currentPrefix,\n\t\t\t\tleading_zeros: leadingZeros,\n\t\t\t\tpostfix: currentPostfix,\n\t\t\t\tsequenceNumber: sequenceNumber,\n\t\t\t\treset_sequence: editViewForm.find('[name=\"reset_sequence\"]').val()\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success === true) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\tapp.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') +\n\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\teditViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: currentPrefix + ' ' + app.vtranslate(data.error.message),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to handle update record with the given sequence number\n\t\t */\n\t\tregisterEventToUpdateRecordsWithSequenceNumber() {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\teditViewForm.find('[name=\"updateRecordWithSequenceNumber\"]').on('click', function () {\n\t\t\t\tconst sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\t\tmode: 'updateRecordsWithSequenceNumber',\n\t\t\t\t\tsourceModule: sourceModule\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\t\tapp.vtranslate('JS_RECORD_NUMBERING_UPDATED_SUCCESSFULLY_FOR') +\n\t\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t\teditViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(data.error.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register change event for prefix,postfix,reset_sequence and sequence number\n\t\t */\n\t\tregisterChangeEvent() {\n\t\t\tthis.getForm()\n\t\t\t\t.find(\n\t\t\t\t\t'[name=\"prefix\"],[name=\"leading_zeros\"],[name=\"sequenceNumber\"],[name=\"postfix\"],[name=\"reset_sequence\"]'\n\t\t\t\t)\n\t\t\t\t.on('change', this.checkPrefix.bind(this));\n\t\t},\n\n\t\tregisterCopyClipboard: function (editViewForm) {\n\t\t\tnew ClipboardJS('#customVariableCopy', {\n\t\t\t\ttext: function (trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn '{{' + editViewForm.find('#customVariables').val() + '}}';\n\t\t\t\t}\n\t\t\t});\n\t\t\tnew ClipboardJS('#picklistVariableCopy', {\n\t\t\t\ttext: function (trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn '{{' + editViewForm.find('#picklistVariables').val() + '}}';\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Check if reset sequence appears in prefix or postfix to prevent duplicate number generation\n\t\t * @returns {boolean}\n\t\t */\n\t\tcheckPrefix() {\n\t\t\tlet sequenceExists = false;\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst value = editViewForm.find('[name=\"reset_sequence\"]').val();\n\t\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tconst saveBtn = editViewForm.find('.saveButton');\n\t\t\tswitch (value) {\n\t\t\t\tcase 'Y':\n\t\t\t\t\tif (\n\t\t\t\t\t\tprefix.indexOf('{{YY}}') === -1 &&\n\t\t\t\t\t\tprefix.indexOf('{{YYYY}}') === -1 &&\n\t\t\t\t\t\tpostfix.indexOf('{{YY}}') === -1 &&\n\t\t\t\t\t\tpostfix.indexOf('{{YYYY}}') === -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_YEAR_VARIABLE')\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'M':\n\t\t\t\t\tif (\n\t\t\t\t\t\tprefix.indexOf('{{MM}}') === -1 &&\n\t\t\t\t\t\tprefix.indexOf('{{M}}') === -1 &&\n\t\t\t\t\t\tpostfix.indexOf('{{MM}}') === -1 &&\n\t\t\t\t\t\tpostfix.indexOf('{{M}}') === -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_MONTH_VARIABLE')\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'D':\n\t\t\t\t\tif (\n\t\t\t\t\t\tprefix.indexOf('{{DD}}') === -1 &&\n\t\t\t\t\t\tprefix.indexOf('{{D}}') === -1 &&\n\t\t\t\t\t\tpostfix.indexOf('{{DD}}') === -1 &&\n\t\t\t\t\t\tpostfix.indexOf('{{D}}') === -1\n\t\t\t\t\t) {\n\t\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_RS_ADD_DAY_VARIABLE')\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'X':\n\t\t\t\tdefault:\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (sequenceExists) {\n\t\t\t\tlet regex = new RegExp('{{picklist:([a-z0-9_]+)}}', 'g');\n\t\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\t\tif (regexResult && regexResult.length > 1) {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: app.vtranslate('JS_PICKLIST_TOO_MANY')\n\t\t\t\t\t});\n\t\t\t\t\tsequenceExists = false;\n\t\t\t\t\tsaveBtn.attr('disabled', 'disabled');\n\t\t\t\t} else {\n\t\t\t\t\tsaveBtn.removeAttr('disabled');\n\t\t\t\t\tsequenceExists = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkAdavancedSequenceBtn();\n\t\t\treturn sequenceExists;\n\t\t},\n\n\t\t/**\n\t\t * Function to enable button if prefix or postfix has picklist value\n\t\t */\n\t\tcheckAdavancedSequenceBtn: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\t\tconst prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\tconst postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\tlet regex = new RegExp('{{picklist:([a-z0-9_]+)}}', 'g');\n\t\t\tlet regexResult = (postfix + prefix).match(regex);\n\t\t\tif ((regexResult && regexResult.length > 1) || !regexResult) {\n\t\t\t\tsequenceBtn.addClass('d-none');\n\t\t\t} else {\n\t\t\t\tsequenceBtn.removeClass('d-none');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Function to register event on button\n\t\t */\n\t\tregisterAdavancedSequenceEvent: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tconst sequenceBtn = editViewForm.find('.js-adavanced-sequence');\n\t\t\tsequenceBtn.on('click', function () {\n\t\t\t\tlet sourceModule = editViewForm.find('[name=\"sourceModule\"]').val();\n\t\t\t\tlet picklistName = '';\n\t\t\t\tlet prefix = editViewForm.find('[name=\"prefix\"]').val();\n\t\t\t\tlet postfix = editViewForm.find('[name=\"postfix\"]').val();\n\t\t\t\tlet regex = new RegExp('{{picklist:([a-z0-9_]+)}}', 'g');\n\t\t\t\tif (prefix.match(regex)) {\n\t\t\t\t\tpicklistName = prefix;\n\t\t\t\t} else if (postfix.match(regex)) {\n\t\t\t\t\tpicklistName = postfix;\n\t\t\t\t}\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'CustomRecordNumberingAdvanced',\n\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\tpicklist: picklistName\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\t\t\t\tlet modalForm = container.find('form');\n\t\t\t\t\t\t\tmodalForm.validationEngine(app.validationEngineOptionsForRecord);\n\t\t\t\t\t\t\tcontainer.on('click', '.js-modal__save', function (e) {\n\t\t\t\t\t\t\t\tif (modalForm.validationEngine('validate')) {\n\t\t\t\t\t\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\t\t\t\t\taction: 'CustomRecordNumberingAjax',\n\t\t\t\t\t\t\t\t\t\tmode: 'saveModuleCustomNumberingAdvanceData',\n\t\t\t\t\t\t\t\t\t\tsourceModule: sourceModule,\n\t\t\t\t\t\t\t\t\t\tsequenceNumber: modalForm.find('.js-picklist-sequence').serializeFormData()\n\t\t\t\t\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t\t\t\tif (data.success === true) {\n\t\t\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\t\t\t\t\t\ttext:\n\t\t\t\t\t\t\t\t\t\t\t\t\tapp.vtranslate('JS_RECORD_NUMBERING_SAVED_SUCCESSFULLY_FOR') +\n\t\t\t\t\t\t\t\t\t\t\t\t\t' ' +\n\t\t\t\t\t\t\t\t\t\t\t\t\teditViewForm.find('option[value=\"' + sourceModule + '\"]').text()\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Function to register events\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tconst thisInstance = this;\n\t\t\tconst editViewForm = this.getForm();\n\t\t\tthis.registerOnChangeEventOfSourceModule();\n\t\t\tthis.registerEventToUpdateRecordsWithSequenceNumber();\n\t\t\tthis.registerChangeEvent();\n\t\t\tthis.checkAdavancedSequenceBtn();\n\t\t\tthis.registerAdavancedSequenceEvent();\n\t\t\tlet params = app.validationEngineOptions;\n\t\t\tparams.onValidationComplete = function (editViewForm, valid) {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthisInstance.saveModuleCustomNumbering();\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\teditViewForm.validationEngine('detach');\n\t\t\teditViewForm.validationEngine('attach', params);\n\t\t\tthis.registerCopyClipboard(editViewForm);\n\t\t}\n\t}\n);\n$(document).ready(function () {\n\tlet customRecordNumberingInstance = new Settings_CustomRecordNumbering_Js();\n\tcustomRecordNumberingInstance.registerEvents();\n});\n"],"names":["$","Class","form","getForm","jQuery","registerOnChangeEventOfSourceModule","sequenceBtn","editViewForm","find","on","e","removeAttr","addClass","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","sourceModule","currentTarget","val","done","data","result","prefix","leading_zeros","trigger","reset_sequence","postfix","cur_id","picklists","options","index","html","saveModuleCustomNumbering","attr","leadingZeros","currentPrefix","trim","currentPostfix","sequenceNumberElement","sequenceNumber","oldSequenceNumber","validationEngine","vtranslate","success","Settings_Vtiger_Index_Js","showMessage","text","error","message","type","registerEventToUpdateRecordsWithSequenceNumber","registerChangeEvent","checkPrefix","bind","registerCopyClipboard","showPnotify","value","saveBtn","indexOf","Vtiger_Helper_Js","sequenceExists","regexResult","match","regex","length","checkAdavancedSequenceBtn","removeClass","registerAdavancedSequenceEvent","picklistName","view","picklist","showModalWindow","container","modalForm","validationEngineOptionsForRecord","progressIndicator","position","blockInfo","enabled","serializeFormData","progressIndicatorElement","hideModalWindow","registerEvents","validationEngineOptions","params","onValidationComplete","valid","thisInstance","document","ready","customRecordNumberingInstance"],"mappings":"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"}