{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\nVtiger_Detail_Js(\n\t'Competition_Detail_Js',\n\t{},\n\t{\n\t\thierarchyResponseCache: {},\n\t\tgetHierarchyResponseData: function (params) {\n\t\t\tlet thisInstance = this,\n\t\t\t\taDeferred = jQuery.Deferred();\n\n\t\t\tif (!$.isEmptyObject(thisInstance.hierarchyResponseCache)) {\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t} else {\n\t\t\t\tAppConnector.request(params).then(function (data) {\n\t\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/*\n\t\t * function to display the hierarchy response data\n\t\t */\n\t\tdisplayHierarchyResponseData: function (data) {\n\t\t\tlet callbackFunction = function () {\n\t\t\t\tapp.showScrollBar(jQuery('#hierarchyScroll'), {\n\t\t\t\t\theight: '300px',\n\t\t\t\t\trailVisible: true,\n\t\t\t\t\tsize: '6px'\n\t\t\t\t});\n\t\t\t};\n\t\t\tapp.showModalWindow(data, function () {\n\t\t\t\tif (typeof callbackFunction == 'function' && $('#hierarchyScroll').height() > 300) {\n\t\t\t\t\tcallbackFunction();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterHierarchyRecordCount: function () {\n\t\t\tlet hierarchyButton = $('.js-detail-hierarchy'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\trecord: app.getRecordId(),\n\t\t\t\t\tmode: 'getHierarchyCount'\n\t\t\t\t};\n\t\t\tif (hierarchyButton.length) {\n\t\t\t\tAppConnector.request(params).then(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\thierarchyButton.append(' <span class=\"badge\">' + response.result + '</span>');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tregisterShowHierarchy: function () {\n\t\t\tlet thisInstance = this,\n\t\t\t\thierarchyButton = $('.detailViewTitle'),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tview: 'Hierarchy',\n\t\t\t\t\trecord: app.getRecordId()\n\t\t\t\t};\n\t\t\thierarchyButton.on('click', '.js-detail__icon, .js-detail-hierarchy', function () {\n\t\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.getHierarchyResponseData(params).then(function (data) {\n\t\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerHierarchyRecordCount();\n\t\t\tthis.registerShowHierarchy();\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","aDeferred","jQuery","Deferred","isEmptyObject","thisInstance","AppConnector","request","then","data","resolve","promise","displayHierarchyResponseData","app","showScrollBar","height","railVisible","size","showModalWindow","callbackFunction","registerHierarchyRecordCount","$","module","getModuleName","action","record","getRecordId","mode","hierarchyButton","length","response","success","append","result","registerShowHierarchy","view","on","progressIndicator","position","blockInfo","enabled","progressIndicatorElement","registerEvents","_super"],"mappings":";;AAAA,kKACAA,iBACC,uBADD,CAEC,EAFD,CAGC,CACCC,uBAAwB,EADzB,CAECC,yBAA0B,kCAAUC,MAAV,CAAkB,CAC3C,iBAAmB,IAAnB,CACCC,UAAYC,OAAOC,QAAP,EADb,CAWA,SAROC,aAAF,CAAgBC,aAAaP,sBAA7B,CAQL,CALCQ,aAAaC,OAAb,CAAqBP,MAArB,EAA6BQ,IAA7B,CAAkC,SAAUC,IAAV,CAAgB,CACjDJ,aAAaP,sBAAb,CAAsCW,IADW,CAEjDR,UAAUS,OAAV,CAAkBL,aAAaP,sBAA/B,EACA,CAHD,CAKD,CAPCG,UAAUS,OAAV,CAAkBL,aAAaP,sBAA/B,CAOD,CAAOG,UAAUU,OAAV,EACP,CAfF;;KAmBCC,6BAA8B,sCAAUH,IAAV,CAAgB,CAC7C,qBAAuB,UAAY,CAClCI,IAAIC,aAAJ,CAAkBZ,OAAO,kBAAP,CAAlB,CAA8C,CAC7Ca,OAAQ,OADqC,CAE7CC,cAF6C,CAG7CC,KAAM,KAHuC,CAA9C,EAKA,CAND,CAOAJ,IAAIK,eAAJ,CAAoBT,IAApB,CAA0B,UAAY,CACN,UAA3B,yBAAA,EAA0E,GAAjC,GAAE,kBAAF,EAAsBM,MAAtB,EADR,EAEpCI,mBAED,CAJD,EAKA,CAhCF,CAiCCC,6BAA8B,uCAAY,CACzC,oBAAsBC,EAAE,sBAAF,CAAtB,CACCrB,OAAS,CACRsB,OAAQT,IAAIU,aAAJ,EADA,CAERC,OAAQ,cAFA,CAGRC,OAAQZ,IAAIa,WAAJ,EAHA,CAIRC,KAAM,mBAJE,CADV,CAOIC,gBAAgBC,MARqB,EASxCvB,aAAaC,OAAb,CAAqBP,MAArB,EAA6BQ,IAA7B,CAAkC,SAAUsB,QAAV,CAAoB,CACjDA,SAASC,OADwC,EAEpDH,gBAAgBI,MAAhB,CAAuB,wBAA0BF,SAASG,MAAnC,CAA4C,SAAnE,EAED,CAJD,EAMD,CAhDF,CAiDCC,sBAAuB,gCAAY,CAClC,iBAAmB,IAAnB,CACCN,gBAAkBP,EAAE,kBAAF,CADnB,CAECrB,OAAS,CACRsB,OAAQT,IAAIU,aAAJ,EADA,CAERY,KAAM,WAFE,CAGRV,OAAQZ,IAAIa,WAAJ,EAHA,CAFV,CAOAE,gBAAgBQ,EAAhB,CAAmB,OAAnB,CAA4B,wCAA5B,CAAsE,UAAY,CACjF,6BAA+Bf,EAAEgB,iBAAF,CAAoB,CAClDC,SAAU,MADwC,CAElDC,UAAW,CACVC,UADU,CAFuC,CAApB,CAA/B,CAMAnC,aAAaN,wBAAb,CAAsCC,MAAtC,EAA8CQ,IAA9C,CAAmD,SAAUC,IAAV,CAAgB,CAClEJ,aAAaO,4BAAb,CAA0CH,IAA1C,CADkE,CAElEgC,yBAAyBJ,iBAAzB,CAA2C,CAAEV,KAAM,MAAR,CAA3C,EACA,CAHD,EAIA,CAXD,EAYA,CArEF,CAsECe,eAAgB,yBAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAKvB,4BAAL,EAF2B,CAG3B,KAAKc,qBAAL,GACA,CA1EF,CAHD"}