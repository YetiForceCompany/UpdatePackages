{"version":3,"file":"ListSearch.min.js","sources":["ListSearch.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\n\t'YetiForce_ListSearch_Js',\n\t{\n\t\tgetInstance: function (container, noEvents, reletedInstance, moduleName) {\n\t\t\tif (typeof moduleName === 'undefined') {\n\t\t\t\tmoduleName = app.getModuleName();\n\t\t\t}\n\t\t\tlet moduleClassName = module + '_ListSearch_Js',\n\t\t\t\tinstance;\n\t\t\tif (typeof window[moduleClassName] !== 'undefined') {\n\t\t\t\tinstance = new window[moduleClassName](container, noEvents, reletedInstance);\n\t\t\t} else {\n\t\t\t\tinstance = new window['YetiForce_ListSearch_Js'](container, noEvents, reletedInstance);\n\t\t\t}\n\t\t\tinstance.moduleName = moduleName;\n\t\t\treturn instance;\n\t\t},\n\t\tregisterSearch: function (container, callBack) {\n\t\t\tcontainer.on('click', '.js-change-order', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tcallBack({ orderby: { [element.data('columnname')]: element.data('nextsortorderval') } });\n\t\t\t});\n\t\t\tcontainer.on('click', '.js-listview_header', function (e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tcallBack({\n\t\t\t\t\torderby: element.data('columnname'),\n\t\t\t\t\tsortorder: element.data('nextsortorderval')\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.on('click', '.js-list-reload', function (e, data) {\n\t\t\t\tcallBack(data);\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tmoduleName: false,\n\t\tcontainer: false,\n\t\treletedInstance: false,\n\t\tviewName: false,\n\t\tinit: function (container, noEvents, reletedInstance) {\n\t\t\tif (typeof container === 'undefined') {\n\t\t\t\tcontainer = jQuery('.bodyContents');\n\t\t\t}\n\t\t\tthis.setContainer(container);\n\t\t\tif (noEvents != true && this.getContainer().find('[data-trigger=\"listSearch\"]').length) {\n\t\t\t\tthis.initialize();\n\t\t\t}\n\t\t\tthis.reletedInstance = reletedInstance;\n\t\t},\n\t\tsetContainer: function (container) {\n\t\t\tthis.container = container;\n\t\t},\n\t\tgetContainer: function () {\n\t\t\treturn this.container;\n\t\t},\n\t\tsetViewName: function (viewName) {\n\t\t\tthis.viewName = viewName;\n\t\t},\n\t\t/**\n\t\t * Function  to initialize the advance filter\n\t\t */\n\t\tinitialize: function () {\n\t\t\tthis.registerEvents();\n\t\t},\n\t\tgetAlphabetSearchField: function () {\n\t\t\treturn jQuery('#alphabetSearchKey').val();\n\t\t},\n\t\tgetAlphabetSearchValue: function () {\n\t\t\treturn jQuery('#alphabetValue').val();\n\t\t},\n\t\tregisterListSearch: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tlet listViewContainer = this.getContainer();\n\t\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function (e) {\n\t\t\t\tthisInstance.reloadList();\n\t\t\t});\n\t\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function (e) {\n\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\tthisInstance.triggerListSearch();\n\t\t\t\t}\n\t\t\t});\n\t\t\tlistViewContainer.find('.removeSearchConditions').on('click', function () {\n\t\t\t\tthisInstance.reloadList({\n\t\t\t\t\tsearch_params: [],\n\t\t\t\t\tsearch_key: '',\n\t\t\t\t\tsearch_value: '',\n\t\t\t\t\toperator: ''\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterListViewSelect: function () {\n\t\t\tlet self = this,\n\t\t\t\tlistViewContainer = this.getContainer();\n\t\t\tlistViewContainer.find('.listViewEntriesTable .select2noactive').each((index, domElement) => {\n\t\t\t\tlet select = $(domElement);\n\t\t\t\tif (!select.data('select2')) {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(select, {\n\t\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_AN_OPTION')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\t\tlistViewContainer\n\t\t\t\t\t.find('.listViewEntriesTable select, .searchInSubcategories')\n\t\t\t\t\t.on('change', () => {\n\t\t\t\t\t\tthis.triggerListSearch();\n\t\t\t\t\t});\n\t\t\t\tlistViewContainer\n\t\t\t\t\t.find('.listViewEntriesTable .picklistSearchField')\n\t\t\t\t\t.on('apply.daterangepicker', () => {\n\t\t\t\t\t\tthis.triggerListSearch();\n\t\t\t\t\t});\n\t\t\t\tlistViewContainer\n\t\t\t\t\t.find('.listViewEntriesTable .dateField')\n\t\t\t\t\t.on('DatePicker.onHide', function (e, y) {\n\t\t\t\t\t\tlet prevVal = $(this).data('prevVal'),\n\t\t\t\t\t\t\tvalue = $(this).val();\n\t\t\t\t\t\tif (prevVal != value) {\n\t\t\t\t\t\t\tself.triggerListSearch();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\tapp.event.off('Clockpicker.changed');\n\t\t\t\tapp.event.on('Clockpicker.changed', (e, inputEl) => {\n\t\t\t\t\tif (listViewContainer.find(inputEl).length) {\n\t\t\t\t\t\tself.triggerListSearch();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlistViewContainer\n\t\t\t\t\t.find('.listViewEntriesTable .js-tree-container .listSearchContributor')\n\t\t\t\t\t.on('change', () => {\n\t\t\t\t\t\tthis.triggerListSearch();\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tresetPagination: function () {\n\t\t\t//To unmark the all the selected ids\n\t\t\tjQuery('#deSelectAllMsg').trigger('click');\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//To Set the page number as first page\n\t\t\tjQuery('#pageNumber').val('1');\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#totalPageCount').text('');\n\t\t\tjQuery('.pagination').data('totalCount', 0);\n\t\t},\n\t\ttriggerListSearch: function () {\n\t\t\tlet listInstance = this;\n\t\t\tlet listViewContainer = listInstance.getContainer();\n\t\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').trigger('click');\n\t\t},\n\t\tregisterDateListSearch: function (container) {\n\t\t\tApp.Fields.Date.registerRange(this.getContainer().find('.dateRangeField'));\n\t\t},\n\t\tregisterDateTimeListSearch: function (container) {\n\t\t\tApp.Fields.DateTime.register(this.getContainer());\n\t\t},\n\t\tregisterTimeListSearch: function () {\n\t\t\tapp.registerEventForClockPicker();\n\t\t},\n\t\tregisterAlphabetClick: function () {\n\t\t\tlet thisInstance = this;\n\t\t\tthis.getContainer()\n\t\t\t\t.find('.alphabetBtn')\n\t\t\t\t.on('click', function () {\n\t\t\t\t\tapp.showModalWindow($('.alphabetModal').html(), function (data) {\n\t\t\t\t\t\tthisInstance.registerEventForAlphabetSearch(data);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tgetCurrentCvId: function () {\n\t\t\treturn jQuery('#customFilter').find('option:selected').data('id');\n\t\t},\n\t\tregisterEventForAlphabetSearch: function (modalContainer) {\n\t\t\tlet thisInstance = this;\n\t\t\tmodalContainer.find('.alphabetSearch').on('click', function (e) {\n\t\t\t\tlet alphabet = jQuery(e.currentTarget).find('a').text();\n\t\t\t\tlet cvId = thisInstance.getCurrentCvId();\n\t\t\t\tlet AlphabetSearchKey = thisInstance.getAlphabetSearchField();\n\t\t\t\tlet urlParams = {\n\t\t\t\t\tviewname: cvId,\n\t\t\t\t\tsearch_key: AlphabetSearchKey,\n\t\t\t\t\tsearch_value: alphabet,\n\t\t\t\t\toperator: 's',\n\t\t\t\t\tpage: 1\n\t\t\t\t};\n\t\t\t\tthisInstance.resetPagination();\n\t\t\t\tthisInstance.reloadList(urlParams);\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t\tmodalContainer.find('.removeAlfabetCondition').on('click', function () {\n\t\t\t\tthisInstance.reloadList({ search_key: '', search_value: '', operator: '' });\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t},\n\t\tupdatePaginationOnAlphabetChange: function (alphabet, AlphabetSearchKey) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet params = {};\n\t\t\tparams['module'] = thisInstance.moduleName;\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Pagination';\n\t\t\tparams['page'] = 1;\n\t\t\tparams['mode'] = 'getPagination';\n\t\t\tparams['search_key'] = AlphabetSearchKey;\n\t\t\tparams['search_value'] = alphabet;\n\t\t\tparams['operator'] = 's';\n\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tjQuery('.paginationDiv').html(data);\n\t\t\t\tlet instance = thisInstance.getInstanceView();\n\t\t\t\tif (instance && jQuery.isFunction(instance.registerPageNavigationEvents)) {\n\t\t\t\t\tinstance.registerPageNavigationEvents();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tgetListSearchParams: function (urlSearchParams) {\n\t\t\tlet listViewPageDiv = this.getContainer();\n\t\t\tlet listViewTable = listViewPageDiv.find('.listViewEntriesTable');\n\t\t\tlet searchParams = [];\n\t\t\tlistViewTable.find('.listSearchContributor').each(function (index, domElement) {\n\t\t\t\tlet searchInfo = [];\n\t\t\t\tlet searchContributorElement = $(domElement);\n\t\t\t\tlet fieldInfo = searchContributorElement.data('fieldinfo');\n\t\t\t\tlet fieldName = searchContributorElement.attr('name');\n\t\t\t\tlet searchValue = searchContributorElement.val();\n\t\t\t\tif (typeof searchValue == 'object') {\n\t\t\t\t\tif (searchValue == null) {\n\t\t\t\t\t\tsearchValue = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchValue = searchValue.join('##');\n\t\t\t\t\t}\n\t\t\t\t} else if ($.inArray(fieldInfo.type, ['tree']) >= 0) {\n\t\t\t\t\tsearchValue = searchValue.replace(/,/g, '##');\n\t\t\t\t}\n\t\t\t\tsearchValue = searchValue.trim();\n\t\t\t\tif (searchValue.length <= 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tlet searchOperator = 'a';\n\t\t\t\tif (fieldInfo.hasOwnProperty('searchOperator')) {\n\t\t\t\t\tsearchOperator = fieldInfo.searchOperator;\n\t\t\t\t} else if (\n\t\t\t\t\t$.inArray(fieldInfo.type, [\n\t\t\t\t\t\t'modules',\n\t\t\t\t\t\t'time',\n\t\t\t\t\t\t'userCreator',\n\t\t\t\t\t\t'owner',\n\t\t\t\t\t\t'picklist',\n\t\t\t\t\t\t'tree',\n\t\t\t\t\t\t'boolean',\n\t\t\t\t\t\t'fileLocationType',\n\t\t\t\t\t\t'userRole',\n\t\t\t\t\t\t'companySelect',\n\t\t\t\t\t\t'multiReferenceValue',\n\t\t\t\t\t\t'inventoryLimit'\n\t\t\t\t\t]) >= 0\n\t\t\t\t) {\n\t\t\t\t\tsearchOperator = 'e';\n\t\t\t\t} else if (fieldInfo.type == 'date' || fieldInfo.type == 'datetime') {\n\t\t\t\t\tsearchOperator = 'bw';\n\t\t\t\t} else if (\n\t\t\t\t\t$.inArray(fieldInfo.type, [\n\t\t\t\t\t\t'multipicklist',\n\t\t\t\t\t\t'categoryMultipicklist',\n\t\t\t\t\t\t'multiListFields',\n\t\t\t\t\t\t'mailScannerFields',\n\t\t\t\t\t\t'mailScannerActions'\n\t\t\t\t\t]) != -1\n\t\t\t\t) {\n\t\t\t\t\tsearchOperator = 'c';\n\t\t\t\t}\n\t\t\t\tlet sourceFieldName = searchContributorElement.data('sourceFieldName');\n\t\t\t\tif (sourceFieldName) {\n\t\t\t\t\tsearchInfo.push(\n\t\t\t\t\t\tfieldName + ':' + searchContributorElement.data('moduleName') + ':' + sourceFieldName\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tsearchInfo.push(fieldName);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t$.inArray(fieldInfo.type, ['tree', 'categoryMultipicklist']) != -1 &&\n\t\t\t\t\t$('.searchInSubcategories[data-columnname=\"' + fieldName + '\"]', listViewTable).prop(\n\t\t\t\t\t\t'checked'\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tsearchOperator = 'ch';\n\t\t\t\t}\n\t\t\t\tsearchInfo.push(searchOperator);\n\t\t\t\tsearchInfo.push(searchValue);\n\t\t\t\tsearchParams.push(searchInfo);\n\t\t\t});\n\t\t\tif (urlSearchParams) {\n\t\t\t\tlet valueInSearch = null;\n\t\t\t\tlet url = app.getUrlVar('search_params');\n\t\t\t\tif (url != undefined && url.length) {\n\t\t\t\t\tlet lengthUrl = url.length;\n\t\t\t\t\tif (url.charAt(lengthUrl - 1) === '#') {\n\t\t\t\t\t\turl = url.substr(0, lengthUrl - 1);\n\t\t\t\t\t}\n\t\t\t\t\turl = JSON.parse(decodeURIComponent(url));\n\t\t\t\t\t$.each(url[0], function (index, value) {\n\t\t\t\t\t\tlet exist = false;\n\t\t\t\t\t\t$.each(searchParams, function (index, searchParam) {\n\t\t\t\t\t\t\tif (searchParam[0] == value[0]) {\n\t\t\t\t\t\t\t\texist = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (value[0].indexOf(':') === -1) {\n\t\t\t\t\t\t\tvalueInSearch = listViewTable\n\t\t\t\t\t\t\t\t.find('.listSearchContributor[name=\"' + value[0] + '\"]')\n\t\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet fieldRelation = value[0].split(':');\n\t\t\t\t\t\t\tvalueInSearch = listViewTable\n\t\t\t\t\t\t\t\t.find(\n\t\t\t\t\t\t\t\t\t'.listSearchContributor[name=\"' +\n\t\t\t\t\t\t\t\t\t\tfieldRelation[0] +\n\t\t\t\t\t\t\t\t\t\t'\"][data-module-name=\"' +\n\t\t\t\t\t\t\t\t\t\tfieldRelation[1] +\n\t\t\t\t\t\t\t\t\t\t'\"][data-source-field-name=\"' +\n\t\t\t\t\t\t\t\t\t\tfieldRelation[2] +\n\t\t\t\t\t\t\t\t\t\t'\"]'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (exist == false && valueInSearch != '' && valueInSearch !== null) {\n\t\t\t\t\t\t\tsearchParams.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn [searchParams];\n\t\t},\n\t\tgetInstanceByView: function () {\n\t\t\tlet viewName = this.viewName ? this.viewName : app.getViewName();\n\t\t\tlet instance = false;\n\t\t\tif (viewName === 'RecordsList') {\n\t\t\t\tinstance = this.reletedInstance;\n\t\t\t\tinstance.reloadFunctionName = 'loadRecordList';\n\t\t\t\tinstance.execute = ['updatePagination'];\n\t\t\t} else if (this.reletedInstance) {\n\t\t\t\tinstance = this.reletedInstance;\n\t\t\t\tinstance.reloadFunctionName = 'loadRelatedList';\n\t\t\t} else if (viewName === 'Detail') {\n\t\t\t\tinstance = Vtiger_Detail_Js.getInstance();\n\t\t\t\tinstance.reloadFunctionName = 'loadRelatedList';\n\t\t\t} else if (viewName == 'List') {\n\t\t\t\tinstance = new Vtiger_List_Js();\n\t\t\t\tinstance.reloadFunctionName = 'getListViewRecords';\n\t\t\t\tinstance.execute = ['updatePagination'];\n\t\t\t} else if (viewName == 'ListPreview') {\n\t\t\t\tinstance = window.pageController;\n\t\t\t\tinstance.reloadFunctionName = 'getListViewRecords';\n\t\t\t\tinstance.execute = ['updatePagination'];\n\t\t\t}\n\t\t\treturn instance;\n\t\t},\n\t\treloadList: function (params) {\n\t\t\tlet thisInstance = this;\n\t\t\tif (params == undefined) {\n\t\t\t\tparams = { page: 1 };\n\t\t\t}\n\t\t\tlet instance = this.getInstanceByView();\n\t\t\tif (instance) {\n\t\t\t\tlet funcName = instance.reloadFunctionName;\n\t\t\t\tif (jQuery.isFunction(instance[funcName])) {\n\t\t\t\t\tinstance[funcName](params).done(function () {\n\t\t\t\t\t\tthisInstance.resetPagination();\n\t\t\t\t\t\tthisInstance.executeFunctions(instance);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\texecuteFunctions: function (instance) {\n\t\t\tif (instance.execute) {\n\t\t\t\tlet func = instance.execute;\n\t\t\t\tfor (let i in func) {\n\t\t\t\t\tlet funcName = func[i];\n\t\t\t\t\tif (jQuery.isFunction(instance[funcName])) {\n\t\t\t\t\t\tinstance[funcName]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tregisterBasicEvents: function () {\n\t\t\tthis.registerListViewSelect();\n\t\t\tthis.registerDateListSearch();\n\t\t\tthis.registerDateTimeListSearch();\n\t\t\tthis.registerTimeListSearch();\n\t\t\tthis.registerAlphabetClick();\n\t\t\tthis.registerListSearch();\n\t\t\tthis.getContainer()\n\t\t\t\t.find('select.select2')\n\t\t\t\t.each(function (i, obj) {\n\t\t\t\t\tif (!$(obj).data('select2')) {\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView($(obj));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tApp.Fields.Tree.register(this.container);\n\t\t},\n\t\t/**\n\t\t * Function which will regiter all events for this page\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerBasicEvents();\n\t\t}\n\t}\n);\n"],"names":["jQuery","Class","getInstance","container","noEvents","reletedInstance","moduleName","app","getModuleName","moduleClassName","module","instance","registerSearch","callBack","on","e","$","currentTarget","orderby","element","data","sortorder","viewName","init","setContainer","getContainer","find","length","initialize","setViewName","registerEvents","getAlphabetSearchField","val","getAlphabetSearchValue","registerListSearch","listViewContainer","thisInstance","reloadList","keyCode","triggerListSearch","search_params","search_key","search_value","operator","registerListViewSelect","self","each","index","domElement","select","App","Fields","Picklist","showSelect2ElementView","placeholder","vtranslate","getMainParams","value","prevVal","event","off","inputEl","resetPagination","trigger","text","listInstance","registerDateListSearch","Date","registerRange","registerDateTimeListSearch","DateTime","register","registerTimeListSearch","registerEventForClockPicker","registerAlphabetClick","showModalWindow","html","registerEventForAlphabetSearch","getCurrentCvId","modalContainer","cvId","AlphabetSearchKey","viewname","alphabet","page","hideModalWindow","updatePaginationOnAlphabetChange","params","getParentModuleName","AppConnector","request","done","getInstanceView","isFunction","registerPageNavigationEvents","getListSearchParams","urlSearchParams","listViewTable","listViewPageDiv","searchParams","searchContributorElement","fieldInfo","fieldName","attr","searchValue","join","inArray","type","replace","trim","hasOwnProperty","searchOperator","sourceFieldName","searchInfo","push","prop","url","getUrlVar","charAt","lengthUrl","substr","JSON","parse","decodeURIComponent","searchParam","exist","indexOf","valueInSearch","split","fieldRelation","getInstanceByView","getViewName","reloadFunctionName","execute","Vtiger_Detail_Js","window","pageController","funcName","executeFunctions","func","i","registerBasicEvents","obj","Tree"],"mappings":"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"}