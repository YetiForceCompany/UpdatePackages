{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\n\t'Documents_List_Js',\n\t{\n\t\tmassMove: function (url) {\n\t\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar postData = {\n\t\t\t\t\tselected_ids: selectedIds,\n\t\t\t\t\texcluded_ids: excludedIds,\n\t\t\t\t\tviewname: cvId\n\t\t\t\t};\n\n\t\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\t\tif (searchValue.length > 0) {\n\t\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\n\t\t\t\tvar params = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tdata: postData\n\t\t\t\t};\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tmoveDocuments: function () {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\t\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\t\tAppConnector.request(formData)\n\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tregisterDeleteFilterClickEvent: function () {\n\t\t\tvar thisInstance = this;\n\n\t\t\tvar listViewFilterBlock = this.getFilterBlock();\n\t\t\tif (listViewFilterBlock != false) {\n\t\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t\t//to close the dropdown\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthisInstance.getFilterSelectElement().data('select2').close();\n\t\t\t\t\tvar liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'),\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function (e) {\n\t\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\t\tvar folderId = currentOptionElement.data('folderid');\n\t\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\t\tfolderid: folderId\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\t\tthisInstance.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function (e) {\n\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\tAppConnector.requestForm(currentOptionElement.data('deleteurl'));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n);\n"],"names":["Vtiger_List_Js","massMove","url","getInstance","validationResult","listInstance","checkListRecordSelected","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selected_ids","selectedIds","excluded_ids","viewname","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","jQuery","progressIndicator","AppConnector","request","data","done","progressIndicatorElement","mode","app","showModalWindow","moveDocuments","result","success","hideModalWindow","showNotify","title","vtranslate","text","message","delay","type","getDefaultParams","getListViewRecords","urlParams","noRecordSelectedAlert","Deferred","on","e","currentTarget","serializeFormData","formData","aDeferred","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","listViewFilterBlock","getFilterBlock","event","stopPropagation","thisInstance","getFilterSelectElement","close","closest","liElement","hasClass","find","Vtiger_Helper_Js","showConfirmationBox","getSelectOptionFromChosenOption","folderId","currentOptionElement","params","module","getModuleName","action","folderid","remove","trigger","requestForm"],"mappings":"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"}