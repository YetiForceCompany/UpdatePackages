{
	"version": 3,
	"file": "RelatedList.min.js",
	"sources": [
		"RelatedList.js"
	],
	"sourcesContent": [
		"/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_RelatedList_Js(\n\t'Campaigns_RelatedList_Js',\n\t{\n\t\t/*\n\t\t * function to trigger send Email\n\t\t * @params: send email url , module name.\n\t\t */\n\t\ttriggerSendEmail: function() {\n\t\t\tlet params = Vtiger_RelatedList_Js.relatedListInstance.getDefaultParams();\n\t\t\tVtiger_List_Js.triggerSendEmail(\n\t\t\t\t$.extend(params, {\n\t\t\t\t\trelatedLoad: true,\n\t\t\t\t\tmodule: Vtiger_RelatedList_Js.relatedListInstance.moduleName,\n\t\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\t\tsourceRecord: app.getRecordId()\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t},\n\t{\n\t\tgetCompleteParams: function() {\n\t\t\tvar params = this._super();\n\t\t\tvar container = this.getRelatedContainer();\n\t\t\tparams['selectedIds'] = container.find('#selectedIds').data('selectedIds');\n\t\t\tparams['excludedIds'] = container.find('#excludedIds').data('excludedIds');\n\t\t\treturn params;\n\t\t},\n\t\tchangeCustomFilterElementView: function() {\n\t\t\tvar filterSelectElement = this.content.find('#customFilter');\n\t\t\tif (filterSelectElement.length > 0) {\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filterSelectElement, {\n\t\t\t\t\ttemplateSelection: function(data) {\n\t\t\t\t\t\tvar resultContainer = jQuery('<span></span>');\n\t\t\t\t\t\tresultContainer.append(\n\t\t\t\t\t\t\tjQuery(\n\t\t\t\t\t\t\t\tjQuery('.filterImage')\n\t\t\t\t\t\t\t\t\t.detach()\n\t\t\t\t\t\t\t\t\t.get(0)\n\t\t\t\t\t\t\t).show()\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresultContainer.append(data.text);\n\t\t\t\t\t\treturn resultContainer;\n\t\t\t\t\t},\n\t\t\t\t\tcustomSortOptGroup: true,\n\t\t\t\t\tcloseOnSelect: true\n\t\t\t\t});\n\t\t\t\tvar select2Instance = filterSelectElement.data('select2');\n\t\t\t\tselect2Instance.$dropdown.append(this.content.find('span.filterActionsDiv'));\n\t\t\t}\n\t\t},\n\t\tregisterChangeCustomFilterEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedContainer = thisInstance.getRelatedContainer();\n\t\t\tvar filterSelectElement = relatedContainer.find('.loadFormFilterButton');\n\t\t\tvar customFilter = relatedContainer.find('#customFilter');\n\t\t\tfilterSelectElement.on('click', function(e) {\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_ADD_THIS_FILTER');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message }).done(function() {\n\t\t\t\t\tvar cvId = customFilter.val();\n\t\t\t\t\tvar relatedModuleName = relatedContainer.find('.relatedModuleName').val();\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tsourceRecord: app.getRecordId(),\n\t\t\t\t\t\trelatedModule: relatedModuleName,\n\t\t\t\t\t\tviewId: cvId,\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\t\tmode: 'addRelationsFromRelatedModuleViewId'\n\t\t\t\t\t};\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function(responseData) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tif (responseData.result === false) {\n\t\t\t\t\t\t\t\tvar message = app.vtranslate('JS_NO_RECORDS_RELATED_TO_THIS_FILTER');\n\t\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Detail_Js.reloadRelatedList();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to edit related status for email enabled modules of campaigns\n\t\t */\n\t\tregisterEventToEditRelatedStatus: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedContainer = thisInstance.getRelatedContainer();\n\t\t\trelatedContainer.find('.currentStatus').on('click', function(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\telement.addClass('open');\n\t\t\t});\n\t\t\tvar statusDropdown = relatedContainer.find('.currentStatus').find('.dropdown-menu');\n\t\t\tstatusDropdown.on('click', 'a', function(e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar liContainer = element.closest('li');\n\t\t\t\tvar currentStatus = element.closest('.currentStatus');\n\t\t\t\tvar selectedStatusId = liContainer.attr('id');\n\t\t\t\tvar selectedStatusValue = liContainer.data('status');\n\t\t\t\tvar relatedRecordId = element.closest('tr').data('id');\n\t\t\t\tvar params = {\n\t\t\t\t\trelatedModule: thisInstance.relatedModulename,\n\t\t\t\t\trelatedRecord: relatedRecordId,\n\t\t\t\t\tstatus: selectedStatusId,\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'RelationAjax',\n\t\t\t\t\tsourceRecord: thisInstance.parentRecordId,\n\t\t\t\t\tmode: 'updateStatus'\n\t\t\t\t};\n\t\t\t\telement.progressIndicator();\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(responseData) {\n\t\t\t\t\t\tif (responseData.result[0]) {\n\t\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\tcurrentStatus.find('.statusValue').text(selectedStatusValue);\n\t\t\t\t\t\t\tcurrentStatus.removeClass('open');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\telement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterPostLoadEvents: function() {\n\t\t\tthis._super();\n\t\t\tthis.changeCustomFilterElementView();\n\t\t\tthis.registerChangeCustomFilterEvent();\n\t\t\tthis.registerEventToEditRelatedStatus();\n\t\t}\n\t}\n);\n"
	],
	"names": [
		"Vtiger_RelatedList_Js",
		"triggerSendEmail",
		"relatedListInstance",
		"getDefaultParams",
		"Vtiger_List_Js",
		"$",
		"extend",
		"params",
		"relatedLoad",
		"module",
		"moduleName",
		"sourceModule",
		"app",
		"getModuleName",
		"sourceRecord",
		"getRecordId",
		"getCompleteParams",
		"_super",
		"container",
		"getRelatedContainer",
		"find",
		"data",
		"changeCustomFilterElementView",
		"content",
		"length",
		"App",
		"Fields",
		"Picklist",
		"showSelect2ElementView",
		"filterSelectElement",
		"templateSelection",
		"jQuery",
		"append",
		"detach",
		"get",
		"show",
		"resultContainer",
		"text",
		"customSortOptGroup",
		"closeOnSelect",
		"select2Instance",
		"$dropdown",
		"registerChangeCustomFilterEvent",
		"relatedContainer",
		"thisInstance",
		"customFilter",
		"on",
		"vtranslate",
		"Vtiger_Helper_Js",
		"showConfirmationBox",
		"message",
		"done",
		"val",
		"relatedModuleName",
		"relatedModule",
		"viewId",
		"cvId",
		"action",
		"mode",
		"progressIndicatorElement",
		"progressIndicator",
		"position",
		"blockInfo",
		"enabled",
		"AppConnector",
		"request",
		"responseData",
		"result",
		"showMessage",
		"type",
		"reloadRelatedList",
		"fail",
		"registerEventToEditRelatedStatus",
		"e",
		"stopImmediatePropagation",
		"currentTarget",
		"element",
		"addClass",
		"statusDropdown",
		"liContainer",
		"closest",
		"currentStatus",
		"selectedStatusId",
		"attr",
		"selectedStatusValue",
		"relatedRecordId",
		"relatedModulename",
		"relatedRecord",
		"status",
		"parentRecordId",
		"removeClass",
		"registerPostLoadEvents"
	],
	"mappings": ";;AAUAA,sBACC,0BADD,CAEC;;;KAKCC,iBAAkB,2BAAW,CAC5B,WAAaD,sBAAsBE,mBAAtB,CAA0CC,gBAA1C,EAAb,CACAC,eAAeH,gBAAf,CACCI,EAAEC,MAAF,CAASC,MAAT,CAAiB,CAChBC,cADgB,CAEhBC,OAAQT,sBAAsBE,mBAAtB,CAA0CQ,UAFlC,CAGhBC,aAAcC,IAAIC,aAAJ,EAHE,CAIhBC,aAAcF,IAAIG,WAAJ,EAJE,CAAjB,CADD,EAQA,CAfF,CAFD,CAmBC,CACCC,kBAAmB,4BAAW,YAChB,KAAKC,MAAL,EADgB,CAEzBC,UAAY,KAAKC,mBAAL,EAFa,CAK7B,0BAFwBD,UAAUE,IAAV,CAAe,cAAf,EAA+BC,IAA/B,CAAoC,aAApC,CAExB,CADAd,mBAAwBW,UAAUE,IAAV,CAAe,cAAf,EAA+BC,IAA/B,CAAoC,aAApC,CACxB,CAAOd,MACP,CAPF,CAQCe,8BAA+B,wCAAW,CACzC,wBAA0B,KAAKC,OAAL,CAAaH,IAAb,CAAkB,eAAlB,CAA1B,CACA,GAAiC,CAA7B,qBAAoBI,MAAxB,CAAoC,CACnCC,IAAIC,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CC,mBAA3C,CAAgE,CAC/DC,kBAAmB,2BAAST,IAAT,CAAe,CACjC,oBAAsBU,OAAO,eAAP,CAAtB,CASA,uBARgBC,MAAhB,CACCD,OACCA,OAAO,cAAP,EACEE,MADF,GAEEC,GAFF,CAEM,CAFN,CADD,EAIEC,IAJF,EADD,CAQA,CADAC,gBAAgBJ,MAAhB,CAAuBX,KAAKgB,IAA5B,CACA,CAAOD,eACP,CAZ8D,CAa/DE,qBAb+D,CAc/DC,gBAd+D,CAAhE,CADmC,CAiBnC,oBAAsBV,oBAAoBR,IAApB,CAAyB,SAAzB,CAAtB,CACAmB,gBAAgBC,SAAhB,CAA0BT,MAA1B,CAAiC,KAAKT,OAAL,CAAaH,IAAb,CAAkB,uBAAlB,CAAjC,EACA,CACD,CA9BF,CA+BCsB,gCAAiC,0CAAW,kBACxB,IADwB,CAEvCC,iBAAmBC,aAAazB,mBAAb,EAFoB,CAGvCU,oBAAsBc,iBAAiBvB,IAAjB,CAAsB,uBAAtB,CAHiB,CAIvCyB,aAAeF,iBAAiBvB,IAAjB,CAAsB,eAAtB,CAJwB,CAK3CS,oBAAoBiB,EAApB,CAAuB,OAAvB,CAAgC,UAAY,CAC3C,YAAclC,IAAImC,UAAJ,CAAe,iDAAf,CAAd,CACAC,iBAAiBC,mBAAjB,CAAqC,CAAEC,QAASA,OAAX,CAArC,EAA2DC,IAA3D,CAAgE,UAAW,UAC/DN,aAAaO,GAAb,EAD+D,CAEtEC,kBAAoBV,iBAAiBvB,IAAjB,CAAsB,oBAAtB,EAA4CgC,GAA5C,EAFkD,CAGtE7C,OAAS,CACZO,aAAcF,IAAIG,WAAJ,EADF,CAEZuC,cAAeD,iBAFH,CAGZE,OAAQC,IAHI,CAIZ/C,OAAQG,IAAIC,aAAJ,EAJI,CAKZ4C,OAAQ,cALI,CAMZC,KAAM,qCANM,CAH6D,CAWtEC,yBAA2B5B,OAAO6B,iBAAP,CAAyB,CACvDC,SAAU,MAD6C,CAEvDC,UAAW,CACVC,UADU,CAF4C,CAAzB,CAX2C,CAiB1EC,aAAaC,OAAb,CAAqB1D,MAArB,EACE4C,IADF,CACO,SAASe,YAAT,CAAuB,CAE5B,GADAP,yBAAyBC,iBAAzB,CAA2C,CAAEF,KAAM,MAAR,CAA3C,CACA,CAAI,kBAAaS,MAAjB,CAAmC,aACpBvD,IAAImC,UAAJ,CAAe,sCAAf,CADoB,CAMlCC,iBAAiBoB,WAAjB,CAJa,CACZ/B,KAAMa,OADM,CAEZmB,KAAM,MAFM,CAIb,EACA,CAPD,sBAQkBC,iBAAjB,GAED,CAbF,EAcEC,IAdF,CAcO,UAAW,CAChBZ,yBAAyBC,iBAAzB,CAA2C,CAAEF,KAAM,MAAR,CAA3C,EACA,CAhBF,EAiBA,CAlCD,EAmCA,CArCD,EAsCA,CA1EF;;KA8ECc,iCAAkC,2CAAW,kBACzB,IADyB,CAExC7B,iBAAmBC,aAAazB,mBAAb,EAFqB,CAG5CwB,iBAAiBvB,IAAjB,CAAsB,gBAAtB,EAAwC0B,EAAxC,CAA2C,OAA3C,CAAoD,SAAS2B,CAAT,CAAY,CAC/DA,EAAEC,wBAAF,EAD+D,CAE/D,YAAc3C,OAAO0C,EAAEE,aAAT,CAAd,CACAC,QAAQC,QAAR,CAAiB,MAAjB,EACA,CAJD,CAH4C,CAQ5C,mBAAqBlC,iBAAiBvB,IAAjB,CAAsB,gBAAtB,EAAwCA,IAAxC,CAA6C,gBAA7C,CAArB,CACA0D,eAAehC,EAAf,CAAkB,OAAlB,CAA2B,GAA3B,CAAgC,SAAS2B,CAAT,CAAY,CAC3CA,EAAEC,wBAAF,EAD2C,aAE7B3C,OAAO0C,EAAEE,aAAT,CAF6B,CAGvCI,YAAcH,QAAQI,OAAR,CAAgB,IAAhB,CAHyB,CAIvCC,cAAgBL,QAAQI,OAAR,CAAgB,gBAAhB,CAJuB,CAKvCE,iBAAmBH,YAAYI,IAAZ,CAAiB,IAAjB,CALoB,CAMvCC,oBAAsBL,YAAY1D,IAAZ,CAAiB,QAAjB,CANiB,CAOvCgE,gBAAkBT,QAAQI,OAAR,CAAgB,IAAhB,EAAsB3D,IAAtB,CAA2B,IAA3B,CAPqB,CAQvCd,OAAS,CACZ+C,cAAeV,aAAa0C,iBADhB,CAEZC,cAAeF,eAFH,CAGZG,OAAQN,gBAHI,CAIZzE,OAAQG,IAAIC,aAAJ,EAJI,CAKZ4C,OAAQ,cALI,CAMZ3C,aAAc8B,aAAa6C,cANf,CAOZ/B,KAAM,cAPM,CAR8B,CAiB3CkB,QAAQhB,iBAAR,EAjB2C,CAkB3CI,aAAaC,OAAb,CAAqB1D,MAArB,EACE4C,IADF,CACO,SAASe,YAAT,CAAuB,CACxBA,aAAaC,MAAb,CAAoB,CAApB,CADwB,GAE3BS,QAAQhB,iBAAR,CAA0B,CAAEF,KAAM,MAAR,CAA1B,CAF2B,CAG3BuB,cAAc7D,IAAd,CAAmB,cAAnB,EAAmCiB,IAAnC,CAAwC+C,mBAAxC,CAH2B,CAI3BH,cAAcS,WAAd,CAA0B,MAA1B,CAJ2B,EAM5B,CAPF,EAQEnB,IARF,CAQO,UAAW,CAChBK,QAAQhB,iBAAR,CAA0B,CAAEF,KAAM,MAAR,CAA1B,EACA,CAVF,EAWA,CA7BD,EA8BA,CArHF,CAsHCiC,uBAAwB,iCAAW,CAClC,KAAK1E,MAAL,EADkC,CAElC,KAAKK,6BAAL,EAFkC,CAGlC,KAAKoB,+BAAL,EAHkC,CAIlC,KAAK8B,gCAAL,GACA,CA3HF,CAnBD"
}
