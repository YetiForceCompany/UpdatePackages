{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery(document).ready(function ($) {\n\t// enable/disable confirm button\n\t$('#status').on('change', function () {\n\t\t$('#confirm').attr('disabled', !this.checked);\n\t});\n});\nVtiger_Edit_Js(\n\t'Reservations_Edit_Js',\n\t{},\n\t{\n\t\tdifferenceDays: function () {\n\t\t\tvar firstDate = jQuery('input[name=\"date_start\"]');\n\t\t\tvar firstDateFormat = firstDate.data('date-format');\n\t\t\tvar firstDateValue = firstDate.val();\n\t\t\tvar secondDate = jQuery('input[name=\"due_date\"]');\n\t\t\tvar secondDateFormat = secondDate.data('date-format');\n\t\t\tvar secondDateValue = secondDate.val();\n\t\t\tvar firstTime = jQuery('input[name=\"time_start\"]');\n\t\t\tvar secondTime = jQuery('input[name=\"time_end\"]');\n\t\t\tvar firstTimeValue = firstTime.val();\n\t\t\tvar secondTimeValue = secondTime.val();\n\t\t\tvar firstDateTimeValue = firstDateValue + ' ' + firstTimeValue;\n\t\t\tvar secondDateTimeValue = secondDateValue + ' ' + secondTimeValue;\n\n\t\t\tvar firstDateInstance = Vtiger_Helper_Js.getDateInstance(firstDateTimeValue, firstDateFormat);\n\t\t\tvar secondDateInstance = Vtiger_Helper_Js.getDateInstance(\n\t\t\t\tsecondDateTimeValue,\n\t\t\t\tsecondDateFormat\n\t\t\t);\n\n\t\t\tvar timeBetweenDates = secondDateInstance - firstDateInstance;\n\t\t\tif (timeBetweenDates >= 0) {\n\t\t\t\treturn timeBetweenDates;\n\t\t\t}\n\t\t\treturn 'Error';\n\t\t},\n\n\t\t/**\n\t\t * Function to register recordpresave event\n\t\t */\n\t\tregisterRecordPreSaveEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = this.getForm();\n\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\t\tvar sumeTime2 = thisInstance.differenceDays();\n\t\t\t\tif (sumeTime2 == 'Error') {\n\t\t\t\t\tvar parametry = {\n\t\t\t\t\t\ttext: app.vtranslate('JS_DATE_SHOULD_BE_GREATER_THAN'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(parametry);\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tform.submit();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerRecordPreSaveEvent();\n\t\t}\n\t}\n);\n"],"names":["jQuery","document","ready","$","on","attr","checked","Vtiger_Edit_Js","differenceDays","firstDateFormat","firstDate","data","firstDateValue","val","secondDate","secondDateFormat","secondDateValue","firstTime","secondTime","firstTimeValue","secondTimeValue","firstDateInstance","Vtiger_Helper_Js","getDateInstance","secondDateInstance","timeBetweenDates","registerRecordPreSaveEvent","form","getForm","recordPreSave","thisInstance","text","app","vtranslate","type","showPnotify","parametry","submit","registerEvents","_super"],"mappings":";;AAGAA,OAAOC,QAAP,EAAiBC,KAAjB,CAAuB,SAAUC,CAAV,CAAa;AAEnCA,EAAE,SAAF,EAAaC,EAAb,CAAgB,QAAhB,CAA0B,UAAY,CACrCD,EAAE,UAAF,EAAcE,IAAd,CAAmB,UAAnB,CAA+B,CAAC,KAAKC,OAArC,EACA,CAFD,EAGA,CALD,EAMAC,eACC,sBADD,CAEC,EAFD,CAGC,CACCC,eAAgB,yBAAY,eACXR,OAAO,0BAAP,CADW,CAEvBS,gBAAkBC,UAAUC,IAAV,CAAe,aAAf,CAFK,CAGvBC,eAAiBF,UAAUG,GAAV,EAHM,CAIvBC,WAAad,OAAO,wBAAP,CAJU,CAKvBe,iBAAmBD,WAAWH,IAAX,CAAgB,aAAhB,CALI,CAMvBK,gBAAkBF,WAAWD,GAAX,EANK,CAOvBI,UAAYjB,OAAO,0BAAP,CAPW,CAQvBkB,WAAalB,OAAO,wBAAP,CARU,CASvBmB,eAAiBF,UAAUJ,GAAV,EATM,CAUvBO,gBAAkBF,WAAWL,GAAX,EAVK,CAcvBQ,kBAAoBC,iBAAiBC,eAAjB,CAHCX,eAAiB,GAAjB,CAAuBO,cAGxB,CAAqDV,eAArD,CAdG,CAevBe,mBAAqBF,iBAAiBC,eAAjB,CAHCP,gBAAkB,GAAlB,CAAwBI,eAGzB,CAExBL,gBAFwB,CAfE,CAoBvBU,iBAAmBD,mBAAqBH,iBApBjB,SAqBvB,kBArBuB,CAsBnBI,gBAtBmB,CAwBpB,OACP,CA1BF;;KA+BCC,2BAA4B,qCAAY,kBACpB,IADoB,CAEnCC,KAAO,KAAKC,OAAL,EAF4B,CAIvCD,KAAKvB,EAAL,CAAQG,eAAesB,aAAvB,CAAsC,UAAmB,CACxD,cAAgBC,aAAatB,cAAb,EAAhB,CACA,GAAiB,OAAb,WAAJ,CAA0B,CACzB,cAAgB,CACfuB,KAAMC,IAAIC,UAAJ,CAAe,gCAAf,CADS,CAEfC,KAAM,OAFS,CAAhB,CAKA,wBADiBC,WAAjB,CAA6BC,SAA7B,CACA,GACA,CACAT,KAAKU,MAAL,GAED,CAZD,EAaA,CAhDF,CAiDCC,eAAgB,yBAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAKb,0BAAL,GACA,CApDF,CAHD"}