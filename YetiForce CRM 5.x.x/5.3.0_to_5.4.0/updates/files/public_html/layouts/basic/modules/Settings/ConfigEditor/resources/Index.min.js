'use strict';

jQuery.Class('Settings_ConfigEditor_Index_Js',{},{/*
		 * Function to save the Configuration Editor content
		 */saveConfigEditor:function saveConfigEditor(form){var aDeferred=jQuery.Deferred(),params=form.serializeFormData();return params.module=app.getModuleName(),params.parent=app.getParentModuleName(),params.action='SaveAjax',AppConnector.request(params).done(function(data){aDeferred.resolve(data);}).fail(function(error,err){aDeferred.reject(error,err);}),aDeferred.promise()},/*
		 * Function to load the contents from the url through pjax
		 */loadContents:function loadContents(url){var aDeferred=jQuery.Deferred();return AppConnector.requestPjax(url).done(function(data){aDeferred.resolve(data);}).fail(function(){aDeferred.reject();}),aDeferred.promise()},/*
		 * function to register the events in editView
		 */registerEditViewEvents:function registerEditViewEvents(){var thisInstance=this,form=jQuery('#ConfigEditorForm'),detailUrl=form.data('detailUrl');//register all select2 Elements
App.Fields.Picklist.showSelect2ElementView(form.find('select.select2'),{dropdownCss:{"z-index":0}});//register validation engine
var params=app.validationEngineOptions;params.onValidationComplete=function(form,valid){if(valid){var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});return thisInstance.saveConfigEditor(form).done(function(data){var params={};data.success?(params.text=app.vtranslate('JS_CONFIGURATION_DETAILS_SAVED'),thisInstance.loadContents(detailUrl).done(function(data){progressIndicatorElement.progressIndicator({mode:'hide'}),jQuery('.contentsDiv').html(data),thisInstance.registerDetailViewEvents();}),Settings_Vtiger_Index_Js.showMessage(params)):progressIndicatorElement.progressIndicator({mode:'hide'});}).fail(function(){progressIndicatorElement.progressIndicator({mode:'hide'});}),valid}},form.validationEngine(params),form.on('submit',function(e){e.preventDefault();});//Register click event for cancel link
var cancelLink=form.find('.cancelLink');cancelLink.on('click',function(){var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});thisInstance.loadContents(detailUrl).done(function(data){progressIndicatorElement.progressIndicator({mode:'hide'}),jQuery('.contentsDiv').html(data),thisInstance.registerDetailViewEvents();});});},/*
		 * function to register the events in DetailView
		 */registerDetailViewEvents:function registerDetailViewEvents(){var thisInstance=this,container=jQuery('#ConfigEditorDetails'),editButton=container.find('.editButton');//Register click event for edit button
editButton.on('click',function(){var url=editButton.data('url'),progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});thisInstance.loadContents(url).done(function(data){progressIndicatorElement.progressIndicator({mode:'hide'}),jQuery('.contentsDiv').html(data),thisInstance.registerEditViewEvents();}).fail(function(){progressIndicatorElement.progressIndicator({mode:'hide'});});});},registerEvents:function registerEvents(){0<jQuery('#ConfigEditorDetails').length?this.registerDetailViewEvents():this.registerEditViewEvents();}}),Vtiger_WholeNumberGreaterThanZero_Validator_Js('Vtiger_NumberRange100_Validator_Js',{/**
		 *Function which invokes field validation
		 *@param accepts field element as parameter
		 * @return error if validation fails true on success
		 */invokeValidation:function invokeValidation(field){var rangeInstance=new Vtiger_NumberRange100_Validator_Js;rangeInstance.setElement(field);var response=rangeInstance.validate();if(!0!=response)return rangeInstance.getError()}},{/**
		 * Function to validate the percentage field data
		 * @return true if validation is successfull
		 * @return false if validation error occurs
		 */validate:function validate(){var response=this._super();if(!0!=response)return response;var fieldValue=this.getFieldValue();if(1>fieldValue||100<fieldValue){var errorInfo=app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO100');return this.setError(errorInfo),!1}return !0}});
//# sourceMappingURL=Index.min.js.map
