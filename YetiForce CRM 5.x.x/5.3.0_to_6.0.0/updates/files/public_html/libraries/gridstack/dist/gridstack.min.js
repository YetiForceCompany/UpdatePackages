/**
 * gridstack.js 1.2.1
 * https://gridstackjs.com/
 * (c) 2014-2020 Alain Dumesny, Dylan Weiss, Pavel Reznikov
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(t){if("function"==typeof define&&define.amd)define(["jquery","exports"],t);else if("undefined"!=typeof exports){var e;try{e=require("jquery")}catch(t){}t(e||window.jQuery,exports)}else t(window.jQuery,window)}(function(m,t){function e(t,e,i,o){function n(){return console.warn("gridstack.js: Function `"+e+"` is deprecated in "+o+" and has been replaced with `"+i+"`. It will be **completely** removed in v1.0"),t.apply(this,arguments)}return n.prototype=t.prototype,n}function g(t,e,i,o){void 0!==t[e]&&(t[i]=t[e],console.warn("gridstack.js: Option `"+e+"` is deprecated in "+o+" and has been replaced with `"+i+"`. It will be **completely** removed in v1.0"))}function f(t,e,i,o){var n=t.attr(e);void 0!==n&&(t.attr(i,n),console.warn("gridstack.js: attribute `"+e+"`="+n+" is deprecated on this object in "+o+" and has been replaced with `"+i+"`. It will be **completely** removed in v1.0"))}var v={isIntercepted:function(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)},sort:function(t,e,i){if(!i){var o=t.map(function(t){return t.x+t.width});i=Math.max.apply(Math,o)}return-1===e?v.sortBy(t,function(t){return-(t.x+t.y*i)}):v.sortBy(t,function(t){return t.x+t.y*i})},createStylesheet:function(t,e){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-gs-style-id",t),i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),(e=e||document.getElementsByTagName("head")[0]).insertBefore(i,e.firstChild),i.sheet},removeStylesheet:function(t){m("STYLE[data-gs-style-id="+t+"]").remove()},insertCSSRule:function(t,e,i,o){"function"==typeof t.insertRule?t.insertRule(e+"{"+i+"}",o):"function"==typeof t.addRule&&t.addRule(e,i,o)},toBool:function(t){return"boolean"==typeof t?t:"string"==typeof t?!(""===(t=t.toLowerCase())||"no"===t||"false"===t||"0"===t):Boolean(t)},_collisionNodeCheck:function(t){return t!==this.node&&v.isIntercepted(t,this.nn)},_didCollide:function(t){return v.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},t)},_isAddNodeIntercepted:function(t){return v.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},t)},parseHeight:function(t){var e=t,i="px";if(e&&"string"==typeof e){var o=e.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);if(!o)throw new Error("Invalid height");i=o[2]||"px",e=parseFloat(o[1])}return{height:e,unit:i}},without:function(t,e){var i=t.indexOf(e);return-1!==i&&(t=t.slice(0)).splice(i,1),t},sortBy:function(t,n){return t.slice(0).sort(function(t,e){var i=n(t),o=n(e);return o===i?0:o<i?1:-1})},defaults:function(i){return Array.prototype.slice.call(arguments,1).forEach(function(t){for(var e in t)!Object.prototype.hasOwnProperty.call(t,e)||Object.prototype.hasOwnProperty.call(i,e)&&void 0!==i[e]||(i[e]=t[e])}),i},clone:function(t){return m.extend({},t)},throttle:function(t,e){var i=!1;return function(){i||(t.apply(this,arguments),i=!0,setTimeout(function(){i=!1},e))}},removePositioningStyles:function(t){var e=t[0].style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")},getScrollParent:function(t){return null===t?null:t.scrollHeight>t.clientHeight?t:v.getScrollParent(t.parentNode)},updateScrollPosition:function(t,e,i){var o=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(o.top<0||o.bottom>n){var s=o.bottom-n,a=o.top,r=v.getScrollParent(t);if(null!==r){var d=r.scrollTop;o.top<0&&i<0?t.offsetHeight>n?r.scrollTop+=i:r.scrollTop+=Math.abs(a)>Math.abs(i)?i:a:0<i&&(t.offsetHeight>n?r.scrollTop+=i:r.scrollTop+=i<s?i:s),e.position.top+=r.scrollTop-d}}}};function _(t){this.grid=t}_.registeredPlugins=[],_.registerPlugin=function(t){_.registeredPlugins.push(t)},_.prototype.resizable=function(t,e){return this},_.prototype.draggable=function(t,e){return this},_.prototype.droppable=function(t,e){return this},_.prototype.isDroppable=function(t){return!1},_.prototype.on=function(t,e,i){return this};function y(t,e,i,o,n){this.column=t||12,this.float=i||!1,this.maxRow=o||0,this.nodes=n||[],this.onchange=e||function(){},this._addedNodes=[],this._removedNodes=[],this._batchMode=!1}var s=0;y.prototype.batchUpdate=function(){this._batchMode||(this._batchMode=!0,this._prevFloat=this.float,this.float=!0)},y.prototype.commit=function(){this._batchMode&&(this._batchMode=!1,this.float=this._prevFloat,delete this._prevFloat,this._packNodes(),this._notify())},y.prototype.getNodeDataByDOMEl=function(e){return this.nodes.find(function(t){return e===t.el})},y.prototype._fixCollisions=function(t){this._sortNodes(-1);var e=t,i=Boolean(this.nodes.find(function(t){return t.locked}));for(this.float||i||(e={x:0,y:t.y,width:this.column,height:t.height});;){var o=this.nodes.find(v._collisionNodeCheck,{node:t,nn:e});if(!o)return;if(!(o.locked?this.moveNode(t,t.x,o.y+o.height,t.width,t.height,!0):this.moveNode(o,o.x,t.y+t.height,o.width,o.height,!0)))return}},y.prototype.isAreaEmpty=function(t,e,i,o){var n={x:t||0,y:e||0,width:i||1,height:o||1};return!this.nodes.find(function(t){return v.isIntercepted(t,n)})},y.prototype._sortNodes=function(t){this.nodes=v.sort(this.nodes,t,this.column)},y.prototype._packNodes=function(){this._sortNodes(),this.float?this.nodes.forEach(function(t,e){if(!t._updating&&void 0!==t._packY&&t.y!==t._packY)for(var i=t.y;i>=t._packY;){this.nodes.slice(0,e).find(v._didCollide,{n:t,newY:i})||(t._dirty=!0,t.y=i),--i}},this):this.nodes.forEach(function(t,e){if(!t.locked)for(;0<t.y;){var i=t.y-1,o=0===e;if(0<e)o=void 0===this.nodes.slice(0,e).find(v._didCollide,{n:t,newY:i});if(!o)break;t._dirty=t.y!==i,t.y=i}},this)},y.prototype._prepareNode=function(t,e){void 0!==(t=t||{}).x&&void 0!==t.y&&null!==t.x&&null!==t.y||(t.autoPosition=!0);var i={width:1,height:1,x:0,y:0};return(t=v.defaults(t,i)).x=parseInt(t.x),t.y=parseInt(t.y),t.width=parseInt(t.width),t.height=parseInt(t.height),t.autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,Number.isNaN(t.x)&&(t.x=i.x,t.autoPosition=!0),Number.isNaN(t.y)&&(t.y=i.y,t.autoPosition=!0),Number.isNaN(t.width)&&(t.width=i.width),Number.isNaN(t.height)&&(t.height=i.height),void 0!==t.maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),void 0!==t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),void 0!==t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),void 0!==t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t.width>this.column?t.width=this.column:t.width<1&&(t.width=1),this.maxRow&&t.height>this.maxRow?t.height=this.maxRow:t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.width>this.column&&(e?t.width=this.column-t.x:t.x=this.column-t.width),this.maxRow&&t.y+t.height>this.maxRow&&(e?t.height=this.maxRow-t.y:t.y=this.maxRow-t.height),t},y.prototype._notify=function(){if(!this._batchMode){var t=Array.prototype.slice.call(arguments,0);t[0]=void 0===t[0]?[]:Array.isArray(t[0])?t[0]:[t[0]],t[1]=void 0===t[1]||t[1];var e=t[0].concat(this.getDirtyNodes());this.onchange(e,t[1])}},y.prototype.cleanNodes=function(){this._batchMode||this.nodes.forEach(function(t){delete t._dirty})},y.prototype.getDirtyNodes=function(t){if(t){var e=[];return this.nodes.forEach(function(t){t._dirty&&(t.y===t._origY&&t.x===t._origX&&t.width===t._origW&&t.height===t._origH?delete t._dirty:e.push(t))}),e}return this.nodes.filter(function(t){return t._dirty})},y.prototype.addNode=function(t,e){if((t=this._prepareNode(t))._id=t._id||++s,t.autoPosition){this._sortNodes();for(var i=0;;++i){var o=i%this.column,n=Math.floor(i/this.column);if(!(o+t.width>this.column)&&!this.nodes.find(v._isAddNodeIntercepted,{x:o,y:n,node:t})){t.x=o,t.y=n,delete t.autoPosition;break}}}return this.nodes.push(t),e&&this._addedNodes.push(t),this._fixCollisions(t),this._packNodes(),this._notify(),t},y.prototype.removeNode=function(t,e){e=void 0===e||e,this._removedNodes.push(t),t._id=null,this.nodes=v.without(this.nodes,t),this._packNodes(),this._notify(t,e)},y.prototype.removeAll=function(t){delete this._layouts,0!==this.nodes.length&&(t=void 0===t||t,this.nodes.forEach(function(t){t._id=null}),this._removedNodes=this.nodes,this.nodes=[],this._notify(this._removedNodes,t))},y.prototype.canMoveNode=function(e,t,i,o,n){if(!this.isNodeChangedPosition(e,t,i,o,n))return!1;var s,a=Boolean(this.nodes.find(function(t){return t.locked}));if(!this.maxRow&&!a)return!0;var r=new y(this.column,null,this.float,0,this.nodes.map(function(t){return t===e?s=m.extend({},t):m.extend({},t)}));if(!s)return!0;r.moveNode(s,t,i,o,n);var d=!0;return a&&(d&=!Boolean(r.nodes.find(function(t){return t!==s&&Boolean(t.locked)&&Boolean(t._dirty)}))),this.maxRow&&(d&=r.getRow()<=this.maxRow),d},y.prototype.canBePlacedWithRespectToHeight=function(t){if(!this.maxRow)return!0;var e=new y(this.column,null,this.float,0,this.nodes.map(function(t){return m.extend({},t)}));return e.addNode(t),e.getRow()<=this.maxRow},y.prototype.isNodeChangedPosition=function(t,e,i,o,n){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof n&&(n=t.height),void 0!==t.maxWidth&&(o=Math.min(o,t.maxWidth)),void 0!==t.maxHeight&&(n=Math.min(n,t.maxHeight)),void 0!==t.minWidth&&(o=Math.max(o,t.minWidth)),void 0!==t.minHeight&&(n=Math.max(n,t.minHeight)),t.x!==e||t.y!==i||t.width!==o||t.height!==n},y.prototype.moveNode=function(t,e,i,o,n,s){if(t.locked)return null;"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof n&&(n=t.height);var a=t.width!==o||t.height!==n,r={x:e,y:i,width:o,height:n,maxWidth:t.maxWidth,maxHeight:t.maxHeight,minWidth:t.minWidth,minHeight:t.minHeight};return r=this._prepareNode(r,a),t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height?null:(t._dirty=!0,t.x=t.lastTriedX=r.x,t.y=t.lastTriedY=r.y,t.width=t.lastTriedWidth=r.width,t.height=t.lastTriedHeight=r.height,this._fixCollisions(t),s||(this._packNodes(),this._notify()),t)},y.prototype.getRow=function(){return this.nodes.reduce(function(t,e){return Math.max(t,e.y+e.height)},0)},y.prototype.beginUpdate=function(t){t._updating||(t._updating=!0,this.nodes.forEach(function(t){t._packY=t.y}))},y.prototype.endUpdate=function(){var t=this.nodes.find(function(t){return t._updating});t&&(t._updating=!1,this.nodes.forEach(function(t){delete t._packY}))};function n(t,e){var i,o,n,s,c=this;e=e||{},this.$el=m(t),this.el=this.$el.get(0),g(e,"width","column","v0.5.3"),g(e,"height","maxRow","v0.5.3"),n="v0.6.3",s=". Use class `.grid-stack-1` instead",void 0!==e[o="oneColumnModeClass"]&&console.warn("gridstack.js: Option `"+o+"` is deprecated in "+n+s),f(this.$el,"data-gs-width","data-gs-column","v0.5.3"),f(this.$el,"data-gs-height","data-gs-max-row","v0.5.3"),f(this.$el,"data-gs-current-height","data-gs-current-row","v1.0.0"),e.itemClass=e.itemClass||"grid-stack-item";var a=0<this.$el.closest("."+e.itemClass).length;e.row&&(e.minRow=e.maxRow=e.row,delete e.row);var r=parseInt(this.$el.attr("data-gs-row"));if(this.opts=v.defaults(e,{column:parseInt(this.$el.attr("data-gs-column"))||12,minRow:r||(parseInt(this.$el.attr("data-gs-min-row"))||0),maxRow:r||(parseInt(this.$el.attr("data-gs-max-row"))||0),itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,styleInHead:!1,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,float:!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.$el.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:e.alwaysShowResizeHandle||!1,resizable:v.defaults(e.resizable||{},{autoHide:!e.alwaysShowResizeHandle,handles:"se"}),draggable:v.defaults(e.draggable||{},{handle:(e.handleClass?"."+e.handleClass:e.handle?e.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:e.disableDrag||!1,disableResize:e.disableResize||!1,rtl:"auto",removable:!1,removableOptions:v.defaults(e.removableOptions||{},{accept:"."+e.itemClass}),removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:e.disableOneColumnMode||!1,oneColumnModeDomSort:e.oneColumnModeDomSort,ddPlugin:null}),!1===this.opts.ddPlugin?this.opts.ddPlugin=_:null===this.opts.ddPlugin&&(this.opts.ddPlugin=_.registeredPlugins[0]||_),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.$el.css("direction")),this.opts.rtl&&this.$el.addClass("grid-stack-rtl"),this.opts.isNested=a,(i="auto"===this.opts.cellHeight)?c.cellHeight(c.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.$el.addClass(this.opts._class),this._setStaticClass(),a&&this.$el.addClass("grid-stack-nested"),this._initStyles(),this.engine=new y(this.opts.column,function(t,e){e=void 0===e||e;var i=0;this.nodes.forEach(function(t){i=Math.max(i,t.y+t.height)}),t.forEach(function(t){e&&null===t._id?t.el&&m(t.el).remove():m(t.el).attr("data-gs-x",t.x).attr("data-gs-y",t.y).attr("data-gs-width",t.width).attr("data-gs-height",t.height)}),c._updateStyles(i+10)},this.opts.float,this.opts.maxRow),this.opts.auto){var d=[],h=this;this.$el.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(t,e){e=m(e);var i=parseInt(e.attr("data-gs-x")),o=parseInt(e.attr("data-gs-y"));d.push({el:e.get(0),i:(Number.isNaN(i)?1e3:i)+(Number.isNaN(o)?1e3:o)*h.opts.column})}),v.sortBy(d,function(t){return t.i}).forEach(function(t){this._prepareElement(t.el)},this)}if(this.engine._saveInitial(),this.setAnimation(this.opts.animate),this.placeholder=m('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=v.throttle(function(){c.cellHeight(c.cellWidth(),!1)},100),this.onResizeHandler=function(){if(i&&c._updateHeightsOnResize(),!c.opts.disableOneColumnMode&&(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=c.opts.minWidth){if(c.oneColumnMode)return;c.oneColumnMode=!0,c.column(1)}else{if(!c.oneColumnMode)return;c.oneColumnMode=!1,c.column(c._prevColumn)}},m(window).resize(this.onResizeHandler),this.onResizeHandler(),!c.opts.staticGrid&&"string"==typeof c.opts.removable){var l=m(c.opts.removable);this.dd.isDroppable(l)||this.dd.droppable(l,c.opts.removableOptions),this.dd.on(l,"dropover",function(t,e){var i=m(e.draggable),o=i.data("_gridstack_node");o&&o._grid===c&&(i.data("inTrashZone",!0),c._setupRemovingTimeout(i))}).on(l,"dropout",function(t,e){var i=m(e.draggable),o=i.data("_gridstack_node");o&&o._grid===c&&(i.data("inTrashZone",!1),c._clearRemovingTimeout(i))})}if(!c.opts.staticGrid&&c.opts.acceptWidgets){function p(t,e){var i=u,o=i.data("_gridstack_node"),n=c.getCellFromPixel({left:t.pageX,top:t.pageY},!0),s=Math.max(0,n.x),a=Math.max(0,n.y);o._added||(o._added=!0,o.el=i.get(0),o.autoPosition=!0,o.x=s,o.y=a,c.engine.cleanNodes(),c.engine.beginUpdate(o),c.engine.addNode(o),c.$el.append(c.placeholder),c.placeholder.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).show(),o.el=c.placeholder.get(0),o._beforeDragX=o.x,o._beforeDragY=o.y,c._updateContainerHeight()),c.engine.canMoveNode(o,s,a)&&(c.engine.moveNode(o,s,a),c._updateContainerHeight())}var u=null;this.dd.droppable(c.$el,{accept:function(t){var e=(t=m(t)).data("_gridstack_node");return(!e||e._grid!==c)&&t.is(!0===c.opts.acceptWidgets?".grid-stack-item":c.opts.acceptWidgets)}}).on(c.$el,"dropover",function(t,e){var i,o,n=m(e.draggable),s=n.data("_gridstack_node");if(!s||!s.width||!s.height){var a=parseInt(n.attr("data-gs-width"));0<a&&((s=s||{}).width=a);var r=parseInt(n.attr("data-gs-height"));0<r&&((s=s||{}).height=r)}var d=c.cellWidth(),h=c.cellHeight(),l=c.opts.verticalMargin;i=s&&s.width?s.width:Math.ceil(n.outerWidth()/d),o=s&&s.height?s.height:Math.round((n.outerHeight()+l)/(h+l)),u=n;var g=c.engine._prepareNode({width:i,height:o,_added:!1,_temporary:!0});return g.isOutOfGrid=!0,n.data("_gridstack_node",g),n.data("_gridstack_node_orig",s),n.on("drag",p),!1}).on(c.$el,"dropout",function(t,e){var i=m(e.draggable);if(i.data("_gridstack_node")){var o=i.data("_gridstack_node");if(o.isOutOfGrid)return i.unbind("drag",p),o.el=null,c.engine.removeNode(o),c.placeholder.detach(),c._updateContainerHeight(),i.data("_gridstack_node",i.data("_gridstack_node_orig")),!1}}).on(c.$el,"drop",function(t,e){c.placeholder.detach();var i=m(e.draggable).data("_gridstack_node");i.isOutOfGrid=!1,i._grid=c;var o=m(e.draggable).clone(!1);o.data("_gridstack_node",i);var n=m(e.draggable).data("_gridstack_node_orig");return void 0!==n&&void 0!==n._grid&&n._grid._triggerRemoveEvent(),m(e.helper).remove(),i.el=o.get(0),c.placeholder.hide(),v.removePositioningStyles(o),o.find("div.ui-resizable-handle").remove(),o.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height).addClass(c.opts.itemClass).enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",p),c.$el.append(o),c._prepareElementsByNode(o,i),c._updateContainerHeight(),c.engine._addedNodes.push(i),c._triggerAddEvent(),c._triggerChangeEvent(),c.engine.endUpdate(),m(e.draggable).unbind("drag",p),m(e.draggable).removeData("_gridstack_node"),m(e.draggable).removeData("_gridstack_node_orig"),c.$el.trigger("dropped",[n,i]),!1})}}return n.prototype._triggerChangeEvent=function(){if(!this.engine._batchMode){var t=this.engine.getDirtyNodes(!0);t&&t.length&&(this.engine._layoutsNodesChange(t),this._triggerEvent("change",t)),this.engine._saveInitial()}},n.prototype._triggerAddEvent=function(){this.engine._batchMode||this.engine._addedNodes&&0<this.engine._addedNodes.length&&(this.engine._layoutsNodesChange(this.engine._addedNodes),this.engine._addedNodes.forEach(function(t){delete t._dirty}),this._triggerEvent("added",this.engine._addedNodes),this.engine._addedNodes=[])},n.prototype._triggerRemoveEvent=function(){this.engine._batchMode||this.engine._removedNodes&&0<this.engine._removedNodes.length&&(this._triggerEvent("removed",this.engine._removedNodes),this.engine._removedNodes=[])},n.prototype._triggerEvent=function(t,e){var i=new CustomEvent(t,{detail:e});this.el.dispatchEvent(i)},n.prototype._initStyles=function(){this._stylesId&&v.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed();var t=this.opts.styleInHead?void 0:this.el.parentNode;this._styles=v.createStylesheet(this._stylesId,t),null!==this._styles&&(this._styles._max=0)},n.prototype._updateStyles=function(t){if(null!==this._styles&&void 0!==this._styles){var e,i="."+this.opts._class+" ."+this.opts.itemClass,o=this;if(void 0===t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),this.opts.cellHeight&&!(0!==this._styles._max&&t<=this._styles._max)&&(e=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(t,e){return t&&e?"calc("+(o.opts.cellHeight*t+o.opts.cellHeightUnit)+" + "+(o.opts.verticalMargin*e+o.opts.verticalMarginUnit)+")":o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit}:function(t,e){return o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit},0===this._styles._max&&v.insertCSSRule(this._styles,i,"min-height: "+e(1,0)+";",0),t>this._styles._max)){for(var n=this._styles._max;n<t;++n)v.insertCSSRule(this._styles,i+'[data-gs-height="'+(n+1)+'"]',"height: "+e(n+1,n)+";",n),v.insertCSSRule(this._styles,i+'[data-gs-min-height="'+(n+1)+'"]',"min-height: "+e(n+1,n)+";",n),v.insertCSSRule(this._styles,i+'[data-gs-max-height="'+(n+1)+'"]',"max-height: "+e(n+1,n)+";",n),v.insertCSSRule(this._styles,i+'[data-gs-y="'+n+'"]',"top: "+e(n,n)+";",n);this._styles._max=t}}},n.prototype._updateContainerHeight=function(){if(!this.engine._batchMode){var t=this.engine.getRow();t<this.opts.minRow&&(t=this.opts.minRow);var e=parseInt(this.$el.css("min-height"));if(0<e){var i=this.opts.verticalMargin,o=Math.round((e+i)/(this.cellHeight()+i));t<o&&(t=o)}this.$el.attr("data-gs-current-row",t),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.$el.css("height",t*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.$el.css("height","calc("+(t*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(t*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.$el.css("height",t*this.opts.cellHeight+this.opts.cellHeightUnit))}},n.prototype._setupRemovingTimeout=function(t){var e=m(t).data("_gridstack_node");!e._removeTimeout&&this.opts.removable&&(e._removeTimeout=setTimeout(function(){t.addClass("grid-stack-item-removing"),e._isAboutToRemove=!0},this.opts.removeTimeout))},n.prototype._clearRemovingTimeout=function(t){var e=m(t).data("_gridstack_node");e._removeTimeout&&(clearTimeout(e._removeTimeout),e._removeTimeout=null,t.removeClass("grid-stack-item-removing"),e._isAboutToRemove=!1)},n.prototype._prepareElementsByNode=function(h,l){function t(t,e){var i,o,n=Math.round(e.position.left/g),s=Math.floor((e.position.top+c/2)/c);if("drag"===t.type){var a=e.position.top-l._prevYPix;if(l._prevYPix=e.position.top,v.updateScrollPosition(h[0],e,a),h.data("inTrashZone")||n<0||n>=p.engine.column||s<0||!p.engine.float&&s>p.engine.getRow()){if(l._temporaryRemoved)return;!0===p.opts.removable&&p._setupRemovingTimeout(h),n=l._beforeDragX,s=l._beforeDragY,p.placeholder.detach(),p.placeholder.hide(),p.engine.removeNode(l),p._updateContainerHeight(),l._temporaryRemoved=!0}else p._clearRemovingTimeout(h),l._temporaryRemoved&&(p.engine.addNode(l),p.placeholder.attr("data-gs-x",n).attr("data-gs-y",s).attr("data-gs-width",i).attr("data-gs-height",o).show(),p.$el.append(p.placeholder),l.el=p.placeholder.get(0),l._temporaryRemoved=!1)}else if("resize"===t.type){if(n<0)return;i=Math.round(e.size.width/g),o=Math.round((e.size.height+p.verticalMargin())/c)}var r=void 0!==i?i:l.lastTriedWidth,d=void 0!==o?o:l.lastTriedHeight;!p.engine.canMoveNode(l,n,s,i,o)||l.lastTriedX===n&&l.lastTriedY===s&&l.lastTriedWidth===r&&l.lastTriedHeight===d||(l.lastTriedX=n,l.lastTriedY=s,l.lastTriedWidth=i,l.lastTriedHeight=o,p.engine.moveNode(l,n,s,i,o),p._updateContainerHeight(),"resize"===t.type&&m(t.target).trigger("gsresize",l))}function e(t,e){p.$el.append(p.placeholder);var i=m(this);p.engine.cleanNodes(),p.engine.beginUpdate(l),g=p.cellWidth();var o=p.cellHeight();c=(p.$el.height()+p.verticalMargin())/parseInt(p.$el.attr("data-gs-current-row")),p.placeholder.attr("data-gs-x",i.attr("data-gs-x")).attr("data-gs-y",i.attr("data-gs-y")).attr("data-gs-width",i.attr("data-gs-width")).attr("data-gs-height",i.attr("data-gs-height")).show(),l.el=p.placeholder.get(0),l._beforeDragX=l.x,l._beforeDragY=l.y,l._prevYPix=e.position.top;var n=l.minHeight||1,s=p.opts.verticalMargin;p.dd.resizable(h,"option","minWidth",g*(l.minWidth||1)),p.dd.resizable(h,"option","minHeight",o*n+(n-1)*s),"resizestart"===t.type&&i.find(".grid-stack-item").trigger("resizestart")}function i(t,e){var i=m(this);if(i.data("_gridstack_node")){if(p.placeholder.detach(),l.el=i.get(0),p.placeholder.hide(),l._isAboutToRemove)h.data("_gridstack_node")._grid._triggerRemoveEvent(),h.removeData("_gridstack_node"),h.remove();else p._clearRemovingTimeout(h),l._temporaryRemoved?(v.removePositioningStyles(i),i.attr("data-gs-x",l._beforeDragX).attr("data-gs-y",l._beforeDragY).attr("data-gs-width",l.width).attr("data-gs-height",l.height),l.x=l._beforeDragX,l.y=l._beforeDragY,l._temporaryRemoved=!1,p.engine.addNode(l)):(v.removePositioningStyles(i),i.attr("data-gs-x",l.x).attr("data-gs-y",l.y).attr("data-gs-width",l.width).attr("data-gs-height",l.height));p._updateContainerHeight(),p._triggerChangeEvent(),p.engine.endUpdate();var o=i.find(".grid-stack");o.length&&"resizestop"===t.type&&(o.each(function(t,e){e.gridstack.onResizeHandler()}),i.find(".grid-stack-item").trigger("resizestop"),i.find(".grid-stack-item").trigger("gsresizestop")),"resizestop"===t.type&&p.$el.trigger("gsresizestop",i)}}var g,c,p=this;this.dd.draggable(h,{start:e,stop:i,drag:t}).resizable(h,{start:e,stop:i,resize:t}),(l.noMove||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(h,"disable"),(l.noResize||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(h,"disable"),this._writeAttr(h,l)},n.prototype._prepareElement=function(t,e){e=void 0!==e&&e;(t=m(t)).addClass(this.opts.itemClass);var i=this._readAttr(t,{el:t.get(0),_grid:this});i=this.engine.addNode(i,e),t.data("_gridstack_node",i),this._prepareElementsByNode(t,i)},n.prototype._writeAttr=function(t,e){e&&(t=m(t),void 0!==e.x&&t.attr("data-gs-x",e.x),void 0!==e.y&&t.attr("data-gs-y",e.y),void 0!==e.width&&t.attr("data-gs-width",e.width),void 0!==e.height&&t.attr("data-gs-height",e.height),void 0!==e.autoPosition&&t.attr("data-gs-auto-position",!!e.autoPosition||null),void 0!==e.minWidth&&t.attr("data-gs-min-width",e.minWidth),void 0!==e.maxWidth&&t.attr("data-gs-max-width",e.maxWidth),void 0!==e.minHeight&&t.attr("data-gs-min-height",e.minHeight),void 0!==e.maxHeight&&t.attr("data-gs-max-height",e.maxHeight),void 0!==e.noResize&&t.attr("data-gs-no-resize",!!e.noResize||null),void 0!==e.noMove&&t.attr("data-gs-no-move",!!e.noMove||null),void 0!==e.locked&&t.attr("data-gs-locked",!!e.locked||null),void 0!==e.resizeHandles&&t.attr("data-gs-resize-handles",e.resizeHandles),void 0!==e.id&&t.attr("data-gs-id",e.id))},n.prototype._readAttr=function(t,e){return t=m(t),(e=e||{}).x=t.attr("data-gs-x"),e.y=t.attr("data-gs-y"),e.width=t.attr("data-gs-width"),e.height=t.attr("data-gs-height"),e.autoPosition=v.toBool(t.attr("data-gs-auto-position")),e.maxWidth=t.attr("data-gs-max-width"),e.minWidth=t.attr("data-gs-min-width"),e.maxHeight=t.attr("data-gs-max-height"),e.minHeight=t.attr("data-gs-min-height"),e.noResize=v.toBool(t.attr("data-gs-no-resize")),e.noMove=v.toBool(t.attr("data-gs-no-move")),e.locked=v.toBool(t.attr("data-gs-locked")),e.resizeHandles=t.attr("data-gs-resize-handles"),e.id=t.attr("data-gs-id"),e},n.prototype.setAnimation=function(t){t?this.$el.addClass("grid-stack-animate"):this.$el.removeClass("grid-stack-animate")},n.prototype.addWidget=function(t,e,i,o,n,s,a,r,d,h,l){if(void 0!==e&&"object"!=typeof e)return this.addWidget(t,{x:e,y:i,width:o,height:n,autoPosition:s,minWidth:a,maxWidth:r,minHeight:d,maxHeight:h,id:l});if(t=m(t),e){var g=this._readAttr(t);v.defaults(e,g),this.engine._prepareNode(e)}return this._writeAttr(t,e),this.$el.append(t),this.makeWidget(t)},n.prototype.makeWidget=function(t){return t=m(t),this._prepareElement(t,!0),this._updateContainerHeight(),this._triggerAddEvent(),this._triggerChangeEvent(!0),t.get(0)},n.prototype.willItFit=function(t,e,i,o,n){var s={x:t,y:e,width:i,height:o,autoPosition:n};return this.engine.canBePlacedWithRespectToHeight(s)},n.prototype.removeWidget=function(t,e){var i=(t=m(t)).data("_gridstack_node");(i=i||this.engine.getNodeDataByDOMEl(t.get(0)))&&i.el.parentElement===this.el&&(t.removeData("_gridstack_node"),this.dd.draggable(t,"destroy").resizable(t,"destroy"),this.engine.removeNode(i,e),this._triggerRemoveEvent(),this._triggerChangeEvent(!0))},n.prototype.removeAll=function(t){this.engine.nodes.forEach(function(t){var e=m(t.el);e.removeData("_gridstack_node"),this.dd.draggable(e,"destroy").resizable(e,"destroy")},this),this.engine.removeAll(t),this._triggerRemoveEvent()},n.prototype.destroy=function(t){m(window).off("resize",this.onResizeHandler),!1===t?(this.removeAll(!1),this.$el.removeClass(this.opts._class),delete this.$el.get(0).gridstack):this.$el.remove(),v.removeStylesheet(this._stylesId),this.engine&&(this.engine=null)},n.prototype.resizable=function(t,o){var n=this;return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(i.noResize=!o,i.noResize?n.dd.resizable(e,"disable"):n.dd.resizable(e,"enable"))}),this},n.prototype.movable=function(t,o){var n=this;return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(i.noMove=!o,i.noMove?(n.dd.draggable(e,"disable"),e.removeClass("ui-draggable-handle")):(n.dd.draggable(e,"enable"),e.addClass("ui-draggable-handle")))}),this},n.prototype.enableMove=function(t,e){this.movable(this.$el.children("."+this.opts.itemClass),t),e&&(this.opts.disableDrag=!t)},n.prototype.enableResize=function(t,e){this.resizable(this.$el.children("."+this.opts.itemClass),t),e&&(this.opts.disableResize=!t)},n.prototype.disable=function(){this.movable(this.$el.children("."+this.opts.itemClass),!1),this.resizable(this.$el.children("."+this.opts.itemClass),!1),this.$el.trigger("disable")},n.prototype.enable=function(){this.movable(this.$el.children("."+this.opts.itemClass),!0),this.resizable(this.$el.children("."+this.opts.itemClass),!0),this.$el.trigger("enable")},n.prototype.locked=function(t,o){return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(i.locked=o||!1,e.attr("data-gs-locked",i.locked?"yes":null))}),this},n.prototype.maxHeight=function(t,o){return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(isNaN(o)||(i.maxHeight=o||!1,e.attr("data-gs-max-height",o)))}),this},n.prototype.minHeight=function(t,o){return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(isNaN(o)||(i.minHeight=o||!1,e.attr("data-gs-min-height",o)))}),this},n.prototype.maxWidth=function(t,o){return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(isNaN(o)||(i.maxWidth=o||!1,e.attr("data-gs-max-width",o)))}),this},n.prototype.minWidth=function(t,o){return(t=m(t)).each(function(t,e){var i=(e=m(e)).data("_gridstack_node");i&&(isNaN(o)||(i.minWidth=o||!1,e.attr("data-gs-min-width",o)))}),this},n.prototype._updateElement=function(t,e){var i=(t=m(t).first()).data("_gridstack_node");if(i){var o=this;o.engine.cleanNodes(),o.engine.beginUpdate(i),e.call(this,t,i),o._updateContainerHeight(),o._triggerChangeEvent(),o.engine.endUpdate()}},n.prototype.resize=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.width,o=null!=o?o:e.height,this.engine.moveNode(e,e.x,e.y,i,o)})},n.prototype.move=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,this.engine.moveNode(e,i,o,e.width,e.height)})},n.prototype.update=function(t,i,o,n,s){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,n=null!=n?n:e.width,s=null!=s?s:e.height,this.engine.moveNode(e,i,o,n,s)})},n.prototype.compact=function(){if(0!==this.engine.nodes.length){this.batchUpdate(),this.engine._sortNodes();var t=this.engine.nodes;this.engine.nodes=[],t.forEach(function(t){t.noMove||t.locked||(t.autoPosition=!0),this.engine.addNode(t,!1),t._dirty=!0},this),this.commit()}},n.prototype.verticalMargin=function(t,e){if(void 0===t)return this.opts.verticalMargin;var i=v.parseHeight(t);this.opts.verticalMarginUnit===i.unit&&this.opts.maxRow===i.height||(this.opts.verticalMarginUnit=i.unit,this.opts.verticalMargin=i.height,e||this._updateStyles())},n.prototype.cellHeight=function(t,e){if(void 0===t){if(this.opts.cellHeight&&"auto"!==this.opts.cellHeight)return this.opts.cellHeight;var i=this.$el.children("."+this.opts.itemClass).first(),o=i.attr("data-gs-height"),n=this.opts.verticalMargin;return Math.round((i.outerHeight()-(o-1)*n)/o)}var s=v.parseHeight(t);this.opts.cellHeightUnit===s.unit&&this.opts.cellHeight===s.height||(this.opts.cellHeightUnit=s.unit,this.opts.cellHeight=s.height,e||this._updateStyles())},n.prototype.cellWidth=function(){return Math.round(this.$el.outerWidth()/this.opts.column)},n.prototype.getCellFromPixel=function(t,e){var i=void 0!==e&&e?this.$el.offset():this.$el.position(),o=t.left-i.left,n=t.top-i.top,s=Math.floor(this.$el.width()/this.opts.column),a=Math.floor(this.$el.height()/parseInt(this.$el.attr("data-gs-current-row")));return{x:Math.floor(o/s),y:Math.floor(n/a)}},n.prototype.batchUpdate=function(){this.engine.batchUpdate()},n.prototype.commit=function(){this.engine.commit(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()},n.prototype.isAreaEmpty=function(t,e,i,o){return this.engine.isAreaEmpty(t,e,i,o)},n.prototype.setStatic=function(t){this.opts.staticGrid=!0===t,this.enableMove(!t),this.enableResize(!t),this._setStaticClass()},n.prototype._setStaticClass=function(){var t="grid-stack-static";!0===this.opts.staticGrid?this.$el.addClass(t):this.$el.removeClass(t)},y.prototype._layoutsNodesChange=function(t){this._layouts&&!this._ignoreLayoutsNodeChange&&this._layouts.forEach(function(o,n){o&&n!==this.column&&(n<this.column?this._layouts[n]=void 0:t.forEach(function(e){var t=o.find(function(t){return t._id===e._id});if(t){var i=n/this.column;e.y!==e._origY&&(t.y+=e.y-e._origY),e.x!==e._origX&&(t.x=Math.round(e.x*i)),e.width!==e._origW&&(t.width=Math.round(e.width*i))}},this))},this)},y.prototype._updateNodeWidths=function(e,i,o){if(this.nodes.length&&e!==i){var n=[this.nodes.length];if(this.nodes.forEach(function(t,e){n[e]={x:t.x,y:t.y,width:t.width,_id:t._id}}),this._layouts=this._layouts||[],this._layouts[e]=n,1===i&&o&&o.length){var s=0;o.forEach(function(t){t.x=0,t.width=1,t.y=Math.max(t.y,s),s=t.y+t.height})}else o=v.sort(this.nodes,-1,e);var t=this._layouts[i]||[],a=this._layouts.length-1;0===t.length&&e<i&&i<a&&(t=this._layouts[a]||[]).length&&(e=a,t.forEach(function(e){var t=o.findIndex(function(t){return t&&t._id===e._id});-1!==t&&(o[t].x=e.x,o[t].y=e.y,o[t].width=e.width)}),t=[]);var r=[];t.forEach(function(e){var t=o.findIndex(function(t){return t&&t._id===e._id});-1!==t&&(o[t].x=e.x,o[t].y=e.y,o[t].width=e.width,r.push(o[t]),o[t]=null)});var d=i/e;o.forEach(function(t){t&&(t.x=1===i?0:Math.round(t.x*d),t.width=1!==i&&1!==e&&Math.round(t.width*d)||1,r.push(t))}),r=v.sort(r,-1,i),this._ignoreLayoutsNodeChange=!0,this.batchUpdate(),this.nodes=[],r.forEach(function(t){this.addNode(t,!1),t._dirty=!0},this),this.commit(),delete this._ignoreLayoutsNodeChange}},y.prototype._saveInitial=function(){this.nodes.forEach(function(t){t._origX=t.x,t._origY=t.y,t._origW=t.width,t._origH=t.height,delete t._dirty})},n.prototype.column=function(t,e){if(void 0===t)return this.opts.column;if(this.opts.column!==t){var o,i=this.opts.column;if(1===t?this._prevColumn=i:delete this._prevColumn,this.$el.removeClass("grid-stack-"+i),this.$el.addClass("grid-stack-"+t),this.opts.column=this.engine.column=t,!0!==e)this.opts.oneColumnModeDomSort&&1===t&&(o=[],this.$el.children("."+this.opts.itemClass).each(function(t,e){var i=m(e).data("_gridstack_node");i&&o.push(i)}),o.length||(o=void 0)),this.engine._updateNodeWidths(i,t,o),this.engine._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this.engine._ignoreLayoutsNodeChange}},n.prototype.float=function(t){if(void 0===t)return this.opts.float||!1;this.opts.float!==t&&(this.opts.float=this.engine.float=t||!1,t||(this.engine._packNodes(),this.engine._notify(),this._triggerChangeEvent()))},n.prototype.getRow=function(){return this.engine.getRow()},n.prototype.on=function(t,e){-1===t.indexOf(" ")?"change"===t||"added"===t||"removed"===t?(this._gsEventHandler=this._gsEventHandler||{},this._gsEventHandler[t]=function(t){e(t,t.detail)},this.el.addEventListener(t,this._gsEventHandler[t])):this.$el.on(t,e):t.split(" ").forEach(function(t){this.on(t,e)},this)},n.prototype.off=function(t){-1===t.indexOf(" ")?"change"===t||"added"===t||"removed"===t?this._gsEventHandler&&this._gsEventHandler[t]&&(this.el.removeEventListener(t,this._gsEventHandler[t]),delete this._gsEventHandler[t]):this.$el.off(t):t.split(" ").forEach(function(t){this.off(t,callback)},this)},n.prototype.setGridWidth=e(n.prototype.column,"setGridWidth","column","v0.5.3"),n.prototype.setColumn=e(n.prototype.column,"setColumn","column","v0.6.4"),y.prototype.getGridHeight=e(y.prototype.getRow,"getGridHeight","getRow","v1.0.0"),t.GridStack=n,t.GridStack.Utils=v,t.GridStack.Engine=y,t.GridStack.DragDropPlugin=_,n.init=function(t,e){var i=m(e=e||".grid-stack").get(0);if(i)return i.gridstack||(i.gridstack=new n(i,v.clone(t))),i.gridstack},n.initAll=function(i,t){var o=[];return m(t=t||".grid-stack").each(function(t,e){e.gridstack||(e.gridstack=new n(e,v.clone(i))),o.push(e.gridstack)}),o},t.GridStack});
//# sourceMappingURL=gridstack.min.map