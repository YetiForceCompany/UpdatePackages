'use strict';

Settings_Vtiger_List_Js('Settings_AutomaticAssignment_List_Js',{changeRecordState:function changeRecordState(recordId,state){var aDeferred=jQuery.Deferred(),message=app.vtranslate('JS_STATE_CONFIRMATION');return Vtiger_Helper_Js.showConfirmationBox({message:message}).done(function(){app.saveAjax('save',{active:state},{record:recordId}).done(function(){var listInstance=Settings_AutomaticAssignment_List_Js.getInstance();listInstance.getListViewRecords();});}).fail(function(error,err){app.errorLog(error,err);}),aDeferred.promise()}},{container:!1,registerFilterChangeEvent:function registerFilterChangeEvent(){var thisInstance=this;jQuery('#moduleFilter').on('change',function(e){jQuery('#pageNumber').val('1'),jQuery('#pageToJump').val('1'),jQuery('#orderBy').val(''),jQuery('#sortOrder').val('');var params={module:app.getModuleName(),parent:app.getParentModuleName(),sourceModule:jQuery(e.currentTarget).val()};//Make the select all count as empty
//Make total number of pages as empty
jQuery('#recordsCount').val(''),jQuery('#totalPageCount').text(''),thisInstance.getListViewRecords(params).done(function(){thisInstance.updatePagination();});});},getContainer:function getContainer(){return !1==this.container&&(this.container=jQuery('div.contentsDiv')),this.container},registerModalEvents:function registerModalEvents(data,url){var form=data.find('form'),submitButton=data.find('.submitButton');data.find('[name="tabid"]').on('change',function(e){var progress=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}}),element=jQuery(e.currentTarget),getFieldsUrl=url+'&tabid='+element.val();AppConnector.request(getFieldsUrl).done(function(fields){data.find('.fieldList').html(fields),App.Fields.Picklist.showSelect2ElementView(data.find('.fieldList select')),submitButton.removeClass('d-none'),progress.progressIndicator({mode:'hide'});}).fail(function(textStatus,errorThrown){progress.progressIndicator({mode:'hide'}),app.errorLog(textStatus,errorThrown);});}),form.on('submit',function(e){e.preventDefault();var params=form.serializeFormData();app.saveAjax('save',params).done(function(response){var id=response.result;if(id){var url=form.attr('action');url=url+'&record='+id,window.location.href=url;}});});},registerEvents:function registerEvents(){var thisInstance=this;this._super(),this.registerFilterChangeEvent(),this.getContainer().find('.addRecord').on('click',function(e){var button=jQuery(e.currentTarget),url=button.data('url');app.showModalWindow(null,url,function(data){thisInstance.registerModalEvents(data,url);});});}});
//# sourceMappingURL=List.min.js.map
