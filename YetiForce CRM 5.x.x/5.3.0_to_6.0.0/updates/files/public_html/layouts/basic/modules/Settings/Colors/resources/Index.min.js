'use strict';

Settings_Vtiger_Index_Js('Settings_Colors_Index_Js',{},{/**
		 * Var to store colors container
		 */container:!1,/**
		 * Function to get the colors container
		 */getContainer:function getContainer(){return !1==this.container&&(this.container=jQuery('.js-colors-container')),this.container},registerEvents:function registerEvents(){this.registerModuleTabEvent(),this.registerModuleChangeEvent(),this.registerModulePickListChangeEvent(),this.initEvents();},initEvents:function initEvents(){var thisInstance=this,container=$('.UserColors');container.find('.updateUserColor').on('click',function(e){thisInstance.updateUserColor(e,thisInstance);}),container.find('.generateUserColor').on('click',this.generateUserColor),container.find('.removeUserColor').on('click',this.removeUserColor),container.find('.updateGroupColor').on('click',function(e){thisInstance.updateGroupColor(e,thisInstance);}),container.find('.generateGroupColor').on('click',this.generateGroupColor),container.find('.removeGroupColor').on('click',this.removeGroupColor),container.find('.updateModuleColor').on('click',function(e){thisInstance.updateModuleColor(e,thisInstance);}),container.find('.generateModuleColor').on('click',this.generateModuleColor),container.find('.removeModuleColor').on('click',this.removeModuleColor),container.find('.activeModuleColor').on('click',this.activeModuleColor),container.find('.addPicklistColorColumn').on('click',this.addPicklistColorColumn),container.find('.updatePicklistValueColor').on('click',function(e){thisInstance.updatePicklistValueColor(e,thisInstance);}),container.find('.generatePicklistValueColor').on('click',this.generatePicklistValueColor),container.find('.removePicklistValueColor').on('click',this.removePicklistValueColor),container.find('.js-generate-color').on('click',this.generateFieldColor),container.find('.js-remove-color').on('click',this.removeFieldColor),container.find('.js-update-color').on('click',function(e){thisInstance.updateFieldColor(e);});},registerColorPicker:function registerColorPicker(container,color){return window.ColorPicker.mount({el:container.find('.js-color-picker')[0],currentColor:color})},updateColorModal:function updateColorModal(colorPreview,request){App.Fields.Colors.showPicker({color:colorPreview.data('color'),bgToUpdate:colorPreview,cb:function cb(color){var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});request(color).then(function(data){app.showNotify({text:data.result.message,type:'success'}),colorPreview.data('color',color),progress.progressIndicator({mode:'hide'});});}});},updateUserColor:function updateUserColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewUser'+target.data('record'));this.updateColorModal(colorPreview,function request(color){return new Promise(function(resolve){AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateUserColor',color:color,record:target.data('record')}).done(function(data){resolve(data);});})});},generateUserColor:function generateUserColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewUser'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateUserColor',record:target.data('record')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),app.showNotify({text:data.result.message,type:'success'});});},removeUserColor:function removeUserColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewUser'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeUserColor',record:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),app.showNotify({text:data.result.message,type:'success'});});},updateGroupColor:function updateGroupColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewGroup'+target.data('record'));this.updateColorModal(colorPreview,function request(color){return new Promise(function(resolve){AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateGroupColor',color:color,record:target.data('record')}).done(function(data){resolve(data);});})});},generateGroupColor:function generateGroupColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewGroup'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateGroupColor',record:target.data('record')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),app.showNotify({text:data.result.message,type:'success'});});},removeGroupColor:function removeGroupColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewGroup'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeGroupColor',record:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),app.showNotify({text:data.result.message,type:'success'});});},updateModuleColor:function updateModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));this.updateColorModal(colorPreview,function request(color){return new Promise(function(resolve){AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateModuleColor',color:color,record:target.data('record')}).done(function(data){resolve(data);});})});},generateModuleColor:function generateModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateModuleColor',record:target.data('record')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),app.showNotify({text:data.result.message,type:'success'});});},removeModuleColor:function removeModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeModuleColor',record:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),app.showNotify({text:data.result.message,type:'success'});});},activeModuleColor:function activeModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'activeModuleColor',status:target.is(':checked'),color:colorPreview.data('color'),record:target.data('record')}).done(function(data){app.showNotify({text:data.result.message,type:'success'}),colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color);});},addPicklistColorColumn:function addPicklistColorColumn(e){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget);AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'addPicklistColorColumn',picklistModule:target.data('fieldmodule'),fieldId:target.data('fieldid')}).done(function(data){app.showNotify({text:data.result.message,type:'success'}),container.find('.modulePickList').trigger('change');});},updatePicklistValueColor:function updatePicklistValueColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewPicklistValue'+target.data('fieldvalueid'));this.updateColorModal(colorPreview,function request(color){return new Promise(function(resolve){AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updatePicklistValueColor',color:color,fieldId:target.data('fieldid'),fieldValueId:target.data('fieldvalueid')}).done(function(data){resolve(data);});})});},generatePicklistValueColor:function generatePicklistValueColor(e){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget),colorPreview=container.find('#calendarColorPreviewPicklistValue'+target.data('fieldvalueid')),progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updatePicklistValueColor',fieldId:target.data('fieldid'),fieldValueId:target.data('fieldvalueid')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),app.showNotify({text:data.result.message,type:'success'});}),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();},removePicklistValueColor:function removePicklistValueColor(e){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget),colorPreview=container.find('#calendarColorPreviewPicklistValue'+target.data('fieldvalueid')),progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removePicklistValueColor',fieldId:target.data('fieldid'),fieldValueId:target.data('fieldvalueid')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),app.showNotify({text:data.result.message,type:'success'});}),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();},registerModuleTabEvent:function registerModuleTabEvent(){var self=this,container=self.getContainer();container.find('.js-change-tab').on('click',function(e){var clickedTab=$(e.currentTarget),mode=clickedTab.attr('data-mode');if(mode){var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),view:'IndexAjax',mode:mode}).done(function(data){var activeTabPanelHref=clickedTab.attr('href'),activeTabPanel=container.find(activeTabPanelHref+' .js-color-contents');activeTabPanel.html(data),progressIndicatorElement.progressIndicator({mode:'hide'}),activeTabPanel.find('.modulePickList').trigger('change'),self.registerModuleChangeEvent(),App.Fields.Picklist.changeSelectElementView(container);});}});},registerModuleChangeEvent:function registerModuleChangeEvent(){var self=this,container=self.getContainer();container.find('.js-selected-module').on('change',function(e){var selectedModule=jQuery(e.currentTarget).val(),activeTab=container.find('.js-change-tab.active');if(0>=selectedModule.length)return activeTab.trigger('click'),!1;var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),source_module:selectedModule,view:'IndexAjax',mode:activeTab.attr('data-mode')}).done(function(data){container.find(activeTab.attr('href')+' .js-color-contents').html(data),progressIndicatorElement.progressIndicator({mode:'hide'}),App.Fields.Picklist.changeSelectElementView(container),self.registerModulePickListChangeEvent(),self.registerModuleChangeEvent(),self.registerModulePickListChangeEvent(),container.find('.js-remove-color').on('click',function(e){self.removeFieldColor(e,self);}),container.find('.js-generate-color').on('click',function(e){self.generateFieldColor(e);}),container.find('.js-update-color').on('click',function(e){self.updateFieldColor(e);}),jQuery('#modulePickList').trigger('change');});});},registerModulePickListChangeEvent:function registerModulePickListChangeEvent(){var thisInstance=this,container=jQuery('.picklistViewContentDiv');container.find('.modulePickList').on('change',function(e){var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),source_module:jQuery('.js-selected-module').val(),view:'IndexAjax',mode:'getPickListView',fieldId:jQuery(e.currentTarget).val()}).done(function(data){container.html(data),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesPicklistSelectContainer')),thisInstance.registerModuleChangeEvent(),thisInstance.registerModulePickListChangeEvent(),$('.UserColors .addPicklistColorColumn').on('click',thisInstance.addPicklistColorColumn),$('.UserColors .updatePicklistValueColor').on('click',function(e){thisInstance.updatePicklistValueColor(e,thisInstance);}),$('.UserColors .generatePicklistValueColor').on('click',thisInstance.generatePicklistValueColor),$('.UserColors .removePicklistValueColor').on('click',thisInstance.removePicklistValueColor),progressIndicatorElement.progressIndicator({mode:'hide'});});});},generateFieldColor:function generateFieldColor(e){var fieldId=$(e.currentTarget).attr('data-field-id'),colorPreview=$('.js-color-preview[data-field-id="'+fieldId+'"]');AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateFieldColor',fieldId:fieldId}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),app.showNotify({text:data.result.message,type:'success'});});},updateFieldColor:function updateFieldColor(e){var fieldId=$(e.currentTarget).attr('data-field-id'),colorPreview=$('.js-color-preview[data-field-id="'+fieldId+'"]');this.updateColorModal(colorPreview,function request(color){return new Promise(function(resolve){AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateFieldColor',color:color,fieldId:fieldId}).done(function(data){resolve(data);});})});},removeFieldColor:function removeFieldColor(e){var fieldId=$(e.currentTarget).attr('data-field-id'),colorPreview=$('.js-color-preview[data-field-id="'+fieldId+'"]');AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeFieldColor',fieldId:fieldId}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),app.showNotify({text:data.result.message,type:'success'});});}});
//# sourceMappingURL=Index.min.js.map
