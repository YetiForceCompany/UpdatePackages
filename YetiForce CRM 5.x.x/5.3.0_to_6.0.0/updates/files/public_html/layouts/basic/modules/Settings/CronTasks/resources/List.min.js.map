{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce Sp. z o.o.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\n\t'Settings_CronTasks_List_Js',\n\t{\n\t\ttriggerEditEvent: function (editUrl) {\n\t\t\tAppConnector.request(editUrl).done(function (data) {\n\t\t\t\tapp.showModalWindow(data);\n\t\t\t\tjQuery('#cronJobSaveAjax').validationEngine(app.validationEngineOptions);\n\t\t\t\tvar listViewInstance = Settings_CronTasks_List_Js.getInstance();\n\t\t\t\tlistViewInstance.registerSaveEvent();\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\tgetListViewRecords: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tview: 'List'\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tjQuery('#listViewContents').html(data);\n\t\t\t\tthisInstance.registerSortableEvent();\n\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\tmode: 'hide'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tregisterSaveEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tjQuery('#cronJobSaveAjax').on('submit', function (e) {\n\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\tvar validationResult = form.validationEngine('validate');\n\t\t\t\tif (validationResult == true) {\n\t\t\t\t\tvar timeFormat = jQuery('#time_format').val();\n\t\t\t\t\tvar frequencyElement = jQuery('#frequencyValue');\n\t\t\t\t\tif (timeFormat == 'hours') {\n\t\t\t\t\t\tvar frequencyValue = frequencyElement.val() * 60 * 60;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrequencyValue = frequencyElement.val() * 60;\n\t\t\t\t\t}\n\t\t\t\t\tvar message = app.vtranslate('JS_VALUE_SHOULD_NOT_BE_LESS_THAN');\n\t\t\t\t\tvar minimumFrequency = jQuery('#minimumFrequency').val();\n\t\t\t\t\tvar minutes = app.vtranslate('JS_MINUTES');\n\t\t\t\t\tif (frequencyValue < minimumFrequency) {\n\t\t\t\t\t\tfrequencyElement.validationEngine(\n\t\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\t\tmessage + ' ' + minimumFrequency / 60 + ' ' + minutes,\n\t\t\t\t\t\t\t'error'\n\t\t\t\t\t\t);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjQuery('#frequency').val(frequencyValue);\n\t\t\t\t\t}\n\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tif (typeof data.result !== 'undefined' && data.result[0] == true) {\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t});\n\t\t},\n\n\t\tregisterSortableEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar sequenceList = {};\n\t\t\tvar tbody = jQuery('tbody', jQuery('.listViewEntriesTable'));\n\t\t\ttbody.sortable({\n\t\t\t\thelper: function (e, ui) {\n\t\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t\t//look like distrubed\n\t\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\t\telement = jQuery(element);\n\t\t\t\t\t\telement.width(element.width());\n\t\t\t\t\t});\n\t\t\t\t\treturn ui;\n\t\t\t\t},\n\t\t\t\tcontainment: tbody,\n\t\t\t\trevert: true,\n\t\t\t\tupdate: function (e, ui) {\n\t\t\t\t\tjQuery('tbody tr').each(function (i) {\n\t\t\t\t\t\tsequenceList[++i] = jQuery(this).data('id');\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\t\taction: 'UpdateSequence'\n\t\t\t\t\t};\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Register events\n\t\t * @returns {undefined}\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis.registerSortableEvent();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_List_Js","triggerEditEvent","editUrl","AppConnector","request","done","data","app","showModalWindow","jQuery","validationEngine","validationEngineOptions","Settings_CronTasks_List_Js","getInstance","listViewInstance","registerSaveEvent","getListViewRecords","params","module","getModuleName","parent","getParentModuleName","view","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","html","thisInstance","registerSortableEvent","mode","on","e","currentTarget","validationResult","form","val","frequencyElement","vtranslate","minimumFrequency","minutes","frequencyValue","message","preventDefault","serializeFormData","result","hideModalWindow","sequenceList","tbody","sortable","helper","ui","children","each","index","element","width","containment","revert","update","i","sequencesList","JSON","stringify","action","registerEvents"],"mappings":"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"}