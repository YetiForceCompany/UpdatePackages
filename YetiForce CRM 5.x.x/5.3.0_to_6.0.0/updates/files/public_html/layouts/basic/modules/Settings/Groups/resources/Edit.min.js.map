{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_Edit_Js(\n\t'Settings_Groups_Edit_Js',\n\t{},\n\t{\n\t\tmemberSelectElement: false,\n\n\t\tgetMemberSelectElement: function () {\n\t\t\tif (this.memberSelectElement == false) {\n\t\t\t\tthis.memberSelectElement = jQuery('#memberList');\n\t\t\t}\n\t\t\treturn this.memberSelectElement;\n\t\t},\n\t\t/**\n\t\t * Function to register form for validation\n\t\t */\n\t\tregisterFormForValidation: function () {\n\t\t\tvar editViewForm = this.getForm();\n\t\t\teditViewForm.validationEngine(app.getvalidationEngineOptions(true));\n\t\t},\n\n\t\t/**\n\t\t * Function to register the submit event of form\n\t\t */\n\t\tregisterSubmitEvent: function () {\n\t\t\tvar thisInstance = this;\n\t\t\tvar form = jQuery('#EditView');\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tif (form.data('submit') == 'true' && form.data('performCheck') == 'true') {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tif (form.data('jqv').InvalidFields.length <= 0) {\n\t\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.checkDuplicateName({\n\t\t\t\t\t\t\t\tgroupname: formData.groupname,\n\t\t\t\t\t\t\t\trecord: formData.record\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function (data) {\n\t\t\t\t\t\t\t\tform.data('submit', 'true');\n\t\t\t\t\t\t\t\tform.data('performCheck', 'true');\n\t\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function (data, err) {\n\t\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\t\tparams['text'] = data['message'];\n\t\t\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/*\n\t\t * Function to check Duplication of Group Names\n\t\t * returns boolean true or false\n\t\t */\n\t\tcheckDuplicateName: function (details) {\n\t\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'EditAjax',\n\t\t\t\tmode: 'checkDuplicate',\n\t\t\t\tgroupname: details.groupname,\n\t\t\t\trecord: details.record\n\t\t\t};\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tvar result = response['success'];\n\t\t\t\t\tif (result == true) {\n\t\t\t\t\t\taDeferred.reject(response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taDeferred.resolve(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (error, err) {\n\t\t\t\t\taDeferred.reject(error, err);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Register events for section \"modules\"\n\t\t */\n\t\tregisterButtonsModule: function () {\n\t\t\tconst editViewForm = this.getForm();\n\t\t\teditViewForm.find('.js-modules-select-all, .js-modules-deselect-all').on('click', function (e) {\n\t\t\t\t$('#modulesList option').prop('selected', $(this).hasClass('js-modules-select-all')).parent().trigger('change');\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will handle the registrations for the elements\n\t\t */\n\t\tregisterEvents: function () {\n\t\t\tthis._super();\n\t\t\tthis.registerSubmitEvent();\n\t\t\tthis.registerButtonsModule();\n\t\t}\n\t}\n);\n"],"names":["Settings_Vtiger_Edit_Js","memberSelectElement","getMemberSelectElement","jQuery","registerFormForValidation","getForm","editViewForm","validationEngine","app","getvalidationEngineOptions","registerSubmitEvent","form","on","e","data","InvalidFields","length","serializeFormData","thisInstance","checkDuplicateName","groupname","formData","record","done","submit","fail","params","Settings_Vtiger_Index_Js","showMessage","removeData","formAlignmentAfterValidation","preventDefault","details","Deferred","module","getModuleName","parent","getParentModuleName","action","mode","request","result","response","aDeferred","reject","resolve","error","err","promise","registerButtonsModule","find","$","prop","hasClass","trigger","registerEvents","_super"],"mappings":";;AAUAA,wBACC,yBADD,CAEC,EAFD,CAGC,CACCC,sBADD,CAGCC,uBAAwB,iCAAY,CAInC,OAHI,SAAKD,mBAGT,GAFC,KAAKA,mBAAL,CAA2BE,OAAO,aAAP,CAE5B,EAAO,KAAKF,mBACZ,CARF;;KAYCG,0BAA2B,oCAAY,CACtC,iBAAmB,KAAKC,OAAL,EAAnB,CACAC,aAAaC,gBAAb,CAA8BC,IAAIC,0BAAJ,IAA9B,EACA,CAfF;;KAoBCC,oBAAqB,8BAAY,kBACb,IADa,CAE5BC,KAAOR,OAAO,WAAP,CAFqB,CAGhCQ,KAAKC,EAAL,CAAQ,QAAR,CAAkB,SAAUC,CAAV,CAAa,CAC9B,GAA2B,MAAvB,OAAKC,IAAL,CAAU,QAAV,GAA8D,MAA7B,OAAKA,IAAL,CAAU,cAAV,CAArC,CACC,UAEA,GAA6C,CAAzC,OAAKA,IAAL,CAAU,KAAV,EAAiBC,aAAjB,CAA+BC,MAAnC,CAAgD,CAC/C,aAAeL,KAAKM,iBAAL,EAAf,CACAC,aACEC,kBADF,CACqB,CACnBC,UAAWC,SAASD,SADD,CAEnBE,OAAQD,SAASC,MAFE,CADrB,EAKEC,IALF,CAKO,UAAgB,CACrBZ,KAAKG,IAAL,CAAU,QAAV,CAAoB,MAApB,CADqB,CAErBH,KAAKG,IAAL,CAAU,cAAV,CAA0B,MAA1B,CAFqB,CAGrBH,KAAKa,MAAL,GACA,CATF,EAUEC,IAVF,CAUO,SAAUX,IAAV,CAAqB,CAC1B,WAAa,EAAb,CAIA,mBAHiBA,YAGjB,CAFAY,YAAiB,OAEjB,CADAC,yBAAyBC,WAAzB,CAAqCF,MAArC,CACA,GACA,CAhBF,EAiBA,CAnBD;AAqBCf,KAAKkB,UAAL,CAAgB,QAAhB,CArBD,CAsBCrB,IAAIsB,4BAAJ,CAAiCnB,IAAjC,CAtBD,CAwBAE,EAAEkB,cAAF,GAED,CA9BD,EA+BA,CAtDF;;;KA4DCZ,mBAAoB,4BAAUa,OAAV,CAAmB,eACtB7B,OAAO8B,QAAP,EADsB,CAGlCP,OAAS,CACZQ,OAAQ1B,IAAI2B,aAAJ,EADI,CAEZC,OAAQ5B,IAAI6B,mBAAJ,EAFI,CAGZC,OAAQ,UAHI,CAIZC,KAAM,gBAJM,CAKZnB,UAAWY,QAAQZ,SALP,CAMZE,OAAQU,QAAQV,MANJ,CAHyB,CAyBtC,oBAbakB,OAAb,CAAqBd,MAArB,EACEH,IADF,CACO,SAAUT,IAAV,CAAgB,cACNA,WADM,CAEjB2B,OAASC,gBAFQ,CAGjB,UAHiB,CAIpBC,UAAUC,MAAV,CAAiBF,QAAjB,CAJoB,CAMpBC,UAAUE,OAAV,CAAkBH,QAAlB,EAED,CATF,EAUEjB,IAVF,CAUO,SAAUqB,KAAV,CAAiBC,GAAjB,CAAsB,CAC3BJ,UAAUC,MAAV,CAAiBE,KAAjB,CAAwBC,GAAxB,EACA,CAZF,CAaA,CAAOJ,UAAUK,OAAV,EACP,CAtFF;;KA0FCC,sBAAuB,gCAAY,CAClC,iBAAqB,KAAK5C,OAAL,EAArB,CACAC,aAAa4C,IAAb,CAAkB,kDAAlB,EAAsEtC,EAAtE,CAAyE,OAAzE,CAAkF,UAAa,CAC9FuC,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,UAA9B,CAA0CD,EAAE,IAAF,EAAQE,QAAR,CAAiB,uBAAjB,CAA1C,EAAqFjB,MAArF,GAA8FkB,OAA9F,CAAsG,QAAtG,EACA,CAFD,EAGA,CA/FF;;KAmGCC,eAAgB,yBAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAK9C,mBAAL,EAF2B,CAG3B,KAAKuC,qBAAL,GACA,CAvGF,CAHD"}