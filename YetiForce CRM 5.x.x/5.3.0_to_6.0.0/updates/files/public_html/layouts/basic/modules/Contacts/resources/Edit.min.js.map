{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\n\t'Contacts_Edit_Js',\n\t{},\n\t{\n\t\t/**\n\t\t * Function to check for Portal User\n\t\t */\n\t\tcheckForPortalUser: function (form) {\n\t\t\tvar element = jQuery('[name=\"portal\"]', form);\n\t\t\tvar response = element.is(':checked');\n\t\t\tvar primaryEmailField = jQuery('[name=\"email\"]');\n\t\t\tvar primaryEmailValue = primaryEmailField.val();\n\t\t\tif (response) {\n\t\t\t\tif (primaryEmailField.length == 0) {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_PRIMARY_EMAIL_FIELD_DOES_NOT_EXISTS'),\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (primaryEmailValue == '') {\n\t\t\t\t\tapp.showNotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_PLEASE_ENTER_PRIMARY_EMAIL_VALUE_TO_ENABLE_PORTAL_USER'),\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t/**\n\t\t * Function to register recordpresave event\n\t\t */\n\t\tregisterRecordPreSaveEvent: function (form) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof form === 'undefined') {\n\t\t\t\tform = this.getForm();\n\t\t\t}\n\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\t\tvar result = thisInstance.checkForPortalUser(form);\n\t\t\t\tif (!result) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tregisterBasicEvents: function (container) {\n\t\t\tthis._super(container);\n\t\t\tthis.registerRecordPreSaveEvent(container);\n\t\t}\n\t}\n);\n"],"names":["Vtiger_Edit_Js","checkForPortalUser","form","jQuery","response","element","is","primaryEmailField","primaryEmailValue","val","length","showNotify","text","app","vtranslate","type","registerRecordPreSaveEvent","getForm","on","recordPreSave","e","thisInstance","result","preventDefault","registerBasicEvents","container","_super"],"mappings":";;AAUAA,eACC,kBADD,CAEC,EAFD,CAGC;;KAICC,mBAAoB,4BAAUC,IAAV,CAAgB,aACrBC,OAAO,iBAAP,CAA0BD,IAA1B,CADqB,CAE/BE,SAAWC,QAAQC,EAAR,CAAW,UAAX,CAFoB,CAG/BC,kBAAoBJ,OAAO,gBAAP,CAHW,CAI/BK,kBAAoBD,kBAAkBE,GAAlB,EAJW,CAKnC,GAAIL,QAAJ,CAAc,CACb,GAAgC,CAA5B,oBAAkBM,MAAtB,CAKC,WAJIC,UAAJ,CAAe,CACdC,KAAMC,IAAIC,UAAJ,CAAe,wCAAf,CADQ,CAEdC,KAAM,OAFQ,CAAf,CAIA,IAED,GAAyB,EAArB,mBAAJ,CAKC,WAJIJ,UAAJ,CAAe,CACdC,KAAMC,IAAIC,UAAJ,CAAe,2DAAf,CADQ,CAEdC,KAAM,MAFQ,CAAf,CAIA,GAED,CACD,SACA,CA1BF;;KA+BCC,2BAA4B,oCAAUd,IAAV,CAAgB,CAC3C,iBAAmB,IAAnB,CACoB,WAAhB,aAFuC,GAG1CA,KAAO,KAAKe,OAAL,EAHmC,EAM3Cf,KAAKgB,EAAL,CAAQlB,eAAemB,aAAvB,CAAsC,SAAUC,CAAV,CAAmB,CACxD,WAAaC,aAAapB,kBAAb,CAAgCC,IAAhC,CAAb,CACKoB,MAFmD,EAGvDF,EAAEG,cAAF,GAED,CALD,EAMA,CA3CF,CA6CCC,oBAAqB,6BAAUC,SAAV,CAAqB,CACzC,KAAKC,MAAL,CAAYD,SAAZ,CADyC,CAEzC,KAAKT,0BAAL,CAAgCS,SAAhC,EACA,CAhDF,CAHD"}